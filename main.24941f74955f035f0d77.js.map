{"version":3,"file":"main.24941f74955f035f0d77.js","mappings":"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","sources":["webpack://mytonwallet/webpack/runtime/chunk loaded","webpack://mytonwallet/webpack/runtime/load script","webpack://mytonwallet/./src/api/environment.ts","webpack://mytonwallet/./src/config.ts","webpack://mytonwallet/./src/util/arePropsShallowEqual.ts","webpack://mytonwallet/./src/util/debugOverlay.ts","webpack://mytonwallet/./src/util/signals.ts","webpack://mytonwallet/./src/lib/teact/teact.ts","webpack://mytonwallet/./src/lib/teact/dom-events.ts","webpack://mytonwallet/./src/lib/teact/teact-dom.ts","webpack://mytonwallet/./src/hooks/useForceUpdate.ts","webpack://mytonwallet/./src/hooks/useStateRef.ts","webpack://mytonwallet/./src/hooks/useLastCallback.ts","webpack://mytonwallet/./src/hooks/useHeavyAnimationCheck.ts","webpack://mytonwallet/./src/hooks/useUniqueId.ts","webpack://mytonwallet/./src/lib/teact/teactn.tsx","webpack://mytonwallet/./src/global/index.ts","webpack://mytonwallet/./src/global/types.ts","webpack://mytonwallet/./src/util/ledger/tab.ts","webpack://mytonwallet/./src/util/activeTabMonitor.ts","webpack://mytonwallet/./src/util/buildClassName.ts","webpack://mytonwallet/./src/util/windowSize.ts","webpack://mytonwallet/./src/hooks/useMediaQuery.ts","webpack://mytonwallet/./src/hooks/useDeviceScreen.ts","webpack://mytonwallet/./src/hooks/useFlag.ts","webpack://mytonwallet/./src/hooks/useEffectOnce.ts","webpack://mytonwallet/./src/hooks/usePrevious.ts","webpack://mytonwallet/./src/hooks/useSyncEffect.ts","webpack://mytonwallet/./src/hooks/useTimeout.ts","webpack://mytonwallet/./src/global/helpers/renderText.tsx","webpack://mytonwallet/./src/util/cacheApi.ts","webpack://mytonwallet/./src/util/withCache.ts","webpack://mytonwallet/./src/util/formatNumber.ts","webpack://mytonwallet/./src/util/langProvider.ts","webpack://mytonwallet/./src/hooks/useLang.ts","webpack://mytonwallet/./src/components/ui/Button.module.scss?78d5","webpack://mytonwallet/./src/components/ui/Button.tsx","webpack://mytonwallet/./src/components/AppInactive.module.scss?fa93","webpack://mytonwallet/./src/components/AppInactive.tsx","webpack://mytonwallet/./src/hooks/useCurrentOrPrev.ts","webpack://mytonwallet/./src/hooks/useScrolledState.ts","webpack://mytonwallet/./src/hooks/useShowTransition.ts","webpack://mytonwallet/./src/hooks/useMediaTransition.ts","webpack://mytonwallet/./src/components/ui/Emoji.module.scss?1c66","webpack://mytonwallet/./src/components/ui/Emoji.tsx","webpack://mytonwallet/./src/components/ui/Modal.module.scss?b689","webpack://mytonwallet/./src/components/ui/ModalHeader.tsx","webpack://mytonwallet/./src/components/settings/Settings.module.scss?98b7","webpack://mytonwallet/./src/components/settings/SettingsAbout.tsx","webpack://mytonwallet/./src/util/cssAnimationEndListeners.ts","webpack://mytonwallet/./src/util/forceReflow.ts","webpack://mytonwallet/./src/components/ui/Transition.tsx","webpack://mytonwallet/./src/components/ui/helpers/animatedAssets.ts","webpack://mytonwallet/./src/util/buildStyle.ts","webpack://mytonwallet/./src/lib/rlottie/RLottie.async.ts","webpack://mytonwallet/./src/hooks/useBackgroundMode.ts","webpack://mytonwallet/./src/hooks/useEffectWithPrevDeps.ts","webpack://mytonwallet/./src/hooks/usePriorityPlaybackCheck.ts","webpack://mytonwallet/./src/hooks/useSharedIntersectionObserver.ts","webpack://mytonwallet/./src/components/ui/AnimatedSticker.tsx","webpack://mytonwallet/./src/hooks/useThrottledCallback.ts","webpack://mytonwallet/./src/components/ui/AnimatedIcon.tsx","webpack://mytonwallet/./src/components/ui/AnimatedIconWithPreview.module.scss?9243","webpack://mytonwallet/./src/components/ui/AnimatedIconWithPreview.tsx","webpack://mytonwallet/./src/util/captureKeyboardListeners.ts","webpack://mytonwallet/./src/util/trapFocus.ts","webpack://mytonwallet/./src/components/ui/Portal.ts","webpack://mytonwallet/./src/components/ui/Modal.tsx","webpack://mytonwallet/./src/components/ui/SuggestionList.module.scss?e7a6","webpack://mytonwallet/./src/components/ui/SuggestionList.tsx","webpack://mytonwallet/./src/components/common/InputMnemonic.module.scss?8c11","webpack://mytonwallet/./src/components/common/InputMnemonic.tsx","webpack://mytonwallet/./src/components/auth/Auth.module.scss?dc00","webpack://mytonwallet/./src/components/auth/MnemonicCheck.tsx","webpack://mytonwallet/./src/components/auth/MnemonicList.tsx","webpack://mytonwallet/./src/components/ui/Checkbox.tsx","webpack://mytonwallet/./src/components/ui/Checkbox.module.scss?4964","webpack://mytonwallet/./src/components/auth/SafetyRules.tsx","webpack://mytonwallet/./src/components/auth/AuthCreateBackup.tsx","webpack://mytonwallet/./src/hooks/useFocusAfterAnimation.tsx","webpack://mytonwallet/./src/hooks/usePasswordValidation.ts","webpack://mytonwallet/./src/components/ui/Input.module.scss?4fb9","webpack://mytonwallet/./src/components/ui/Input.tsx","webpack://mytonwallet/./src/components/auth/AuthCreatePassword.tsx","webpack://mytonwallet/./src/components/auth/AuthCreatingWallet.tsx","webpack://mytonwallet/./src/components/auth/AuthImportMnemonic.tsx","webpack://mytonwallet/./src/hooks/useClipboardPaste.ts","webpack://mytonwallet/./src/components/auth/AuthStart.tsx","webpack://mytonwallet/./src/components/auth/Auth.tsx","webpack://mytonwallet/./src/global/helpers/index.ts","webpack://mytonwallet/./src/util/account.ts","webpack://mytonwallet/./src/lib/big.js/index.js","webpack://mytonwallet/./src/util/round.ts","webpack://mytonwallet/./src/global/selectors/index.ts","webpack://mytonwallet/./src/util/shortenAddress.ts","webpack://mytonwallet/./src/hooks/useModalTransitionKeys.ts","webpack://mytonwallet/./src/components/ledger/LedgerModal.module.scss?bcee","webpack://mytonwallet/./src/components/ledger/LedgerConfirmOperation.tsx","webpack://mytonwallet/./src/components/ledger/LedgerConnect.tsx","webpack://mytonwallet/./src/components/ui/PasswordForm.tsx","webpack://mytonwallet/./src/components/ui/PasswordForm.module.scss?0d24","webpack://mytonwallet/./src/components/dapps/Dapp.module.scss?bf14","webpack://mytonwallet/./src/components/dapps/DappInfo.tsx","webpack://mytonwallet/./src/components/dapps/DappConnectModal.tsx","webpack://mytonwallet/./src/components/dapps/DappLedgerWarning.tsx","webpack://mytonwallet/./src/components/ui/AmountWithFeeTextField.tsx","webpack://mytonwallet/./src/components/ui/AmountWithFeeTextField.module.scss?aa7f","webpack://mytonwallet/./src/util/clipboard.ts","webpack://mytonwallet/./src/components/main/modals/DeleteSavedAddressModal.module.scss?f4ba","webpack://mytonwallet/./src/components/main/modals/DeleteSavedAddressModal.tsx","webpack://mytonwallet/./src/components/ui/InteractiveTextField.module.scss?844c","webpack://mytonwallet/./src/components/ui/InteractiveTextField.tsx","webpack://mytonwallet/./src/components/dapps/DappTransaction.tsx","webpack://mytonwallet/./src/components/dapps/DappTransferInitial.tsx","webpack://mytonwallet/./src/components/dapps/DappTransactionModal.tsx","webpack://mytonwallet/./src/components/Dialogs.tsx","webpack://mytonwallet/./src/components/Dialogs.module.scss?f766","webpack://mytonwallet/./src/electron/types.ts","webpack://mytonwallet/./src/util/getBoundingClientReactAsync.ts","webpack://mytonwallet/./src/components/electron/UpdateApp.module.scss?0ba5","webpack://mytonwallet/./src/components/electron/UpdateApp.tsx","webpack://mytonwallet/./src/components/electron/ElectronHeader.module.scss?adc9","webpack://mytonwallet/./src/components/electron/ElectronHeader.tsx","webpack://mytonwallet/./src/hooks/useElectronDrag.ts","webpack://mytonwallet/./src/components/ledger/LedgerSelectWallets.tsx","webpack://mytonwallet/./src/components/ledger/LedgerModal.tsx","webpack://mytonwallet/./src/components/common/TransferResult.module.scss?a52a","webpack://mytonwallet/./src/components/common/TransferResult.tsx","webpack://mytonwallet/./src/components/ui/helpers/assetLogos.ts","webpack://mytonwallet/./src/components/ui/RichNumberInput.tsx","webpack://mytonwallet/./src/util/saveCaretPosition.ts","webpack://mytonwallet/./src/components/ui/RichNumberField.tsx","webpack://mytonwallet/./src/components/staking/Staking.module.scss?5f25","webpack://mytonwallet/./src/components/staking/StakingInitial.tsx","webpack://mytonwallet/./src/components/staking/StakeModal.tsx","webpack://mytonwallet/./src/hooks/useInterval.ts","webpack://mytonwallet/./src/util/dateFormat.ts","webpack://mytonwallet/./src/components/ui/Loading.module.scss?aee8","webpack://mytonwallet/./src/components/ui/Loading.tsx","webpack://mytonwallet/./src/components/staking/StakingProfitItem.tsx","webpack://mytonwallet/./src/components/staking/StakingProfileItem.module.scss?092e","webpack://mytonwallet/./src/components/staking/StakingInfoContent.tsx","webpack://mytonwallet/./src/hooks/useWindowSize.ts","webpack://mytonwallet/./src/hooks/useDebouncedCallback.ts","webpack://mytonwallet/./src/components/staking/StakingInfoModal.tsx","webpack://mytonwallet/./src/components/staking/UnstakeModal.tsx","webpack://mytonwallet/./src/components/ui/ModalTransitionContent.tsx","webpack://mytonwallet/./src/components/receive/ReceiveModal.module.scss?beea","webpack://mytonwallet/./src/components/receive/Content.tsx","webpack://mytonwallet/./src/util/captureEscKeyListener.ts","webpack://mytonwallet/./src/util/stopEvent.ts","webpack://mytonwallet/./src/components/ui/Menu.module.scss?ed87","webpack://mytonwallet/./src/components/ui/Menu.tsx","webpack://mytonwallet/./src/hooks/useVirtualBackdrop.ts","webpack://mytonwallet/./src/components/ui/DropDown.module.scss?de8c","webpack://mytonwallet/./src/components/ui/DropDown.tsx","webpack://mytonwallet/./src/components/receive/InvoiceModal.tsx","webpack://mytonwallet/./src/lib/qr-code-styling/constants/cornerDotTypes.ts","webpack://mytonwallet/./src/lib/qr-code-styling/constants/cornerSquareTypes.ts","webpack://mytonwallet/./src/lib/qr-code-styling/constants/dotTypes.ts","webpack://mytonwallet/./src/lib/qr-code-styling/constants/drawTypes.ts","webpack://mytonwallet/./src/lib/qr-code-styling/constants/errorCorrectionPercents.ts","webpack://mytonwallet/./src/lib/qr-code-styling/constants/qrTypes.ts","webpack://mytonwallet/./src/lib/qr-code-styling/tools/downloadURI.ts","webpack://mytonwallet/./src/lib/qr-code-styling/tools/merge.ts","webpack://mytonwallet/./src/lib/qr-code-styling/tools/sanitizeOptions.ts","webpack://mytonwallet/./src/lib/qr-code-styling/constants/gradientTypes.ts","webpack://mytonwallet/./src/lib/qr-code-styling/figures/cornerDot/canvas/QRCornerDot.ts","webpack://mytonwallet/./src/lib/qr-code-styling/figures/cornerSquare/canvas/QRCornerSquare.ts","webpack://mytonwallet/./src/lib/qr-code-styling/figures/dot/canvas/QRDot.ts","webpack://mytonwallet/./src/lib/qr-code-styling/tools/calculateImageSize.ts","webpack://mytonwallet/./src/lib/qr-code-styling/core/QRCanvas.ts","webpack://mytonwallet/./src/lib/qr-code-styling/core/QROptions.ts","webpack://mytonwallet/./src/lib/qr-code-styling/constants/errorCorrectionLevels.ts","webpack://mytonwallet/./src/lib/qr-code-styling/figures/cornerDot/svg/QRCornerDot.ts","webpack://mytonwallet/./src/lib/qr-code-styling/figures/cornerSquare/svg/QRCornerSquare.ts","webpack://mytonwallet/./src/lib/qr-code-styling/figures/dot/svg/QRDot.ts","webpack://mytonwallet/./src/lib/qr-code-styling/core/QRSVG.ts","webpack://mytonwallet/./src/lib/qr-code-styling/core/QRCodeStyling.ts","webpack://mytonwallet/./src/lib/qr-code-styling/tools/getMode.ts","webpack://mytonwallet/./src/lib/qr-code-styling/constants/modes.ts","webpack://mytonwallet/./src/lib/qr-code-styling/index.ts","webpack://mytonwallet/./src/components/receive/QrModal.tsx","webpack://mytonwallet/./src/components/receive/ReceiveModal.tsx","webpack://mytonwallet/./src/components/receive/ReceiveStatic.tsx","webpack://mytonwallet/./src/util/dns.ts","webpack://mytonwallet/./src/util/getIsAddressValid.ts","webpack://mytonwallet/./src/components/transfer/Transfer.module.scss?40cb","webpack://mytonwallet/./src/components/transfer/TransferInitial.tsx","webpack://mytonwallet/./src/components/main/sections/Actions/LandscapeActions.module.scss?b2d4","webpack://mytonwallet/./src/components/main/sections/Actions/LandscapeActions.tsx","webpack://mytonwallet/./src/components/main/sections/Actions/PortraitActions.module.scss?a3a8","webpack://mytonwallet/./src/components/main/sections/Actions/PortraitActions.tsx","webpack://mytonwallet/./src/util/calcChangeValue.ts","webpack://mytonwallet/./src/components/main/helpers/card_colors.ts","webpack://mytonwallet/./src/components/main/modals/AddAccountModal.module.scss?8d66","webpack://mytonwallet/./src/components/main/modals/AddAccountModal.tsx","webpack://mytonwallet/./src/components/main/sections/Card/AccountSelector.tsx","webpack://mytonwallet/./src/components/main/sections/Card/AccountSelector.module.scss?68a8","webpack://mytonwallet/./src/components/common/TokenPriceChart.tsx","webpack://mytonwallet/./src/components/main/sections/Card/Card.module.scss?fdf3","webpack://mytonwallet/./src/components/main/sections/Card/TokenCard.tsx","webpack://mytonwallet/./src/components/main/sections/Card/Card.tsx","webpack://mytonwallet/./src/util/animateHorizontalScroll.ts","webpack://mytonwallet/./src/components/ui/Tab.module.scss?eb4d","webpack://mytonwallet/./src/components/ui/Tab.tsx","webpack://mytonwallet/./src/components/ui/TabList.tsx","webpack://mytonwallet/./src/hooks/useHorizontalScroll.ts","webpack://mytonwallet/./src/components/ui/TabList.module.scss?8978","webpack://mytonwallet/./src/components/main/sections/Content/NewWalletGreeting.module.scss?1d3d","webpack://mytonwallet/./src/components/main/sections/Content/NewWalletGreeting.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Transaction.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Transaction.module.scss?ffe8","webpack://mytonwallet/./src/components/main/sections/Content/Activity.module.scss?f503","webpack://mytonwallet/./src/components/main/sections/Content/Activity.tsx","webpack://mytonwallet/./src/hooks/useInfiniteLoader.ts","webpack://mytonwallet/./src/components/ui/AnimatedCounter.tsx","webpack://mytonwallet/./src/components/ui/AnimatedCounter.module.scss?5cb5","webpack://mytonwallet/./src/components/main/sections/Content/Token.module.scss?2972","webpack://mytonwallet/./src/components/main/sections/Content/Token.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Assets.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Assets.module.scss?2b3b","webpack://mytonwallet/./src/components/ui/Image.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Nft.module.scss?a2fa","webpack://mytonwallet/./src/components/main/sections/Content/Nfts.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Content.module.scss?df0c","webpack://mytonwallet/./src/components/main/sections/Content/Content.tsx","webpack://mytonwallet/./src/hooks/useBrowserUiColor.ts","webpack://mytonwallet/./src/components/main/sections/Warnings/Warnings.module.scss?104f","webpack://mytonwallet/./src/components/main/sections/Warnings/BackupWarning.tsx","webpack://mytonwallet/./src/components/main/sections/Warnings/SecurityWarning.tsx","webpack://mytonwallet/./src/components/main/sections/Warnings/Warnings.tsx","webpack://mytonwallet/./src/components/main/Main.tsx","webpack://mytonwallet/./src/components/main/Main.module.scss?6d95","webpack://mytonwallet/./src/api/types/misc.ts","webpack://mytonwallet/./src/api/providers/worker/connector.ts","webpack://mytonwallet/./src/api/common/accounts.ts","webpack://mytonwallet/./src/api/storages/index.ts","webpack://mytonwallet/./src/api/common/txCallbacks.ts","webpack://mytonwallet/./src/api/blockchains/ton/util/tonapiio.ts","webpack://mytonwallet/./src/api/blockchains/ton/constants.ts","webpack://mytonwallet/./src/api/blockchains/ton/util/tonweb.ts","webpack://mytonwallet/./src/api/blockchains/ton/wallet.ts","webpack://mytonwallet/./src/api/common/utils.ts","webpack://mytonwallet/./src/api/blockchains/ton/util/encryption.ts","webpack://mytonwallet/./src/api/blockchains/ton/util/tonCore.ts","webpack://mytonwallet/./src/api/blockchains/ton/address.ts","webpack://mytonwallet/./src/api/blockchains/ton/tokens.ts","webpack://mytonwallet/./src/api/blockchains/ton/transactions.ts","webpack://mytonwallet/./src/api/blockchains/ton/contracts/NominatorPool.ts","webpack://mytonwallet/./src/api/blockchains/ton/staking.ts","webpack://mytonwallet/./src/api/common/backend.ts","webpack://mytonwallet/./src/api/blockchains/ton/other.ts","webpack://mytonwallet/./src/api/errors.ts","webpack://mytonwallet/./src/util/ledger/index.ts","webpack://mytonwallet/./src/global/initialState.ts","webpack://mytonwallet/./src/util/areDeepEqual.ts","webpack://mytonwallet/./src/util/isPartialDeepEqual.ts","webpack://mytonwallet/./src/global/reducers/misc.ts","webpack://mytonwallet/./src/global/reducers/wallet.ts","webpack://mytonwallet/./src/global/reducers/staking.ts","webpack://mytonwallet/./src/global/reducers/dapp.ts","webpack://mytonwallet/./src/global/reducers/transactions.ts","webpack://mytonwallet/./src/global/actions/api/auth.ts","webpack://mytonwallet/./src/components/main/modals/BackupModal.tsx","webpack://mytonwallet/./src/components/main/modals/BackupModal.module.scss?7942","webpack://mytonwallet/./src/components/main/modals/SignatureModal.tsx","webpack://mytonwallet/./src/components/main/modals/SignatureModal.module.scss?77a6","webpack://mytonwallet/./src/components/common/TransactionAmount.tsx","webpack://mytonwallet/./src/components/common/TransactionAmount.module.scss?8894","webpack://mytonwallet/./src/components/main/modals/TransactionModal.module.scss?6dca","webpack://mytonwallet/./src/components/main/modals/TransactionModal.tsx","webpack://mytonwallet/./src/components/ui/Notification.tsx","webpack://mytonwallet/./src/components/ui/Notification.module.scss?743a","webpack://mytonwallet/./src/components/main/Notifications.tsx","webpack://mytonwallet/./src/components/main/modals/LogOutModal.module.scss?5651","webpack://mytonwallet/./src/components/main/modals/LogOutModal.tsx","webpack://mytonwallet/./src/components/ui/Switcher.tsx","webpack://mytonwallet/./src/components/ui/Switcher.module.scss?8b13","webpack://mytonwallet/./src/util/switchAnimationLevel.ts","webpack://mytonwallet/./src/util/switchTheme.ts","webpack://mytonwallet/./src/components/settings/SettingsAppearance.tsx","webpack://mytonwallet/./src/components/ui/Tooltip.tsx","webpack://mytonwallet/./src/components/ui/Tooltip.module.scss?ee0c","webpack://mytonwallet/./src/components/main/modals/DeleteTokenModal.tsx","webpack://mytonwallet/./src/components/main/modals/DeleteTokenModal.module.scss?34ea","webpack://mytonwallet/./src/components/ui/Draggable.tsx","webpack://mytonwallet/./src/components/ui/Draggable.module.scss?804f","webpack://mytonwallet/./src/components/settings/SelectTokens.tsx","webpack://mytonwallet/./src/components/settings/SettingsTokens.tsx","webpack://mytonwallet/./src/util/math.ts","webpack://mytonwallet/./src/components/settings/SettingsAssets.tsx","webpack://mytonwallet/./src/components/main/modals/DisconnectDappModal.module.scss?141f","webpack://mytonwallet/./src/components/main/modals/DisconnectDappModal.tsx","webpack://mytonwallet/./src/components/settings/SettingsDapps.tsx","webpack://mytonwallet/./src/components/settings/SettingsDeveloperOptions.tsx","webpack://mytonwallet/./src/components/settings/SettingsLanguage.tsx","webpack://mytonwallet/./src/components/settings/Settings.tsx","webpack://mytonwallet/./src/components/settings/SettingsModal.tsx","webpack://mytonwallet/./src/components/transfer/TransferModal.tsx","webpack://mytonwallet/./src/components/App.module.scss?a9d3","webpack://mytonwallet/./src/components/App.tsx","webpack://mytonwallet/./src/util/tonConnectEnvironment.ts","webpack://mytonwallet/./src/global/actions/api/initial.ts","webpack://mytonwallet/./src/global/actions/api/wallet.ts","webpack://mytonwallet/./src/global/actions/api/staking.ts","webpack://mytonwallet/./src/global/actions/api/dapps.ts","webpack://mytonwallet/./src/global/actions/apiUpdates/initial.ts","webpack://mytonwallet/./src/global/reducers/nfts.ts","webpack://mytonwallet/./src/util/safePlay.ts","webpack://mytonwallet/./src/util/appSounds.ts","webpack://mytonwallet/./src/global/actions/apiUpdates/transactions.ts","webpack://mytonwallet/./src/global/actions/apiUpdates/dapp.ts","webpack://mytonwallet/./src/global/actions/ui/initial.ts","webpack://mytonwallet/./src/global/actions/ui/misc.ts","webpack://mytonwallet/./src/global/actions/ui/dapps.ts","webpack://mytonwallet/./src/global/cache.ts","webpack://mytonwallet/./src/global/init.ts","webpack://mytonwallet/./src/index.tsx","webpack://mytonwallet/./src/lib/fasterdom/stricterdom.ts","webpack://mytonwallet/./src/lib/fasterdom/fasterdom.ts","webpack://mytonwallet/./src/util/PostMessageConnector.ts","webpack://mytonwallet/./src/util/animation.ts","webpack://mytonwallet/./src/util/handleError.ts","webpack://mytonwallet/./src/util/iteratees.ts","webpack://mytonwallet/./src/util/logs.ts","webpack://mytonwallet/./src/util/safeExec.ts","webpack://mytonwallet/./src/util/schedulers.ts","webpack://mytonwallet/./src/util/windowEnvironment.ts","webpack://mytonwallet/webpack/bootstrap","webpack://mytonwallet/webpack/runtime/compat get default export","webpack://mytonwallet/webpack/runtime/define property getters","webpack://mytonwallet/webpack/runtime/ensure chunk","webpack://mytonwallet/webpack/runtime/get javascript chunk filename","webpack://mytonwallet/webpack/runtime/get mini-css chunk filename","webpack://mytonwallet/webpack/runtime/global","webpack://mytonwallet/webpack/runtime/hasOwnProperty shorthand","webpack://mytonwallet/webpack/runtime/make namespace object","webpack://mytonwallet/webpack/runtime/node module decorator","webpack://mytonwallet/webpack/runtime/publicPath","webpack://mytonwallet/webpack/runtime/jsonp chunk loading","webpack://mytonwallet/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var inProgress = {};\nvar dataWebpackPrefix = \"mytonwallet:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","/*\n * This module is to be used instead of /src/util/environment.ts\n * when `window` is not available (e.g. in a web worker).\n */\n\n// eslint-disable-next-line no-restricted-globals\nexport const IS_EXTENSION = Boolean(self?.chrome?.runtime?.id);\n// eslint-disable-next-line no-restricted-globals\nexport const IS_CHROME_EXTENSION = Boolean(self?.chrome?.system);\nexport const IS_FIREFOX_EXTENSION = IS_EXTENSION && !IS_CHROME_EXTENSION;\n\nexport const IS_ELECTRON = process.env.IS_ELECTRON;\n\nexport const IS_DAPP_SUPPORTED = IS_EXTENSION || IS_ELECTRON;\n","import type { LangItem } from './global/types';\n\nexport const APP_NAME = process.env.APP_NAME || 'MyTonWallet';\nexport const APP_VERSION = process.env.APP_VERSION!;\n\nexport const DEBUG = (\n  process.env.APP_ENV !== 'production' && process.env.APP_ENV !== 'perf' && process.env.APP_ENV !== 'test'\n);\nexport const DEBUG_MORE = false;\n\nexport const IS_MOCKED_CLIENT = process.env.APP_MOCKED_CLIENT === '1';\nexport const IS_TEST = process.env.APP_ENV === 'test';\nexport const IS_PERF = process.env.APP_ENV === 'perf';\nexport const IS_ELECTRON = process.env.IS_ELECTRON;\nexport const IS_SSE_SUPPORTED = IS_ELECTRON;\n\nexport const ELECTRON_HOST_URL = 'https://dumb-host';\nexport const INACTIVE_MARKER = '[Inactive]';\n\nexport const DEBUG_ALERT_MSG = 'Shoot!\\nSomething went wrong, please see the error details in Dev Tools Console.';\n\nexport const MNEMONIC_COUNT = 24;\nexport const MNEMONIC_CHECK_COUNT = 3;\n\nexport const MOBILE_SCREEN_MAX_WIDTH = 700; // px\n\nexport const ANIMATION_END_DELAY = 50;\n\nexport const ANIMATED_STICKER_SMALL_SIZE_PX = 110;\nexport const ANIMATED_STICKER_MIDDLE_SIZE_PX = 120;\nexport const ANIMATED_STICKER_DEFAULT_PX = 150;\nexport const ANIMATED_STICKER_BIG_SIZE_PX = 156;\n\nexport const DEFAULT_PRICE_CURRENCY = '$';\nexport const CARD_SECONDARY_VALUE_SYMBOL = 'TON';\n\nexport const DEFAULT_LANDSCAPE_ACTION_TAB_ID = 1;\n\nexport const DEFAULT_DECIMAL_PLACES = 9;\n\nexport const TOKEN_INFO = {\n  toncoin: {\n    name: 'Toncoin',\n    symbol: CARD_SECONDARY_VALUE_SYMBOL,\n    slug: 'toncoin',\n    quote: {\n      price: 1.95,\n      percentChange1h: 0,\n      percentChange24h: 0,\n      percentChange7d: 0,\n      percentChange30d: 0,\n    },\n    decimals: DEFAULT_DECIMAL_PLACES,\n  },\n};\n\nexport const GLOBAL_STATE_CACHE_DISABLED = false;\nexport const GLOBAL_STATE_CACHE_KEY = 'mytonwallet-global-state';\n\nexport const ANIMATION_LEVEL_MIN = 0;\nexport const ANIMATION_LEVEL_MED = 1;\nexport const ANIMATION_LEVEL_MAX = 2;\nexport const ANIMATION_LEVEL_DEFAULT = ANIMATION_LEVEL_MAX;\nexport const THEME_DEFAULT = 'system';\n\nexport const MAIN_ACCOUNT_ID = '0-ton-mainnet';\n\nexport const TONHTTPAPI_MAINNET_URL = process.env.TONHTTPAPI_MAINNET_URL || 'https://toncenter.com/api/v2/jsonRPC';\nexport const TONHTTPAPI_MAINNET_API_KEY = (IS_ELECTRON && process.env.ELECTRON_TONHTTPAPI_MAINNET_API_KEY)\n  || process.env.TONHTTPAPI_MAINNET_API_KEY;\nexport const TONHTTPAPI_TESTNET_URL = process.env.TONHTTPAPI_TESTNET_URL\n  || 'https://testnet.toncenter.com/api/v2/jsonRPC';\nexport const TONHTTPAPI_TESTNET_API_KEY = (IS_ELECTRON && process.env.ELECTRON_TONHTTPAPI_TESTNET_API_KEY)\n  || process.env.TONHTTPAPI_TESTNET_API_KEY;\nexport const BRILLIANT_API_BASE_URL = process.env.BRILLIANT_API_BASE_URL || 'https://mytonwallet-api.herokuapp.com';\n\nexport const FRACTION_DIGITS = 9;\nexport const SHORT_FRACTION_DIGITS = 2;\n\nexport const MY_TON_WALLET_PROMO_URL = 'https://mytonwallet.io';\nexport const TELEGRAM_WEB_URL = 'https://web.telegram.org/a/';\nexport const TONSCAN_BASE_MAINNET_URL = 'https://tonscan.org/';\nexport const TONSCAN_BASE_TESTNET_URL = 'https://testnet.tonscan.org/';\nexport const GETGEMS_BASE_MAINNET_URL = 'https://getgems.io/';\nexport const GETGEMS_BASE_TESTNET_URL = 'https://testnet.getgems.io/';\n\nexport const TON_TOKEN_SLUG = 'toncoin';\n\nexport const PROXY_HOSTS = process.env.PROXY_HOSTS;\n\nexport const TINY_TRANSFER_MAX_AMOUNT = 0.01;\n\nexport const LANG_CACHE_NAME = 'mtw-lang-15';\n\nexport const LANG_LIST: LangItem[] = [{\n  langCode: 'en',\n  name: 'English',\n  nativeName: 'English',\n  rtl: false,\n}, {\n  langCode: 'es',\n  name: 'Spanish',\n  nativeName: 'Español',\n  rtl: false,\n}, {\n  langCode: 'ru',\n  name: 'Russian',\n  nativeName: 'Русский',\n  rtl: false,\n}, {\n  langCode: 'zh-Hans',\n  name: 'Chinese (Simplified)',\n  nativeName: '繁体',\n  rtl: false,\n}, {\n  langCode: 'zh-Hant',\n  name: 'Chinese (Traditional)',\n  nativeName: '繁體',\n  rtl: false,\n}];\n\nexport const STAKING_CYCLE_DURATION_MS = 129600000; // 36 hours\nexport const MIN_BALANCE_FOR_UNSTAKE = 1.02;\n\nexport const STAKING_POOLS = process.env.STAKING_POOLS ? process.env.STAKING_POOLS.split(' ') : [];\n","export default function arePropsShallowEqual(currentProps: AnyLiteral, newProps: AnyLiteral) {\n  if (currentProps === newProps) {\n    return true;\n  }\n\n  const currentKeys = Object.keys(currentProps);\n  const currentKeysLength = currentKeys.length;\n  const newKeysLength = Object.keys(newProps).length;\n\n  if (currentKeysLength !== newKeysLength) {\n    return false;\n  }\n\n  if (currentKeysLength === 0) {\n    return true;\n  }\n\n  for (let i = 0; i < currentKeysLength; i++) {\n    const prop = currentKeys[i];\n    if (currentProps[prop] !== newProps[prop]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function logUnequalProps(currentProps: AnyLiteral, newProps: AnyLiteral, msg: string, debugKey = '') {\n  const currentKeys = Object.keys(currentProps);\n  const currentKeysLength = currentKeys.length;\n  const newKeysLength = Object.keys(newProps).length;\n\n  if (currentKeysLength !== newKeysLength) {\n    // eslint-disable-next-line no-console\n    console.log(`${msg} LENGTH`);\n    return;\n  }\n\n  // eslint-disable-next-line no-console\n  console.log(msg);\n  currentKeys.forEach((res, prop) => {\n    if (currentProps[prop] !== newProps[prop]) {\n      // eslint-disable-next-line no-console\n      console.log(debugKey, prop, ':', currentProps[prop], '=>', newProps[prop]);\n    }\n  });\n}\n","import { throttle } from './schedulers';\n\nconst KEYS_TO_IGNORE = new Set([\n  'TeactMemoWrapper renders',\n  'TeactNContainer renders',\n  'Button renders',\n]);\nconst MIN_RENDERS_TO_SHOW = 5;\nconst MIN_DURATION_TO_SHOW = 2;\nconst BG_GREEN = ' style=\"background: lightgreen\"';\n\nlet counters: Record<string, {\n  value: number;\n  lastUpdateAt: number;\n}> = {};\n\nconst renderCountersThrottled = throttle(renderCounters, 500, false);\n\nlet loggerEl: HTMLDivElement;\n\nexport function debugToOverlay(text: string) {\n  if (!loggerEl) {\n    setupOverlay();\n  }\n\n  const date = new Date();\n  const dateFormatted = `${date.toLocaleTimeString()}.${date.getMilliseconds()}`;\n  const wasAtBottom = loggerEl.scrollTop + 10 >= loggerEl.scrollHeight - loggerEl.offsetHeight;\n\n  loggerEl.innerHTML += `${dateFormatted}: ${text}<br/>`;\n\n  if (wasAtBottom) {\n    loggerEl.scrollTop = loggerEl.scrollHeight;\n  }\n}\n\nexport function incrementOverlayCounter(key: string, value = 1) {\n  const now = Date.now();\n  if (!counters[key]) {\n    counters[key] = { value, lastUpdateAt: now };\n  } else {\n    counters[key].value += value;\n    counters[key].lastUpdateAt = now;\n  }\n\n  renderCountersThrottled();\n}\n\nexport function renderCounters() {\n  if (!loggerEl) {\n    setupOverlay();\n  }\n\n  const halfSecondAgo = Date.now() - 500;\n  const [maxRenders, maxDuration] = Object.entries(counters).reduce((acc, [key, { value }]) => {\n    if (KEYS_TO_IGNORE.has(key)) {\n      return acc;\n    }\n\n    if (key.includes('renders') && value > acc[0]) {\n      acc[0] = value;\n    }\n\n    if (key.includes('duration') && value > acc[1]) {\n      acc[1] = value;\n    }\n\n    return acc;\n  }, [0, 0]);\n\n  loggerEl.innerHTML = Object\n    .entries(counters)\n    .filter(([key, { value }]) => (\n      (!KEYS_TO_IGNORE.has(key)) && (\n        (key.includes('renders') && value > MIN_RENDERS_TO_SHOW)\n        || (key.includes('duration') && value > MIN_DURATION_TO_SHOW)\n      )\n    ))\n    .sort((a, b) => (\n      b[1].lastUpdateAt - a[1].lastUpdateAt\n    ))\n    .map(([key, { value, lastUpdateAt }]) => ([\n      `<div style=\"background: #ff0000${factorToHex(value / (key.includes('renders') ? maxRenders : maxDuration))}\">`,\n      `  <span${lastUpdateAt > halfSecondAgo ? BG_GREEN : ''}>${key}: ${Math.round(value)}</span>`,\n      '</div>',\n    ].join('\\n')))\n    .join('\\n');\n}\n\nfunction setupOverlay() {\n  loggerEl = document.createElement('div');\n  loggerEl.style.cssText = 'position: absolute; left: 0; bottom: 25px; z-index: 9998; width: 260px; height: 200px;'\n    + ' border: 1px solid #555; background: rgba(255, 255, 255, 0.9); overflow: auto; font-size: 10px;';\n  document.body.appendChild(loggerEl);\n\n  const clearEl = document.createElement('a');\n  clearEl.style.cssText = 'position: absolute; left: 222px; bottom: 198px; z-index: 9999; font-size: 20px; '\n    + 'cursor: pointer;';\n  clearEl.innerText = '🔄';\n  clearEl.addEventListener('click', () => {\n    counters = {};\n    renderCountersThrottled();\n  });\n  document.body.appendChild(clearEl);\n}\n\nfunction factorToHex(factor: number) {\n  return Math.round(255 * factor).toString(16).padStart(2, '0');\n}\n","import type { CallbackManager } from './callbacks';\nimport { createCallbackManager } from './callbacks';\n\ninterface SignalState<T> {\n  value: T;\n  effects: CallbackManager;\n}\n\nconst SIGNAL_MARK = Symbol('SIGNAL_MARK');\n\nexport type Signal<T = any> = ((() => T) & {\n  readonly [SIGNAL_MARK]: symbol;\n  subscribe: (cb: AnyToVoidFunction) => NoneToVoidFunction;\n});\n\nexport function isSignal(obj: any): obj is Signal {\n  return typeof obj === 'function' && SIGNAL_MARK in obj;\n}\n\n// A shorthand to unsubscribe effect from all signals\nconst unsubscribesByEffect = new Map<NoneToVoidFunction, Set<NoneToVoidFunction>>();\n\nlet currentEffect: NoneToVoidFunction | undefined;\n\nexport function createSignal<T>(defaultValue?: T) {\n  const state: SignalState<typeof defaultValue> = {\n    value: defaultValue,\n    effects: createCallbackManager(),\n  };\n\n  function subscribe(effect: NoneToVoidFunction) {\n    const unsubscribe = state.effects.addCallback(effect);\n\n    if (!unsubscribesByEffect.has(effect)) {\n      unsubscribesByEffect.set(effect, new Set([unsubscribe]));\n    } else {\n      unsubscribesByEffect.get(effect)!.add(unsubscribe);\n    }\n\n    return () => {\n      unsubscribe();\n\n      const unsubscribes = unsubscribesByEffect.get(effect)!;\n      unsubscribes.delete(unsubscribe);\n      if (!unsubscribes.size) {\n        unsubscribesByEffect.delete(effect);\n      }\n    };\n  }\n\n  function getter() {\n    if (currentEffect) {\n      subscribe(currentEffect);\n    }\n\n    return state.value;\n  }\n\n  function setter(newValue: T) {\n    if (state.value === newValue) {\n      return;\n    }\n\n    state.value = newValue;\n    state.effects.runCallbacks();\n  }\n\n  const signal = Object.assign(getter as Signal<T>, {\n    [SIGNAL_MARK]: SIGNAL_MARK,\n    subscribe,\n  });\n\n  return [signal, setter] as const;\n}\n\nexport function cleanupEffect(effect: NoneToVoidFunction) {\n  unsubscribesByEffect.get(effect)?.forEach((unsubscribe) => {\n    unsubscribe();\n  });\n  unsubscribesByEffect.delete(effect);\n}\n","import type { ReactElement } from 'react';\n\nimport { DEBUG, DEBUG_MORE } from '../../config';\nimport { logUnequalProps } from '../../util/arePropsShallowEqual';\nimport { incrementOverlayCounter } from '../../util/debugOverlay';\nimport { orderBy } from '../../util/iteratees';\nimport safeExec from '../../util/safeExec';\nimport { throttleWith } from '../../util/schedulers';\nimport { isSignal } from '../../util/signals';\nimport { requestMeasure, requestMutation } from '../fasterdom/fasterdom';\n\nexport type Props = AnyLiteral;\nexport type FC<P extends Props = any> = (props: P) => any;\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport type FC_withDebug =\n  FC\n  & { DEBUG_contentComponentName?: string };\n\nexport enum VirtualType {\n  Empty,\n  Text,\n  Tag,\n  Component,\n  Fragment,\n}\n\ninterface VirtualElementEmpty {\n  type: VirtualType.Empty;\n  target?: Node;\n}\n\ninterface VirtualElementText {\n  type: VirtualType.Text;\n  target?: Node;\n  value: string;\n}\n\nexport interface VirtualElementTag {\n  type: VirtualType.Tag;\n  target?: HTMLElement;\n  tag: string;\n  props: Props;\n  children: VirtualElementChildren;\n}\n\nexport interface VirtualElementComponent {\n  type: VirtualType.Component;\n  componentInstance: ComponentInstance;\n  props: Props;\n  children: VirtualElementChildren;\n}\n\nexport interface VirtualElementFragment {\n  type: VirtualType.Fragment;\n  children: VirtualElementChildren;\n}\n\nexport type StateHookSetter<T> = (newValue: ((current: T) => T) | T) => void;\n\nexport enum MountState {\n  New,\n  Mounted,\n  Unmounted,\n}\n\ninterface ComponentInstance {\n  id: number;\n  $element: VirtualElementComponent;\n  Component: FC;\n  name: string;\n  props: Props;\n  renderedValue?: any;\n  mountState: MountState;\n  hooks?: {\n    state?: {\n      cursor: number;\n      byCursor: {\n        value: any;\n        nextValue: any;\n        setter: StateHookSetter<any>;\n      }[];\n    };\n    effects?: {\n      cursor: number;\n      byCursor: {\n        dependencies?: readonly any[];\n        schedule: NoneToVoidFunction;\n        cleanup?: NoneToVoidFunction;\n        releaseSignals?: NoneToVoidFunction;\n      }[];\n    };\n    memos?: {\n      cursor: number;\n      byCursor: {\n        value: any;\n        dependencies: any[];\n      }[];\n    };\n    refs?: {\n      cursor: number;\n      byCursor: {\n        current: any;\n      }[];\n    };\n  };\n  prepareForFrame?: () => void;\n  forceUpdate?: () => void;\n  onUpdate?: () => void;\n}\n\nexport type VirtualElement =\n  VirtualElementEmpty\n  | VirtualElementText\n  | VirtualElementTag\n  | VirtualElementComponent\n  | VirtualElementFragment;\nexport type VirtualElementParent =\n  VirtualElementTag\n  | VirtualElementComponent\n  | VirtualElementFragment;\nexport type VirtualElementChildren = VirtualElement[];\nexport type VirtualElementReal = Exclude<VirtualElement, VirtualElementComponent | VirtualElementFragment>;\n\n// Compatibility with JSX types\nexport type TeactNode =\n  ReactElement\n  | string\n  | number\n  | boolean\n  | TeactNode[];\n\ntype Effect = () => (NoneToVoidFunction | void);\ntype EffectCleanup = NoneToVoidFunction;\n\nconst Fragment = Symbol('Fragment');\n\nconst DEBUG_RENDER_THRESHOLD = 7;\nconst DEBUG_EFFECT_THRESHOLD = 7;\nconst DEBUG_SILENT_RENDERS_FOR = new Set(['TeactMemoWrapper', 'TeactNContainer', 'Button', 'ListItem', 'MenuItem']);\n\nlet lastComponentId = 0;\nlet renderingInstance: ComponentInstance;\n\nexport function isParentElement($element: VirtualElement): $element is VirtualElementParent {\n  return (\n    $element.type === VirtualType.Tag\n    || $element.type === VirtualType.Component\n    || $element.type === VirtualType.Fragment\n  );\n}\n\nfunction createElement(\n  source: string | FC | typeof Fragment,\n  props: Props,\n  ...children: any[]\n): VirtualElementParent | VirtualElementChildren {\n  if (source === Fragment) {\n    return buildFragmentElement(children);\n  } else if (typeof source === 'function') {\n    return createComponentInstance(source, props || {}, children);\n  } else {\n    return buildTagElement(source, props || {}, children);\n  }\n}\n\nfunction buildFragmentElement(children: any[]): VirtualElementFragment {\n  return {\n    type: VirtualType.Fragment,\n    children: buildChildren(children, true),\n  };\n}\n\nfunction createComponentInstance(Component: FC, props: Props, children: any[]): VirtualElementComponent {\n  if (children?.length) {\n    props.children = children.length === 1 ? children[0] : children;\n  }\n\n  const componentInstance: ComponentInstance = {\n    id: ++lastComponentId,\n    $element: undefined as unknown as VirtualElementComponent,\n    Component,\n    name: Component.name,\n    props,\n    mountState: MountState.New,\n  };\n\n  componentInstance.$element = buildComponentElement(componentInstance);\n\n  return componentInstance.$element;\n}\n\nfunction buildComponentElement(\n  componentInstance: ComponentInstance,\n  children?: VirtualElementChildren,\n): VirtualElementComponent {\n  return {\n    type: VirtualType.Component,\n    componentInstance,\n    props: componentInstance.props,\n    children: children ? buildChildren(children, true) : [],\n  };\n}\n\nfunction buildTagElement(tag: string, props: Props, children: any[]): VirtualElementTag {\n  return {\n    type: VirtualType.Tag,\n    tag,\n    props,\n    children: buildChildren(children),\n  };\n}\n\nfunction buildChildren(children: any[], noEmpty = false): VirtualElement[] {\n  const cleanChildren = dropEmptyTail(children, noEmpty);\n  const newChildren = [];\n\n  for (let i = 0, l = cleanChildren.length; i < l; i++) {\n    const child = cleanChildren[i];\n    if (Array.isArray(child)) {\n      newChildren.push(...buildChildren(child, noEmpty));\n    } else {\n      newChildren.push(buildChildElement(child));\n    }\n  }\n\n  return newChildren;\n}\n\n// We only need placeholders in the middle of collection (to ensure other elements order).\nfunction dropEmptyTail(children: any[], noEmpty = false) {\n  let i = children.length - 1;\n\n  for (; i >= 0; i--) {\n    if (!isEmptyPlaceholder(children[i])) {\n      break;\n    }\n  }\n\n  if (i === children.length - 1) {\n    return children;\n  }\n\n  if (i === -1 && noEmpty) {\n    return children.slice(0, 1);\n  }\n\n  return children.slice(0, i + 1);\n}\n\nfunction isEmptyPlaceholder(child: any) {\n  return !child && child !== 0;\n}\n\nfunction buildChildElement(child: any): VirtualElement {\n  if (isEmptyPlaceholder(child)) {\n    return { type: VirtualType.Empty };\n  } else if (isParentElement(child)) {\n    return child;\n  } else {\n    return {\n      type: VirtualType.Text,\n      value: String(child),\n    };\n  }\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nconst DEBUG_components: AnyLiteral = { TOTAL: { name: 'TOTAL', renders: 0 } };\n// eslint-disable-next-line @typescript-eslint/naming-convention\nconst DEBUG_memos: Record<string, { key: string; calls: number; misses: number; hitRate: number }> = {};\nconst DEBUG_MEMOS_CALLS_THRESHOLD = 20;\n\ndocument.addEventListener('dblclick', () => {\n  // eslint-disable-next-line no-console\n  console.warn('COMPONENTS', orderBy(\n    Object\n      .values(DEBUG_components)\n      .map(({ avgRenderTime, ...state }) => {\n        return { ...state, ...(avgRenderTime !== undefined && { avgRenderTime: Number(avgRenderTime.toFixed(2)) }) };\n      }),\n    'renders',\n    'desc',\n  ));\n\n  // eslint-disable-next-line no-console\n  console.warn('MEMOS', orderBy(\n    Object\n      .values(DEBUG_memos)\n      .filter(({ calls }) => calls >= DEBUG_MEMOS_CALLS_THRESHOLD)\n      .map((state) => ({ ...state, hitRate: Number(state.hitRate.toFixed(2)) })),\n    'hitRate',\n    'asc',\n  ));\n});\n\nlet instancesPendingUpdate = new Set<ComponentInstance>();\nlet idsToExcludeFromUpdate = new Set<number>();\nlet pendingEffects = new Map<string, Effect>();\nlet pendingCleanups = new Map<string, EffectCleanup>();\nlet pendingLayoutEffects = new Map<string, Effect>();\nlet pendingLayoutCleanups = new Map<string, EffectCleanup>();\nlet areImmediateEffectsCaptured = false;\n\n/*\n  Order:\n  - component effect cleanups\n  - component effects\n  - measure tasks\n  - mutation tasks\n  - component updates\n  - component layout effect cleanups\n  - component layout effects\n  - forced layout measure tasks\n  - forced layout mutation tasks\n */\n\nconst runUpdatePassOnRaf = throttleWith(requestMeasure, () => {\n  const runImmediateEffects = captureImmediateEffects();\n\n  idsToExcludeFromUpdate = new Set();\n  const instancesToUpdate = Array\n    .from(instancesPendingUpdate)\n    .sort((a, b) => a.id - b.id);\n  instancesPendingUpdate = new Set();\n\n  const currentCleanups = pendingCleanups;\n  pendingCleanups = new Map();\n  currentCleanups.forEach((cb) => cb());\n\n  const currentEffects = pendingEffects;\n  pendingEffects = new Map();\n  currentEffects.forEach((cb) => cb());\n\n  requestMutation(() => {\n    instancesToUpdate.forEach(prepareComponentForFrame);\n    instancesToUpdate.forEach((instance) => {\n      if (idsToExcludeFromUpdate!.has(instance.id)) {\n        return;\n      }\n\n      forceUpdateComponent(instance);\n    });\n\n    runImmediateEffects?.();\n  });\n});\n\nexport function captureImmediateEffects() {\n  if (areImmediateEffectsCaptured) {\n    return undefined;\n  }\n\n  areImmediateEffectsCaptured = true;\n  return runCapturedImmediateEffects;\n}\n\nfunction runCapturedImmediateEffects() {\n  const currentLayoutCleanups = pendingLayoutCleanups;\n  pendingLayoutCleanups = new Map();\n  currentLayoutCleanups.forEach((cb) => cb());\n\n  const currentLayoutEffects = pendingLayoutEffects;\n  pendingLayoutEffects = new Map();\n  currentLayoutEffects.forEach((cb) => cb());\n\n  areImmediateEffectsCaptured = false;\n}\n\nexport function renderComponent(componentInstance: ComponentInstance) {\n  idsToExcludeFromUpdate.add(componentInstance.id);\n\n  const { Component, props } = componentInstance;\n  let newRenderedValue: any;\n\n  safeExec(() => {\n    renderingInstance = componentInstance;\n    if (componentInstance.hooks) {\n      if (componentInstance.hooks.state) {\n        componentInstance.hooks.state.cursor = 0;\n      }\n      if (componentInstance.hooks.effects) {\n        componentInstance.hooks.effects.cursor = 0;\n      }\n      if (componentInstance.hooks.memos) {\n        componentInstance.hooks.memos.cursor = 0;\n      }\n      if (componentInstance.hooks.refs) {\n        componentInstance.hooks.refs.cursor = 0;\n      }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    let DEBUG_startAt: number | undefined;\n    if (DEBUG) {\n      const componentName = DEBUG_resolveComponentName(Component);\n      if (!DEBUG_components[componentName]) {\n        DEBUG_components[componentName] = {\n          name: componentName,\n          renders: 0,\n          avgRenderTime: 0,\n        };\n      }\n\n      if (DEBUG_MORE) {\n        if (!DEBUG_SILENT_RENDERS_FOR.has(componentName)) {\n          // eslint-disable-next-line no-console\n          console.log(`[Teact] Render ${componentName}`);\n        }\n      }\n\n      DEBUG_startAt = performance.now();\n    }\n\n    newRenderedValue = Component(props);\n\n    if (DEBUG) {\n      const duration = performance.now() - DEBUG_startAt!;\n      const componentName = DEBUG_resolveComponentName(Component);\n      if (duration > DEBUG_RENDER_THRESHOLD) {\n        // eslint-disable-next-line no-console\n        console.warn(`[Teact] Slow component render: ${componentName}, ${Math.round(duration)} ms`);\n      }\n\n      const { renders, avgRenderTime } = DEBUG_components[componentName];\n      DEBUG_components[componentName].avgRenderTime = (avgRenderTime * renders + duration) / (renders + 1);\n      DEBUG_components[componentName].renders++;\n      DEBUG_components.TOTAL.renders++;\n\n      if (DEBUG_MORE) {\n        incrementOverlayCounter(`${componentName} renders`);\n        incrementOverlayCounter(`${componentName} duration`, duration);\n      }\n    }\n  }, () => {\n    // eslint-disable-next-line no-console\n    console.error(`[Teact] Error while rendering component ${componentInstance.name}`);\n\n    newRenderedValue = componentInstance.renderedValue;\n  });\n\n  if (componentInstance.mountState === MountState.Mounted && newRenderedValue === componentInstance.renderedValue) {\n    return componentInstance.$element;\n  }\n\n  componentInstance.renderedValue = newRenderedValue;\n\n  const children = Array.isArray(newRenderedValue) ? newRenderedValue : [newRenderedValue];\n\n  if (componentInstance.mountState === MountState.New) {\n    componentInstance.$element.children = buildChildren(children, true);\n  } else {\n    componentInstance.$element = buildComponentElement(componentInstance, children);\n  }\n\n  return componentInstance.$element;\n}\n\nexport function hasElementChanged($old: VirtualElement, $new: VirtualElement) {\n  if (typeof $old !== typeof $new) {\n    return true;\n  } else if ($old.type !== $new.type) {\n    return true;\n  } else if ($old.type === VirtualType.Text && $new.type === VirtualType.Text) {\n    return $old.value !== $new.value;\n  } else if ($old.type === VirtualType.Tag && $new.type === VirtualType.Tag) {\n    return ($old.tag !== $new.tag) || ($old.props.key !== $new.props.key);\n  } else if ($old.type === VirtualType.Component && $new.type === VirtualType.Component) {\n    return (\n      $old.componentInstance.Component !== $new.componentInstance.Component\n    ) || (\n      $old.props.key !== $new.props.key\n    );\n  }\n\n  return false;\n}\n\nexport function mountComponent(componentInstance: ComponentInstance) {\n  renderComponent(componentInstance);\n  componentInstance.mountState = MountState.Mounted;\n  return componentInstance.$element;\n}\n\nexport function unmountComponent(componentInstance: ComponentInstance) {\n  if (componentInstance.mountState !== MountState.Mounted) {\n    return;\n  }\n\n  idsToExcludeFromUpdate.add(componentInstance.id);\n\n  if (componentInstance.hooks?.effects) {\n    for (const effect of componentInstance.hooks.effects.byCursor) {\n      if (effect.cleanup) {\n        safeExec(effect.cleanup);\n      }\n\n      effect.cleanup = undefined;\n      effect.releaseSignals?.();\n    }\n  }\n\n  componentInstance.mountState = MountState.Unmounted;\n\n  helpGc(componentInstance);\n}\n\n// We need to remove all references to DOM objects. We also clean all other references, just in case\nfunction helpGc(componentInstance: ComponentInstance) {\n  const {\n    effects, state, memos, refs,\n  } = componentInstance.hooks || {};\n\n  if (effects) {\n    for (const hook of effects.byCursor) {\n      hook.schedule = undefined as any;\n      hook.cleanup = undefined as any;\n      hook.releaseSignals = undefined as any;\n      hook.dependencies = undefined;\n    }\n  }\n\n  if (state) {\n    for (const hook of state.byCursor) {\n      hook.value = undefined;\n      hook.nextValue = undefined;\n      hook.setter = undefined as any;\n    }\n  }\n\n  if (memos) {\n    for (const hook of memos.byCursor) {\n      hook.value = undefined as any;\n      hook.dependencies = undefined as any;\n    }\n  }\n\n  if (refs) {\n    for (const hook of refs.byCursor) {\n      hook.current = undefined as any;\n    }\n  }\n\n  componentInstance.hooks = undefined as any;\n  componentInstance.$element = undefined as any;\n  componentInstance.renderedValue = undefined;\n  componentInstance.Component = undefined as any;\n  componentInstance.props = undefined as any;\n  componentInstance.onUpdate = undefined;\n}\n\nfunction prepareComponentForFrame(componentInstance: ComponentInstance) {\n  if (componentInstance.mountState !== MountState.Mounted) {\n    return;\n  }\n\n  if (componentInstance.hooks?.state) {\n    for (const hook of componentInstance.hooks.state.byCursor) {\n      hook.value = hook.nextValue;\n    }\n  }\n}\n\nfunction forceUpdateComponent(componentInstance: ComponentInstance) {\n  if (componentInstance.mountState !== MountState.Mounted || !componentInstance.onUpdate) {\n    return;\n  }\n\n  const currentElement = componentInstance.$element;\n\n  renderComponent(componentInstance);\n\n  if (componentInstance.$element !== currentElement) {\n    componentInstance.onUpdate();\n  }\n}\n\nexport function useState<T>(): [T | undefined, StateHookSetter<T | undefined>];\nexport function useState<T>(initial: T, debugKey?: string): [T, StateHookSetter<T>];\nexport function useState<T>(initial?: T, debugKey?: string): [T, StateHookSetter<T>] {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n  if (!renderingInstance.hooks.state) {\n    renderingInstance.hooks.state = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.state;\n  const componentInstance = renderingInstance;\n\n  if (byCursor[cursor] === undefined) {\n    byCursor[cursor] = {\n      value: initial,\n      nextValue: initial,\n      setter: (newValue: ((current: T) => T) | T) => {\n        if (componentInstance.mountState === MountState.Unmounted) {\n          return;\n        }\n\n        if (typeof newValue === 'function') {\n          newValue = (newValue as (current: T) => T)(byCursor[cursor].nextValue);\n        }\n\n        if (byCursor[cursor].nextValue === newValue) {\n          return;\n        }\n\n        byCursor[cursor].nextValue = newValue;\n\n        instancesPendingUpdate.add(componentInstance);\n        runUpdatePassOnRaf();\n\n        if (DEBUG_MORE) {\n          // eslint-disable-next-line no-console\n          console.log(\n            '[Teact.useState]',\n            DEBUG_resolveComponentName(componentInstance.Component),\n            `State update at cursor #${cursor}${debugKey ? ` (${debugKey})` : ''}, next value: `,\n            byCursor[cursor].nextValue,\n          );\n        }\n      },\n    };\n  }\n\n  renderingInstance.hooks.state.cursor++;\n\n  return [\n    byCursor[cursor].value,\n    byCursor[cursor].setter,\n  ];\n}\n\nfunction useEffectBase(\n  isLayout: boolean,\n  effect: Effect,\n  dependencies?: readonly any[],\n  debugKey?: string,\n) {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n  if (!renderingInstance.hooks.effects) {\n    renderingInstance.hooks.effects = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.effects;\n  const componentInstance = renderingInstance;\n\n  const runEffectCleanup = () => safeExec(() => {\n    const { cleanup } = byCursor[cursor];\n    if (!cleanup) {\n      return;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    let DEBUG_startAt: number | undefined;\n    if (DEBUG) {\n      DEBUG_startAt = performance.now();\n    }\n\n    cleanup();\n\n    if (DEBUG) {\n      const duration = performance.now() - DEBUG_startAt!;\n      const componentName = DEBUG_resolveComponentName(componentInstance.Component);\n      if (duration > DEBUG_EFFECT_THRESHOLD) {\n        // eslint-disable-next-line no-console\n        console.warn(\n          `[Teact] Slow cleanup at effect cursor #${cursor}: ${componentName}, ${Math.round(duration)} ms`,\n        );\n      }\n    }\n  }, () => {\n    // eslint-disable-next-line no-console\n    console.error(`[Teact] Error in effect cleanup at cursor #${cursor} in ${componentInstance.name}`);\n  }, () => {\n    byCursor[cursor].cleanup = undefined;\n  });\n\n  const runEffect = () => safeExec(() => {\n    if (componentInstance.mountState === MountState.Unmounted) {\n      return;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    let DEBUG_startAt: number | undefined;\n    if (DEBUG) {\n      DEBUG_startAt = performance.now();\n    }\n\n    const result = effect();\n    if (typeof result === 'function') {\n      byCursor[cursor].cleanup = result;\n    }\n\n    if (DEBUG) {\n      const duration = performance.now() - DEBUG_startAt!;\n      const componentName = DEBUG_resolveComponentName(componentInstance.Component);\n      if (duration > DEBUG_EFFECT_THRESHOLD) {\n        // eslint-disable-next-line no-console\n        console.warn(`[Teact] Slow effect at cursor #${cursor}: ${componentName}, ${Math.round(duration)} ms`);\n      }\n    }\n  }, () => {\n    // eslint-disable-next-line no-console\n    console.error(`[Teact] Error in effect at cursor #${cursor} in ${componentInstance.name}`);\n  });\n\n  function schedule() {\n    const effectId = `${componentInstance.id}_${cursor}`;\n\n    if (isLayout) {\n      pendingLayoutCleanups.set(effectId, runEffectCleanup);\n      pendingLayoutEffects.set(effectId, runEffect);\n    } else {\n      pendingCleanups.set(effectId, runEffectCleanup);\n      pendingEffects.set(effectId, runEffect);\n    }\n\n    runUpdatePassOnRaf();\n  }\n\n  if (dependencies && byCursor[cursor]?.dependencies) {\n    if (dependencies.some((dependency, i) => dependency !== byCursor[cursor].dependencies![i])) {\n      if (DEBUG && debugKey) {\n        const causedBy = dependencies.reduce((res, newValue, i) => {\n          const prevValue = byCursor[cursor].dependencies![i];\n          if (newValue !== prevValue) {\n            res.push(`${i}: ${prevValue} => ${newValue}`);\n          }\n\n          return res;\n        }, []);\n\n        // eslint-disable-next-line no-console\n        console.log(`[Teact] Effect \"${debugKey}\" caused by dependencies.`, causedBy.join(', '));\n      }\n\n      schedule();\n    }\n  } else {\n    if (debugKey) {\n      // eslint-disable-next-line no-console\n      console.log(`[Teact] Effect \"${debugKey}\" caused by missing dependencies.`);\n    }\n\n    schedule();\n  }\n\n  const isFirstRun = !byCursor[cursor];\n\n  byCursor[cursor] = {\n    ...byCursor[cursor],\n    dependencies,\n    schedule,\n  };\n\n  function setupSignals() {\n    const cleanups = dependencies?.filter(isSignal).map((signal, i) => signal.subscribe(() => {\n      if (debugKey) {\n        // eslint-disable-next-line no-console\n        console.log(`[Teact] Effect \"${debugKey}\" caused by signal #${i} new value:`, signal());\n      }\n\n      byCursor[cursor].schedule();\n    }));\n\n    if (!cleanups?.length) {\n      return undefined;\n    }\n\n    return () => {\n      for (const cleanup of cleanups) {\n        cleanup();\n      }\n    };\n  }\n\n  if (isFirstRun) {\n    byCursor[cursor].releaseSignals = setupSignals();\n  }\n\n  renderingInstance.hooks.effects.cursor++;\n}\n\nexport function useEffect(effect: Effect, dependencies?: readonly any[], debugKey?: string) {\n  return useEffectBase(false, effect, dependencies, debugKey);\n}\n\nexport function useLayoutEffect(effect: Effect, dependencies?: readonly any[], debugKey?: string) {\n  return useEffectBase(true, effect, dependencies, debugKey);\n}\n\nexport function useMemo<T extends any>(\n  resolver: () => T,\n  dependencies: any[],\n  debugKey?: string,\n  debugHitRateKey?: string,\n): T {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n  if (!renderingInstance.hooks.memos) {\n    renderingInstance.hooks.memos = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.memos;\n  let { value } = byCursor[cursor] || {};\n\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  let DEBUG_state: typeof DEBUG_memos[string] | undefined;\n  if (DEBUG && debugHitRateKey) {\n    const instanceKey = `${debugHitRateKey}#${renderingInstance.id}`;\n\n    DEBUG_state = DEBUG_memos[instanceKey];\n    if (!DEBUG_state) {\n      DEBUG_state = {\n        key: instanceKey, calls: 0, misses: 0, hitRate: 0,\n      };\n      DEBUG_memos[instanceKey] = DEBUG_state;\n    }\n\n    DEBUG_state.calls++;\n    DEBUG_state.hitRate = (DEBUG_state.calls - DEBUG_state.misses) / DEBUG_state.calls;\n  }\n\n  if (\n    byCursor[cursor] === undefined\n    || dependencies.length !== byCursor[cursor].dependencies.length\n    || dependencies.some((dependency, i) => dependency !== byCursor[cursor].dependencies[i])\n  ) {\n    if (DEBUG) {\n      if (debugKey) {\n        const msg = `[Teact.useMemo] ${renderingInstance.name} (${debugKey}): Update is caused by:`;\n        if (!byCursor[cursor]) {\n          // eslint-disable-next-line no-console\n          console.log(`${msg} [first render]`);\n        } else {\n          logUnequalProps(byCursor[cursor].dependencies, dependencies, msg, debugKey);\n        }\n      }\n\n      if (DEBUG_state) {\n        DEBUG_state.misses++;\n        DEBUG_state.hitRate = (DEBUG_state.calls - DEBUG_state.misses) / DEBUG_state.calls;\n\n        if (\n          DEBUG_state.calls % 10 === 0\n          && DEBUG_state.calls >= DEBUG_MEMOS_CALLS_THRESHOLD\n          && DEBUG_state.hitRate < 0.25\n        ) {\n          // eslint-disable-next-line no-console\n          console.warn(\n            // eslint-disable-next-line max-len\n            `[Teact] ${DEBUG_state.key}: Hit rate is ${DEBUG_state.hitRate.toFixed(2)} for ${DEBUG_state.calls} calls`,\n          );\n        }\n      }\n    }\n\n    value = resolver();\n  }\n\n  byCursor[cursor] = {\n    value,\n    dependencies,\n  };\n\n  renderingInstance.hooks.memos.cursor++;\n\n  return value;\n}\n\nexport function useCallback<F extends AnyFunction>(newCallback: F, dependencies: any[], debugKey?: string): F {\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  return useMemo(() => newCallback, dependencies, debugKey);\n}\n\nexport function useRef<T>(initial: T): { current: T };\nexport function useRef<T>(): { current: T | undefined }; // TT way (empty is `undefined`)\nexport function useRef<T>(initial: null): { current: T | null }; // React way (empty is `null`)\n// eslint-disable-next-line no-null/no-null\nexport function useRef<T>(initial?: T | null) {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n  if (!renderingInstance.hooks.refs) {\n    renderingInstance.hooks.refs = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.refs;\n  if (!byCursor[cursor]) {\n    byCursor[cursor] = {\n      current: initial,\n    };\n  }\n\n  renderingInstance.hooks.refs.cursor++;\n\n  return byCursor[cursor];\n}\n\nexport function memo<T extends FC_withDebug>(Component: T, debugKey?: string) {\n  function TeactMemoWrapper(props: Props) {\n    return useMemo(\n      () => createElement(Component, props),\n      // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n      Object.values(props),\n      debugKey,\n      DEBUG_MORE ? DEBUG_resolveComponentName(renderingInstance.Component) : undefined,\n    );\n  }\n\n  TeactMemoWrapper.DEBUG_contentComponentName = DEBUG_resolveComponentName(Component);\n\n  return TeactMemoWrapper as T;\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport function DEBUG_resolveComponentName(Component: FC_withDebug) {\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  const { name, DEBUG_contentComponentName } = Component;\n\n  if (name === 'TeactNContainer') {\n    return `container>${DEBUG_contentComponentName}`;\n  }\n\n  if (name === 'TeactMemoWrapper') {\n    return `memo>${DEBUG_contentComponentName}`;\n  }\n\n  return name + (DEBUG_contentComponentName ? `>${DEBUG_contentComponentName}` : '');\n}\n\nexport default {\n  createElement,\n  Fragment,\n};\n","import { DEBUG } from '../../config';\n\ntype Handler = (e: Event) => void;\ntype DelegationRegistry = Map<HTMLElement, Handler>;\n\nconst NON_BUBBLEABLE_EVENTS = new Set(['scroll', 'mouseenter', 'mouseleave', 'load']);\n\nconst documentEventCounters: Record<string, number> = {};\nconst delegationRegistryByEventType: Record<string, DelegationRegistry> = {};\nconst delegatedEventTypesByElement = new Map<HTMLElement, Set<string>>();\n\nexport function addEventListener(element: HTMLElement, propName: string, handler: Handler, asCapture = false) {\n  const eventType = resolveEventType(propName, element);\n  if (canUseEventDelegation(eventType, element, asCapture)) {\n    addDelegatedListener(eventType, element, handler);\n  } else {\n    element.addEventListener(eventType, handler, asCapture);\n  }\n}\n\nexport function removeEventListener(element: HTMLElement, propName: string, handler: Handler, asCapture = false) {\n  const eventType = resolveEventType(propName, element);\n  if (canUseEventDelegation(eventType, element, asCapture)) {\n    removeDelegatedListener(eventType, element);\n  } else {\n    element.removeEventListener(eventType, handler, asCapture);\n  }\n}\n\nfunction resolveEventType(propName: string, element: HTMLElement) {\n  const eventType = propName\n    .replace(/^on/, '')\n    .replace(/Capture$/, '').toLowerCase();\n\n  if (eventType === 'change' && element.tagName !== 'SELECT') {\n    // React behavior repeated here.\n    // https://stackoverflow.com/questions/38256332/in-react-whats-the-difference-between-onchange-and-oninput\n    return 'input';\n  }\n\n  if (eventType === 'doubleclick') {\n    return 'dblclick';\n  }\n\n  // Replace focus/blur by their \"bubbleable\" versions\n  if (eventType === 'focus') {\n    return 'focusin';\n  }\n\n  if (eventType === 'blur') {\n    return 'focusout';\n  }\n\n  return eventType;\n}\n\nfunction canUseEventDelegation(realEventType: string, element: HTMLElement, asCapture: boolean) {\n  return (\n    !asCapture\n    && !NON_BUBBLEABLE_EVENTS.has(realEventType)\n    && element.tagName !== 'VIDEO'\n    && element.tagName !== 'IFRAME'\n  );\n}\n\nfunction addDelegatedListener(eventType: string, element: HTMLElement, handler: Handler) {\n  if (!documentEventCounters[eventType]) {\n    documentEventCounters[eventType] = 0;\n    document.addEventListener(eventType, handleEvent);\n  }\n\n  resolveDelegationRegistry(eventType).set(element, handler);\n  resolveDelegatedEventTypes(element).add(eventType);\n  documentEventCounters[eventType]++;\n}\n\nfunction removeDelegatedListener(eventType: string, element: HTMLElement) {\n  documentEventCounters[eventType]--;\n  if (!documentEventCounters[eventType]) {\n    // Synchronous deletion on 0 will cause perf degradation in the case of 1 element\n    // which is not a real case, so it's ok to do it this way\n    document.removeEventListener(eventType, handleEvent);\n  }\n\n  delegationRegistryByEventType[eventType].delete(element);\n  delegatedEventTypesByElement.get(element)!.delete(eventType);\n}\n\nexport function removeAllDelegatedListeners(element: HTMLElement) {\n  const eventTypes = delegatedEventTypesByElement.get(element);\n  if (!eventTypes) {\n    return;\n  }\n\n  eventTypes.forEach((eventType) => removeDelegatedListener(eventType, element));\n  delegatedEventTypesByElement.delete(element);\n}\n\nfunction handleEvent(realEvent: Event) {\n  const events = delegationRegistryByEventType[realEvent.type];\n\n  if (events) {\n    let furtherCallsPrevented = false;\n    let current: HTMLElement = realEvent.target as HTMLElement;\n\n    const stopPropagation = () => {\n      furtherCallsPrevented = true;\n    };\n\n    const preventDefault = () => {\n      realEvent.preventDefault();\n    };\n\n    // Proxy is a simplest way to provide an access to the event property\n    const event = new Proxy(realEvent, {\n      get(target, p) {\n        if (p === 'currentTarget') {\n          return current;\n        }\n        if (p === 'stopPropagation' || p === 'stopImmediatePropagation') {\n          return stopPropagation;\n        }\n        if (p === 'preventDefault') {\n          // \"this\" is changed to proxy and one can't call methods via it\n          return preventDefault;\n        }\n        return Reflect.get(target, p);\n      },\n    });\n\n    // This can also be limited by teact root\n    while (current && current !== document.body) {\n      const handler = events.get(current);\n      if (handler) {\n        handler(event);\n        if (furtherCallsPrevented) {\n          return;\n        }\n      }\n\n      current = current.parentNode as HTMLElement;\n    }\n  }\n}\n\nfunction resolveDelegationRegistry(eventType: string) {\n  if (!delegationRegistryByEventType[eventType]) {\n    delegationRegistryByEventType[eventType] = new Map();\n  }\n\n  return delegationRegistryByEventType[eventType];\n}\n\nfunction resolveDelegatedEventTypes(element: HTMLElement) {\n  const existing = delegatedEventTypesByElement.get(element);\n  if (existing) {\n    return existing;\n  }\n\n  const newSet = new Set<string>();\n  delegatedEventTypesByElement.set(element, newSet);\n\n  return newSet;\n}\n\nif (DEBUG) {\n  document.addEventListener('dblclick', () => {\n    const documentListenersCount = Object.keys(documentEventCounters).length;\n    const delegatedHandlersCount1 = Object.values(documentEventCounters)\n      .reduce((acc, counter) => acc + counter, 0);\n    const delegationRegistriesCount = Object.keys(delegationRegistryByEventType).length;\n    const delegatedHandlersCount2 = Object.values(delegationRegistryByEventType)\n      .reduce((acc, delegationRegistry) => acc + delegationRegistry.size, 0);\n    const delegationElementsCount = delegatedEventTypesByElement.size;\n    const delegatedEventTypesCount = Array.from(delegatedEventTypesByElement.values())\n      .reduce((acc, eventTypes) => acc + eventTypes.size, 0);\n\n    // eslint-disable-next-line no-console\n    console.warn('DELEGATED EVENTS STATS', {\n      delegatedHandlersCount1,\n      delegatedHandlersCount2,\n      delegatedEventTypesCount,\n      delegationRegistriesCount,\n      delegationElementsCount,\n      documentListenersCount,\n    });\n  });\n}\n","import type { ChangeEvent } from 'react';\n\nimport { DEBUG } from '../../config';\nimport { unique } from '../../util/iteratees';\nimport { addEventListener, removeAllDelegatedListeners, removeEventListener } from './dom-events';\nimport type {\n  VirtualElement,\n  VirtualElementChildren,\n  VirtualElementComponent,\n  VirtualElementFragment,\n  VirtualElementParent,\n  VirtualElementReal,\n  VirtualElementTag,\n} from './teact';\nimport {\n  captureImmediateEffects,\n  hasElementChanged,\n  isParentElement,\n  mountComponent,\n  MountState,\n  renderComponent,\n  unmountComponent,\n  VirtualType,\n} from './teact';\n\ninterface VirtualDomHead {\n  children: [VirtualElement] | [];\n}\n\ninterface SelectionState {\n  selectionStart: number | null;\n  selectionEnd: number | null;\n  isCaretAtEnd: boolean;\n}\n\nconst FILTERED_ATTRIBUTES = new Set(['key', 'ref', 'teactFastList', 'teactOrderKey']);\nconst HTML_ATTRIBUTES = new Set(['dir', 'role', 'form']);\nconst CONTROLLABLE_TAGS = ['INPUT', 'TEXTAREA', 'SELECT'];\nconst MAPPED_ATTRIBUTES: { [k: string]: string } = {\n  autoPlay: 'autoplay',\n  autoComplete: 'autocomplete',\n};\nconst INDEX_KEY_PREFIX = '__indexKey#';\n\nconst headsByElement = new WeakMap<Element, VirtualDomHead>();\nconst extraClasses = new WeakMap<Element, Set<string>>();\nconst extraStyles = new WeakMap<Element, Record<string, string>>();\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nlet DEBUG_virtualTreeSize = 1;\n\nfunction render($element: VirtualElement | undefined, parentEl: HTMLElement) {\n  if (!headsByElement.has(parentEl)) {\n    headsByElement.set(parentEl, { children: [] });\n  }\n\n  const runImmediateEffects = captureImmediateEffects();\n  const $head = headsByElement.get(parentEl)!;\n  const $renderedChild = renderWithVirtual(parentEl, $head.children[0], $element, $head, 0);\n  runImmediateEffects?.();\n\n  $head.children = $renderedChild ? [$renderedChild] : [];\n\n  if (process.env.APP_ENV === 'perf') {\n    DEBUG_virtualTreeSize = 0;\n    DEBUG_addToVirtualTreeSize($head);\n\n    return DEBUG_virtualTreeSize;\n  }\n\n  return undefined;\n}\n\nfunction renderWithVirtual<T extends VirtualElement | undefined>(\n  parentEl: HTMLElement,\n  $current: VirtualElement | undefined,\n  $new: T,\n  $parent: VirtualElementParent | VirtualDomHead,\n  index: number,\n  options: {\n    skipComponentUpdate?: boolean;\n    nextSibling?: ChildNode;\n    forceMoveToEnd?: boolean;\n    fragment?: DocumentFragment;\n  } = {},\n): T {\n  const { skipComponentUpdate, fragment } = options;\n  let { nextSibling } = options;\n\n  const isCurrentComponent = $current && $current.type === VirtualType.Component;\n  const isNewComponent = $new && $new.type === VirtualType.Component;\n  const $newAsReal = $new as VirtualElementReal;\n\n  const isCurrentFragment = $current && !isCurrentComponent && $current.type === VirtualType.Fragment;\n  const isNewFragment = $new && !isNewComponent && $new.type === VirtualType.Fragment;\n\n  if (\n    !skipComponentUpdate\n    && isCurrentComponent && isNewComponent\n    && !hasElementChanged($current!, $new!)\n  ) {\n    $new = updateComponent($current, $new as VirtualElementComponent) as typeof $new;\n  }\n\n  // Parent element may have changed, so we need to update the listener closure.\n  if (\n    !skipComponentUpdate\n    && isNewComponent\n    && ($new as VirtualElementComponent).componentInstance.mountState === MountState.Mounted\n  ) {\n    setupComponentUpdateListener(parentEl, $new as VirtualElementComponent, $parent, index);\n  }\n\n  if ($current === $new) {\n    return $new;\n  }\n\n  if (DEBUG && $new) {\n    const newTarget = 'target' in $new && $new.target;\n    if (newTarget && (!$current || ('target' in $current && newTarget !== $current.target))) {\n      throw new Error('[Teact] Cached virtual element was moved within tree');\n    }\n  }\n\n  if (!$current && $new) {\n    if (isNewComponent || isNewFragment) {\n      if (isNewComponent) {\n        $new = initComponent(parentEl, $new as VirtualElementComponent, $parent, index) as unknown as typeof $new;\n      }\n\n      mountChildren(parentEl, $new as VirtualElementComponent | VirtualElementFragment, { nextSibling, fragment });\n    } else {\n      const canSetTextContent = !fragment\n        && !nextSibling\n        && $newAsReal.type === VirtualType.Text\n        && $parent.children.length === 1\n        && !parentEl.firstChild;\n\n      if (canSetTextContent) {\n        parentEl.textContent = $newAsReal.value;\n        $newAsReal.target = parentEl.firstChild!;\n      } else {\n        const node = createNode($newAsReal);\n        $newAsReal.target = node;\n        insertBefore(fragment || parentEl, node, nextSibling);\n\n        if ($newAsReal.type === VirtualType.Tag) {\n          setElementRef($newAsReal, node as HTMLElement);\n        }\n      }\n    }\n  } else if ($current && !$new) {\n    remount(parentEl, $current, undefined);\n  } else if ($current && $new) {\n    if (hasElementChanged($current, $new)) {\n      if (!nextSibling) {\n        nextSibling = getNextSibling($current);\n      }\n\n      if (isNewComponent || isNewFragment) {\n        if (isNewComponent) {\n          $new = initComponent(parentEl, $new as VirtualElementComponent, $parent, index) as unknown as typeof $new;\n        }\n\n        remount(parentEl, $current, undefined);\n        mountChildren(parentEl, $new as VirtualElementComponent | VirtualElementFragment, { nextSibling, fragment });\n      } else {\n        const node = createNode($newAsReal);\n        $newAsReal.target = node;\n        remount(parentEl, $current, node, nextSibling);\n\n        if ($newAsReal.type === VirtualType.Tag) {\n          setElementRef($newAsReal, node as HTMLElement);\n        }\n      }\n    } else {\n      const isComponent = isCurrentComponent && isNewComponent;\n      const isFragment = isCurrentFragment && isNewFragment;\n\n      if (isComponent || isFragment) {\n        renderChildren(\n          $current,\n          $new as VirtualElementComponent | VirtualElementFragment,\n          parentEl,\n          nextSibling,\n          options.forceMoveToEnd,\n        );\n      } else {\n        const $currentAsReal = $current as VirtualElementReal;\n        const currentTarget = $currentAsReal.target!;\n\n        $newAsReal.target = currentTarget;\n        $currentAsReal.target = undefined; // Help GC\n\n        const isTag = $current.type === VirtualType.Tag;\n        if (isTag) {\n          const $newAsTag = $new as VirtualElementTag;\n\n          setElementRef($current, undefined);\n          setElementRef($newAsTag, currentTarget as HTMLElement);\n\n          if (nextSibling || options.forceMoveToEnd) {\n            insertBefore(parentEl, currentTarget, nextSibling);\n          }\n\n          updateAttributes($current, $newAsTag, currentTarget as HTMLElement);\n          renderChildren($current, $newAsTag, currentTarget as HTMLElement);\n        }\n      }\n    }\n  }\n\n  return $new;\n}\n\nfunction initComponent(\n  parentEl: HTMLElement,\n  $element: VirtualElementComponent,\n  $parent: VirtualElementParent | VirtualDomHead,\n  index: number,\n) {\n  const { componentInstance } = $element;\n\n  if (componentInstance.mountState === MountState.New) {\n    $element = mountComponent(componentInstance);\n    setupComponentUpdateListener(parentEl, $element, $parent, index);\n  }\n\n  return $element;\n}\n\nfunction updateComponent($current: VirtualElementComponent, $new: VirtualElementComponent) {\n  $current.componentInstance.props = $new.componentInstance.props;\n\n  return renderComponent($current.componentInstance);\n}\n\nfunction setupComponentUpdateListener(\n  parentEl: HTMLElement,\n  $element: VirtualElementComponent,\n  $parent: VirtualElementParent | VirtualDomHead,\n  index: number,\n) {\n  const { componentInstance } = $element;\n\n  componentInstance.onUpdate = () => {\n    $parent.children[index] = renderWithVirtual(\n      parentEl,\n      $parent.children[index],\n      componentInstance.$element,\n      $parent,\n      index,\n      { skipComponentUpdate: true },\n    );\n  };\n}\n\nfunction mountChildren(\n  parentEl: HTMLElement,\n  $element: VirtualElementComponent | VirtualElementFragment,\n  options: {\n    nextSibling?: ChildNode;\n    fragment?: DocumentFragment;\n  },\n) {\n  const { children } = $element;\n  for (let i = 0, l = children.length; i < l; i++) {\n    const $child = children[i];\n    const $renderedChild = renderWithVirtual(parentEl, undefined, $child, $element, i, options);\n    if ($renderedChild !== $child) {\n      children[i] = $renderedChild;\n    }\n  }\n}\n\nfunction unmountChildren(parentEl: HTMLElement, $element: VirtualElementComponent | VirtualElementFragment) {\n  for (const $child of $element.children) {\n    renderWithVirtual(parentEl, $child, undefined, $element, -1);\n  }\n}\n\nfunction createNode($element: VirtualElementReal): Node {\n  if ($element.type === VirtualType.Empty) {\n    return document.createTextNode('');\n  }\n\n  if ($element.type === VirtualType.Text) {\n    return document.createTextNode($element.value);\n  }\n\n  const { tag, props, children } = $element;\n  const element = document.createElement(tag);\n\n  processControlled(tag, props);\n\n  // eslint-disable-next-line no-restricted-syntax\n  for (const key in props) {\n    if (!props.hasOwnProperty(key)) continue;\n\n    if (props[key] !== undefined) {\n      setAttribute(element, key, props[key]);\n    }\n  }\n\n  processUncontrolledOnMount(element, props);\n\n  for (let i = 0, l = children.length; i < l; i++) {\n    const $child = children[i];\n    const $renderedChild = renderWithVirtual(element, undefined, $child, $element, i);\n    if ($renderedChild !== $child) {\n      children[i] = $renderedChild;\n    }\n  }\n\n  return element;\n}\n\nfunction remount(\n  parentEl: HTMLElement,\n  $current: VirtualElement,\n  node: Node | undefined,\n  componentNextSibling?: ChildNode,\n) {\n  const isComponent = $current.type === VirtualType.Component;\n  const isFragment = !isComponent && $current.type === VirtualType.Fragment;\n\n  if (isComponent || isFragment) {\n    if (isComponent) {\n      unmountComponent($current.componentInstance);\n    }\n\n    unmountChildren(parentEl, $current);\n\n    if (node) {\n      insertBefore(parentEl, node, componentNextSibling);\n    }\n  } else {\n    if (node) {\n      parentEl.replaceChild(node, $current.target!);\n    } else {\n      parentEl.removeChild($current.target!);\n    }\n\n    unmountRealTree($current);\n  }\n}\n\nfunction unmountRealTree($element: VirtualElement) {\n  if ($element.type === VirtualType.Component) {\n    unmountComponent($element.componentInstance);\n  } else if ($element.type !== VirtualType.Fragment) {\n    if ($element.type === VirtualType.Tag) {\n      extraClasses.delete($element.target!);\n      setElementRef($element, undefined);\n      removeAllDelegatedListeners($element.target!);\n    }\n\n    $element.target = undefined; // Help GC\n\n    if ($element.type !== VirtualType.Tag) {\n      return;\n    }\n  }\n\n  for (const $child of $element.children) {\n    unmountRealTree($child);\n  }\n}\n\nfunction insertBefore(parentEl: HTMLElement | DocumentFragment, node: Node, nextSibling?: ChildNode) {\n  if (nextSibling) {\n    parentEl.insertBefore(node, nextSibling);\n  } else {\n    parentEl.appendChild(node);\n  }\n}\n\nfunction getNextSibling($current: VirtualElement): ChildNode | undefined {\n  if ($current.type === VirtualType.Component || $current.type === VirtualType.Fragment) {\n    const lastChild = $current.children[$current.children.length - 1];\n    return getNextSibling(lastChild);\n  }\n\n  return $current.target!.nextSibling || undefined;\n}\n\nfunction renderChildren(\n  $current: VirtualElementParent,\n  $new: VirtualElementParent,\n  currentEl: HTMLElement,\n  nextSibling?: ChildNode,\n  forceMoveToEnd = false,\n) {\n  if (DEBUG) {\n    DEBUG_checkKeyUniqueness($new.children);\n  }\n\n  if (('props' in $new) && $new.props.teactFastList) {\n    renderFastListChildren($current, $new, currentEl);\n    return;\n  }\n\n  const currentChildren = $current.children;\n  const newChildren = $new.children;\n\n  const currentChildrenLength = currentChildren.length;\n  const newChildrenLength = newChildren.length;\n  const maxLength = Math.max(currentChildrenLength, newChildrenLength);\n\n  const fragment = newChildrenLength > currentChildrenLength ? document.createDocumentFragment() : undefined;\n  const lastCurrentChild = $current.children[currentChildrenLength - 1];\n  const fragmentNextSibling = fragment && (\n    nextSibling || (lastCurrentChild ? getNextSibling(lastCurrentChild) : undefined)\n  );\n\n  for (let i = 0; i < maxLength; i++) {\n    const $renderedChild = renderWithVirtual(\n      currentEl,\n      currentChildren[i],\n      newChildren[i],\n      $new,\n      i,\n      i >= currentChildrenLength ? { fragment } : { nextSibling, forceMoveToEnd },\n    );\n\n    if ($renderedChild && $renderedChild !== newChildren[i]) {\n      newChildren[i] = $renderedChild;\n    }\n  }\n\n  if (fragment) {\n    insertBefore(currentEl, fragment, fragmentNextSibling);\n  }\n}\n\n// This function allows to prepend/append a bunch of new DOM nodes to the top/bottom of preserved ones.\n// It also allows to selectively move particular preserved nodes within their DOM list.\nfunction renderFastListChildren($current: VirtualElementParent, $new: VirtualElementParent, currentEl: HTMLElement) {\n  const currentChildren = $current.children;\n  const newChildren = $new.children;\n\n  const newKeys = new Set();\n  for (const $newChild of newChildren) {\n    const key = 'props' in $newChild ? $newChild.props.key : undefined;\n\n    if (DEBUG && isParentElement($newChild)) {\n      // eslint-disable-next-line no-null/no-null\n      if (key === undefined || key === null) {\n        // eslint-disable-next-line no-console\n        console.warn('Missing `key` in `teactFastList`');\n      }\n\n      if ($newChild.type === VirtualType.Fragment) {\n        throw new Error('[Teact] Fragment can not be child of container with `teactFastList`');\n      }\n    }\n\n    newKeys.add(key);\n  }\n\n  // Build a collection of old children that also remain in the new list\n  let currentRemainingIndex = 0;\n  const remainingByKey: Record<string, { $element: VirtualElement; index: number; orderKey?: number }> = {};\n  for (let i = 0, l = currentChildren.length; i < l; i++) {\n    const $currentChild = currentChildren[i];\n\n    let key = 'props' in $currentChild ? $currentChild.props.key : undefined;\n    // eslint-disable-next-line no-null/no-null\n    const isKeyPresent = key !== undefined && key !== null;\n\n    // First we process removed children\n    if (isKeyPresent && !newKeys.has(key)) {\n      renderWithVirtual(currentEl, $currentChild, undefined, $new, -1);\n\n      continue;\n    } else if (!isKeyPresent) {\n      const $newChild = newChildren[i];\n      const newChildKey = ($newChild && 'props' in $newChild) ? $newChild.props.key : undefined;\n      // If a non-key element remains at the same index we preserve it with a virtual `key`\n      if ($newChild && !newChildKey) {\n        key = `${INDEX_KEY_PREFIX}${i}`;\n        // Otherwise, we just remove it\n      } else {\n        renderWithVirtual(currentEl, $currentChild, undefined, $new, -1);\n\n        continue;\n      }\n    }\n\n    // Then we build up info about remaining children\n    remainingByKey[key] = {\n      $element: $currentChild,\n      index: currentRemainingIndex++,\n      orderKey: 'props' in $currentChild ? $currentChild.props.teactOrderKey : undefined,\n    };\n  }\n\n  let fragmentIndex: number | undefined;\n  let fragmentSize: number | undefined;\n\n  let currentPreservedIndex = 0;\n\n  for (let i = 0, l = newChildren.length; i < l; i++) {\n    const $newChild = newChildren[i];\n    const key = 'props' in $newChild ? $newChild.props.key : `${INDEX_KEY_PREFIX}${i}`;\n    const currentChildInfo = remainingByKey[key];\n\n    if (!currentChildInfo) {\n      if (fragmentSize === undefined) {\n        fragmentIndex = i;\n        fragmentSize = 0;\n      }\n\n      fragmentSize++;\n      continue;\n    }\n\n    // This prepends new children to the top\n    if (fragmentSize) {\n      renderFragment(fragmentIndex!, fragmentSize, currentEl, $new);\n      fragmentSize = undefined;\n      fragmentIndex = undefined;\n    }\n\n    // Now we check if a preserved node was moved within preserved list\n    const newOrderKey = 'props' in $newChild ? $newChild.props.teactOrderKey : undefined;\n    // That is indicated by a changed `teactOrderKey` value\n    const shouldMoveNode = (\n      currentChildInfo.index !== currentPreservedIndex && (!newOrderKey || currentChildInfo.orderKey !== newOrderKey)\n    );\n    const isMovingDown = shouldMoveNode && currentPreservedIndex > currentChildInfo.index;\n\n    if (!shouldMoveNode || isMovingDown) {\n      currentPreservedIndex++;\n    }\n\n    const nextSibling = currentEl.childNodes[isMovingDown ? i + 1 : i];\n    const options = shouldMoveNode ? (nextSibling ? { nextSibling } : { forceMoveToEnd: true }) : undefined;\n\n    const $renderedChild = renderWithVirtual(currentEl, currentChildInfo.$element, $newChild, $new, i, options);\n    if ($renderedChild !== $newChild) {\n      newChildren[i] = $renderedChild;\n    }\n  }\n\n  // This appends new children to the bottom\n  if (fragmentSize) {\n    renderFragment(fragmentIndex!, fragmentSize, currentEl, $new);\n  }\n}\n\nfunction renderFragment(\n  fragmentIndex: number, fragmentSize: number, parentEl: HTMLElement, $parent: VirtualElementParent,\n) {\n  const nextSibling = parentEl.childNodes[fragmentIndex];\n\n  if (fragmentSize === 1) {\n    const $child = $parent.children[fragmentIndex];\n    const $renderedChild = renderWithVirtual(parentEl, undefined, $child, $parent, fragmentIndex, { nextSibling });\n    if ($renderedChild !== $child) {\n      $parent.children[fragmentIndex] = $renderedChild;\n    }\n\n    return;\n  }\n\n  const fragment = document.createDocumentFragment();\n\n  for (let i = fragmentIndex; i < fragmentIndex + fragmentSize; i++) {\n    const $child = $parent.children[i];\n    const $renderedChild = renderWithVirtual(parentEl, undefined, $child, $parent, i, { fragment });\n    if ($renderedChild !== $child) {\n      $parent.children[i] = $renderedChild;\n    }\n  }\n\n  insertBefore(parentEl, fragment, nextSibling);\n}\n\nfunction setElementRef($element: VirtualElementTag, htmlElement: HTMLElement | undefined) {\n  const { ref } = $element.props;\n\n  if (typeof ref === 'object') {\n    ref.current = htmlElement;\n  } else if (typeof ref === 'function') {\n    ref(htmlElement);\n  }\n}\n\nfunction processControlled(tag: string, props: AnyLiteral) {\n  // TODO Remove after tests\n  if (!props.teactExperimentControlled) {\n    return;\n  }\n\n  const isValueControlled = props.value !== undefined;\n  const isCheckedControlled = props.checked !== undefined;\n  const isControlled = (isValueControlled || isCheckedControlled) && CONTROLLABLE_TAGS.includes(tag.toUpperCase());\n  if (!isControlled) {\n    return;\n  }\n\n  const {\n    value, checked, onInput, onChange,\n  } = props;\n\n  props.onChange = undefined;\n  props.onInput = (e: ChangeEvent<HTMLInputElement>) => {\n    onInput?.(e);\n    onChange?.(e);\n\n    if (value !== undefined && value !== e.currentTarget.value) {\n      const { selectionStart, selectionEnd } = e.currentTarget;\n      const isCaretAtEnd = selectionStart === selectionEnd && selectionEnd === e.currentTarget.value.length;\n\n      e.currentTarget.value = value;\n\n      if (typeof selectionStart === 'number' && typeof selectionEnd === 'number') {\n        e.currentTarget.setSelectionRange(selectionStart, selectionEnd);\n\n        const selectionState: SelectionState = { selectionStart, selectionEnd, isCaretAtEnd };\n        // eslint-disable-next-line no-underscore-dangle\n        e.currentTarget.dataset.__teactSelectionState = JSON.stringify(selectionState);\n      }\n    }\n\n    if (checked !== undefined) {\n      e.currentTarget.checked = checked;\n    }\n  };\n}\n\nfunction processUncontrolledOnMount(element: HTMLElement, props: AnyLiteral) {\n  if (!CONTROLLABLE_TAGS.includes(element.tagName)) {\n    return;\n  }\n\n  if (props.defaultValue) {\n    setAttribute(element, 'value', props.defaultValue);\n  }\n\n  if (props.defaultChecked) {\n    setAttribute(element, 'checked', props.defaultChecked);\n  }\n}\n\nfunction updateAttributes($current: VirtualElementTag, $new: VirtualElementTag, element: HTMLElement) {\n  processControlled(element.tagName, $new.props);\n\n  const currentEntries = Object.entries($current.props);\n  const newEntries = Object.entries($new.props);\n\n  for (const [key, currentValue] of currentEntries) {\n    const newValue = $new.props[key];\n\n    if (\n      currentValue !== undefined\n      && (\n        newValue === undefined\n        || (currentValue !== newValue && key.startsWith('on'))\n      )\n    ) {\n      removeAttribute(element, key, currentValue);\n    }\n  }\n\n  for (const [key, newValue] of newEntries) {\n    const currentValue = $current.props[key];\n\n    if (newValue !== undefined && newValue !== currentValue) {\n      setAttribute(element, key, newValue);\n    }\n  }\n}\n\nfunction setAttribute(element: HTMLElement, key: string, value: any) {\n  if (key === 'className') {\n    updateClassName(element, value);\n  } else if (key === 'value') {\n    const inputEl = element as HTMLInputElement;\n\n    if (inputEl.value !== value) {\n      inputEl.value = value;\n\n      // eslint-disable-next-line no-underscore-dangle\n      const selectionStateJson = inputEl.dataset.__teactSelectionState;\n      if (selectionStateJson) {\n        const { selectionStart, selectionEnd, isCaretAtEnd } = JSON.parse(selectionStateJson) as SelectionState;\n\n        if (isCaretAtEnd) {\n          const length = inputEl.value.length;\n          inputEl.setSelectionRange(length, length);\n        } else if (typeof selectionStart === 'number' && typeof selectionEnd === 'number') {\n          inputEl.setSelectionRange(selectionStart, selectionEnd);\n        }\n      }\n    }\n  } else if (key === 'style') {\n    updateStyle(element, value);\n  } else if (key === 'dangerouslySetInnerHTML') {\n    // eslint-disable-next-line no-underscore-dangle\n    element.innerHTML = value.__html;\n  } else if (key.startsWith('on')) {\n    addEventListener(element, key, value, key.endsWith('Capture'));\n  } else if (key.startsWith('data-') || key.startsWith('aria-') || HTML_ATTRIBUTES.has(key)) {\n    element.setAttribute(key, value);\n  } else if (!FILTERED_ATTRIBUTES.has(key)) {\n    (element as any)[MAPPED_ATTRIBUTES[key] || key] = value;\n  }\n}\n\nfunction removeAttribute(element: HTMLElement, key: string, value: any) {\n  if (key === 'className') {\n    updateClassName(element, '');\n  } else if (key === 'value') {\n    (element as HTMLInputElement).value = '';\n  } else if (key === 'style') {\n    updateStyle(element, '');\n  } else if (key === 'dangerouslySetInnerHTML') {\n    element.innerHTML = '';\n  } else if (key.startsWith('on')) {\n    removeEventListener(element, key, value, key.endsWith('Capture'));\n  } else if (!FILTERED_ATTRIBUTES.has(key)) {\n    element.removeAttribute(key);\n  }\n}\n\nfunction updateClassName(element: HTMLElement, value: string) {\n  const extra = extraClasses.get(element);\n  if (!extra) {\n    element.className = value;\n    return;\n  }\n\n  const extraArray = Array.from(extra);\n  if (value) {\n    extraArray.push(value);\n  }\n\n  element.className = extraArray.join(' ');\n}\n\nfunction updateStyle(element: HTMLElement, value: string) {\n  element.style.cssText = value;\n\n  const extraObject = extraStyles.get(element);\n  if (extraObject) {\n    applyExtraStyles(element);\n  }\n}\n\nexport function addExtraClass(element: Element, className: string, forceSingle = false) {\n  if (!forceSingle) {\n    const classNames = className.split(' ');\n    if (classNames.length > 1) {\n      for (const cn of classNames) {\n        addExtraClass(element, cn, true);\n      }\n\n      return;\n    }\n  }\n\n  element.classList.add(className);\n\n  const classList = extraClasses.get(element);\n  if (classList) {\n    classList.add(className);\n  } else {\n    extraClasses.set(element, new Set([className]));\n  }\n}\n\nexport function removeExtraClass(element: Element, className: string, forceSingle = false) {\n  if (!forceSingle) {\n    const classNames = className.split(' ');\n    if (classNames.length > 1) {\n      for (const cn of classNames) {\n        removeExtraClass(element, cn, true);\n      }\n\n      return;\n    }\n  }\n\n  element.classList.remove(className);\n\n  const classList = extraClasses.get(element);\n  if (classList) {\n    classList.delete(className);\n\n    if (!classList.size) {\n      extraClasses.delete(element);\n    }\n  }\n}\n\nexport function toggleExtraClass(element: Element, className: string, force?: boolean, forceSingle = false) {\n  if (!forceSingle) {\n    const classNames = className.split(' ');\n    if (classNames.length > 1) {\n      for (const cn of classNames) {\n        toggleExtraClass(element, cn, force, true);\n      }\n\n      return;\n    }\n  }\n\n  element.classList.toggle(className, force);\n\n  if (element.classList.contains(className)) {\n    addExtraClass(element, className);\n  } else {\n    removeExtraClass(element, className);\n  }\n}\n\nexport function setExtraStyles(element: HTMLElement, styles: Partial<CSSStyleDeclaration> & AnyLiteral) {\n  extraStyles.set(element, styles);\n  applyExtraStyles(element);\n}\n\nfunction applyExtraStyles(element: HTMLElement) {\n  const standardStyles = Object.entries(extraStyles.get(element)!).reduce<Record<string, string>>(\n    (acc, [prop, value]) => {\n      if (prop.startsWith('--')) {\n        element.style.setProperty(prop, value);\n      } else {\n        acc[prop] = value;\n      }\n\n      return acc;\n    },\n    {},\n  );\n\n  Object.assign(element.style, standardStyles);\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nfunction DEBUG_addToVirtualTreeSize($current: VirtualElementParent | VirtualDomHead) {\n  DEBUG_virtualTreeSize += $current.children.length;\n\n  $current.children.forEach(($child) => {\n    if (isParentElement($child)) {\n      DEBUG_addToVirtualTreeSize($child);\n    }\n  });\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nfunction DEBUG_checkKeyUniqueness(children: VirtualElementChildren) {\n  const firstChild = children[0];\n  if (firstChild && 'props' in firstChild && firstChild.props.key !== undefined) {\n    const keys = children.reduce((acc: any[], child) => {\n      if ('props' in child && child.props.key) {\n        acc.push(child.props.key);\n      }\n\n      return acc;\n    }, []);\n\n    if (keys.length !== unique(keys).length) {\n      // eslint-disable-next-line no-console\n      console.warn('[Teact] Duplicated keys:', keys.filter((e, i, a) => a.indexOf(e) !== i));\n      throw new Error('[Teact] Children keys are not unique');\n    }\n  }\n}\n\nconst TeactDOM = { render };\nexport default TeactDOM;\n","import { useCallback, useState } from '../lib/teact/teact';\n\nconst useForceUpdate = () => {\n  const [, setTrigger] = useState<boolean>(false);\n\n  return useCallback(() => {\n    setTrigger((trigger) => !trigger);\n  }, []);\n};\n\nexport default useForceUpdate;\n","import { useRef } from '../lib/teact/teact';\n\n// Allows to use state value as \"silent\" dependency in hooks (not causing updates).\n// Also useful for state values that update frequently (such as controlled input value).\nexport function useStateRef<T>(value: T) {\n  const ref = useRef<T>(value);\n  ref.current = value;\n  return ref;\n}\n","import { useCallback } from '../lib/teact/teact';\n\nimport { useStateRef } from './useStateRef';\n\nexport default function useLastCallback<T extends AnyFunction>(callback?: T) {\n  const ref = useStateRef(callback);\n\n  // No need for ref dependency\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  return useCallback((...args: Parameters<T>) => ref.current?.(...args), []) as T;\n}\n","import { useEffect } from '../lib/teact/teact';\n\nimport { createCallbackManager } from '../util/callbacks';\nimport useLastCallback from './useLastCallback';\n\n// Make sure to end even if end callback was not called (which was some hardly-reproducible bug)\nconst AUTO_END_TIMEOUT = 1000;\n\nconst startCallbacks = createCallbackManager();\nconst endCallbacks = createCallbackManager();\n\nlet timeout: number | undefined;\nlet isAnimating = false;\n\nconst useHeavyAnimationCheck = (\n  onStart?: AnyToVoidFunction,\n  onEnd?: AnyToVoidFunction,\n  isDisabled = false,\n) => {\n  const lastOnStart = useLastCallback(onStart);\n  const lastOnEnd = useLastCallback(onEnd);\n\n  useEffect(() => {\n    if (isDisabled) {\n      return undefined;\n    }\n\n    if (isAnimating) {\n      lastOnStart();\n    }\n\n    startCallbacks.addCallback(lastOnStart);\n    endCallbacks.addCallback(lastOnEnd);\n\n    return () => {\n      endCallbacks.removeCallback(lastOnEnd);\n      startCallbacks.removeCallback(lastOnStart);\n    };\n  }, [isDisabled, lastOnEnd, lastOnStart]);\n};\n\nexport function isHeavyAnimating() {\n  return isAnimating;\n}\n\nexport function dispatchHeavyAnimationEvent(duration = AUTO_END_TIMEOUT) {\n  if (!isAnimating) {\n    isAnimating = true;\n    startCallbacks.runCallbacks();\n  }\n\n  if (timeout) {\n    clearTimeout(timeout);\n    timeout = undefined;\n  }\n\n  // Race condition may happen if another `dispatchHeavyAnimationEvent` is called before `onEnd`\n  function onEnd() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = undefined;\n    }\n\n    isAnimating = false;\n    endCallbacks.runCallbacks();\n  }\n\n  timeout = window.setTimeout(onEnd, duration);\n\n  return onEnd;\n}\n\nexport default useHeavyAnimationCheck;\n","import { useRef } from '../lib/teact/teact';\n\nimport generateUniqueId from '../util/generateUniqueId';\n\nexport default function useUniqueId() {\n  const idRef = useRef<string>();\n\n  if (!idRef.current) {\n    idRef.current = generateUniqueId();\n  }\n\n  return idRef.current;\n}\n","import { DEBUG, DEBUG_MORE } from '../../config';\nimport arePropsShallowEqual, { logUnequalProps } from '../../util/arePropsShallowEqual';\nimport { handleError } from '../../util/handleError';\nimport { orderBy } from '../../util/iteratees';\nimport { throttleWithTickEnd } from '../../util/schedulers';\nimport { requestMeasure } from '../fasterdom/fasterdom';\nimport type { FC, FC_withDebug, Props } from './teact';\nimport React, { DEBUG_resolveComponentName, useEffect } from './teact';\n\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport { isHeavyAnimating } from '../../hooks/useHeavyAnimationCheck';\nimport useUniqueId from '../../hooks/useUniqueId';\n\nexport default React;\n\ntype GlobalState =\n  AnyLiteral\n  & { DEBUG_capturedId?: number };\ntype ActionNames = string;\ntype ActionPayload = any;\n\nexport interface ActionOptions {\n  forceOnHeavyAnimation?: boolean;\n  // Workaround for iOS gesture history navigation\n  forceSyncOnIOs?: boolean;\n  noUpdate?: boolean;\n}\n\ntype Actions = Record<ActionNames, (payload?: ActionPayload, options?: ActionOptions) => void>;\n\ntype ActionHandler = (\n  global: GlobalState,\n  actions: Actions,\n  payload: any,\n) => GlobalState | void | Promise<void>;\n\ntype DetachWhenChanged = (current: any) => void;\ntype MapStateToProps<OwnProps = undefined> = (\n  (global: GlobalState, ownProps: OwnProps, detachWhenChanged: DetachWhenChanged) => AnyLiteral\n  );\n\nlet currentGlobal = {} as GlobalState;\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nlet DEBUG_currentCapturedId: number | undefined;\n// eslint-disable-next-line @typescript-eslint/naming-convention\nconst DEBUG_releaseCapturedIdThrottled = throttleWithTickEnd(() => {\n  DEBUG_currentCapturedId = undefined;\n});\n\nconst actionHandlers: Record<string, ActionHandler[]> = {};\nconst callbacks: Function[] = [updateContainers];\nconst immediateCallbacks: Function[] = [];\nconst actions = {} as Actions;\nconst containers = new Map<string, {\n  mapStateToProps: MapStateToProps<any>;\n  ownProps: Props;\n  mappedProps?: Props;\n  forceUpdate: Function;\n  isDetached: boolean;\n  detachReason: any;\n  detachWhenChanged: DetachWhenChanged;\n  DEBUG_updates: number;\n  DEBUG_componentName: string;\n}>();\n\nconst runCallbacksThrottled = throttleWithTickEnd(runCallbacks);\n\nlet forceOnHeavyAnimation = true;\n\nfunction runImmediateCallbacks() {\n  immediateCallbacks.forEach((cb) => cb(currentGlobal));\n}\n\nfunction runCallbacks() {\n  if (forceOnHeavyAnimation) {\n    forceOnHeavyAnimation = false;\n  } else if (isHeavyAnimating()) {\n    requestMeasure(runCallbacksThrottled);\n    return;\n  }\n\n  callbacks.forEach((cb) => cb(currentGlobal));\n}\n\nexport function setGlobal(newGlobal?: GlobalState, options?: ActionOptions) {\n  if (typeof newGlobal === 'object' && newGlobal !== currentGlobal) {\n    if (DEBUG) {\n      if (newGlobal.DEBUG_capturedId && newGlobal.DEBUG_capturedId !== DEBUG_currentCapturedId) {\n        throw new Error('[TeactN.setGlobal] Attempt to set an outdated global');\n      }\n\n      DEBUG_currentCapturedId = undefined;\n    }\n\n    currentGlobal = newGlobal;\n\n    if (!options?.noUpdate) runImmediateCallbacks();\n\n    if (options?.forceSyncOnIOs) {\n      forceOnHeavyAnimation = true;\n      runCallbacks();\n    } else {\n      if (options?.forceOnHeavyAnimation) {\n        forceOnHeavyAnimation = true;\n      }\n\n      runCallbacksThrottled();\n    }\n  }\n}\n\nexport function getGlobal() {\n  if (DEBUG) {\n    DEBUG_currentCapturedId = Math.random();\n    currentGlobal = {\n      ...currentGlobal,\n      DEBUG_capturedId: DEBUG_currentCapturedId,\n    };\n    DEBUG_releaseCapturedIdThrottled();\n  }\n\n  return currentGlobal;\n}\n\nexport function getActions() {\n  return actions;\n}\n\nlet actionQueue: NoneToVoidFunction[] = [];\n\nfunction handleAction(name: string, payload?: ActionPayload, options?: ActionOptions) {\n  actionQueue.push(() => {\n    actionHandlers[name]?.forEach((handler) => {\n      const response = handler(DEBUG ? getGlobal() : currentGlobal, actions, payload);\n      if (!response || typeof response.then === 'function') {\n        return;\n      }\n\n      setGlobal(response as GlobalState, options);\n    });\n  });\n\n  if (actionQueue.length === 1) {\n    try {\n      while (actionQueue.length) {\n        actionQueue[0]();\n        actionQueue.shift();\n      }\n    } finally {\n      actionQueue = [];\n    }\n  }\n}\n\nfunction updateContainers() {\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  let DEBUG_startAt: number | undefined;\n  if (DEBUG) {\n    DEBUG_startAt = performance.now();\n  }\n\n  // eslint-disable-next-line no-restricted-syntax\n  for (const container of containers.values()) {\n    const {\n      mapStateToProps, ownProps, mappedProps, forceUpdate, isDetached, detachWhenChanged,\n    } = container;\n\n    if (isDetached) {\n      continue;\n    }\n\n    let newMappedProps;\n\n    try {\n      newMappedProps = mapStateToProps(currentGlobal, ownProps, detachWhenChanged);\n\n      if (container.isDetached) {\n        continue;\n      }\n    } catch (err: any) {\n      handleError(err);\n\n      return;\n    }\n\n    if (DEBUG) {\n      if (Object.values(newMappedProps).some(Number.isNaN)) {\n        // eslint-disable-next-line no-console\n        console.warn(\n          // eslint-disable-next-line max-len\n          `[TeactN] Some of \\`${container.DEBUG_componentName}\\` mappers contain NaN values. This may cause redundant updates because of incorrect equality check.`,\n        );\n      }\n    }\n\n    if (Object.keys(newMappedProps).length && !arePropsShallowEqual(mappedProps!, newMappedProps)) {\n      if (DEBUG_MORE) {\n        logUnequalProps(\n          mappedProps!,\n          newMappedProps,\n          `[TeactN] Will update ${container.DEBUG_componentName} caused by:`,\n        );\n      }\n\n      container.mappedProps = newMappedProps;\n      container.DEBUG_updates++;\n\n      forceUpdate();\n    }\n  }\n\n  if (DEBUG) {\n    const updateTime = performance.now() - DEBUG_startAt!;\n    if (updateTime > 7) {\n      // eslint-disable-next-line no-console\n      console.warn(`[TeactN] Slow containers update: ${Math.round(updateTime)} ms`);\n    }\n  }\n}\n\nexport function addActionHandler(name: ActionNames, handler: ActionHandler) {\n  if (!actionHandlers[name]) {\n    actionHandlers[name] = [];\n\n    actions[name] = (payload?: ActionPayload, options?: ActionOptions) => {\n      handleAction(name, payload, options);\n    };\n  }\n\n  actionHandlers[name].push(handler);\n}\n\nexport function addCallback(cb: Function, isImmediate = false) {\n  (isImmediate ? immediateCallbacks : callbacks).push(cb);\n}\n\nexport function removeCallback(cb: Function, isImmediate = false) {\n  const index = (isImmediate ? immediateCallbacks : callbacks).indexOf(cb);\n  if (index !== -1) {\n    (isImmediate ? immediateCallbacks : callbacks).splice(index, 1);\n  }\n}\n\nexport function withGlobal<OwnProps extends AnyLiteral>(\n  mapStateToProps: MapStateToProps<OwnProps> = () => ({}),\n) {\n  return (Component: FC) => {\n    function TeactNContainer(props: OwnProps) {\n      const id = useUniqueId();\n      const forceUpdate = useForceUpdate();\n\n      useEffect(() => {\n        return () => {\n          containers.delete(id);\n        };\n      }, [id]);\n\n      let container = containers.get(id)!;\n      if (!container) {\n        container = {\n          mapStateToProps,\n          ownProps: props,\n          forceUpdate,\n          isDetached: false,\n          detachReason: undefined,\n          // This allows to ignore changes in global during animation before unmount\n          detachWhenChanged: (current) => {\n            const { detachReason } = container!;\n\n            if (detachReason === undefined && current !== undefined) {\n              container!.detachReason = current;\n            } else if (detachReason !== undefined && detachReason !== current) {\n              container!.isDetached = true;\n            }\n          },\n          DEBUG_updates: 0,\n          DEBUG_componentName: Component.name,\n        };\n\n        containers.set(id, container);\n      }\n\n      if (!container.mappedProps || !arePropsShallowEqual(container.ownProps, props)) {\n        container.ownProps = props;\n\n        if (!container.isDetached) {\n          try {\n            container.mappedProps = mapStateToProps(currentGlobal, props, container.detachWhenChanged);\n          } catch (err: any) {\n            handleError(err);\n          }\n        }\n      }\n\n      // eslint-disable-next-line react/jsx-props-no-spreading\n      return <Component {...container.mappedProps} {...props} />;\n    }\n\n    (TeactNContainer as FC_withDebug).DEBUG_contentComponentName = DEBUG_resolveComponentName(Component);\n\n    return TeactNContainer;\n  };\n}\n\nexport function typify<\n  ProjectGlobalState,\n  ActionPayloads,\n>() {\n  type ProjectActionNames = keyof ActionPayloads;\n\n  // When payload is allowed to be `undefined` we consider it optional\n  type ProjectActions = {\n    [ActionName in ProjectActionNames]:\n    (undefined extends ActionPayloads[ActionName] ? (\n      (payload?: ActionPayloads[ActionName], options?: ActionOptions) => void\n    ) : (\n      (payload: ActionPayloads[ActionName], options?: ActionOptions) => void\n    ))\n  };\n\n  type ActionHandlers = {\n    [ActionName in keyof ActionPayloads]: (\n      global: ProjectGlobalState,\n      actions: ProjectActions,\n      payload: ActionPayloads[ActionName],\n    ) => ProjectGlobalState | void | Promise<void>;\n  };\n\n  return {\n    getGlobal: getGlobal as <T extends ProjectGlobalState>() => T,\n    setGlobal: setGlobal as (state: ProjectGlobalState, options?: ActionOptions) => void,\n    getActions: getActions as () => ProjectActions,\n    addActionHandler: addActionHandler as <ActionName extends ProjectActionNames>(\n      name: ActionName,\n      handler: ActionHandlers[ActionName],\n    ) => void,\n    withGlobal: withGlobal as <OwnProps extends AnyLiteral>(\n      mapStateToProps: (\n        (global: ProjectGlobalState, ownProps: OwnProps, detachWhenChanged: DetachWhenChanged) => AnyLiteral),\n    ) => (Component: FC) => FC<OwnProps>,\n  };\n}\n\nif (DEBUG) {\n  (window as any).getGlobal = getGlobal;\n  (window as any).setGlobal = setGlobal;\n\n  document.addEventListener('dblclick', () => {\n    // eslint-disable-next-line no-console\n    console.warn(\n      'GLOBAL CONTAINERS',\n      orderBy(\n        Array.from(containers.values())\n          .map(({ DEBUG_componentName, DEBUG_updates }) => ({ DEBUG_componentName, DEBUG_updates })),\n        'DEBUG_updates',\n        'desc',\n      ),\n    );\n  });\n}\n","import { typify } from '../lib/teact/teactn';\n\nimport type { ActionPayloads, GlobalState } from './types';\n\nconst typed = typify<GlobalState, ActionPayloads>();\n\nexport const getGlobal = typed.getGlobal;\nexport const setGlobal = typed.setGlobal;\nexport const getActions = typed.getActions;\nexport const addActionHandler = typed.addActionHandler;\nexport const withGlobal = typed.withGlobal;\n","import type { ApiTonConnectProof } from '../api/tonConnect/types';\nimport type {\n  ApiAnyDisplayError,\n  ApiBackendStakingState,\n  ApiDapp,\n  ApiDappPermissions,\n  ApiDappTransaction,\n  ApiHistoryList,\n  ApiLedgerDriver,\n  ApiNetwork,\n  ApiNft,\n  ApiParsedPayload,\n  ApiPoolState,\n  ApiToken,\n  ApiTransaction,\n  ApiUpdate,\n} from '../api/types';\nimport type { LedgerWalletInfo } from '../util/ledger/types';\n\nexport type AnimationLevel = 0 | 1 | 2;\nexport type Theme = 'light' | 'dark' | 'system';\nexport type NotificationType = {\n  icon?: string;\n  message: string;\n};\n\nexport type LangCode = 'en' | 'es' | 'ru' | 'zh-Hant' | 'zh-Hans';\n\nexport interface LangItem {\n  langCode: LangCode;\n  name: string;\n  nativeName: string;\n  rtl: boolean;\n}\n\nexport interface LangString {\n  value?: string;\n}\n\nexport type LangPack = Record<string, LangString>;\n\nexport type AuthMethod = 'createAccount' | 'importMnemonic' | 'importHardwareWallet';\n\nexport enum AppState {\n  Auth,\n  Main,\n  Settings,\n  Ledger,\n  Inactive,\n}\n\nexport enum AuthState {\n  none,\n  creatingWallet,\n  createPassword,\n  createBackup,\n  importWallet,\n  importWalletCreatePassword,\n  ready,\n  about,\n}\n\nexport enum TransferState {\n  None,\n  WarningHardware,\n  Initial,\n  Confirm,\n  Password,\n  ConnectHardware,\n  ConfirmHardware,\n  Complete,\n}\n\nexport enum DappConnectState {\n  Info,\n  Password,\n  ConnectHardware,\n  ConfirmHardware,\n}\n\nexport enum HardwareConnectState {\n  Connect,\n  Connecting,\n  Failed,\n  Connected,\n  WaitingForBrowser,\n}\n\nexport enum StakingState {\n  None,\n\n  StakeInitial,\n  StakePassword,\n  StakeComplete,\n\n  UnstakeInitial,\n  UnstakePassword,\n  UnstakeComplete,\n}\n\nexport type UserToken = {\n  amount: number;\n  name: string;\n  symbol: string;\n  image?: string;\n  slug: string;\n  price: number;\n  decimals: number;\n  change24h: number;\n  change7d: number;\n  change30d: number;\n  history24h?: ApiHistoryList;\n  history7d?: ApiHistoryList;\n  history30d?: ApiHistoryList;\n  isDisabled: boolean;\n  keywords?: string[];\n};\n\nexport type TokenPeriod = '24h' | '7d' | '30d';\n\nexport interface Account {\n  title?: string;\n  address: string;\n  isHardware?: boolean;\n  ledger?: {\n    index: number;\n    driver: ApiLedgerDriver;\n  };\n}\n\nexport interface AccountState {\n  balances?: {\n    bySlug: Record<string, string>;\n  };\n  transactions?: {\n    isLoading?: boolean;\n    byTxId: Record<string, ApiTransaction>;\n    txIdsBySlug?: Record<string, string[]>;\n    newestTransactionsBySlug?: Record<string, ApiTransaction>;\n  };\n  nfts?: {\n    byAddress: Record<string, ApiNft>;\n    orderedAddresses?: string[];\n  };\n  isBackupRequired?: boolean;\n  activeDappOrigin?: string;\n  currentTokenSlug?: string;\n  currentTransactionId?: string;\n  currentTokenPeriod?: TokenPeriod;\n  savedAddresses?: Record<string, string>;\n  stakingBalance?: number;\n  isUnstakeRequested?: boolean;\n  poolState?: ApiPoolState;\n  stakingHistory?: ApiBackendStakingState;\n}\n\nexport interface AccountSettings {\n  orderedSlugs?: string[];\n  enabledSlugs?: string[];\n  disabledSlugs?: string[];\n}\n\nexport type GlobalState = {\n  appState: AppState;\n\n  auth: {\n    state: AuthState;\n    method?: AuthMethod;\n    isLoading?: boolean;\n    mnemonic?: string[];\n    mnemonicCheckIndexes?: number[];\n    accountId?: string;\n    address?: string;\n    error?: string;\n    password?: string;\n  };\n\n  hardware: {\n    hardwareState?: HardwareConnectState;\n    hardwareWallets?: LedgerWalletInfo[];\n    hardwareSelectedIndices?: number[];\n    isRemoteTab?: boolean;\n    isLedgerConnected?: boolean;\n    isTonAppConnected?: boolean;\n  };\n\n  currentTransfer: {\n    state: TransferState;\n    isLoading?: boolean;\n    tokenSlug?: string;\n    toAddress?: string;\n    toAddressName?: string;\n    error?: string;\n    amount?: number;\n    fee?: string;\n    comment?: string;\n    promiseId?: string;\n    txId?: string;\n    rawPayload?: string;\n    parsedPayload?: ApiParsedPayload;\n    stateInit?: string;\n    shouldEncrypt?: boolean;\n  };\n\n  currentSignature?: {\n    promiseId: string;\n    dataHex: string;\n    error?: string;\n    isSigned?: boolean;\n  };\n\n  currentDappTransfer: {\n    state: TransferState;\n    promiseId?: string;\n    isLoading?: boolean;\n    transactions?: ApiDappTransaction[];\n    viewTransactionOnIdx?: number;\n    fee?: string;\n    dapp?: ApiDapp;\n    error?: string;\n  };\n\n  dappConnectRequest?: {\n    state: DappConnectState;\n    promiseId?: string;\n    accountId?: string;\n    dapp: ApiDapp;\n    permissions?: ApiDappPermissions;\n    proof?: ApiTonConnectProof;\n    error?: string;\n  };\n\n  staking: {\n    state: StakingState;\n    isLoading?: boolean;\n    isUnstaking?: boolean;\n    amount?: number;\n    fee?: string;\n    error?: string;\n  };\n\n  accounts?: {\n    byId: Record<string, Account>;\n    isLoading?: boolean;\n    error?: string;\n  };\n\n  tokenInfo: {\n    bySlug: Record<string, ApiToken>;\n  };\n\n  byAccountId: Record<string, AccountState>;\n\n  settings: {\n    theme: Theme;\n    animationLevel: AnimationLevel;\n    langCode: LangCode;\n    dapps: ApiDapp[];\n    byAccountId: Record<string, AccountSettings>;\n    areTinyTransfersHidden?: boolean;\n    canPlaySounds?: boolean;\n    isInvestorViewEnabled?: boolean;\n    isTonProxyEnabled?: boolean;\n    isTonMagicEnabled?: boolean;\n    isDeeplinkHookEnabled?: boolean;\n    isTestnet?: boolean;\n    isSecurityWarningHidden?: boolean;\n    areTokensWithNoBalanceHidden?: boolean;\n    areTokensWithNoPriceHidden: boolean;\n    isSortByValueEnabled?: boolean;\n    importToken?: {\n      isLoading?: boolean;\n      token?: UserToken;\n    };\n  };\n\n  dialogs: string[];\n  notifications: NotificationType[];\n  currentAccountId?: string;\n  isAddAccountModalOpen?: boolean;\n  isBackupWalletModalOpen?: boolean;\n  landscapeActionsActiveTabIndex?: 0 | 1 | 2;\n  isHardwareModalOpen?: boolean;\n  areSettingsOpen?: boolean;\n\n  stateVersion: number;\n};\n\nexport interface ActionPayloads {\n  // Initial\n  init: undefined;\n  initApi: undefined;\n  afterInit: undefined;\n  apiUpdate: ApiUpdate;\n  restartAuth: undefined;\n  startCreatingWallet: undefined;\n  afterCheckMnemonic: undefined;\n  skipCheckMnemonic: undefined;\n  restartCheckMnemonicIndexes: undefined;\n  afterCreatePassword: { password: string };\n  startImportingWallet: undefined;\n  afterImportMnemonic: { mnemonic: string[] };\n  startImportingHardwareWallet: { driver: ApiLedgerDriver };\n  cleanAuthError: undefined;\n  openAbout: undefined;\n  closeAbout: undefined;\n  connectHardwareWallet: undefined;\n  createHardwareAccounts: undefined;\n  createAccount: { password: string; isImporting: boolean };\n  afterSelectHardwareWallets: { hardwareSelectedIndices: number[] };\n\n  selectToken: { slug?: string } | undefined;\n  openBackupWalletModal: undefined;\n  closeBackupWalletModal: undefined;\n  setIsBackupRequired: { isMnemonicChecked: boolean };\n  openHardwareWalletModal: undefined;\n  closeHardwareWalletModal: undefined;\n  resetHardwareWalletConnect: undefined;\n  setTransferScreen: { state: TransferState };\n  startTransfer: { tokenSlug?: string; amount?: number; toAddress?: string; comment?: string } | undefined;\n  changeTransferToken: { tokenSlug: string };\n  fetchFee: {\n    tokenSlug: string;\n    amount: number;\n    toAddress: string;\n    comment?: string;\n    shouldEncrypt?: boolean;\n  };\n  submitTransferInitial: {\n    tokenSlug: string;\n    amount: number;\n    toAddress: string;\n    comment?: string;\n    shouldEncrypt?: boolean;\n  };\n  submitTransferConfirm: undefined;\n  submitTransferPassword: { password: string };\n  submitTransferHardware: undefined;\n  clearTransferError: undefined;\n  cancelTransfer: undefined;\n  showDialog: { message: string };\n  dismissDialog: undefined;\n  showError: { error?: ApiAnyDisplayError | string };\n  showNotification: { message: string; icon?: string };\n  dismissNotification: undefined;\n  initLedgerPage: undefined;\n  afterSignIn: undefined;\n  signOut: { isFromAllAccounts?: boolean } | undefined;\n  cancelCaching: undefined;\n  afterSignOut: { isFromAllAccounts?: boolean } | undefined;\n  addAccount: { method: AuthMethod; password: string };\n  switchAccount: { accountId: string; newNetwork?: ApiNetwork };\n  renameAccount: { accountId: string; title: string };\n  clearAccountError: undefined;\n  validatePassword: { password: string };\n\n  fetchTokenTransactions: { limit: number; slug: string; offsetId?: string };\n  fetchAllTransactions: { limit: number };\n  fetchNfts: undefined;\n  showTransactionInfo: { txId?: string } | undefined;\n  closeTransactionInfo: undefined;\n\n  submitSignature: { password: string };\n  clearSignatureError: undefined;\n  cancelSignature: undefined;\n\n  addSavedAddress: { address: string; name: string };\n  removeFromSavedAddress: { address: string };\n\n  setCurrentTokenPeriod: { period: TokenPeriod };\n  openAddAccountModal: undefined;\n  closeAddAccountModal: undefined;\n\n  setLandscapeActionsActiveTabIndex: { index: 0 | 1 | 2 };\n\n  // Staking\n  startStaking: { isUnstaking?: boolean } | undefined;\n  setStakingScreen: { state: StakingState };\n  submitStakingInitial: { amount?: number; isUnstaking?: boolean } | undefined;\n  submitStakingPassword: { password: string; isUnstaking?: boolean };\n  clearStakingError: undefined;\n  cancelStaking: undefined;\n  fetchStakingState: undefined;\n  fetchBackendStakingState: undefined;\n  fetchStakingFee: { amount: number };\n\n  // Settings\n  openSettings: undefined;\n  closeSettings: undefined;\n  setTheme: { theme: Theme };\n  setAnimationLevel: { level: AnimationLevel };\n  toggleTinyTransfersHidden: { isEnabled?: boolean } | undefined;\n  toggleInvestorView: { isEnabled?: boolean } | undefined;\n  toggleCanPlaySounds: { isEnabled?: boolean } | undefined;\n  toggleTonProxy: { isEnabled: boolean };\n  toggleTonMagic: { isEnabled: boolean };\n  toggleDeeplinkHook: { isEnabled: boolean };\n  startChangingNetwork: { network: ApiNetwork };\n  changeNetwork: { network: ApiNetwork };\n  changeLanguage: { langCode: LangCode };\n  closeSecurityWarning: undefined;\n  toggleTokensWithNoBalance: { isEnabled: boolean };\n  toggleTokensWithNoPrice: { isEnabled: boolean };\n  toggleSortByValue: { isEnabled: boolean };\n  initTokensOrder: undefined;\n  sortTokens: { orderedSlugs: string[] };\n  updateDisabledSlugs: undefined;\n  toggleDisabledToken: { slug: string };\n  addToken: { token: UserToken };\n  deleteToken: { slug: string };\n  importToken: { address: string };\n  resetImportToken: undefined;\n\n  // TON Connect\n  submitDappConnectRequestConfirm: { additionalAccountIds: string[]; password?: string };\n  submitDappConnectRequestConfirmHardware: { additionalAccountIds: string[] };\n  clearDappConnectRequestError: undefined;\n  cancelDappConnectRequestConfirm: undefined;\n  setDappConnectRequestState: { state: DappConnectState };\n  showDappTransaction: { transactionIdx: number };\n  setDappTransferScreen: { state: TransferState };\n  clearDappTransferError: undefined;\n  submitDappTransferConfirm: undefined;\n  submitDappTransferPassword: { password: string };\n  submitDappTransferHardware: undefined;\n  cancelDappTransfer: undefined;\n\n  getDapps: undefined;\n  deleteAllDapps: undefined;\n  deleteDapp: { origin: string };\n}\n","import extension from '../../lib/webextension-polyfill';\n\nexport const DETACHED_TAB_URL = '#detached';\n\nexport function openLedgerTab() {\n  return createLedgerTab();\n}\n\nexport function onLedgerTabClose(id: number, onClose: () => void) {\n  extension.tabs.onRemoved.addListener((closedTabId: number) => {\n    if (closedTabId !== id) {\n      return;\n    }\n\n    onClose();\n  });\n}\n\nasync function createLedgerTab() {\n  const tab = await extension.tabs.create({ url: `index.html${DETACHED_TAB_URL}`, active: true });\n  await extension.windows.update(tab.windowId!, { focused: true });\n  return tab.id!;\n}\n","import { DETACHED_TAB_URL } from './ledger/tab';\n\nconst STORAGE_KEY = 'mtw-active-tab';\nconst INTERVAL = 2000;\n\nconst tabKey = String(Date.now() + Math.random());\n\nif (!window.location.href.includes(DETACHED_TAB_URL)) {\n  localStorage.setItem(STORAGE_KEY, tabKey);\n}\n\nlet callback: NoneToVoidFunction;\n\nconst interval = window.setInterval(() => {\n  if (callback && localStorage.getItem(STORAGE_KEY) !== tabKey && !window.location.href.includes(DETACHED_TAB_URL)) {\n    callback();\n    clearInterval(interval);\n  }\n}, INTERVAL);\n\nexport function setActiveTabChangeListener(_callback: NoneToVoidFunction) {\n  callback = _callback;\n}\n","type Parts = (string | false | undefined)[];\ntype PartsWithGlobals = (string | false | undefined | string[])[];\ntype ClassNameBuilder =\n  ((elementName: string, ...modifiers: PartsWithGlobals) => string)\n  & Record<string, string>;\n\nexport default function buildClassName(...parts: Parts) {\n  return parts.filter(Boolean).join(' ');\n}\n\nexport function createClassNameBuilder(componentName: string) {\n  return ((elementName: string, ...modifiers: PartsWithGlobals) => {\n    const baseName = elementName === '&' ? componentName : `${componentName}__${elementName}`;\n\n    return modifiers.reduce<string[]>((acc, modifier) => {\n      if (modifier) {\n        // A bit hacky way to pass global class names\n        if (Array.isArray(modifier)) {\n          acc.push(...modifier);\n        } else {\n          acc.push(`${baseName}--${modifier}`);\n        }\n      }\n\n      return acc;\n    }, [baseName]).join(' ');\n  }) as ClassNameBuilder;\n}\n","import { requestMutation } from '../lib/fasterdom/fasterdom';\n\nimport { throttle } from './schedulers';\nimport { IS_IOS } from './windowEnvironment';\n\nexport type IDimensions = {\n  width: number;\n  height: number;\n};\n\nconst WINDOW_RESIZE_THROTTLE_MS = 250;\n\nconst initialHeight = window.innerHeight;\nlet currentWindowSize = updateSizes();\n\nconst handleResize = throttle(() => {\n  currentWindowSize = updateSizes();\n}, WINDOW_RESIZE_THROTTLE_MS, true);\n\nwindow.addEventListener('orientationchange', handleResize);\nif (IS_IOS) {\n  window.visualViewport!.addEventListener('resize', handleResize);\n} else {\n  window.addEventListener('resize', handleResize);\n}\n\nexport function updateSizes(): IDimensions {\n  let height: number;\n  if (IS_IOS) {\n    height = window.visualViewport!.height + window.visualViewport!.pageTop;\n  } else {\n    height = window.innerHeight;\n  }\n\n  requestMutation(() => {\n    const vh = height * 0.01;\n    document.documentElement.style.setProperty('--vh', `${vh}px`);\n  });\n\n  return {\n    width: window.innerWidth,\n    height: window.innerHeight,\n  };\n}\n\nconst windowSize = {\n  get: () => currentWindowSize,\n  getIsKeyboardVisible: () => initialHeight > currentWindowSize.height,\n};\n\nexport default windowSize;\n","/**\n * Pulled from @react-hookz/web library source with some edits to match the code-style and use Teact\n * See https://github.com/react-hookz/web/blob/master/src/useMediaQuery/useMediaQuery.ts\n */\n\nimport type { Dispatch } from 'react';\nimport { useEffect, useState } from '../lib/teact/teact';\n\ntype QueryStateSetter = (matches: boolean) => void;\n\n// eslint-disable-next-line max-len, no-spaced-func\nconst queriesMap = new Map<string, { mql: MediaQueryList; dispatchers: Set<Dispatch<boolean>>; listener: () => void }>();\n\nconst createQueryEntry = (query: string) => {\n  const mql = matchMedia(query);\n  const dispatchers = new Set<QueryStateSetter>();\n  const listener = () => {\n    dispatchers.forEach((d) => d(mql.matches));\n  };\n\n  if (mql.addEventListener) mql.addEventListener('change', listener, { passive: true });\n  else mql.addListener(listener);\n\n  return {\n    mql,\n    dispatchers,\n    listener,\n  };\n};\n\nconst querySubscribe = (query: string, setState: QueryStateSetter) => {\n  let entry = queriesMap.get(query);\n\n  if (!entry) {\n    entry = createQueryEntry(query);\n    queriesMap.set(query, entry);\n  }\n\n  entry.dispatchers.add(setState);\n  setState(entry.mql.matches);\n};\n\nconst queryUnsubscribe = (query: string, setState: QueryStateSetter): void => {\n  const entry = queriesMap.get(query);\n\n  if (!entry) {\n    return;\n  }\n\n  const { mql, dispatchers, listener } = entry;\n  dispatchers.delete(setState);\n\n  if (!dispatchers.size) {\n    queriesMap.delete(query);\n\n    if (mql.removeEventListener) mql.removeEventListener('change', listener);\n    else mql.removeListener(listener);\n  }\n};\n\ninterface UseMediaQueryOptions {\n  initializeWithValue?: boolean;\n}\n\n/**\n * Tracks the state of CSS media query.\n *\n * @param query CSS media query to track.\n * @param options Hook options:\n * `initializeWithValue` (default: `true`) - Determine media query match state on first render. Setting\n * this to false will make the hook yield `undefined` on first render.\n */\nexport function useMediaQuery(query: string, options?: UseMediaQueryOptions): boolean | undefined {\n  function getInitialState() {\n    if (options?.initializeWithValue ?? true) {\n      let entry = queriesMap.get(query);\n      if (!entry) {\n        entry = createQueryEntry(query);\n        queriesMap.set(query, entry);\n      }\n      return entry.mql.matches;\n    }\n\n    return undefined;\n  }\n\n  const [state, setState] = useState<boolean | undefined>(getInitialState());\n\n  useEffect(() => {\n    querySubscribe(query, setState);\n\n    return () => queryUnsubscribe(query, setState);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [query]);\n\n  return state;\n}\n","import { MOBILE_SCREEN_MAX_WIDTH } from '../config';\nimport { useMediaQuery } from './useMediaQuery';\n\nexport function useDeviceScreen() {\n  const isPortrait = useMediaQuery(`(max-width: ${MOBILE_SCREEN_MAX_WIDTH - 0.02}px)`);\n\n  return {\n    isPortrait,\n    isLandscape: !isPortrait,\n  };\n}\n","import { useCallback, useState } from '../lib/teact/teact';\n\nconst useFlag = (initial = false, debugKey?: string): [boolean, NoneToVoidFunction, NoneToVoidFunction] => {\n  const [value, setValue] = useState(initial, debugKey);\n\n  const setTrue = useCallback(() => {\n    setValue(true);\n  }, []);\n\n  const setFalse = useCallback(() => {\n    setValue(false);\n  }, []);\n\n  return [value, setTrue, setFalse];\n};\n\nexport default useFlag;\n","import { useEffect } from '../lib/teact/teact';\n\nfunction useEffectOnce(effect: React.EffectCallback) {\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  useEffect(effect, []);\n}\n\nexport default useEffectOnce;\n","import { useRef } from '../lib/teact/teact';\n\nfunction usePrevious<T extends any>(next: T): T | undefined;\nfunction usePrevious<T extends any>(next: T, shouldSkipUndefined: true): Exclude<T, undefined> | undefined;\nfunction usePrevious<T extends any>(next: T, shouldSkipUndefined?: boolean): Exclude<T, undefined> | undefined;\nfunction usePrevious<T extends any>(next: T, shouldSkipUndefined?: boolean) {\n  const ref = useRef<T>();\n  const { current } = ref;\n  if (!shouldSkipUndefined || next !== undefined) {\n    ref.current = next;\n  }\n\n  return current;\n}\n\nexport default usePrevious;\n","import { useRef } from '../lib/teact/teact';\n\nimport useEffectOnce from './useEffectOnce';\nimport usePrevious from './usePrevious';\n\nexport default function useSyncEffect<const T extends readonly any[]>(\n  effect: (args: T | readonly []) => NoneToVoidFunction | void,\n  dependencies: T,\n) {\n  const prevDeps = usePrevious<T>(dependencies);\n  const cleanupRef = useRef<NoneToVoidFunction>();\n\n  if (!prevDeps || dependencies.some((d, i) => d !== prevDeps[i])) {\n    cleanupRef.current?.();\n    cleanupRef.current = effect(prevDeps || []) ?? undefined;\n  }\n\n  useEffectOnce(() => {\n    return () => {\n      cleanupRef.current?.();\n    };\n  });\n}\n","import { useEffect, useLayoutEffect, useRef } from '../lib/teact/teact';\n\nfunction useTimeout(callback: () => void, delay?: number) {\n  const savedCallback = useRef(callback);\n\n  useLayoutEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  useEffect(() => {\n    if (typeof delay !== 'number') {\n      return undefined;\n    }\n    const id = setTimeout(() => savedCallback.current(), delay);\n    return () => clearTimeout(id);\n  }, [delay]);\n}\n\nexport default useTimeout;\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React from '../../lib/teact/teact';\n\nimport { compact } from '../../util/iteratees';\n\nexport type TextFilter = ('simple_markdown' | 'br');\n\nconst SIMPLE_MARKDOWN_REGEX = /(\\*\\*|__).+?\\1/g;\n\nexport default function renderText(\n  part: TeactNode,\n  filters: Array<TextFilter> = ['simple_markdown', 'br'],\n): TeactNode[] {\n  if (typeof part !== 'string') {\n    return [part];\n  }\n\n  return compact(filters.reduce((text, filter) => {\n    switch (filter) {\n      case 'simple_markdown':\n        return replaceSimpleMarkdown(text);\n\n      case 'br':\n        return addLineBreaks(text);\n    }\n\n    return text;\n  }, [part] as TeactNode[]));\n}\n\nfunction replaceSimpleMarkdown(textParts: TeactNode[]): TeactNode[] {\n  return textParts.reduce<TeactNode[]>((result, part) => {\n    if (typeof part !== 'string') {\n      result.push(part);\n      return result;\n    }\n\n    const parts = part.split(SIMPLE_MARKDOWN_REGEX);\n    const entities: string[] = part.match(SIMPLE_MARKDOWN_REGEX) || [];\n    result.push(parts[0]);\n\n    return entities.reduce((entityResult: TeactNode[], entity, i) => {\n      entityResult.push(\n        entity.startsWith('**')\n          ? <b>{entity.replace(/\\*\\*/g, '')}</b>\n          : <i>{entity.replace(/__/g, '')}</i>,\n      );\n\n      const index = i * 2 + 2;\n      if (parts[index]) {\n        entityResult.push(parts[index]);\n      }\n\n      return entityResult;\n    }, result);\n  }, []);\n}\n\nfunction addLineBreaks(textParts: TeactNode[]): TeactNode[] {\n  return textParts.reduce((result: TeactNode[], part) => {\n    if (typeof part !== 'string') {\n      result.push(part);\n      return result;\n    }\n\n    const splittenParts = part\n      .split(/\\r\\n|\\r|\\n/g)\n      .reduce((parts: TeactNode[], line: string, i, source) => {\n        // This adds non-breaking space if line was indented with spaces, to preserve the indentation\n        const trimmedLine = line.trimStart();\n        const indentLength = line.length - trimmedLine.length;\n        parts.push(String.fromCharCode(160).repeat(indentLength) + trimmedLine);\n\n        if (i !== source.length - 1) {\n          parts.push(<br />);\n        }\n\n        return parts;\n      }, []);\n\n    return [...result, ...splittenParts];\n  }, []);\n}\n","import { ELECTRON_HOST_URL, IS_ELECTRON } from '../config';\n\n// eslint-disable-next-line no-restricted-globals\nconst cacheApi = self.caches;\n\nexport async function fetch(cacheName: string, key: string) {\n  if (!cacheApi) {\n    return undefined;\n  }\n\n  try {\n    // To avoid the error \"Request scheme 'webdocument' is unsupported\"\n    const request = IS_ELECTRON\n      ? `${ELECTRON_HOST_URL}/${key.replace(/:/g, '_')}`\n      : new Request(key.replace(/:/g, '_'));\n    const cache = await cacheApi.open(cacheName);\n    const response = await cache.match(request);\n    if (!response) {\n      return undefined;\n    }\n\n    return await response.json();\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.warn(err);\n    return undefined;\n  }\n}\n\nexport async function save(cacheName: string, key: string, data: AnyLiteral | Blob | ArrayBuffer | string) {\n  if (!cacheApi) {\n    return undefined;\n  }\n\n  try {\n    const cacheData = typeof data === 'string' || data instanceof Blob || data instanceof ArrayBuffer\n      ? data\n      : JSON.stringify(data);\n    // To avoid the error \"Request scheme 'webdocument' is unsupported\"\n    const request = IS_ELECTRON\n      ? `${ELECTRON_HOST_URL}/${key.replace(/:/g, '_')}`\n      : new Request(key.replace(/:/g, '_'));\n    const response = new Response(cacheData);\n\n    // To avoid the error \"Request scheme 'chrome-extension' is unsupported\"\n    // https://github.com/iamshaunjp/pwa-tutorial/issues/1\n    if (request instanceof Request && request.url.indexOf('chrome-extension') === 0) {\n      return undefined;\n    }\n\n    const cache = await cacheApi.open(cacheName);\n    return await cache.put(request, response);\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.warn(err);\n    return undefined;\n  }\n}\n\nexport async function remove(cacheName: string, key: string) {\n  try {\n    if (!cacheApi) {\n      return undefined;\n    }\n\n    const cache = await cacheApi.open(cacheName);\n    return await cache.delete(key);\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.warn(err);\n    return undefined;\n  }\n}\n\nexport async function clear(cacheName: string) {\n  try {\n    if (!cacheApi) {\n      return undefined;\n    }\n\n    return await cacheApi.delete(cacheName);\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.warn(err);\n    return undefined;\n  }\n}\n","const cache = new WeakMap<AnyFunction, Map<string, any>>();\n\nexport default function withCache<T extends AnyFunction>(fn: T) {\n  return (...args: Parameters<T>): ReturnType<T> => {\n    let fnCache = cache.get(fn);\n    const cacheKey = args.map(String).join('_');\n\n    if (fnCache) {\n      const cached = fnCache.get(cacheKey);\n      if (cached) {\n        return cached;\n      }\n    } else {\n      fnCache = new Map();\n      cache.set(fn, fnCache);\n    }\n\n    const newValue = fn(...args);\n\n    fnCache.set(cacheKey, newValue);\n\n    return newValue;\n  };\n}\n","import { DEFAULT_DECIMAL_PLACES, DEFAULT_PRICE_CURRENCY } from '../config';\nimport withCache from './withCache';\n\nexport const formatInteger = withCache((value: number, fractionDigits = 2, noRadix = false) => {\n  const minValue = 1 / (10 ** fractionDigits);\n  if (Math.abs(value) > 0 && Math.abs(value) < minValue) {\n    fractionDigits = DEFAULT_DECIMAL_PLACES;\n  }\n\n  const fixed = value.toFixed(Math.min(fractionDigits, 100));\n  let [wholePart, fractionPart] = fixed.split('.');\n\n  fractionPart = fractionPart.replace(/0+$/, '');\n  if (fractionPart === '') {\n    wholePart = wholePart.replace(/^-0$/, '0');\n  }\n  if (!noRadix) {\n    wholePart = wholePart.replace(/\\d(?=(\\d{3})+($|\\.))/g, '$&,');\n  }\n\n  return [\n    wholePart,\n    fractionPart,\n  ].filter(Boolean).join('.');\n});\n\nexport function formatCurrency(value: number, currency: string, fractionDigits?: number) {\n  const formatted = formatInteger(value, fractionDigits);\n  return currency === '$' ? `$${formatted}`.replace('$-', '-$') : `${formatted} ${currency}`;\n}\n\nexport function formatCurrencyExtended(value: number, currency: string, noSign = false) {\n  const integerLength = String(Math.round(value)).length;\n  const prefix = !noSign ? (value > 0 ? '+\\u202F' : '\\u2212\\u202F') : '';\n\n  return prefix + formatCurrency(noSign ? value : Math.abs(value), currency, 10 - integerLength);\n}\n\nexport function formatCurrencyForBigValue(value: number, threshold = 1000) {\n  const formattedValue = formatCurrency(value, DEFAULT_PRICE_CURRENCY);\n\n  if (value < threshold) {\n    return formattedValue;\n  }\n\n  const [mainPart] = formattedValue.split('.');\n\n  return mainPart;\n}\n","import type { TeactNode } from '../lib/teact/teact';\n\nimport type { LangCode, LangPack, LangString } from '../global/types';\n\nimport { IS_ELECTRON, LANG_CACHE_NAME, LANG_LIST } from '../config';\nimport renderText from '../global/helpers/renderText';\n// @ts-ignore this file is autogenerated\nimport defaultLangPackJson from '../i18n/en.json';\nimport * as cacheApi from './cacheApi';\nimport { createCallbackManager } from './callbacks';\nimport { formatInteger } from './formatNumber';\nimport { DEFAULT_LANG_CODE } from './windowEnvironment';\n\nconst defaultLangPack: LangPack = defaultLangPackJson;\n\nexport interface LangFn {\n  (key: string): string;\n\n  (key: string, value: any, format?: 'i', pluralValue?: number): string | TeactNode[];\n\n  isRtl?: boolean;\n  code?: LangCode;\n  langName?: string;\n}\n\nconst {\n  addCallback,\n  removeCallback,\n  runCallbacks,\n} = createCallbackManager();\n\nexport { addCallback, removeCallback };\n\nconst SUBSTITUTION_REGEX = /%\\d?\\$?[sdf@]/g;\nconst cache = new Map<string, string>();\nlet langPack: LangPack | undefined;\nlet currentLangCode: string | undefined;\n\nfunction createLangFn() {\n  return ((key: string, value?: any, format?: 'i', pluralValue?: number) => {\n    if (value !== undefined && (typeof value !== 'object' || Array.isArray(value))) {\n      const cacheValue = Array.isArray(value) ? JSON.stringify(value) : value;\n      const cached = cache.get(`${key}_${cacheValue}_${format}${pluralValue ? `_${pluralValue}` : ''}`);\n      if (cached) {\n        return cached;\n      }\n    }\n\n    if (!langPack && !defaultLangPack) {\n      return key;\n    }\n\n    const langString = (langPack?.[key]) || (defaultLangPack?.[key]) || key;\n\n    return processTranslation(langString, key, value, format, pluralValue);\n  }) as LangFn;\n}\n\n// eslint-disable-next-line import/no-mutable-exports\nexport let getTranslation: LangFn = createLangFn();\n\nexport async function setLanguage(langCode: LangCode, callback?: NoneToVoidFunction) {\n  if (langPack && langCode === currentLangCode) {\n    if (callback) {\n      callback();\n    }\n\n    return;\n  }\n\n  let newLangPack = await cacheApi.fetch(LANG_CACHE_NAME, langCode);\n\n  if (!newLangPack) {\n    newLangPack = await fetchRemote(langCode);\n    if (!newLangPack) {\n      return;\n    }\n  }\n\n  cache.clear();\n\n  currentLangCode = langCode;\n  langPack = newLangPack;\n  document.documentElement.lang = langCode;\n\n  const langInfo = LANG_LIST?.find((l) => l.langCode === langCode);\n  getTranslation = createLangFn();\n  getTranslation.isRtl = Boolean(langInfo?.rtl);\n  getTranslation.code = langCode.replace('-raw', '') as LangCode;\n  getTranslation.langName = langInfo?.nativeName;\n\n  if (callback) {\n    callback();\n  }\n\n  runCallbacks();\n}\n\nexport function clearPreviousLangpacks() {\n  const langCachePrefix = LANG_CACHE_NAME.replace(/\\d+$/, '');\n  const langCacheVersion = Number((LANG_CACHE_NAME.match(/\\d+$/) || [0])[0]);\n  for (let i = 0; i < langCacheVersion; i++) {\n    void cacheApi.clear(`${langCachePrefix}${i === 0 ? '' : i}`);\n  }\n}\n\nasync function fetchRemote(langCode: string): Promise<LangPack | undefined> {\n  if (langCode === DEFAULT_LANG_CODE) {\n    return defaultLangPack;\n  }\n\n  const response = await fetch(`${IS_ELECTRON ? '.' : '..'}/i18n/${langCode}.json`);\n\n  if (!response.ok) {\n    const message = `An error has occured: ${response.status}`;\n    throw new Error(message);\n  }\n\n  const remote = await response.json();\n\n  if (remote) {\n    await cacheApi.save(LANG_CACHE_NAME, langCode, remote);\n    return remote;\n  }\n\n  return undefined;\n}\n\nfunction processTemplate(template: string, value: any) {\n  value = Array.isArray(value) ? value : [value];\n  const translationSlices = template.split(SUBSTITUTION_REGEX);\n  const initialValue = translationSlices.shift();\n\n  return translationSlices.reduce((result, str, index) => {\n    return `${result}${String(value[index] ?? '')}${str}`;\n  }, initialValue || '');\n}\n\nfunction processTemplateJsx(template: string, value: Record<string, TeactNode>) {\n  return template.split('%')\n    .reduce((acc, slice) => acc.concat(value[slice] ? [value[slice]] : renderText(slice)), [] as TeactNode[]);\n}\n\nfunction processTranslation(\n  langString: LangString | undefined, key: string, value?: any, format?: 'i', pluralValue?: number,\n) {\n  const template = langString?.value;\n  if (!template || !template.trim()) {\n    return langString;\n  }\n\n  if (value !== undefined) {\n    const formattedValue = format === 'i' ? formatInteger(value) : value;\n    const result = typeof value === 'object' && !Array.isArray(value)\n      ? processTemplateJsx(template, formattedValue)\n      : processTemplate(template, formattedValue);\n    if (typeof value !== 'object' && typeof result === 'string') {\n      const cacheValue = Array.isArray(value) ? JSON.stringify(value) : value;\n      cache.set(`${key}_${cacheValue}_${format}${pluralValue ? `_${pluralValue}` : ''}`, result);\n    }\n    return result;\n  }\n\n  return template;\n}\n","import * as langProvider from '../util/langProvider';\nimport useEffectOnce from './useEffectOnce';\nimport useForceUpdate from './useForceUpdate';\n\nexport type LangFn = langProvider.LangFn;\n\nconst useLang = (): LangFn => {\n  const forceUpdate = useForceUpdate();\n\n  useEffectOnce(() => {\n    return langProvider.addCallback(forceUpdate);\n  });\n\n  return langProvider.getTranslation;\n};\n\nexport default useLang;\n","// extracted by mini-css-extract-plugin\nexport default {\"is-ios\":\"bMOWndS4gvXADBNW02zw\",\"isIos\":\"bMOWndS4gvXADBNW02zw\",\"is-android\":\"d3xWFVGrPDPAN5IiWi7x\",\"isAndroid\":\"d3xWFVGrPDPAN5IiWi7x\",\"button\":\"DlG_63EhjsyuthXrQK_w\",\"clicked\":\"wL3zNWAZrlwWDgi6Co6N\",\"isSimple\":\"LffSeqsNThtR6v56ybL9\",\"isText\":\"ePtQ8eCttjAPilliiIdT\",\"primary\":\"gg_qcOLSvbPhCIpBtGIX\",\"transparent\":\"NnHMhmPIugb7vdzIN_aD\",\"disabled\":\"gizl_mHYo6qRbm0so1Xl\",\"destructive\":\"cZaBNKeUTfCj6w9tsyCA\",\"sizeSmall\":\"weO6mtTq4D1lzrYHywNr\",\"round\":\"w2jevE0NTQ1rJTvtIH2F\",\"loading\":\"n0dAEYbfnSCpoF3PiApd\",\"button-loading-spinner\":\"Ew0491Tej6f9bSgsnYXX\",\"buttonLoadingSpinner\":\"Ew0491Tej6f9bSgsnYXX\",\"buttonText\":\"CA_flRhX7R_2Jz9w8nBE\"};","import type { RefObject } from 'react';\nimport React, { memo, useCallback, useState } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport styles from './Button.module.scss';\n\ntype OwnProps = {\n  ref?: RefObject<HTMLButtonElement>;\n  children: React.ReactNode;\n  className?: string;\n  ariaLabel?: string;\n  forFormId?: string;\n  kind?: 'transparent';\n  isSubmit?: boolean;\n  isPrimary?: boolean;\n  isSimple?: boolean;\n  isText?: boolean;\n  isLoading?: boolean;\n  isDisabled?: boolean;\n  isRound?: boolean;\n  isSmall?: boolean;\n  isDestructive?: boolean;\n  onClick?: () => void;\n};\n\n// Longest animation duration\nconst CLICKED_TIMEOUT = 400;\n\nfunction Button({\n  ref,\n  children,\n  className,\n  ariaLabel,\n  forFormId,\n  kind,\n  isSubmit,\n  isLoading,\n  isPrimary,\n  isSimple,\n  isText,\n  isDisabled,\n  isRound,\n  isSmall,\n  isDestructive,\n  onClick,\n}: OwnProps) {\n  const [isClicked, setIsClicked] = useState(false);\n\n  const handleClick = useCallback(() => {\n    if (!isDisabled && onClick) {\n      onClick();\n    }\n\n    setIsClicked(true);\n    setTimeout(() => {\n      setIsClicked(false);\n    }, CLICKED_TIMEOUT);\n  }, [isDisabled, onClick]);\n\n  return (\n    <button\n      ref={ref}\n      type={isSubmit || forFormId ? 'submit' : 'button'}\n      className={buildClassName(\n        styles.button,\n        isSimple && styles.isSimple,\n        isSmall && styles.sizeSmall,\n        isPrimary && styles.primary,\n        isDisabled && styles.disabled,\n        isLoading && styles.loading,\n        isRound && styles.round,\n        isText && styles.isText,\n        isDestructive && styles.destructive,\n        isClicked && styles.clicked,\n        className,\n        kind && styles[kind],\n      )}\n      aria-label={ariaLabel}\n      onClick={handleClick}\n      disabled={isDisabled}\n      form={forFormId}\n    >\n      {isLoading && <span className={styles.buttonText}>{children}</span>}\n      {!isLoading && children}\n    </button>\n  );\n}\n\nexport default memo(Button);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"crI5jc7WnenQELRmSBhA\",\"content\":\"ZphbEDJ52M0IAmVEXqhI\",\"actions\":\"qlYTuEmDWimcFubvDrrV\",\"title\":\"vpANWWWi9JuPgEriYtZy\",\"description\":\"_5coBP3JO_le_bO4uD6i1\",\"img\":\"TgPY00fY6BLDxhEz4fpR\",\"button\":\"YQKnrabfjuMvW3qS5Bcg\"};","import React, { useCallback } from '../lib/teact/teact';\n\nimport renderText from '../global/helpers/renderText';\n\nimport useLang from '../hooks/useLang';\n\nimport Button from './ui/Button';\n\nimport styles from './AppInactive.module.scss';\n\nimport appInactivePathPng from '../assets/app-inactive.png';\nimport appInactivePathWebP from '../assets/app-inactive.webp';\n\nfunction AppInactive() {\n  const lang = useLang();\n\n  const handleReload = useCallback(() => {\n    window.location.reload();\n  }, []);\n\n  return (\n    <div className={styles.root}>\n      <div className={styles.content}>\n        <picture className={styles.img}>\n          <source src={appInactivePathWebP} />\n          <img src={appInactivePathPng} alt=\"\" className={styles.img} />\n        </picture>\n\n        <h3 className={styles.title}>{lang('Such error, many tabs')}</h3>\n\n        <div className={styles.description}>{renderText(lang('$many_tabs_error_description'))}</div>\n\n        <div className={styles.actions}>\n          <Button isText className={styles.button} onClick={handleReload}>\n            {lang('Reload App')}\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default AppInactive;\n","import usePrevious from './usePrevious';\n\nexport default function useCurrentOrPrev<T extends any>(\n  current: T, shouldSkipUndefined = false, shouldForceCurrent = false,\n): T | undefined {\n  const prev = usePrevious(current, shouldSkipUndefined);\n\n  // eslint-disable-next-line no-null/no-null\n  return shouldForceCurrent || (current !== null && current !== undefined) ? current : prev;\n}\n","import { useState } from '../lib/teact/teact';\n\nimport useLastCallback from './useLastCallback';\n\nconst THRESHOLD = 1;\n\nexport default function useScrolledState(threshold = THRESHOLD) {\n  const [isAtBeginning, setIsAtBeginning] = useState(true);\n  const [isAtEnd, setIsAtEnd] = useState(true);\n\n  const handleScroll = useLastCallback((e: React.UIEvent<HTMLElement>) => {\n    const { scrollHeight, scrollTop, clientHeight } = e.target as HTMLElement;\n\n    setIsAtBeginning(scrollTop < threshold);\n    setIsAtEnd(scrollHeight - scrollTop - clientHeight < threshold);\n  });\n\n  return { isAtBeginning, isAtEnd, handleScroll };\n}\n","import { useRef, useState } from '../lib/teact/teact';\n\nimport buildClassName from '../util/buildClassName';\n\nconst CLOSE_DURATION = 350;\n\nconst useShowTransition = (\n  isOpen = false,\n  onCloseTransitionEnd?: () => void,\n  noFirstOpenTransition = false,\n  className: string | false = 'fast',\n  noCloseTransition = false,\n  closeDuration = CLOSE_DURATION,\n  noOpenTransition = false,\n) => {\n  const [isClosed, setIsClosed] = useState(!isOpen);\n  const closeTimeoutRef = useRef<number>();\n  // СSS class should be added in a separate tick to turn on CSS transition.\n  const [hasOpenClassName, setHasOpenClassName] = useState(isOpen && noFirstOpenTransition);\n\n  if (isOpen) {\n    setIsClosed(false);\n    setHasOpenClassName(true);\n\n    if (closeTimeoutRef.current) {\n      window.clearTimeout(closeTimeoutRef.current);\n      closeTimeoutRef.current = undefined;\n    }\n  } else {\n    setHasOpenClassName(false);\n\n    if (!isClosed && !closeTimeoutRef.current) {\n      const exec = () => {\n        setIsClosed(true);\n\n        if (onCloseTransitionEnd) {\n          onCloseTransitionEnd();\n        }\n\n        closeTimeoutRef.current = undefined;\n      };\n\n      if (noCloseTransition) {\n        exec();\n      } else {\n        closeTimeoutRef.current = window.setTimeout(exec, closeDuration);\n      }\n    }\n  }\n\n  // `noCloseTransition`, when set to true, should remove the open class immediately\n  const shouldHaveOpenClassName = (hasOpenClassName && !(noCloseTransition && !isOpen)) || (noOpenTransition && isOpen);\n  const isClosing = Boolean(closeTimeoutRef.current);\n  const shouldRender = isOpen || isClosing;\n  const transitionClassNames = buildClassName(\n    className && 'opacity-transition',\n    className,\n    shouldHaveOpenClassName && 'open',\n    !shouldHaveOpenClassName && 'not-open',\n    shouldRender && 'shown',\n    !shouldRender && 'not-shown',\n    isClosing && 'closing',\n  );\n\n  return {\n    shouldRender,\n    transitionClassNames,\n    hasShownClass: shouldRender,\n    hasOpenClass: shouldHaveOpenClassName,\n  };\n};\n\nexport default useShowTransition;\n","import useShowTransition from './useShowTransition';\n\nexport default function useMediaTransition(mediaData?: any) {\n  const isMediaReady = Boolean(mediaData);\n  const { transitionClassNames } = useShowTransition(isMediaReady, undefined, isMediaReady, 'slow');\n\n  return transitionClassNames;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"b6OxKMr461vdkORuaEIj\"};","import React, { memo, useCallback } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useFlag from '../../hooks/useFlag';\nimport useMediaTransition from '../../hooks/useMediaTransition';\n\nimport styles from './Emoji.module.scss';\n\ninterface OwnProps {\n  from: '🥷' | '🦄';\n}\n\nconst PATH_BY_EMOJI = {\n  '🥷': '1f977',\n  '🦄': '1f984',\n};\n\nconst loadedImages = new Set();\n\nfunction Emoji({ from }: OwnProps) {\n  const key = from in PATH_BY_EMOJI ? PATH_BY_EMOJI[from as keyof typeof PATH_BY_EMOJI] : from;\n  const src = `./emoji/${key}.png`;\n  const [isLoaded, markLoaded] = useFlag(loadedImages.has(src));\n  const transitionClassNames = useMediaTransition(isLoaded);\n\n  const handleLoad = useCallback(() => {\n    markLoaded();\n    loadedImages.add(src);\n  }, [markLoaded, src]);\n\n  return (\n    <img\n      src={src}\n      alt={from}\n      className={buildClassName(styles.root, styles[`key-${key}`], transitionClassNames)}\n      onLoad={handleLoad}\n    />\n  );\n}\n\nexport default memo(Emoji);\n","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"Qcp6S0Lfp0zTeIho5Asz\",\"slideUp\":\"bvkghmbKv99kOPav5vU2\",\"error\":\"TXkNGNEOpRAfYFDBM1gb\",\"dialog\":\"kmjhCU3unxY3mL8L4Nny\",\"backdrop\":\"C3PIl0wNtlGIggJGLFVh\",\"container\":\"tMKb4sRVVePeWIHzvDj6\",\"noBackdrop\":\"vUHdTAv5TSeseF7eyJKs\",\"compact\":\"y8UmdhMZmY44Ag5iYy3H\",\"header\":\"sPJicwcyq4plHw_Cjz0z\",\"header_transition\":\"uUepLkCdcQwoIe4_GudK\",\"headerTransition\":\"uUepLkCdcQwoIe4_GudK\",\"header_noClose\":\"AyvaIpOr_6THig1GHryR\",\"headerNoClose\":\"AyvaIpOr_6THig1GHryR\",\"title\":\"kmzuKQNLdEMEfuerYWKT\",\"header_wideContent\":\"VM_6w2TkROZjMmomrHEN\",\"headerWideContent\":\"VM_6w2TkROZjMmomrHEN\",\"header_bordered\":\"blXOrFkeDxzKtcM_BWy0\",\"headerBordered\":\"blXOrFkeDxzKtcM_BWy0\",\"header_back\":\"CzyQlX6ll2K75ogLUBRO\",\"headerBack\":\"CzyQlX6ll2K75ogLUBRO\",\"header_backIcon\":\"QRBasW38AV4_p_8pXLiZ\",\"headerBackIcon\":\"QRBasW38AV4_p_8pXLiZ\",\"closeButton\":\"Wnfs2csjmhqbonRJvfjS\",\"closeIcon\":\"RSjXpxwNY0T_tkwDUfVa\",\"content\":\"pKgxYEUM31g_j38iQIrA\",\"contentSlideUp\":\"WyvED7a3IibwmF8pp9kw\",\"text\":\"xplq3vicAiJES4TIA195\",\"text_centered\":\"giU4s9reRyxYvRkOmOgN\",\"textCentered\":\"giU4s9reRyxYvRkOmOgN\",\"text_noExtraMargin\":\"pQk_7ndVjnGR_6s2BJmJ\",\"textNoExtraMargin\":\"pQk_7ndVjnGR_6s2BJmJ\",\"buttons\":\"y6Zhm8NbabD8vrJAauWw\",\"button\":\"PRxU_rp0hTp4Ux8oJ7Nv\",\"transition\":\"caz71EXhsnVof1N7nb7U\",\"transitionSlide\":\"_Nai3l8vAW2tz8iWYm_S\",\"transitionContentWrapper\":\"sB6m9eonTkM6ogY0le5e\",\"transitionContent\":\"t7b6Je76Ojmm359bxsf6\",\"transitionContent_simple\":\"mPDWd26cSN63I9wd5xwo\",\"transitionContentSimple\":\"mPDWd26cSN63I9wd5xwo\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\n\nimport Button from './Button';\n\nimport modalStyles from './Modal.module.scss';\n\ntype OwnProps = {\n  title: string;\n  className?: string;\n  withBorder?: boolean;\n  closeClassName?: string;\n  onClose?: NoneToVoidFunction;\n  onBackButtonClick?: () => void;\n};\n\nfunction ModalHeader({\n  title, className, withBorder, closeClassName, onClose, onBackButtonClick,\n}: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <div\n      className={buildClassName(\n        modalStyles.header,\n        modalStyles.header_transition,\n        withBorder && modalStyles.header_bordered,\n        !onBackButtonClick && modalStyles.header_wideContent,\n        className,\n      )}\n    >\n      {onBackButtonClick && (\n        <Button isSimple isText onClick={onBackButtonClick} className={modalStyles.header_back}>\n          <i className={buildClassName(modalStyles.header_backIcon, 'icon-chevron-left')} aria-hidden />\n          <span>{lang('Back')}</span>\n        </Button>\n      )}\n      <div className={modalStyles.title}>{title}</div>\n      {onClose && (\n        <Button\n          isRound\n          className={buildClassName(modalStyles.closeButton, closeClassName)}\n          ariaLabel={lang('Close')}\n          onClick={onClose}\n        >\n          <i className={buildClassName(modalStyles.closeIcon, 'icon-close')} aria-hidden />\n        </Button>\n      )}\n    </div>\n  );\n}\n\nexport default memo(ModalHeader);\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"VNNYefDptkbLRFrtKk0Q\",\"slide\":\"fk0I9mK9dxd2wmBLqner\",\"transitionContainer\":\"x1yD3EpkEbPr953YDAIo\",\"developerTitle\":\"rixbAJ6wCixAAjoV4i4a\",\"developerCloseButton\":\"ZtEYV9MNmdcXjjsDe7F9\",\"header\":\"NHnm1LFJEwsnfvBoSJLi\",\"languageHeader\":\"b8uetqvRzBkUFIjZ7GWE\",\"headerBack\":\"BdOXvhPOkE9OB7UMG5LJ\",\"iconChevron\":\"LoaLZIO2axPuZbd2P5nh\",\"headerTitle\":\"qIp95uyN2Opcpp10LL0w\",\"content\":\"sBMnHRs5PSJ_qr0BxE_C\",\"content_noScroll\":\"YY5mt4KVe8hM8UBQgOcQ\",\"contentNoScroll\":\"YY5mt4KVe8hM8UBQgOcQ\",\"blockTitle\":\"MhS9aY8YFZXRqUwBEJHr\",\"menuIcon\":\"muPMoSywo5p3F36VJPJ5\",\"themeWrapper\":\"FOu1HSvJ3NmTLrT2SyeG\",\"blockAbout\":\"IGy3wShHV4pP4iJLCmUX\",\"theme\":\"i7ogHcGI8akHEImOfC12\",\"theme_active\":\"zgMVD_EQvgz5E92Nh9az\",\"themeActive\":\"zgMVD_EQvgz5E92Nh9az\",\"themeIcon\":\"hjXwzVytF45Rn1IVAX1M\",\"themeIcon_active\":\"orwEF9PVL8QPFvUpkrwb\",\"themeIconActive\":\"orwEF9PVL8QPFvUpkrwb\",\"themeImg\":\"zdVMHegpEM_iWTjssN9J\",\"block\":\"wdJsevRX0uBu6g5shCeI\",\"settingsBlock\":\"HzE6cfteyvbSgIwJpNtW\",\"iconChevronRight\":\"EkoZaS_6U3Sp_mV7voJP\",\"item\":\"nKTGjff_ovbiqc9fFUG0\",\"item_red\":\"r95xUh9BVNypJHYueHKU\",\"itemRed\":\"r95xUh9BVNypJHYueHKU\",\"item_small\":\"Ua0AZK53dlXiyuUxbSjy\",\"itemSmall\":\"Ua0AZK53dlXiyuUxbSjy\",\"item_lang\":\"brArYoaVNfQO9S9KA2e1\",\"itemLang\":\"brArYoaVNfQO9S9KA2e1\",\"item_token\":\"Q_dt9c5SqvWbVirxzqmI\",\"itemToken\":\"Q_dt9c5SqvWbVirxzqmI\",\"itemInfo\":\"_XSUPY1SKCvSpauvWZuV\",\"version\":\"C6Lq1zEpibGhEEcvTPz_\",\"languageInfo\":\"KPxpOhodAUTWzqfrvPjQ\",\"languageMain\":\"YoD4g3Yt727R5oODHNVM\",\"languageNative\":\"QEwtomgG6PC7F2VSXsJ5\",\"iconQuestion\":\"GrBdw2pwlTa1mSK77oFY\",\"blockWithTooltip\":\"s9mChHnXX4FYMZODx8vy\",\"tooltip\":\"wRGeZNWTMWwF8spZvmqZ\",\"tooltip_wide\":\"SdDI47RklQ2g76zKmzjv\",\"tooltipWide\":\"SdDI47RklQ2g76zKmzjv\",\"disconnectButton\":\"yXxS87qDnrtPkn6iB_rm\",\"blockDescription\":\"EAb4oLBR2KPnNXe3svRw\",\"emptyList\":\"Os5_Zwx8YkJ8UrisuLY7\",\"emptyListTitle\":\"PSFDtITSsJwBeaIAzY6r\",\"dapp\":\"RYPRfMxvkkXQIuda6zr2\",\"backButton\":\"AFJsguUGP5H4oyyguNrx\",\"logo\":\"Ja9WPbBtSdJPDknMpQ3h\",\"title\":\"xrmoRKzKXhHF9tzJQ5ja\",\"titleLink\":\"r8EL3VwHyGIJtDwkYfRt\",\"heading\":\"_xUlxaLARni4XcFrlTQ6\",\"text\":\"NWVI_CJTytwtRqwKv9xn\",\"github\":\"NtF6P7vuW3zazZffOvSd\",\"telegram\":\"Es2_wNxCW2rMqrpFguPY\",\"tokenIcon\":\"Eyjq9yvtpRjPPVjCGpBl\",\"tokenSortIcon\":\"vaVjn5ozehmyAWcgqZBz\",\"tokenTitle\":\"k2nbS30xWiK5r_GZC7Tw\",\"tokenDescription\":\"l2sXBS49g2FAEcIrrDpW\",\"dot\":\"fAY2gQ24ziXNXD7sRmpQ\",\"contentRelative\":\"ZxA2g78EbI9KGVK6AWQm\",\"sortableContainer\":\"btURULlfKsu_XfHa6sl3\",\"modalDialog\":\"m_QMcu1kI811FJO1bmOY\",\"modalContent\":\"hxh4R4ZiJjeYtT_kpJdm\",\"deleteText\":\"uBuFVVCRmM1E4IOn1id8\",\"addTokenTransition\":\"qIHnnhXz2C_mc5gr19ir\",\"addTokenDialog\":\"IOJf2do3VIT2G6GMsa0r\",\"addTokenBlock\":\"JNhbu85F6pKaogkScmH4\",\"addTokenSearch\":\"qh7SNxt5nJtGB32VVr2R\",\"addTokenSearch_bordered\":\"wHxdA41ZpOPzpCZ12ZDZ\",\"addTokenSearchBordered\":\"wHxdA41ZpOPzpCZ12ZDZ\",\"addTokenInputWrapper\":\"VlKgO4na3eUYKqr_LYpo\",\"addTokenInput\":\"aU8FOx_HseFsUfhZ15Qs\",\"addTokenContentWrapper\":\"j2cAQMbFgBAsUSGYWb3A\",\"addTokenContent\":\"OPfobMxhHmCFqK1CPezW\",\"addTokenContent_single\":\"hbAt2n5yrdPiNil3HWII\",\"addTokenContentSingle\":\"hbAt2n5yrdPiNil3HWII\",\"addTokenItem\":\"bwFW5yE3P8FABAm0MKy7\",\"tokenInfo\":\"QEysUsImxhw9YQrj0dH2\",\"addTokenText\":\"UwVvIzjrkmxqeur1x6qh\",\"addTokenText_center\":\"zLS9Zhv68MckjUkGat0g\",\"addTokenTextCenter\":\"zLS9Zhv68MckjUkGat0g\",\"addTokenSymbol\":\"alx4hBicFvr4ZESBCG7I\",\"addTokenSymbol_loading\":\"cPkTSbSXbXXC3SDGRV7N\",\"addTokenSymbolLoading\":\"cPkTSbSXbXXC3SDGRV7N\",\"addTokenSymbol_gray\":\"AUuVu8illfJA9WQwg4Bo\",\"addTokenSymbolGray\":\"AUuVu8illfJA9WQwg4Bo\",\"addTokenPrice\":\"FL7JwRJ8uH_CRT9rpzAA\",\"addTokenPrice_loading\":\"LRbWPt8SClc5YWAwzGxY\",\"addTokenPriceLoading\":\"LRbWPt8SClc5YWAwzGxY\",\"addTokenPrice_gray\":\"_W5i2imBH9gDkjl9opMX\",\"addTokenPriceGray\":\"_W5i2imBH9gDkjl9opMX\",\"addTokenIcon\":\"xIq4cREpj6j43rVxRvu3\",\"addTokenIcon_loading\":\"uXSM6tOGfZW1SMnnjl39\",\"addTokenIconLoading\":\"uXSM6tOGfZW1SMnnjl39\",\"addTokenIcon_empty\":\"Q0Xsvu0Tm4nCGIn5Yrig\",\"addTokenIconEmpty\":\"Q0Xsvu0Tm4nCGIn5Yrig\",\"emptyIcon\":\"KpVdANda3wHQXzbwAdWq\",\"backdrop\":\"uqzKaW5qqdco47V_0iEW\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport { APP_NAME, APP_VERSION } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { IS_EXTENSION } from '../../util/windowEnvironment';\n\nimport useLang from '../../hooks/useLang';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport Button from '../ui/Button';\nimport Emoji from '../ui/Emoji';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport styles from './Settings.module.scss';\n\nimport logoSrc from '../../assets/logo.svg';\n\ninterface OwnProps {\n  handleBackClick: () => void;\n  isInsideModal?: boolean;\n}\n\nfunction SettingsAbout({ handleBackClick, isInsideModal }: OwnProps) {\n  const lang = useLang();\n\n  const {\n    handleScroll: handleContentScroll,\n    isAtBeginning: isContentNotScrolled,\n  } = useScrolledState();\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('About')}\n          withBorder={!isContentNotScrolled}\n          onBackButtonClick={handleBackClick}\n        />\n      ) : (\n        <div className={styles.header}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('About')}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(\n          styles.content,\n          isInsideModal && 'custom-scroll',\n          !isInsideModal && styles.content_noScroll,\n        )}\n        onScroll={isInsideModal ? handleContentScroll : undefined}\n      >\n        <img src={logoSrc} alt={lang('Logo')} className={styles.logo} />\n        <h2 className={styles.title}>\n          {APP_NAME} {APP_VERSION}\n          <a href=\"https://mytonwallet.io/\" target=\"_blank\" className={styles.titleLink} rel=\"noreferrer\">\n            mytonwallet.io\n          </a>\n        </h2>\n        <div className={buildClassName(styles.blockAbout, !isInsideModal && 'custom-scroll')}>\n          <p className={styles.text}>\n            {renderText(lang('$about_description1'))}\n          </p>\n          <p className={styles.text}>\n            {renderText(lang('$about_description2'))}\n          </p>\n          {IS_EXTENSION ? (\n            <>\n              <h3 className={buildClassName(styles.text, styles.heading)}>\n                <Emoji from=\"🥷\" /> {lang('What is TON Proxy?')}\n              </h3>\n              <p className={styles.text}>\n                {renderText(lang('$about_extension_description1'))}{' '}\n                <a\n                  href=\"https://telegra.ph/TON-Sites-TON-WWW-and-TON-Proxy-09-29-2\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  {lang('More info and demo.')}\n                </a>\n              </p>\n              <h3 className={buildClassName(styles.text, styles.heading)}>\n                <Emoji from=\"🦄\" /> {lang('What is TON Magic?')}\n              </h3>\n              <p className={styles.text}>\n                {renderText(lang('$about_extension_description2'))}\n              </p>\n              <p className={styles.text}>\n                {lang('$about_extension_description3')}{' '}\n                <a href=\"https://telegra.ph/Telegram--TON-11-10\" target=\"_blank\" rel=\"noopener noreferrer\">\n                  {lang('More info and demo.')}\n                </a>\n              </p>\n            </>\n          ) : (\n            <>\n              <h3 className={buildClassName(styles.text, styles.heading)}>\n                {lang('$about_proxy_magic_title', { ninja: <Emoji from=\"🥷\" />, unicorn: <Emoji from=\"🦄\" /> })}\n              </h3>\n              <p className={styles.text}>\n                {lang('$about_proxy_magic_description', {\n                  extension_link: (\n                    <a href=\"https://mytonwallet.io/\" target=\"_blank\" rel=\"noreferrer\">\n                      {renderText(lang('$about_extension_link_text'))}\n                    </a>\n                  ),\n                })}\n              </p>\n            </>\n          )}\n          <h3 className={buildClassName(styles.text, styles.heading)}>\n            <i className={buildClassName(styles.github, 'icon-github')} /> {lang('Is it open source?')}\n          </h3>\n          <p className={styles.text}>\n            {lang('$about_wallet_github', {\n              github_link: (\n                <a href=\"https://github.com/mytonwalletorg/mytonwallet\" target=\"_blank\" rel=\"noreferrer\">\n                  {renderText(lang('$about_github_link_text'))}\n                </a>\n              ),\n            })}\n          </p>\n          <h3 className={styles.heading}>\n            <i className={buildClassName(styles.telegram, 'icon-telegram')} /> {lang('Is there a community?')}\n          </h3>\n          <p className={styles.text}>\n            {lang('$about_wallet_community', {\n              community_link: (\n                <a\n                  href={lang.code === 'ru' ? 'https://t.me/MyTonWalletRu' : 'https://t.me/MyTonWalletEn'}\n                  target=\"_blank\"\n                  rel=\"noreferrer\"\n                >\n                  {renderText(lang('$about_community_link_text'))}\n                </a>\n              ),\n            })}\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(SettingsAbout);\n","// Sometimes event is fired earlier than animation completes\nconst ANIMATION_END_DELAY = 50;\n\nexport function waitForTransitionEnd(\n  node: Node, handler: NoneToVoidFunction, propertyName?: string, fallbackMs?: number,\n) {\n  waitForEndEvent('transitionend', node, handler, propertyName, fallbackMs);\n}\n\nexport function waitForAnimationEnd(\n  node: Node, handler: NoneToVoidFunction, animationName?: string, fallbackMs?: number,\n) {\n  waitForEndEvent('animationend', node, handler, animationName, fallbackMs);\n}\n\nfunction waitForEndEvent(\n  eventType: 'transitionend' | 'animationend',\n  node: Node,\n  handler: NoneToVoidFunction,\n  detailedName?: string,\n  fallbackMs?: number,\n) {\n  let isHandled = false;\n\n  function handleAnimationEnd(e: TransitionEvent | AnimationEvent | Event) {\n    if (isHandled || e.target !== e.currentTarget) {\n      return;\n    }\n\n    if (detailedName && (\n      (e instanceof TransitionEvent && e.propertyName === detailedName)\n      || (e instanceof AnimationEvent && e.animationName === detailedName)\n    )) {\n      return;\n    }\n\n    isHandled = true;\n\n    node.removeEventListener(eventType, handleAnimationEnd);\n\n    setTimeout(() => {\n      handler();\n    }, ANIMATION_END_DELAY);\n  }\n\n  node.addEventListener(eventType, handleAnimationEnd);\n\n  if (fallbackMs) {\n    setTimeout(() => {\n      if (isHandled) return;\n\n      node.removeEventListener(eventType, handleAnimationEnd);\n\n      handler();\n    }, fallbackMs);\n  }\n}\n","// Used before applying CSS transition\nexport default function forceReflow(element: HTMLElement) {\n  // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n  element.offsetWidth;\n}\n","import type { RefObject } from 'react';\nimport { requestForcedReflow, requestMutation } from '../../lib/fasterdom/fasterdom';\nimport React, { useEffect, useLayoutEffect, useRef } from '../../lib/teact/teact';\nimport { addExtraClass, removeExtraClass, toggleExtraClass } from '../../lib/teact/teact-dom';\n\nimport type { GlobalState } from '../../global/types';\n\nimport { ANIMATION_LEVEL_MIN } from '../../config';\nimport { getGlobal } from '../../global';\nimport buildClassName from '../../util/buildClassName';\nimport { waitForAnimationEnd, waitForTransitionEnd } from '../../util/cssAnimationEndListeners';\nimport forceReflow from '../../util/forceReflow';\n\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport { dispatchHeavyAnimationEvent } from '../../hooks/useHeavyAnimationCheck';\nimport usePrevious from '../../hooks/usePrevious';\n\nimport './Transition.scss';\n\ntype AnimationName = (\n  'none' | 'slide' | 'slideRtl' | 'slideFade' | 'zoomFade' | 'slideLayers'\n  | 'fade' | 'pushSlide' | 'reveal' | 'slideOptimized' | 'slideOptimizedRtl' | 'semiFade'\n  | 'slideVertical' | 'slideVerticalFade'\n  );\nexport type ChildrenFn = (isActive: boolean, isFrom: boolean, currentKey: number) => React.ReactNode;\nexport type TransitionProps = {\n  ref?: RefObject<HTMLDivElement>;\n  activeKey: number;\n  nextKey?: number;\n  name: AnimationName;\n  direction?: 'auto' | 'inverse' | 1 | -1;\n  renderCount?: number;\n  shouldRestoreHeight?: boolean;\n  shouldCleanup?: boolean;\n  cleanupExceptionKey?: number;\n  // Used by async components which are usually remounted during first animation\n  shouldWrap?: boolean;\n  wrapExceptionKey?: number;\n  id?: string;\n  className?: string;\n  slideClassName?: string;\n  onStart?: NoneToVoidFunction;\n  onStop?: NoneToVoidFunction;\n  children: React.ReactNode | ChildrenFn;\n};\n\nconst FALLBACK_ANIMATION_END = 1000;\nconst CLASSES = {\n  slide: 'Transition_slide',\n  active: 'Transition_slide-active',\n  from: 'Transition_slide-from',\n  to: 'Transition_slide-to',\n  inactive: 'Transition_slide-inactive',\n};\n\nexport const ACTIVE_SLIDE_CLASS_NAME = CLASSES.active;\nexport const TO_SLIDE_CLASS_NAME = CLASSES.to;\n\nfunction Transition({\n  ref,\n  activeKey,\n  nextKey,\n  name,\n  direction = 'auto',\n  renderCount,\n  shouldRestoreHeight,\n  shouldCleanup,\n  cleanupExceptionKey,\n  shouldWrap,\n  wrapExceptionKey,\n  id,\n  className,\n  slideClassName,\n  onStart,\n  onStop,\n  children,\n}: TransitionProps) {\n  const currentKeyRef = useRef<number>();\n  // No need for a container to update on change\n  const { animationLevel } = getGlobal().settings;\n\n  // eslint-disable-next-line no-null/no-null\n  let containerRef = useRef<HTMLDivElement>(null);\n  if (ref) {\n    containerRef = ref;\n  }\n\n  const rendersRef = useRef<Record<number, React.ReactNode | ChildrenFn>>({});\n  const prevActiveKey = usePrevious<any>(activeKey);\n  const forceUpdate = useForceUpdate();\n\n  const activeKeyChanged = prevActiveKey !== undefined && activeKey !== prevActiveKey;\n\n  if (!renderCount && activeKeyChanged) {\n    rendersRef.current = { [prevActiveKey]: rendersRef.current[prevActiveKey] };\n  }\n\n  rendersRef.current[activeKey] = children;\n  if (nextKey) {\n    rendersRef.current[nextKey] = children;\n  }\n\n  const isBackwards = (\n    direction === -1\n    || (direction === 'auto' && prevActiveKey > activeKey)\n    || (direction === 'inverse' && prevActiveKey < activeKey)\n  );\n\n  useLayoutEffect(() => {\n    function cleanup() {\n      if (!shouldCleanup) {\n        return;\n      }\n\n      const preservedRender = cleanupExceptionKey !== undefined ? rendersRef.current[cleanupExceptionKey] : undefined;\n\n      rendersRef.current = preservedRender ? { [cleanupExceptionKey!]: preservedRender } : {};\n\n      forceUpdate();\n    }\n\n    const isSlideOptimized = name === 'slideOptimized' || name === 'slideOptimizedRtl';\n    const container = containerRef.current!;\n    const keys = Object.keys(rendersRef.current).map(Number);\n    const prevActiveIndex = renderCount ? prevActiveKey : keys.indexOf(prevActiveKey);\n    const activeIndex = renderCount ? activeKey : keys.indexOf(activeKey);\n    const nextIndex = nextKey ? (renderCount ? nextKey : keys.indexOf(nextKey)) : -1;\n\n    const childNodes = Array.from(container.childNodes);\n    if (!childNodes.length) {\n      return;\n    }\n\n    const childElements = Array.from(container.children) as HTMLElement[];\n    childElements.forEach((el) => {\n      addExtraClass(el, CLASSES.slide);\n\n      if (slideClassName) {\n        addExtraClass(el, slideClassName);\n      }\n    });\n\n    if (!activeKeyChanged) {\n      const activeChild = childNodes[activeIndex];\n      if (activeChild instanceof HTMLElement) {\n        addExtraClass(activeChild, CLASSES.active);\n\n        if (isSlideOptimized) {\n          activeChild.style.transition = 'none';\n          activeChild.style.transform = 'translate3d(0, 0, 0)';\n        }\n      }\n\n      const nextChild = nextIndex !== -1 && nextIndex !== activeIndex && childNodes[nextIndex] as HTMLElement;\n      if (nextChild instanceof HTMLElement) {\n        addExtraClass(nextChild, CLASSES.inactive);\n      }\n\n      return;\n    }\n\n    currentKeyRef.current = activeKey;\n\n    if (isSlideOptimized) {\n      performSlideOptimized(\n        animationLevel,\n        name,\n        isBackwards,\n        cleanup,\n        activeKey,\n        currentKeyRef,\n        container,\n        childNodes[activeIndex],\n        childNodes[prevActiveIndex],\n        shouldRestoreHeight,\n        onStart,\n        onStop,\n      );\n\n      return;\n    }\n\n    if (name === 'none' || animationLevel === ANIMATION_LEVEL_MIN) {\n      childNodes.forEach((node, i) => {\n        if (node instanceof HTMLElement) {\n          removeExtraClass(node, CLASSES.from);\n          removeExtraClass(node, CLASSES.to);\n          toggleExtraClass(node, CLASSES.active, i === activeIndex);\n          toggleExtraClass(node, CLASSES.inactive, i !== activeIndex);\n        }\n      });\n\n      cleanup();\n\n      return;\n    }\n\n    childNodes.forEach((node, i) => {\n      if (node instanceof HTMLElement) {\n        removeExtraClass(node, CLASSES.active);\n        toggleExtraClass(node, CLASSES.from, i === prevActiveIndex);\n        toggleExtraClass(node, CLASSES.to, i === activeIndex);\n        toggleExtraClass(node, CLASSES.inactive, i !== prevActiveIndex && i !== activeIndex);\n      }\n    });\n\n    const dispatchHeavyAnimationStop = dispatchHeavyAnimationEvent();\n    onStart?.();\n\n    toggleExtraClass(container, `Transition-${name}`, !isBackwards);\n    toggleExtraClass(container, `Transition-${name}Backwards`, isBackwards);\n\n    function onAnimationEnd() {\n      const activeElement = container.querySelector<HTMLDivElement>(`.${CLASSES.active}`);\n      const { clientHeight } = activeElement || {};\n\n      requestMutation(() => {\n        if (activeKey !== currentKeyRef.current) {\n          return;\n        }\n\n        removeExtraClass(container, `Transition-${name}`);\n        removeExtraClass(container, `Transition-${name}Backwards`);\n\n        childNodes.forEach((node, i) => {\n          if (node instanceof HTMLElement) {\n            removeExtraClass(node, CLASSES.from);\n            removeExtraClass(node, CLASSES.to);\n            toggleExtraClass(node, CLASSES.active, i === activeIndex);\n            toggleExtraClass(node, CLASSES.inactive, i !== activeIndex);\n          }\n        });\n\n        if (shouldRestoreHeight) {\n          if (activeElement) {\n            activeElement.style.height = 'auto';\n            container.style.height = `${clientHeight}px`;\n          }\n        }\n\n        onStop?.();\n        dispatchHeavyAnimationStop();\n\n        cleanup();\n      });\n    }\n\n    const watchedNode = name === 'reveal' && isBackwards\n      ? childNodes[prevActiveIndex]\n      : childNodes[activeIndex];\n\n    if (watchedNode) {\n      waitForAnimationEnd(watchedNode, onAnimationEnd, undefined, FALLBACK_ANIMATION_END);\n    } else {\n      onAnimationEnd();\n    }\n  }, [\n    activeKey,\n    nextKey,\n    prevActiveKey,\n    activeKeyChanged,\n    isBackwards,\n    name,\n    onStart,\n    onStop,\n    renderCount,\n    shouldRestoreHeight,\n    shouldCleanup,\n    slideClassName,\n    cleanupExceptionKey,\n    animationLevel,\n    forceUpdate,\n  ]);\n\n  useEffect(() => {\n    if (!shouldRestoreHeight) {\n      return;\n    }\n\n    const container = containerRef.current!;\n    const activeElement = container.querySelector<HTMLDivElement>(`.${CLASSES.active}`)\n      || container.querySelector<HTMLDivElement>(`.${CLASSES.from}`);\n    if (!activeElement) {\n      return;\n    }\n\n    const { clientHeight } = activeElement || {};\n    if (!clientHeight) {\n      return;\n    }\n\n    requestMutation(() => {\n      activeElement.style.height = 'auto';\n      container.style.height = `${clientHeight}px`;\n      container.style.flexBasis = `${clientHeight}px`;\n    });\n  }, [shouldRestoreHeight, children]);\n\n  const asFastList = !renderCount;\n  const renders = rendersRef.current;\n  const renderKeys = Object.keys(renderCount ? new Array(renderCount).fill(undefined) : renders).map(Number);\n  const contents = renderKeys.map((key) => {\n    const render = renders[key];\n    if (!render) {\n      return undefined;\n    }\n\n    const rendered = typeof render === 'function' ? render(key === activeKey, key === prevActiveKey, key) : render;\n\n    return (shouldWrap && key !== wrapExceptionKey) || asFastList ? (\n      <div key={key} teactOrderKey={key}>\n        {rendered}\n      </div>\n    ) : (\n      rendered\n    );\n  });\n\n  return (\n    <div\n      ref={containerRef}\n      id={id}\n      className={buildClassName('Transition', className)}\n      teactFastList={asFastList}\n    >\n      {contents}\n    </div>\n  );\n}\n\nexport default Transition;\n\nfunction performSlideOptimized(\n  animationLevel: GlobalState['settings']['animationLevel'],\n  name: 'slideOptimized' | 'slideOptimizedRtl',\n  isBackwards: boolean,\n  cleanup: NoneToVoidFunction,\n  activeKey: number,\n  currentKeyRef: { current: number | undefined },\n  container: HTMLElement,\n  toSlide: ChildNode,\n  fromSlide?: ChildNode,\n  shouldRestoreHeight?: boolean,\n  onStart?: NoneToVoidFunction,\n  onStop?: NoneToVoidFunction,\n) {\n  if (animationLevel === ANIMATION_LEVEL_MIN) {\n    toggleExtraClass(container, `Transition-${name}`, !isBackwards);\n    toggleExtraClass(container, `Transition-${name}Backwards`, isBackwards);\n\n    if (fromSlide instanceof HTMLElement) {\n      fromSlide.style.transition = 'none';\n      fromSlide.style.transform = '';\n      removeExtraClass(fromSlide, CLASSES.active);\n    }\n\n    if (toSlide instanceof HTMLElement) {\n      toSlide.style.transition = 'none';\n      toSlide.style.transform = 'translate3d(0, 0, 0)';\n      addExtraClass(toSlide, CLASSES.active);\n    }\n\n    cleanup();\n\n    return;\n  }\n\n  if (name === 'slideOptimizedRtl') {\n    isBackwards = !isBackwards;\n  }\n\n  const dispatchHeavyAnimationStop = dispatchHeavyAnimationEvent();\n\n  onStart?.();\n\n  toggleExtraClass(container, `Transition-${name}`, !isBackwards);\n  toggleExtraClass(container, `Transition-${name}Backwards`, isBackwards);\n\n  if (fromSlide instanceof HTMLElement) {\n    fromSlide.style.transition = 'none';\n    fromSlide.style.transform = 'translate3d(0, 0, 0)';\n  }\n\n  if (toSlide instanceof HTMLElement) {\n    toSlide.style.transition = 'none';\n    toSlide.style.transform = `translate3d(${isBackwards ? '-' : ''}100%, 0, 0)`;\n  }\n\n  requestForcedReflow(() => {\n    if (toSlide instanceof HTMLElement) {\n      forceReflow(toSlide);\n    }\n\n    return () => {\n      if (fromSlide instanceof HTMLElement) {\n        fromSlide.style.transition = '';\n        fromSlide.style.transform = `translate3d(${isBackwards ? '' : '-'}100%, 0, 0)`;\n        removeExtraClass(fromSlide, CLASSES.active);\n      }\n\n      if (toSlide instanceof HTMLElement) {\n        toSlide.style.transition = '';\n        toSlide.style.transform = 'translate3d(0, 0, 0)';\n        addExtraClass(toSlide, CLASSES.active);\n      }\n    };\n  });\n\n  waitForTransitionEnd(toSlide, () => {\n    const clientHeight = toSlide instanceof HTMLElement ? toSlide.clientHeight : undefined;\n\n    requestMutation(() => {\n      if (activeKey !== currentKeyRef.current) {\n        return;\n      }\n\n      if (fromSlide instanceof HTMLElement) {\n        fromSlide.style.transition = 'none';\n        fromSlide.style.transform = '';\n      }\n\n      if (shouldRestoreHeight && clientHeight && toSlide instanceof HTMLElement) {\n        toSlide.style.height = 'auto';\n        container.style.height = `${clientHeight}px`;\n      }\n\n      onStop?.();\n      dispatchHeavyAnimationStop();\n      cleanup();\n    });\n  });\n}\n","import bill from '../../../assets/lottie/duck_bill.tgs';\nimport forge from '../../../assets/lottie/duck_forges.tgs';\nimport happy from '../../../assets/lottie/duck_happy.tgs';\nimport hello from '../../../assets/lottie/duck_hello.tgs';\nimport noData from '../../../assets/lottie/duck_no-data.tgs';\nimport snitch from '../../../assets/lottie/duck_snitch.tgs';\nimport thumbUp from '../../../assets/lottie/duck_thumb.tgs';\nimport holdTon from '../../../assets/lottie/duck_ton.tgs';\nimport wait from '../../../assets/lottie/duck_wait.tgs';\nimport billPreview from '../../../assets/lottiePreview/duck_bill.png';\nimport forgePreview from '../../../assets/lottiePreview/duck_forges.png';\nimport happyPreview from '../../../assets/lottiePreview/duck_happy.png';\nimport helloPreview from '../../../assets/lottiePreview/duck_hello.png';\nimport noDataPreview from '../../../assets/lottiePreview/duck_no-data.png';\nimport snitchPreview from '../../../assets/lottiePreview/duck_snitch.png';\nimport thumbUpPreview from '../../../assets/lottiePreview/duck_thumb.png';\nimport holdTonPreview from '../../../assets/lottiePreview/duck_ton.png';\nimport waitPreview from '../../../assets/lottiePreview/duck_wait.png';\n\nexport const ANIMATED_STICKERS_PATHS = {\n  hello,\n  snitch,\n  bill,\n  thumbUp,\n  holdTon,\n  happy,\n  noData,\n  forge,\n  wait,\n  helloPreview,\n  snitchPreview,\n  billPreview,\n  thumbUpPreview,\n  holdTonPreview,\n  happyPreview,\n  noDataPreview,\n  forgePreview,\n  waitPreview,\n};\n","type Parts = (string | false | undefined)[];\n\nexport default function buildStyle(...parts: Parts) {\n  return parts.filter(Boolean).join(';');\n}\n","type RLottieClass = typeof import('./RLottie').default;\n\nlet promise: Promise<RLottieClass>;\nlet RLottie: RLottieClass;\n\n// Time for the main interface to completely load\nconst LOTTIE_LOAD_DELAY = 3000;\n\nexport async function ensureRLottie() {\n  if (!promise) {\n    promise = import('./RLottie').then((module) => module.default);\n    RLottie = await promise;\n  }\n\n  return promise;\n}\n\nexport function getRLottie() {\n  return RLottie;\n}\n\nsetTimeout(ensureRLottie, LOTTIE_LOAD_DELAY);\n","import { useEffect } from '../lib/teact/teact';\n\nimport { createCallbackManager } from '../util/callbacks';\nimport useLastCallback from './useLastCallback';\n\nconst blurCallbacks = createCallbackManager();\nconst focusCallbacks = createCallbackManager();\n\nlet isFocused = document.hasFocus();\n\nwindow.addEventListener('blur', () => {\n  if (!isFocused) {\n    return;\n  }\n\n  isFocused = false;\n  blurCallbacks.runCallbacks();\n});\n\nwindow.addEventListener('focus', () => {\n  isFocused = true;\n  focusCallbacks.runCallbacks();\n});\n\nexport default function useBackgroundMode(\n  onBlur?: AnyToVoidFunction,\n  onFocus?: AnyToVoidFunction,\n  isDisabled = false,\n) {\n  const lastOnBlur = useLastCallback(onBlur);\n  const lastOnFocus = useLastCallback(onFocus);\n\n  useEffect(() => {\n    if (isDisabled) {\n      return undefined;\n    }\n\n    if (!isFocused) {\n      lastOnBlur();\n    }\n\n    blurCallbacks.addCallback(lastOnBlur);\n    focusCallbacks.addCallback(lastOnFocus);\n\n    return () => {\n      focusCallbacks.removeCallback(lastOnFocus);\n      blurCallbacks.removeCallback(lastOnBlur);\n    };\n  }, [isDisabled, lastOnBlur, lastOnFocus]);\n}\n\nexport function isBackgroundModeActive() {\n  return !isFocused;\n}\n","import { useEffect, useRef } from '../lib/teact/teact';\n\nconst useEffectWithPrevDeps = <const T extends readonly any[]>(\n  cb: (args: T | readonly []) => void, dependencies: T, debugKey?: string,\n) => {\n  const prevDepsRef = useRef<T>();\n\n  return useEffect(() => {\n    const prevDeps = prevDepsRef.current;\n    prevDepsRef.current = dependencies;\n\n    return cb(prevDeps || []);\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, dependencies, debugKey);\n};\n\nexport default useEffectWithPrevDeps;\n","import { useEffect } from '../lib/teact/teact';\n\nimport { createCallbackManager } from '../util/callbacks';\nimport useLastCallback from './useLastCallback';\n\nconst startCallbacks = createCallbackManager();\nconst endCallbacks = createCallbackManager();\n\nlet timeout: number | undefined;\nlet isActive = false;\n\nconst usePriorityPlaybackCheck = (\n  onStart?: AnyToVoidFunction,\n  onEnd?: AnyToVoidFunction,\n  isDisabled = false,\n) => {\n  const lastOnStart = useLastCallback(onStart);\n  const lastOnEnd = useLastCallback(onEnd);\n\n  useEffect(() => {\n    if (isDisabled) {\n      return undefined;\n    }\n\n    if (isActive) {\n      lastOnStart();\n    }\n\n    startCallbacks.addCallback(lastOnStart);\n    endCallbacks.addCallback(lastOnEnd);\n\n    return () => {\n      endCallbacks.removeCallback(lastOnEnd);\n      startCallbacks.removeCallback(lastOnStart);\n    };\n  }, [isDisabled, lastOnStart, lastOnEnd]);\n};\n\nexport function isPriorityPlaybackActive() {\n  return isActive;\n}\n\nexport function dispatchPriorityPlaybackEvent() {\n  if (!isActive) {\n    isActive = true;\n    startCallbacks.runCallbacks();\n  }\n\n  if (timeout) {\n    clearTimeout(timeout);\n    timeout = undefined;\n  }\n\n  // Race condition may happen if another `dispatchPriorityPlaybackEvent` is called before `onEnd`\n  function onEnd() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = undefined;\n    }\n\n    isActive = false;\n    endCallbacks.runCallbacks();\n  }\n\n  return onEnd;\n}\n\nexport default usePriorityPlaybackCheck;\n","import { useEffect } from '../lib/teact/teact';\n\nimport type { CallbackManager } from '../util/callbacks';\nimport { createCallbackManager } from '../util/callbacks';\nimport { useStateRef } from './useStateRef';\n\nconst elementObserverMap = new Map<HTMLElement, [IntersectionObserver, CallbackManager]>();\n\nexport default function useSharedIntersectionObserver(\n  refOrElement: React.RefObject<HTMLElement> | HTMLElement | undefined,\n  onIntersectionChange: (entry: IntersectionObserverEntry) => void,\n  isDisabled = false,\n) {\n  const onIntersectionChangeRef = useStateRef(onIntersectionChange);\n\n  useEffect(() => {\n    const el = refOrElement && 'current' in refOrElement ? refOrElement.current : refOrElement;\n    if (!el || isDisabled) {\n      return undefined;\n    }\n\n    const callback: IntersectionObserverCallback = ([entry]) => {\n      // Ignore updates when element is not properly mounted (`display: none`)\n      if (!(entry.target as HTMLElement).offsetWidth || !(entry.target as HTMLElement).offsetHeight) {\n        return;\n      }\n\n      onIntersectionChangeRef.current(entry);\n    };\n\n    let [observer, callbackManager] = elementObserverMap.get(el) || [undefined, undefined];\n    if (!observer) {\n      callbackManager = createCallbackManager();\n      observer = new IntersectionObserver(callbackManager.runCallbacks);\n      elementObserverMap.set(el, [observer, callbackManager]);\n      observer.observe(el);\n    }\n    callbackManager!.addCallback(callback);\n\n    return () => {\n      callbackManager!.removeCallback(callback);\n      if (!callbackManager!.hasCallbacks()) {\n        observer!.unobserve(el);\n        observer!.disconnect();\n        elementObserverMap.delete(el);\n      }\n    };\n  }, [isDisabled, onIntersectionChangeRef, refOrElement]);\n}\n","import type { RefObject } from 'react';\nimport { requestMeasure } from '../../lib/fasterdom/fasterdom';\nimport type RLottieInstance from '../../lib/rlottie/RLottie';\nimport { ensureRLottie, getRLottie } from '../../lib/rlottie/RLottie.async';\nimport type { FC } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport { IS_ELECTRON } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport buildStyle from '../../util/buildStyle';\nimport generateUniqueId from '../../util/generateUniqueId';\n\nimport useBackgroundMode, { isBackgroundModeActive } from '../../hooks/useBackgroundMode';\nimport useEffectWithPrevDeps from '../../hooks/useEffectWithPrevDeps';\nimport useHeavyAnimationCheck, { isHeavyAnimating } from '../../hooks/useHeavyAnimationCheck';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport usePriorityPlaybackCheck, { isPriorityPlaybackActive } from '../../hooks/usePriorityPlaybackCheck';\nimport useSharedIntersectionObserver from '../../hooks/useSharedIntersectionObserver';\nimport { useStateRef } from '../../hooks/useStateRef';\nimport useThrottledCallback from '../../hooks/useThrottledCallback';\nimport useUniqueId from '../../hooks/useUniqueId';\n\nexport type OwnProps = {\n  ref?: RefObject<HTMLDivElement>;\n  renderId?: string;\n  className?: string;\n  style?: string;\n  tgsUrl?: string;\n  play?: boolean | string;\n  playSegment?: [number, number];\n  speed?: number;\n  noLoop?: boolean;\n  size: number;\n  quality?: number;\n  color?: string;\n  isLowPriority?: boolean;\n  forceOnHeavyAnimation?: boolean;\n  forceInBackground?: boolean;\n  sharedCanvas?: HTMLCanvasElement;\n  sharedCanvasCoords?: { x: number; y: number };\n  onClick?: NoneToVoidFunction;\n  onLoad?: NoneToVoidFunction;\n  onEnded?: NoneToVoidFunction;\n  onLoop?: NoneToVoidFunction;\n};\n\nconst THROTTLE_MS = 150;\n\nconst AnimatedSticker: FC<OwnProps> = ({\n  ref,\n  renderId,\n  className,\n  style,\n  tgsUrl,\n  play,\n  playSegment,\n  speed,\n  noLoop,\n  size,\n  quality,\n  isLowPriority,\n  color,\n  forceOnHeavyAnimation,\n  forceInBackground,\n  sharedCanvas,\n  sharedCanvasCoords,\n  onClick,\n  onLoad,\n  onEnded,\n  onLoop,\n}) => {\n  // eslint-disable-next-line no-null/no-null\n  let containerRef = useRef<HTMLDivElement>(null);\n  if (ref) {\n    containerRef = ref;\n  }\n\n  const viewId = useUniqueId();\n\n  const [animation, setAnimation] = useState<RLottieInstance>();\n  const animationRef = useRef<RLottieInstance>();\n  const isFirstRender = useRef(true);\n\n  const playKey = play || (play === false ? false : playSegment);\n  const playRef = useStateRef(play);\n  const playSegmentRef = useStateRef(playSegment);\n\n  const rgbColor = useRef<[number, number, number] | undefined>();\n\n  const isUnmountedRef = useRef(false);\n  useEffect(() => {\n    return () => {\n      isUnmountedRef.current = true;\n    };\n  }, []);\n\n  const init = useLastCallback(() => {\n    if (\n      animationRef.current\n      || isUnmountedRef.current\n      || !tgsUrl\n      || (sharedCanvas && (!sharedCanvasCoords || !sharedCanvas.offsetWidth || !sharedCanvas.offsetHeight))\n    ) {\n      return;\n    }\n\n    const container = containerRef.current || sharedCanvas;\n    if (!container) {\n      return;\n    }\n\n    const newAnimation = getRLottie().init(\n      tgsUrl,\n      container,\n      renderId || generateUniqueId(),\n      {\n        size,\n        noLoop,\n        quality,\n        isLowPriority,\n        coords: sharedCanvasCoords,\n      },\n      viewId,\n      rgbColor.current,\n      onLoad,\n      onEnded,\n      onLoop,\n    );\n\n    if (speed) {\n      newAnimation.setSpeed(speed);\n    }\n\n    setAnimation(newAnimation);\n    animationRef.current = newAnimation;\n  });\n\n  useEffect(() => {\n    if (getRLottie()) {\n      init();\n    } else {\n      ensureRLottie().then(init);\n    }\n  }, [init, tgsUrl, sharedCanvas, sharedCanvasCoords]);\n\n  const throttledInit = useThrottledCallback(init, [init], THROTTLE_MS);\n  useSharedIntersectionObserver(sharedCanvas, throttledInit);\n\n  useEffect(() => {\n    if (!animation) return;\n\n    animation.setColor(rgbColor.current);\n  }, [color, animation]);\n\n  useEffect(() => {\n    return () => {\n      animationRef.current?.removeView(viewId);\n    };\n  }, [viewId]);\n\n  const playAnimation = useLastCallback((shouldRestart = false) => {\n    if (\n      !animation\n      || !(playRef.current || playSegmentRef.current)\n      || isFrozen(forceOnHeavyAnimation, forceInBackground)\n    ) {\n      return;\n    }\n\n    if (playSegmentRef.current) {\n      animation.playSegment(playSegmentRef.current, shouldRestart, viewId);\n    } else {\n      animation.play(shouldRestart, viewId);\n    }\n  });\n\n  const playAnimationOnRaf = useLastCallback(() => {\n    requestMeasure(playAnimation);\n  });\n\n  const pauseAnimation = useLastCallback(() => {\n    if (animation?.isPlaying()) {\n      animation.pause(viewId);\n    }\n  });\n\n  useEffectWithPrevDeps(([prevNoLoop]) => {\n    if (prevNoLoop !== undefined && noLoop !== prevNoLoop) {\n      animation?.setNoLoop(noLoop);\n    }\n  }, [noLoop, animation]);\n\n  useEffectWithPrevDeps(([prevSharedCanvasCoords]) => {\n    if (prevSharedCanvasCoords !== undefined && sharedCanvasCoords !== prevSharedCanvasCoords) {\n      animation?.setSharedCanvasCoords(viewId, sharedCanvasCoords);\n    }\n  }, [sharedCanvasCoords, viewId, animation]);\n\n  useEffect(() => {\n    if (!animation) {\n      return;\n    }\n\n    if (playKey) {\n      if (!isFrozen(forceOnHeavyAnimation, forceInBackground)) {\n        playAnimation(noLoop);\n      }\n    } else {\n      pauseAnimation();\n    }\n  }, [animation, playKey, noLoop, playAnimation, pauseAnimation, forceOnHeavyAnimation, forceInBackground]);\n\n  useEffect(() => {\n    if (animation) {\n      if (isFirstRender.current) {\n        isFirstRender.current = false;\n      } else if (tgsUrl) {\n        animation.changeData(tgsUrl);\n        playAnimation();\n      }\n    }\n  }, [playAnimation, animation, tgsUrl]);\n\n  useHeavyAnimationCheck(pauseAnimation, playAnimation, !playKey || forceOnHeavyAnimation);\n  usePriorityPlaybackCheck(pauseAnimation, playAnimation, !playKey);\n  // Pausing frame may not happen in background,\n  // so we need to make sure it happens right after focusing,\n  // then we can play again.\n  useBackgroundMode(pauseAnimation, playAnimationOnRaf, !playKey || forceInBackground);\n\n  if (sharedCanvas) {\n    return undefined;\n  }\n\n  return (\n    <div\n      ref={containerRef}\n      className={buildClassName('AnimatedSticker', className)}\n      style={buildStyle(\n        size !== undefined && `width: ${size}px; height: ${size}px;`,\n        onClick && !IS_ELECTRON && 'cursor: pointer',\n        style,\n      )}\n      onClick={onClick}\n    />\n  );\n};\n\nexport default memo(AnimatedSticker);\n\nfunction isFrozen(forceOnHeavyAnimation = false, forceInBackground = false) {\n  return (!forceOnHeavyAnimation && isHeavyAnimating())\n    || isPriorityPlaybackActive()\n    || (!forceInBackground && isBackgroundModeActive());\n}\n","import { useCallback, useMemo } from '../lib/teact/teact';\n\nimport type { Scheduler } from '../util/schedulers';\nimport { throttle, throttleWith } from '../util/schedulers';\n\nexport default function useThrottledCallback<T extends AnyToVoidFunction>(\n  fn: T,\n  deps: any[],\n  msOrSchedulerFn: number | Scheduler,\n  noFirst = false,\n) {\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  const fnMemo = useCallback(fn, deps);\n\n  return useMemo(() => {\n    if (typeof msOrSchedulerFn === 'number') {\n      return throttle(fnMemo, msOrSchedulerFn, !noFirst);\n    } else {\n      return throttleWith(msOrSchedulerFn, fnMemo);\n    }\n  }, [fnMemo, msOrSchedulerFn, noFirst]);\n}\n","import React, {\n  memo, useCallback, useState,\n} from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useFlag from '../../hooks/useFlag';\nimport useMediaTransition from '../../hooks/useMediaTransition';\n\nimport type { OwnProps as AnimatedStickerProps } from './AnimatedSticker';\nimport AnimatedSticker from './AnimatedSticker';\n\nexport type OwnProps =\n  Partial<AnimatedStickerProps>\n  & { noTransition?: boolean; nonInteractive?: boolean; size: number };\n\nfunction AnimatedIcon(props: OwnProps) {\n  const {\n    size,\n    play = true,\n    noLoop = true,\n    className,\n    noTransition,\n    nonInteractive,\n    onLoad,\n    onClick,\n    ...otherProps\n  } = props;\n  const [isAnimationLoaded, markAnimationLoaded] = useFlag(false);\n  const transitionClassNames = useMediaTransition(noTransition || isAnimationLoaded);\n\n  const handleLoad = useCallback(() => {\n    markAnimationLoaded();\n    onLoad?.();\n  }, [markAnimationLoaded, onLoad]);\n\n  const [playKey, setPlayKey] = useState(String(Math.random()));\n\n  const handleClick = useCallback(() => {\n    if (play === true) {\n      setPlayKey(String(Math.random()));\n    }\n\n    onClick?.();\n  }, [onClick, play]);\n\n  return (\n    <AnimatedSticker\n      className={buildClassName(className, transitionClassNames)}\n      size={size}\n      play={play === true ? playKey : play}\n      noLoop={noLoop}\n      onClick={!nonInteractive ? handleClick : undefined}\n      onLoad={handleLoad}\n      /* eslint-disable-next-line react/jsx-props-no-spreading */\n      {...otherProps}\n    />\n  );\n}\n\nexport default memo(AnimatedIcon);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"j6PlBZGgrcLPvq4ZgQly\",\"preview\":\"SebvXh8Fd6hv5K_Forju\"};","import React, { memo, useCallback, useEffect } from '../../lib/teact/teact';\n\nimport { ANIMATION_LEVEL_MIN } from '../../config';\nimport { withGlobal } from '../../global';\nimport buildClassName from '../../util/buildClassName';\nimport buildStyle from '../../util/buildStyle';\n\nimport useFlag from '../../hooks/useFlag';\nimport useMediaTransition from '../../hooks/useMediaTransition';\n\nimport type { OwnProps as AnimatedIconProps } from './AnimatedIcon';\nimport AnimatedIcon from './AnimatedIcon';\n\nimport styles from './AnimatedIconWithPreview.module.scss';\n\ntype OwnProps =\n  Partial<AnimatedIconProps>\n  & { previewUrl?: string; thumbDataUri?: string; noPreviewTransition?: boolean };\n\ninterface StateProps {\n  noAnimation?: boolean;\n}\n\nconst loadedPreviewUrls = new Set();\nconst DEFAULT_SIZE = 150;\n\nfunction AnimatedIconWithPreview(props: OwnProps & StateProps) {\n  const {\n    size = DEFAULT_SIZE, previewUrl, thumbDataUri, className, noAnimation, ...otherProps\n  } = props;\n\n  const [isPreviewLoaded, markPreviewLoaded] = useFlag(Boolean(thumbDataUri) || loadedPreviewUrls.has(previewUrl));\n  const transitionClassNames = useMediaTransition(isPreviewLoaded);\n  const [isAnimationReady, markAnimationReady, markAnimationNotReady] = useFlag(false);\n\n  useEffect(() => {\n    if (noAnimation) {\n      markAnimationNotReady();\n    }\n  }, [markAnimationNotReady, noAnimation]);\n\n  const handlePreviewLoad = useCallback(() => {\n    markPreviewLoaded();\n    loadedPreviewUrls.add(previewUrl);\n  }, [markPreviewLoaded, previewUrl]);\n\n  return (\n    <div\n      className={buildClassName(className, styles.root, transitionClassNames)}\n      style={buildStyle(size !== undefined && `width: ${size}px; height: ${size}px;`)}\n    >\n      {thumbDataUri && !previewUrl && !isAnimationReady && (\n        // eslint-disable-next-line jsx-a11y/alt-text\n        <img src={thumbDataUri} className={styles.preview} />\n      )}\n      {previewUrl && !isAnimationReady && (\n        // eslint-disable-next-line jsx-a11y/alt-text\n        <img\n          src={previewUrl}\n          className={styles.preview}\n          onLoad={handlePreviewLoad}\n        />\n      )}\n      {/* eslint-disable-next-line react/jsx-props-no-spreading */}\n      {!noAnimation && <AnimatedIcon size={size} {...otherProps} onLoad={markAnimationReady} noTransition />}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    noAnimation: global.settings.animationLevel === ANIMATION_LEVEL_MIN,\n  };\n})(AnimatedIconWithPreview));\n","type HandlerName = 'onEnter' | 'onBackspace' | 'onDelete' | 'onEsc' | 'onUp' | 'onDown' | 'onLeft' | 'onRight'\n| 'onTab';\ntype Handler = (e: KeyboardEvent) => void;\ntype CaptureOptions = Partial<Record<HandlerName, Handler>>;\n\nconst keyToHandlerName: Record<string, HandlerName> = {\n  Enter: 'onEnter',\n  Backspace: 'onBackspace',\n  Delete: 'onDelete',\n  Esc: 'onEsc',\n  Escape: 'onEsc',\n  ArrowUp: 'onUp',\n  ArrowDown: 'onDown',\n  ArrowLeft: 'onLeft',\n  ArrowRight: 'onRight',\n  Tab: 'onTab',\n};\n\nconst handlers: Record<HandlerName, Handler[]> = {\n  onEnter: [],\n  onDelete: [],\n  onBackspace: [],\n  onEsc: [],\n  onUp: [],\n  onDown: [],\n  onLeft: [],\n  onRight: [],\n  onTab: [],\n};\n\nexport default function captureKeyboardListeners(options: CaptureOptions) {\n  if (!hasActiveHandlers()) {\n    document.addEventListener('keydown', handleKeyDown, true);\n  }\n\n  (Object.keys(options) as Array<HandlerName>).forEach((handlerName) => {\n    const handler = options[handlerName];\n    if (!handler) {\n      return;\n    }\n\n    const currentEventHandlers = handlers[handlerName];\n    if (currentEventHandlers) {\n      currentEventHandlers.push(handler);\n    }\n  });\n\n  return () => {\n    releaseKeyboardListener(options);\n  };\n}\n\nfunction hasActiveHandlers() {\n  return Object.values(handlers).some((keyHandlers) => Boolean(keyHandlers.length));\n}\n\nfunction handleKeyDown(e: KeyboardEvent) {\n  const handlerName = keyToHandlerName[e.key];\n  if (!handlerName) {\n    return;\n  }\n\n  const { length } = handlers[handlerName];\n  if (!length) {\n    return;\n  }\n  e.stopPropagation();\n\n  const handler = handlers[handlerName][length - 1];\n  handler!(e);\n}\n\nfunction releaseKeyboardListener(options: CaptureOptions) {\n  (Object.keys(options) as Array<HandlerName>).forEach((handlerName) => {\n    const handler = options[handlerName];\n    const currentEventHandlers = handlers[handlerName];\n    if (currentEventHandlers) {\n      const index = currentEventHandlers.findIndex((cb) => cb === handler);\n      if (index !== -1) {\n        currentEventHandlers.splice(index, 1);\n      }\n    }\n  });\n\n  if (!hasActiveHandlers()) {\n    document.removeEventListener('keydown', handleKeyDown, false);\n  }\n}\n","export default function trapFocus(element: HTMLElement) {\n  function handleKeyDown(e: KeyboardEvent) {\n    if (e.key !== 'Tab') {\n      return;\n    }\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    const focusableElements = Array.from(\n      element.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'),\n    ) as HTMLElement[];\n    if (!focusableElements.length) {\n      return;\n    }\n\n    const currentFocusedIndex = focusableElements.findIndex((em) => em.isSameNode(document.activeElement));\n    let newFocusedIndex = 0;\n    if (currentFocusedIndex >= 0) {\n      if (e.shiftKey) {\n        newFocusedIndex = currentFocusedIndex > 0\n          ? currentFocusedIndex - 1\n          : focusableElements.length - 1;\n      } else {\n        newFocusedIndex = currentFocusedIndex < focusableElements.length - 1\n          ? currentFocusedIndex + 1\n          : 0;\n      }\n    }\n\n    focusableElements[newFocusedIndex].focus();\n  }\n\n  document.addEventListener('keydown', handleKeyDown, false);\n\n  return () => {\n    document.removeEventListener('keydown', handleKeyDown, false);\n  };\n}\n","import type { VirtualElement } from '../../lib/teact/teact';\nimport { useLayoutEffect, useRef } from '../../lib/teact/teact';\nimport TeactDOM from '../../lib/teact/teact-dom';\n\ntype OwnProps = {\n  containerId?: string;\n  className?: string;\n  style?: string;\n  children: VirtualElement;\n};\n\nfunction Portal({\n  containerId, className, style, children,\n}: OwnProps): TeactJsx {\n  const elementRef = useRef<HTMLDivElement>();\n  if (!elementRef.current) {\n    elementRef.current = document.createElement('div');\n  }\n\n  useLayoutEffect(() => {\n    const container = document.querySelector<HTMLDivElement>(containerId || '#portals');\n    if (!container) {\n      return undefined;\n    }\n\n    const element = elementRef.current!;\n\n    if (className) {\n      element.className = className;\n    }\n\n    if (style) {\n      element.style.cssText = style;\n    }\n\n    container.appendChild(element);\n\n    return () => {\n      TeactDOM.render(undefined, element);\n      container.removeChild(element);\n    };\n  }, [className, style, containerId]);\n\n  return TeactDOM.render(children, elementRef.current);\n}\n\nexport default Portal;\n","import type { RefObject } from 'react';\nimport type {\n  TeactNode,\n} from '../../lib/teact/teact';\nimport React, {\n  useCallback, useEffect, useRef,\n} from '../../lib/teact/teact';\n\nimport { ANIMATION_END_DELAY } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport trapFocus from '../../util/trapFocus';\nimport { IS_EXTENSION } from '../../util/windowEnvironment';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useEffectWithPrevDeps from '../../hooks/useEffectWithPrevDeps';\nimport { dispatchHeavyAnimationEvent } from '../../hooks/useHeavyAnimationCheck';\nimport useLang from '../../hooks/useLang';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport Button from './Button';\nimport Portal from './Portal';\n\nimport styles from './Modal.module.scss';\n\ntype OwnProps = {\n  title?: string | TeactNode;\n  className?: string;\n  dialogClassName?: string;\n  contentClassName?: string;\n  isOpen?: boolean;\n  isCompact?: boolean;\n  isSlideUp?: boolean;\n  noBackdrop?: boolean;\n  noBackdropClose?: boolean;\n  header?: any;\n  hasCloseButton?: boolean;\n  children: React.ReactNode;\n  onClose: () => void;\n  onCloseAnimationEnd?: () => void;\n  onEnter?: () => void;\n  dialogRef?: RefObject<HTMLDivElement>;\n};\n\ntype StateProps = {\n  shouldSkipHistoryAnimations?: boolean;\n};\n\nconst ANIMATION_DURATION = 350;\nconst ANIMATION_DURATION_PORTRAIT = 500;\n\nfunction Modal({\n  dialogRef,\n  title,\n  className,\n  dialogClassName,\n  contentClassName,\n  isOpen,\n  isCompact,\n  isSlideUp,\n  noBackdrop,\n  noBackdropClose,\n  header,\n  hasCloseButton,\n  children,\n  onClose,\n  onCloseAnimationEnd,\n  onEnter,\n  shouldSkipHistoryAnimations,\n}: OwnProps & StateProps): TeactJsx {\n  const { isPortrait } = useDeviceScreen();\n  const animationDuration = isPortrait ? ANIMATION_DURATION_PORTRAIT : ANIMATION_DURATION;\n\n  const { shouldRender, transitionClassNames } = useShowTransition(\n    isOpen,\n    onCloseAnimationEnd,\n    shouldSkipHistoryAnimations,\n    false,\n    shouldSkipHistoryAnimations,\n    animationDuration + ANIMATION_END_DELAY,\n  );\n\n  // eslint-disable-next-line no-null/no-null\n  const modalRef = useRef<HTMLDivElement>(null);\n  const lang = useLang();\n\n  const handleClose = useCallback(\n    (e: KeyboardEvent) => {\n      if (IS_EXTENSION) {\n        e.preventDefault();\n      }\n\n      onClose();\n    },\n    [onClose],\n  );\n\n  useEffect(\n    () => (isOpen ? captureKeyboardListeners({ onEsc: handleClose, onEnter }) : undefined),\n    [handleClose, isOpen, onEnter],\n  );\n  useEffect(() => (isOpen && modalRef.current ? trapFocus(modalRef.current) : undefined), [isOpen]);\n\n  useEffectWithPrevDeps(\n    ([prevIsOpen]) => {\n      if (isOpen || (!isOpen && prevIsOpen !== undefined)) {\n        dispatchHeavyAnimationEvent(animationDuration + ANIMATION_END_DELAY);\n      }\n    },\n    [animationDuration, isOpen],\n  );\n\n  if (!shouldRender) {\n    return undefined;\n  }\n\n  function renderHeader() {\n    if (header) {\n      return header;\n    }\n\n    if (!title) {\n      return undefined;\n    }\n\n    return (\n      <div className={buildClassName(styles.header, !hasCloseButton && styles.header_noClose)}>\n        <div className={styles.title}>{title}</div>\n        {hasCloseButton && (\n          <Button isRound className={styles.closeButton} ariaLabel={lang('Close')} onClick={onClose}>\n            <i className={buildClassName(styles.closeIcon, 'icon-close')} aria-hidden />\n          </Button>\n        )}\n      </div>\n    );\n  }\n\n  const fullClassName = buildClassName(\n    styles.modal,\n    className,\n    transitionClassNames,\n    isSlideUp && isPortrait && styles.slideUp,\n    isCompact && styles.compact,\n  );\n\n  const backdropFullClass = buildClassName(styles.backdrop, noBackdrop && styles.noBackdrop);\n\n  const contentFullClassName = buildClassName(\n    styles.content,\n    isSlideUp && styles.contentSlideUp,\n    'custom-scroll',\n    contentClassName,\n  );\n\n  return (\n    <Portal>\n      <div ref={modalRef} className={fullClassName} tabIndex={-1} role=\"dialog\">\n        <div className={styles.container}>\n          <div className={backdropFullClass} onClick={!noBackdropClose ? onClose : undefined} />\n          <div className={buildClassName(styles.dialog, dialogClassName)} ref={dialogRef}>\n            {renderHeader()}\n            <div className={contentFullClassName}>{children}</div>\n          </div>\n        </div>\n      </div>\n    </Portal>\n  );\n}\n\nexport default Modal;\n","// extracted by mini-css-extract-plugin\nexport default {\"suggestions\":\"npDwJDLse3rJnGSdc8L4\",\"bottom\":\"fpxVR_LsRlkkC3EYL0w9\",\"top\":\"VWqJhoieW6U_YYUt1jiQ\",\"suggestion\":\"OmV_sPeeLq9aLTs_lux9\",\"active\":\"l_lP3j33iaXw5EwvueFZ\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\n\nimport styles from './SuggestionList.module.scss';\n\ntype OwnProps = {\n  position?: 'top' | 'bottom';\n  suggestions: string[];\n  activeIndex?: number;\n  isInModal?: boolean;\n  onSelect: (suggest: string) => void;\n};\n\nfunction SuggestionList({\n  position = 'bottom',\n  suggestions,\n  activeIndex,\n  isInModal,\n  onSelect,\n}: OwnProps) {\n  const lang = useLang();\n\n  const handleClick = (e: React.MouseEvent) => {\n    const suggest = (e.target as HTMLLIElement).innerText.trim();\n    onSelect(suggest);\n  };\n\n  return suggestions.length ? (\n    <ul className={buildClassName(styles.suggestions, styles[position], isInModal && styles.embedded)}>\n      {suggestions.map((suggestion, index) => {\n        return (\n          <li\n            key={suggestion}\n            role=\"button\"\n            tabIndex={0}\n            className={buildClassName(styles.suggestion, index === activeIndex && styles.active)}\n            onMouseDown={handleClick}\n          >\n            {suggestion}\n          </li>\n        );\n      })}\n    </ul>\n  ) : (\n    <div className={styles.suggestions}>\n      <li className={styles.suggestion}>{lang('No suggestions, you\\'re on your own!')}</li>\n    </div>\n  );\n}\n\nexport default memo(SuggestionList);\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"KzYNlvc1zUfMyr1BrpJV\",\"wrapper_focus\":\"mPAEU1rwcC6__2oo8sJw\",\"wrapperFocus\":\"mPAEU1rwcC6__2oo8sJw\",\"wrapper_error\":\"RrEMYdpiU63yPgdvbokg\",\"wrapperError\":\"RrEMYdpiU63yPgdvbokg\",\"input\":\"oj0DjEY1Q_lf4jSzWLzW\",\"label\":\"SI7eZ0lb8I8sNaq_Jrmp\"};","import { wordlists } from 'tonweb-mnemonic';\nimport React, {\n  memo, useCallback, useEffect, useState,\n} from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useFlag from '../../hooks/useFlag';\n\nimport SuggestionList from '../ui/SuggestionList';\n\nimport styles from './InputMnemonic.module.scss';\n\ntype OwnProps = {\n  id?: string;\n  nextId?: string;\n  labelText?: string;\n  className?: string;\n  value?: string;\n  isInModal?: boolean;\n  suggestionsPosition?: 'top' | 'bottom';\n  inputArg?: any;\n  onInput: (value: string, inputArg?: any) => void;\n};\n\nconst { default: mnemonicSuggestions } = wordlists;\nconst SUGGESTION_WORDS_COUNT = 7;\n\nfunction InputMnemonic({\n  id, nextId, labelText, className, value = '', isInModal, suggestionsPosition, inputArg, onInput,\n}: OwnProps) {\n  const [hasFocus, markFocus, unmarkFocus] = useFlag();\n  const [hasError, setHasError] = useState<boolean>(false);\n  const [filteredSuggestions, setFilteredSuggestions] = useState<string[]>([]);\n  const [activeSuggestionIndex, setActiveSuggestionIndex] = useState<number>(0);\n  const [showSuggestions, setShowSuggestions] = useState<boolean>(false);\n  const shouldRenderSuggestions = showSuggestions && value && filteredSuggestions.length > 0;\n\n  useEffect(() => {\n    if (showSuggestions && value && filteredSuggestions.length === 0) {\n      setHasError(true);\n    } else if (!hasFocus && value && !isCorrectMnemonic(value)) {\n      setHasError(true);\n    } else {\n      setHasError(false);\n    }\n  }, [filteredSuggestions.length, hasFocus, showSuggestions, value]);\n\n  const processSuggestions = (userInput: string) => {\n    // Filter our suggestions that don't contain the user's input\n    const unLinked = mnemonicSuggestions.filter(\n      (suggestion) => suggestion.toLowerCase().startsWith(userInput.toLowerCase()),\n    ).slice(0, SUGGESTION_WORDS_COUNT);\n\n    onInput(userInput, inputArg);\n    setFilteredSuggestions(unLinked);\n    setActiveSuggestionIndex(0);\n    setShowSuggestions(true);\n  };\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const userInput = e.target.value;\n\n    processSuggestions(userInput);\n  };\n\n  const handlePaste = (e: React.ClipboardEvent<HTMLInputElement>) => {\n    const pastedValue = e.clipboardData.getData('text');\n\n    processSuggestions(pastedValue);\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (!value) {\n      return;\n    }\n\n    if (e.code === 'Enter' || (e.code === 'Tab' && !(e.shiftKey || e.ctrlKey || e.altKey || e.metaKey))) {\n      onInput(filteredSuggestions[activeSuggestionIndex], inputArg);\n      setFilteredSuggestions([filteredSuggestions[activeSuggestionIndex]]);\n      setActiveSuggestionIndex(0);\n      setShowSuggestions(false);\n\n      if (showSuggestions) {\n        e.preventDefault();\n      }\n\n      if (nextId) {\n        requestAnimationFrame(() => {\n          const nextInput = document.getElementById(nextId);\n          nextInput?.focus();\n          (nextInput as HTMLInputElement)?.select();\n        });\n      }\n    }\n\n    if (e.code === 'ArrowUp') {\n      if (activeSuggestionIndex === 0) {\n        return;\n      }\n      setActiveSuggestionIndex(activeSuggestionIndex - 1);\n    }\n\n    if (e.code === 'ArrowDown') {\n      if (activeSuggestionIndex === filteredSuggestions.length - 1) {\n        return;\n      }\n      setActiveSuggestionIndex(activeSuggestionIndex + 1);\n    }\n  };\n\n  const handleClick = useCallback((suggestion: string) => {\n    onInput(suggestion, inputArg);\n    setShowSuggestions(false);\n    setActiveSuggestionIndex(0);\n    setFilteredSuggestions([]);\n  }, [inputArg, onInput]);\n\n  const handleFocus = (e: React.FocusEvent<HTMLInputElement>) => {\n    processSuggestions(e.target.value);\n    markFocus();\n  };\n\n  const handleBlur = (e: React.FocusEvent<HTMLInputElement>) => {\n    // Remove focus from the input element to ensure correct blur handling, especially when triggered by window switching\n    e.target.blur();\n\n    unmarkFocus();\n    requestAnimationFrame(() => {\n      setShowSuggestions(false);\n      setFilteredSuggestions([]);\n    });\n  };\n\n  return (\n    <div className={buildClassName(\n      styles.wrapper,\n      className,\n      hasFocus && styles.wrapper_focus,\n      hasError && styles.wrapper_error,\n    )}\n    >\n      {shouldRenderSuggestions && (\n        <SuggestionList\n          suggestions={filteredSuggestions}\n          activeIndex={activeSuggestionIndex}\n          position={suggestionsPosition}\n          isInModal={isInModal}\n          onSelect={handleClick}\n        />\n      )}\n      <label className={styles.label} htmlFor={id}>{labelText}.</label>\n      <input\n        id={id}\n        className={buildClassName(styles.input, value !== '' && styles.touched)}\n        type=\"text\"\n        autoComplete=\"off\"\n        onChange={handleChange}\n        onKeyDown={handleKeyDown}\n        onFocus={handleFocus}\n        onBlur={handleBlur}\n        onPaste={handlePaste}\n        value={value}\n        tabIndex={0}\n      />\n    </div>\n  );\n}\n\nfunction isCorrectMnemonic(mnemonic: string) {\n  return mnemonicSuggestions.includes(mnemonic);\n}\n\nexport default memo(InputMnemonic);\n","// extracted by mini-css-extract-plugin\nexport default {\"is-ios\":\"tQfRB0QEPIKhLqneEOiP\",\"isIos\":\"tQfRB0QEPIKhLqneEOiP\",\"is-android\":\"tMEXfx8ObCkS7lEBapwN\",\"isAndroid\":\"tMEXfx8ObCkS7lEBapwN\",\"wrapper\":\"WSONEgG3IdI6EQ_RiB_2\",\"transitionContainer\":\"MqfW2oxGablZ6k_j_gFw\",\"transitionSlide\":\"ufnyoj1S9C7uQSNv5ybk\",\"container\":\"SCQYgCOzm_JwH4zw_fJj\",\"container_scrollable\":\"QGJ3v28v13lBO2aJsY1f\",\"containerScrollable\":\"QGJ3v28v13lBO2aJsY1f\",\"container_password\":\"jj8YibRDGJNJMgSNz7MB\",\"containerPassword\":\"jj8YibRDGJNJMgSNz7MB\",\"logo\":\"wEvuWbWhQedSWOPczwMM\",\"appName\":\"sdpnta84ITO2CuJQJG6i\",\"title\":\"Iy02tFFd7DWdLIVBssiM\",\"title_afterSmallSticker\":\"TxywEGQvm_df8LLellZp\",\"titleAfterSmallSticker\":\"TxywEGQvm_df8LLellZp\",\"info\":\"_mddt0oJI7Is9aB0IFKh\",\"info_push\":\"QOZ41BOKJUJqzh12PvOd\",\"infoPush\":\"QOZ41BOKJUJqzh12PvOd\",\"info_pull\":\"j2i0LLpN4QvTNKqtUTyV\",\"infoPull\":\"j2i0LLpN4QvTNKqtUTyV\",\"info__space\":\"mw5HOhievDUeL553FPVN\",\"infoSpace\":\"mw5HOhievDUeL553FPVN\",\"counter\":\"YQrZeRc6AH93A05u3PVz\",\"counterTitle\":\"QeG3p90K1y4GRcwvwaSi\",\"counterDigit\":\"_6E64HE7YT7cQqr4MCfB3\",\"small\":\"J3gjverYCeCeVBOhn6BL\",\"sticker\":\"FAaHkktx6u91quZS6bIo\",\"modalSticker\":\"cTKyXeGpI1vFFl4FFKcV\",\"form\":\"DT898gZZfeJ2SDX2J0_Y\",\"checkMnemonicInput\":\"mUfD8aEl_RSi9_epq8Y2\",\"errors\":\"a1xCMnPovgQ46dKR8XDE\",\"passwordRules\":\"eeLjU5CF7ub9sU6VYY2O\",\"passwordRule\":\"fZIT2aS9pGX5RkxzK7hk\",\"valid\":\"IWuu_8TKMrRdWGbRFsgk\",\"error\":\"oNVjyJw8MMhJw_jkQV1s\",\"buttons\":\"h9DiBv62Am7dqPQ4OTOK\",\"buttons__inner\":\"gBmMCY_b1oF30eRFo2_d\",\"buttonsInner\":\"gBmMCY_b1oF30eRFo2_d\",\"footerButton\":\"Vf1sbfrPB3JErqGFPV00\",\"btn\":\"cg3f0Zms_61_DpHQnTvg\",\"btn_push\":\"XKbBVkOPkbREa0NMNXKB\",\"btnPush\":\"XKbBVkOPkbREa0NMNXKB\",\"btn_text\":\"CrQrOVjIZt57rQBNLxZ3\",\"btnText\":\"CrQrOVjIZt57rQBNLxZ3\",\"btn_about\":\"eg4Kz62B1onJ7w7MTKnJ\",\"btnAbout\":\"eg4Kz62B1onJ7w7MTKnJ\",\"btn_mini\":\"Ms19H0cI2E8KumQhblbo\",\"btnMini\":\"Ms19H0cI2E8KumQhblbo\",\"btn_single\":\"ACfnX2uIADA7x3GYuQkN\",\"btnSingle\":\"ACfnX2uIADA7x3GYuQkN\",\"modalDialog\":\"mI2GAShkg8sNId0g1NMJ\",\"mnemonicContainer\":\"_DU6lli7MxEQPXZPXNbQ\",\"words\":\"r1yT7iVuGJrqPFqmHKC1\",\"word\":\"QIImTjdOE9uYHVhVFmkR\",\"importingContent\":\"Dt6FHuNkFyWKfX3dNdXA\",\"footerError\":\"eolgfRQK0ImOGHMDFqxt\",\"importButtonsBlock\":\"zZ9En0QOkvsqpUFkCnIA\",\"importText\":\"tkd9UMg6dSoqgwC2uJaq\",\"importButtons\":\"ULlx3U2d23L3G40CKPaz\"};","import type { FormEvent } from 'react';\nimport React, {\n  memo, useCallback, useEffect, useState,\n} from '../../lib/teact/teact';\n\nimport { MNEMONIC_CHECK_COUNT } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { areSortedArraysEqual } from '../../util/iteratees';\n\nimport useLang from '../../hooks/useLang';\n\nimport InputMnemonic from '../common/InputMnemonic';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Auth.module.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  isInModal?: boolean;\n  mnemonic?: string[];\n  checkIndexes?: number[];\n  buttonLabel: string;\n  onSubmit: NoneToVoidFunction;\n  onCancel: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n};\n\nfunction MnemonicCheck({\n  isActive, isInModal, mnemonic, checkIndexes, buttonLabel, onCancel, onSubmit, onClose,\n}: OwnProps) {\n  const lang = useLang();\n  const [words, setWords] = useState<Record<number, string>>({});\n  const [hasMnemonicError, setHasMnemonicError] = useState(false);\n\n  useEffect(() => {\n    if (isActive) {\n      setWords({});\n      setHasMnemonicError(false);\n    }\n  }, [isActive]);\n\n  const handleSetWord = useCallback((value: string, index: number) => {\n    setWords({\n      ...words,\n      [index]: value?.toLowerCase(),\n    });\n  }, [words]);\n\n  const handleMnemonicCheckSubmit = useCallback((e: FormEvent) => {\n    e.preventDefault();\n    const answer = mnemonic && checkIndexes?.map((index) => mnemonic[index]);\n    if (answer && areSortedArraysEqual(answer, Object.values(words))) {\n      onSubmit();\n    } else {\n      setHasMnemonicError(true);\n    }\n  }, [onSubmit, checkIndexes, mnemonic, words]);\n\n  return (\n    <div className={modalStyles.transitionContentWrapper}>\n      <ModalHeader title={lang('Let\\'s Check!')} onClose={onClose} />\n      <div className={buildClassName(modalStyles.transitionContent, 'custom-scroll')}>\n        <p className={buildClassName(styles.info, styles.small)}>\n          {lang('Let’s make sure your secrets words are recorded correctly.')}\n        </p>\n\n        <p className={buildClassName(styles.info, styles.small)}>\n          {renderText(lang('$mnemonic_check_words_list', checkIndexes?.map((n) => n + 1)?.join(', ')))}\n        </p>\n\n        <form onSubmit={handleMnemonicCheckSubmit} id=\"check_mnemonic_form\">\n          {checkIndexes!.map((key, i) => (\n            <InputMnemonic\n              key={key}\n              id={`check-mnemonic-${i}`}\n              nextId={i + 1 < MNEMONIC_CHECK_COUNT ? `check-mnemonic-${i + 1}` : undefined}\n              labelText={`${key + 1}`}\n              value={words[key]}\n              isInModal={isInModal}\n              suggestionsPosition={i > 1 ? 'top' : undefined}\n              inputArg={key}\n              className={styles.checkMnemonicInput}\n              onInput={handleSetWord}\n            />\n          ))}\n        </form>\n\n        {hasMnemonicError && (\n          <div className={buildClassName(styles.error, styles.small)}>\n            {renderText(lang('$mnemonic_check_error'))}\n          </div>\n        )}\n\n        <div className={modalStyles.buttons}>\n          <Button onClick={onCancel}>{lang('Back')}</Button>\n          <Button isPrimary forFormId=\"check_mnemonic_form\">{buttonLabel}</Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(MnemonicCheck);\n","import React, { memo } from '../../lib/teact/teact';\n\nimport { MNEMONIC_COUNT } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\n\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Auth.module.scss';\n\ntype OwnProps = {\n  mnemonic?: string[];\n  onClose: NoneToVoidFunction;\n  onNext: NoneToVoidFunction;\n};\n\nfunction MnemonicList({\n  mnemonic, onNext, onClose,\n}: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <div className={modalStyles.transitionContentWrapper}>\n      <ModalHeader title={lang('%1$d Secret Words', MNEMONIC_COUNT) as string} onClose={onClose} />\n      <div className={buildClassName(styles.mnemonicContainer, modalStyles.transitionContent, 'custom-scroll')}>\n        <p className={buildClassName(styles.info, styles.small)}>\n          {renderText(lang('$mnemonic_list_description'))}\n        </p>\n        <ol className={styles.words}>\n          {mnemonic?.map((word) => (\n            <li className={styles.word}>{word}</li>\n          ))}\n        </ol>\n\n        <div className={modalStyles.buttons}>\n          <Button isPrimary onClick={onNext}>{lang('Let\\'s Check')}</Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(MnemonicList);\n","import type { ChangeEvent } from 'react';\nimport React, { memo, useCallback } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport styles from './Checkbox.module.scss';\n\ntype OwnProps = {\n  id?: string;\n  className?: string;\n  children?: React.ReactNode;\n  checked: boolean;\n  onChange: (isChecked: boolean) => void;\n};\n\nfunction Checkbox({\n  id,\n  className,\n  children,\n  checked,\n  onChange,\n}: OwnProps) {\n  const handleChange = useCallback((e: ChangeEvent<HTMLInputElement>) => {\n    e.preventDefault();\n    onChange(e.currentTarget.checked);\n  }, [onChange]);\n\n  return (\n    <label className={buildClassName(styles.wrapper, className)}>\n      <input\n        id={id}\n        type=\"checkbox\"\n        className={styles.input}\n        checked={checked}\n        tabIndex={0}\n        onChange={handleChange}\n      />\n      <div className={styles.content}>\n        {children}\n      </div>\n    </label>\n  );\n}\n\nexport default memo(Checkbox);\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"YM2RhLmN5kTEeDg5kktd\",\"input\":\"QPwCvQkjDRKzNZGuf1fI\",\"content\":\"WcqTTa9PxIJxBtc80p3L\"};","import React, { memo, useCallback, useState } from '../../lib/teact/teact';\n\nimport { ANIMATED_STICKER_SMALL_SIZE_PX } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useLang from '../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Checkbox from '../ui/Checkbox';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Auth.module.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  onSubmit: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n};\n\nfunction SafetyRules({ isActive, onSubmit, onClose }: OwnProps) {\n  const lang = useLang();\n  const [writedownAccepted, setWritedownAccepted] = useState(false);\n  const [openWalletAccepted, setOpenWalletAccepted] = useState(false);\n  const [canBeStolenAccepted, setCanBeStolenAccepted] = useState(false);\n  const canSubmit = writedownAccepted && openWalletAccepted && canBeStolenAccepted;\n\n  const handleSubmit = useCallback(() => {\n    if (!canSubmit) {\n      return;\n    }\n\n    onSubmit();\n  }, [canSubmit, onSubmit]);\n\n  return (\n    <div className={modalStyles.transitionContentWrapper}>\n      <ModalHeader title={lang('Safety Rules')} onClose={onClose} />\n      <div className={buildClassName(modalStyles.transitionContent, 'custom-scroll')}>\n        <AnimatedIconWithPreview\n          tgsUrl={ANIMATED_STICKERS_PATHS.bill}\n          previewUrl={ANIMATED_STICKERS_PATHS.billPreview}\n          size={ANIMATED_STICKER_SMALL_SIZE_PX}\n          play={isActive}\n          nonInteractive\n          noLoop={false}\n          className={styles.modalSticker}\n        />\n        <Checkbox\n          checked={writedownAccepted}\n          onChange={setWritedownAccepted}\n        >\n          {renderText(lang('$safety_rules_one'))}\n        </Checkbox>\n\n        <Checkbox\n          checked={openWalletAccepted}\n          onChange={setOpenWalletAccepted}\n        >\n          {renderText(lang('$safety_rules_two'))}\n        </Checkbox>\n\n        <Checkbox\n          checked={canBeStolenAccepted}\n          onChange={setCanBeStolenAccepted}\n        >\n          {renderText(lang('$safety_rules_three'))}\n        </Checkbox>\n\n        <div className={modalStyles.buttons}>\n          <Button isPrimary onClick={handleSubmit} isDisabled={!canSubmit}>{lang('Understood')}</Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(SafetyRules);\n","import React, { memo, useCallback, useState } from '../../lib/teact/teact';\n\nimport { getActions } from '../../global';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\nimport Transition from '../ui/Transition';\nimport MnemonicCheck from './MnemonicCheck';\nimport MnemonicList from './MnemonicList';\nimport SafetyRules from './SafetyRules';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  mnemonic?: string[];\n  checkIndexes?: number[];\n}\n\nenum BackupState {\n  Accept,\n  View,\n  Confirm,\n}\n\nconst SLIDE_ANIMATION_DURATION_MS = 250;\n\nconst AuthCreateBackup = ({ isActive, mnemonic, checkIndexes }: OwnProps) => {\n  const { afterCheckMnemonic, skipCheckMnemonic, restartCheckMnemonicIndexes } = getActions();\n\n  const lang = useLang();\n  const [isModalOpen, openModal, closeModal] = useFlag();\n\n  const [renderingKey, setRenderingKey] = useState<number>(BackupState.Accept);\n  const [nextKey, setNextKey] = useState<number | undefined>(BackupState.View);\n\n  const handleModalClose = useCallback(() => {\n    setRenderingKey(BackupState.Accept);\n    setNextKey(BackupState.View);\n  }, []);\n\n  const handleMnemonicView = useCallback(() => {\n    setRenderingKey(BackupState.View);\n    setNextKey(BackupState.Confirm);\n  }, []);\n\n  const handleRestartCheckMnemonic = useCallback(() => {\n    handleMnemonicView();\n\n    setTimeout(() => {\n      restartCheckMnemonicIndexes();\n    }, SLIDE_ANIMATION_DURATION_MS);\n  }, [handleMnemonicView, restartCheckMnemonicIndexes]);\n\n  const handleShowMnemonicCheck = useCallback(() => {\n    setRenderingKey(BackupState.Confirm);\n    setNextKey(undefined);\n  }, []);\n\n  const handleMnemonicCheckSubmit = useCallback(() => {\n    closeModal();\n    afterCheckMnemonic();\n  }, [afterCheckMnemonic, closeModal]);\n\n  // eslint-disable-next-line consistent-return\n  function renderModalContent(isScreenActive: boolean, isFrom: boolean, currentScreenKey: number) {\n    switch (currentScreenKey) {\n      case BackupState.Accept:\n        return <SafetyRules isActive={isScreenActive} onSubmit={handleMnemonicView} onClose={closeModal} />;\n\n      case BackupState.View:\n        return (\n          <MnemonicList\n            mnemonic={mnemonic}\n            onNext={handleShowMnemonicCheck}\n            onClose={closeModal}\n          />\n        );\n\n      case BackupState.Confirm:\n        return (\n          <MnemonicCheck\n            isActive={isScreenActive}\n            mnemonic={mnemonic}\n            checkIndexes={checkIndexes}\n            buttonLabel={lang('Continue')}\n            onSubmit={handleMnemonicCheckSubmit}\n            onCancel={handleRestartCheckMnemonic}\n            onClose={closeModal}\n          />\n        );\n    }\n  }\n\n  return (\n    <div className={styles.wrapper}>\n      <div className={buildClassName(styles.container, 'custom-scroll')}>\n        <AnimatedIconWithPreview\n          play={isActive && !isModalOpen}\n          tgsUrl={ANIMATED_STICKERS_PATHS.snitch}\n          previewUrl={ANIMATED_STICKERS_PATHS.snitchPreview}\n          noLoop={false}\n          nonInteractive\n          className={styles.sticker}\n        />\n        <div className={styles.title}>{lang('Create Backup')}</div>\n        <div className={styles.info}>\n          <p className={styles.info__space}>{renderText(lang('$auth_backup_description1'))}</p>\n          <p>{renderText(lang('$auth_backup_description2'))}</p>\n          <p>{renderText(lang('$auth_backup_description3'))}</p>\n        </div>\n        <div className={styles.buttons}>\n          <Button isPrimary className={styles.btn} onClick={openModal}>\n            {lang('Back Up')}\n          </Button>\n          <Button\n            isDestructive\n            isText\n            className={buildClassName(styles.btn, styles.btn_push)}\n            onClick={skipCheckMnemonic}\n          >\n            {lang('Skip For Now')}\n          </Button>\n        </div>\n      </div>\n\n      <Modal\n        hasCloseButton\n        isSlideUp\n        isOpen={isModalOpen}\n        onClose={closeModal}\n        onCloseAnimationEnd={handleModalClose}\n        dialogClassName={styles.modalDialog}\n      >\n        <Transition\n          name=\"pushSlide\"\n          className={modalStyles.transition}\n          slideClassName={modalStyles.transitionSlide}\n          activeKey={renderingKey}\n          nextKey={nextKey}\n        >\n          {renderModalContent}\n        </Transition>\n      </Modal>\n    </div>\n  );\n};\n\nexport default memo(AuthCreateBackup);\n","import type { RefObject } from 'react';\nimport { requestMutation } from '../lib/fasterdom/fasterdom';\nimport { useEffect } from '../lib/teact/teact';\n\nimport { IS_TOUCH_ENV } from '../util/windowEnvironment';\n\nconst DEFAULT_DURATION = 400;\n\nexport default function useFocusAfterAnimation(\n  ref: RefObject<HTMLInputElement>, isDisabled = false, animationDuration = DEFAULT_DURATION,\n) {\n  useEffect(() => {\n    if (IS_TOUCH_ENV || isDisabled) {\n      return;\n    }\n\n    setTimeout(() => {\n      requestMutation(() => {\n        ref.current?.focus();\n      });\n    }, animationDuration);\n  }, [ref, animationDuration, isDisabled]);\n}\n","import { useEffect, useState } from '../lib/teact/teact';\n\nconst SPECIAL_CHARS_REGEX = /[`!@#$%^&*()_+\\-=\\]{};':\"\\\\|,.<>?~]/;\n\nexport const usePasswordValidation = ({\n  firstPassword = '',\n  secondPassword = '',\n  requiredLength = 8,\n}) => {\n  const [invalidLength, setInvalidLength] = useState(false);\n  const [noNumber, setNoNumber] = useState(false);\n  const [noUpperCase, setNoUpperCase] = useState(false);\n  const [noLowerCase, setNoLowerCase] = useState(false);\n  const [noSpecialChar, setNoSpecialChar] = useState(false);\n  const [noEqual, setNoEqual] = useState(false);\n\n  useEffect(() => {\n    setInvalidLength(firstPassword.length < requiredLength);\n    setNoUpperCase(firstPassword.toLowerCase() === firstPassword);\n    setNoLowerCase(firstPassword.toUpperCase() === firstPassword);\n    setNoNumber(!/\\d/.test(firstPassword));\n    setNoEqual(Boolean(firstPassword && firstPassword !== secondPassword));\n    setNoSpecialChar(!SPECIAL_CHARS_REGEX.test(firstPassword));\n  }, [firstPassword, secondPassword, requiredLength]);\n\n  return {\n    invalidLength, noNumber, noUpperCase, noLowerCase, noEqual, noSpecialChar,\n  };\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"BTE_QsaeQT0gsZDGlHNg\",\"input\":\"ap5djuWpoy0oL5laACxY\",\"input_rich\":\"XO03YPbSPmkqAlFrGxec\",\"inputRich\":\"XO03YPbSPmkqAlFrGxec\",\"error\":\"aXJZWru7LGisPYtil8LQ\",\"input_password\":\"M3mw8DDKwTGaIY26U7tw\",\"inputPassword\":\"M3mw8DDKwTGaIY26U7tw\",\"isEmpty\":\"rykpWf6XyqEKGbm1szpM\",\"disabled\":\"pt4_Mz2PMz7DlSmx6uxc\",\"input__wrapper\":\"ZngyLSc2Upp1juLrP41Y\",\"inputWrapper\":\"ZngyLSc2Upp1juLrP41Y\",\"input__wrapper_hasFocus\":\"Xl8ZIuOcBC9TlBB0QlRZ\",\"inputWrapperHasFocus\":\"Xl8ZIuOcBC9TlBB0QlRZ\",\"visibilityToggle\":\"cMoxHjzMT16GdF7QFMJE\",\"visibilityToggle_push\":\"T9j5zsrOmLuT7HP9oaKr\",\"visibilityTogglePush\":\"T9j5zsrOmLuT7HP9oaKr\",\"fractional\":\"f85r9LzlhdX6hEBAJp1y\",\"label\":\"MAa8v99XNhTqFsH5rqXl\",\"label_help\":\"BXPVu54qpKY4LmaZvtgI\",\"labelHelp\":\"BXPVu54qpKY4LmaZvtgI\",\"label_error\":\"UMnK3JZr6ZtDh17cGXpU\",\"labelError\":\"UMnK3JZr6ZtDh17cGXpU\",\"label_forPassword\":\"ow6m8ndEwfkArCLlsjWs\",\"labelForPassword\":\"ow6m8ndEwfkArCLlsjWs\",\"label_errorUnderInput\":\"vLIfjG7adhqqjhIAgiID\",\"labelErrorUnderInput\":\"vLIfjG7adhqqjhIAgiID\",\"label_errorBottom\":\"yJ7hozjEpRgb6hVQl4HB\",\"labelErrorBottom\":\"yJ7hozjEpRgb6hVQl4HB\"};","import type { ChangeEvent, RefObject } from 'react';\nimport type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useCallback, useState } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\n\nimport styles from './Input.module.scss';\n\ntype OwnProps = {\n  ref?: RefObject<HTMLInputElement | HTMLTextAreaElement>;\n  id?: string;\n  type?: 'text' | 'password';\n  label?: TeactNode;\n  placeholder?: string;\n  value?: string | number;\n  maxLength?: number;\n  isRequired?: boolean;\n  isControlled?: boolean;\n  isMultiline?: boolean;\n  hasError?: boolean;\n  error?: string;\n  className?: string;\n  wrapperClassName?: string;\n  autoComplete?: string;\n  inputArg?: any;\n  children?: TeactNode;\n  onInput: (value: string, inputArg?: any) => void;\n  onKeyDown?: (e: React.KeyboardEvent<HTMLInputElement | HTMLTextAreaElement>) => void;\n  onFocus?: NoneToVoidFunction;\n  onBlur?: NoneToVoidFunction;\n};\n\nfunction Input({\n  ref,\n  id,\n  label,\n  placeholder,\n  isRequired,\n  isControlled,\n  isMultiline,\n  hasError,\n  type = 'text',\n  error,\n  value = '',\n  maxLength,\n  inputArg,\n  className,\n  wrapperClassName,\n  autoComplete,\n  children,\n  onInput,\n  onKeyDown,\n  onFocus,\n  onBlur,\n}: OwnProps) {\n  const lang = useLang();\n  const [isPasswordVisible, setIsPasswordVisible] = useState<boolean>(false);\n\n  const handleInput = (e: React.FormEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    onInput(e.currentTarget.value, inputArg);\n  };\n\n  const handleTogglePasswordVisibility = () => {\n    setIsPasswordVisible(!isPasswordVisible);\n  };\n\n  const handleChange = useCallback((e: ChangeEvent<HTMLTextAreaElement>) => {\n    e.currentTarget.style.height = '0';\n    e.currentTarget.style.height = `${e.currentTarget.scrollHeight}px`;\n  }, []);\n\n  const finalType = type === 'text' || isPasswordVisible ? 'text' : 'password';\n  const inputFullClass = buildClassName(\n    styles.input,\n    className,\n    type === 'password' && styles.input_password,\n    (hasError || error) && styles.error,\n  );\n  const labelFullClass = buildClassName(\n    styles.label,\n    (hasError || error) && styles.error,\n    (hasError || error) && type === 'password' && styles.label_forPassword,\n  );\n\n  return (\n    <div className={buildClassName(styles.wrapper, wrapperClassName)}>\n      {error && !!label && (\n        <label className={buildClassName(styles.label, styles.label_error, styles.error)} htmlFor={id}>{error}</label>\n      )}\n      {!!label && (\n        <label className={labelFullClass} htmlFor={id}>\n          {label}\n        </label>\n      )}\n      {isMultiline ? (\n        <textarea\n          ref={ref as RefObject<HTMLTextAreaElement>}\n          id={id}\n          className={inputFullClass}\n          value={value}\n          maxLength={maxLength}\n          autoComplete={autoComplete}\n          onInput={handleInput}\n          onChange={handleChange}\n          onKeyDown={onKeyDown}\n          onFocus={onFocus}\n          onBlur={onBlur}\n          tabIndex={0}\n          required={isRequired}\n          placeholder={placeholder}\n          teactExperimentControlled={isControlled}\n        />\n      ) : (\n        <input\n          ref={ref as RefObject<HTMLInputElement>}\n          id={id}\n          className={inputFullClass}\n          type={finalType}\n          value={value}\n          maxLength={maxLength}\n          autoComplete={autoComplete}\n          onInput={handleInput}\n          onKeyDown={onKeyDown}\n          onFocus={onFocus}\n          onBlur={onBlur}\n          tabIndex={0}\n          required={isRequired}\n          placeholder={placeholder}\n          teactExperimentControlled={isControlled}\n        />\n      )}\n      {type === 'password' && (\n        <button\n          className={buildClassName(styles.visibilityToggle, label && styles.visibilityToggle_push)}\n          type=\"button\"\n          onClick={handleTogglePasswordVisibility}\n          aria-label={lang('Change password visibility')}\n          tabIndex={-1}\n        >\n          <i className={isPasswordVisible ? 'icon-eye' : 'icon-eye-closed'} />\n        </button>\n      )}\n      {error && !label && (\n        <label className={buildClassName(styles.label, styles.label_errorBottom, styles.error)} htmlFor={id}>\n          {error}\n        </label>\n      )}\n      {children}\n    </div>\n  );\n}\n\nexport default memo(Input);\n","import React, {\n  memo, useCallback, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport type { AuthMethod } from '../../global/types';\n\nimport { getActions } from '../../global';\nimport buildClassName from '../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useFlag from '../../hooks/useFlag';\nimport useFocusAfterAnimation from '../../hooks/useFocusAfterAnimation';\nimport useLang from '../../hooks/useLang';\nimport { usePasswordValidation } from '../../hooks/usePasswordValidation';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Input from '../ui/Input';\nimport Modal from '../ui/Modal';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  method?: AuthMethod;\n  isLoading?: boolean;\n}\n\nconst AuthCreatePassword = ({\n  isActive,\n  method,\n  isLoading,\n}: OwnProps) => {\n  const { afterCreatePassword, restartAuth } = getActions();\n\n  const lang = useLang();\n\n  // eslint-disable-next-line no-null/no-null\n  const firstInputRef = useRef<HTMLInputElement>(null);\n  const [firstPassword, setFirstPassword] = useState<string>('');\n  const [secondPassword, setSecondPassword] = useState<string>('');\n  const [hasError, setHasError] = useState<boolean>(false);\n  const [isJustSubmitted, setIsJustSubmitted] = useState<boolean>(false);\n  const [isPasswordFocused, markPasswordFocused, unmarkPasswordFocused] = useFlag(false);\n  const [isSecondPasswordFocused, markSecondPasswordFocused, unmarkSecondPasswordFocused] = useFlag(false);\n  const [isPasswordsNotEqual, setIsPasswordsNotEqual] = useState<boolean>(false);\n  const [isWeakPasswordModalOpen, openWeakPasswordModal, closeWeakPasswordModal] = useFlag(false);\n  const canSubmit = firstPassword.length > 0 && secondPassword.length > 0 && !hasError;\n  const isImporting = method !== 'createAccount';\n  const formId = getFormId(method!);\n\n  const validation = usePasswordValidation({\n    firstPassword,\n    secondPassword,\n  });\n\n  useFocusAfterAnimation(firstInputRef, !isActive);\n\n  useEffect(() => {\n    setIsPasswordsNotEqual(false);\n    if (firstPassword === '' || !isActive || isPasswordFocused) {\n      setHasError(false);\n      return;\n    }\n\n    const { noEqual } = validation;\n\n    if ((!isSecondPasswordFocused || isJustSubmitted) && noEqual && secondPassword !== '') {\n      setHasError(true);\n      setIsPasswordsNotEqual(true);\n    } else if (!noEqual || secondPassword === '' || (isSecondPasswordFocused && !isJustSubmitted)) {\n      setHasError(false);\n    }\n  }, [\n    isActive, firstPassword, secondPassword, validation, isSecondPasswordFocused, isPasswordFocused, isJustSubmitted,\n  ]);\n\n  const handleFirstPasswordChange = useCallback((value: string) => {\n    setFirstPassword(value);\n    if (isJustSubmitted) {\n      setIsJustSubmitted(false);\n    }\n  }, [isJustSubmitted]);\n\n  const handleSecondPasswordChange = useCallback((value: string) => {\n    setSecondPassword(value);\n    if (isJustSubmitted) {\n      setIsJustSubmitted(false);\n    }\n  }, [isJustSubmitted]);\n\n  const handleCancel = useCallback(() => {\n    restartAuth();\n  }, [restartAuth]);\n\n  const handleSubmit = useCallback((e: React.FormEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (!canSubmit) {\n      return;\n    }\n\n    if (firstPassword !== secondPassword) {\n      setIsJustSubmitted(true);\n      setHasError(true);\n      setIsPasswordsNotEqual(true);\n      return;\n    }\n\n    const isWeakPassword = Object.values(validation).find((rule) => rule);\n\n    if (isWeakPassword && !isWeakPasswordModalOpen) {\n      openWeakPasswordModal();\n      return;\n    }\n\n    if (isWeakPasswordModalOpen) {\n      closeWeakPasswordModal();\n    }\n    afterCreatePassword({ password: firstPassword });\n  }, [\n    afterCreatePassword, canSubmit, firstPassword, isWeakPasswordModalOpen, openWeakPasswordModal,\n    secondPassword, validation, closeWeakPasswordModal,\n  ]);\n\n  const shouldRenderError = hasError && !isPasswordFocused;\n\n  function renderErrors() {\n    if (isPasswordsNotEqual) {\n      return (\n        <div className={buildClassName(styles.errors, styles.error)}>\n          {lang('Passwords must be equal.')}\n        </div>\n      );\n    }\n\n    const {\n      invalidLength,\n      noUpperCase,\n      noLowerCase,\n      noNumber,\n      noSpecialChar,\n    } = validation;\n\n    return (\n      <div className={styles.passwordRules}>\n        {lang('To protect your wallet as much as possible, use a password with')}\n        <span className={getValidationRuleClass(shouldRenderError, invalidLength)}>\n          {' '}{lang('$auth_password_rule_8chars')},\n        </span>\n        <span className={getValidationRuleClass(shouldRenderError, noLowerCase)}>\n          {' '}{lang('$auth_password_rule_one_small_char')},\n        </span>\n        <span className={getValidationRuleClass(shouldRenderError, noUpperCase)}>\n          {' '}{lang('$auth_password_rule_one_capital_char')},\n        </span>\n        <span className={getValidationRuleClass(shouldRenderError, noNumber)}>\n          {' '}{lang('$auth_password_rule_one_digit')},\n        </span>\n        <span className={getValidationRuleClass(shouldRenderError, noSpecialChar)}>\n          {' '}{lang('$auth_password_rule_one_special_char')}\n        </span>.\n      </div>\n    );\n  }\n\n  return (\n    <form\n      id={formId}\n      onSubmit={handleSubmit}\n      className={buildClassName(styles.container, styles.container_scrollable, 'custom-scroll')}\n    >\n      <AnimatedIconWithPreview\n        play={isActive}\n        tgsUrl={ANIMATED_STICKERS_PATHS.happy}\n        previewUrl={ANIMATED_STICKERS_PATHS.happyPreview}\n        noLoop={false}\n        nonInteractive\n        className={styles.sticker}\n      />\n      <div className={styles.title}>{lang('Congratulations!')}</div>\n      <p className={styles.info}>\n        <b>{lang(isImporting ? 'The wallet is imported' : 'The wallet is ready')}.</b>\n      </p>\n      <p className={styles.info}>\n        {lang('Create a password to protect it.')}\n      </p>\n\n      <div className={styles.form}>\n        <Input\n          ref={firstInputRef}\n          type=\"password\"\n          isRequired\n          id=\"first-password\"\n          hasError={shouldRenderError}\n          placeholder={lang('Enter your password...')}\n          value={firstPassword}\n          autoComplete=\"new-password\"\n          onInput={handleFirstPasswordChange}\n          onFocus={markPasswordFocused}\n          onBlur={unmarkPasswordFocused}\n          className={styles.input}\n        />\n        <Input\n          type=\"password\"\n          isRequired\n          id=\"second-password\"\n          placeholder={lang('...and repeat it')}\n          hasError={isPasswordsNotEqual}\n          value={secondPassword}\n          autoComplete=\"new-password\"\n          onInput={handleSecondPasswordChange}\n          onFocus={markSecondPasswordFocused}\n          onBlur={unmarkSecondPasswordFocused}\n          className={styles.input}\n        />\n      </div>\n\n      {renderErrors()}\n\n      <div className={buildClassName(styles.buttons, styles.buttons__inner)}>\n        <Button onClick={handleCancel} className={styles.footerButton}>\n          {lang('Cancel')}\n        </Button>\n        <Button\n          isSubmit\n          isPrimary\n          isDisabled={isPasswordsNotEqual || firstPassword === ''}\n          isLoading={isLoading}\n          className={styles.footerButton}\n        >\n          {lang('Continue')}\n        </Button>\n      </div>\n\n      <Modal\n        isOpen={isWeakPasswordModalOpen}\n        isCompact\n        onClose={closeWeakPasswordModal}\n        title={lang('Insecure Password')}\n      >\n        <p className={modalStyles.text}>\n          {lang('Your have entered an insecure password, which can be easily guessed by scammers.')}\n        </p>\n        <p className={modalStyles.text}>\n          {lang('Continue or change password to something more secure?')}\n        </p>\n        <div className={modalStyles.buttons}>\n          <Button isPrimary onClick={closeWeakPasswordModal} className={modalStyles.button}>{lang('Change')}</Button>\n          <Button forFormId={formId} isSubmit isDestructive className={modalStyles.button}>{lang('Continue')}</Button>\n        </div>\n      </Modal>\n    </form>\n  );\n};\n\nfunction getValidationRuleClass(shouldRenderError: boolean, ruleHasError: boolean) {\n  return buildClassName(\n    styles.passwordRule,\n    !ruleHasError ? styles.valid : shouldRenderError ? styles.invalid : undefined,\n  );\n}\n\n// eslint-disable-next-line consistent-return\nfunction getFormId(method: AuthMethod) {\n  switch (method) {\n    case 'createAccount':\n      return 'auth_create_password';\n    case 'importMnemonic':\n      return 'auth_import_mnemonic_password';\n    case 'importHardwareWallet':\n      return 'auth_import_hardware_password';\n  }\n}\n\nexport default memo(AuthCreatePassword);\n","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useMediaTransition from '../../hooks/useMediaTransition';\nimport useTimeout from '../../hooks/useTimeout';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\nconst START_DELAY = 700;\nconst INTERVAL = 1000;\n\nconst AuthCreatingWallet = ({ isActive }: OwnProps) => {\n  const lang = useLang();\n  const [one, markOne] = useFlag();\n  const [two, markTwo] = useFlag();\n  const [three, markThree] = useFlag();\n\n  useTimeout(markOne, isActive ? START_DELAY : undefined);\n  useTimeout(markTwo, isActive ? START_DELAY + INTERVAL : undefined);\n  useTimeout(markThree, isActive ? START_DELAY + INTERVAL * 2 : undefined);\n\n  const oneClassNames = useMediaTransition(one);\n  const twoClassNames = useMediaTransition(two);\n  const threeClassNames = useMediaTransition(three);\n\n  return (\n    <div className={buildClassName(styles.container, 'custom-scroll')}>\n      <AnimatedIconWithPreview\n        play={isActive}\n        tgsUrl={ANIMATED_STICKERS_PATHS.hello}\n        previewUrl={ANIMATED_STICKERS_PATHS.helloPreview}\n        nonInteractive\n        noLoop={false}\n      />\n      <div className={styles.title}>{lang('Creating Wallet...')}</div>\n\n      <div className={buildClassName(styles.counter)}>\n        <p className={styles.counterTitle}>{lang('On the count of three...')}</p>\n        <b className={buildClassName(styles.counterDigit, oneClassNames)}>1</b>\n        <b className={buildClassName(styles.counterDigit, twoClassNames)}>2</b>\n        <b className={buildClassName(styles.counterDigit, threeClassNames)}>3</b>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(AuthCreatingWallet);\n","import React, {\n  memo, useCallback, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\n\nimport { ANIMATED_STICKER_SMALL_SIZE_PX, MNEMONIC_COUNT } from '../../config';\nimport { getActions, withGlobal } from '../../global';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useClipboardPaste from '../../hooks/useClipboardPaste';\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useLang from '../../hooks/useLang';\n\nimport InputMnemonic from '../common/InputMnemonic';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\ntype StateProps = {\n  error?: string;\n  isLoading?: boolean;\n};\n\nconst MNEMONIC_INPUTS = [...Array(MNEMONIC_COUNT)].map((_, index) => ({\n  id: index,\n  label: `${index + 1}`,\n}));\n\nconst SLIDE_ANIMATION_DURATION_MS = 250;\n\nconst AuthImportMnemonic = ({ isActive, isLoading, error }: OwnProps & StateProps) => {\n  const {\n    afterImportMnemonic,\n    restartAuth,\n  } = getActions();\n\n  const lang = useLang();\n  const [mnemonic, setMnemonic] = useState<Record<number, string>>({});\n  const { isPortrait } = useDeviceScreen();\n\n  const handlePasteMnemonic = useCallback((pastedText: string) => {\n    const pastedMnemonic = parsePastedText(pastedText);\n\n    if (pastedMnemonic.length === 1 && document.activeElement?.id.startsWith('import-mnemonic-')) {\n      (document.activeElement as HTMLInputElement).value = pastedMnemonic[0];\n\n      const event = new Event('input');\n      (document.activeElement as HTMLInputElement).dispatchEvent(event);\n\n      return;\n    }\n\n    if (pastedMnemonic.length !== MNEMONIC_COUNT) {\n      return;\n    }\n\n    // RAF is a workaround for several Android browsers (e.g. Vivaldi)\n    requestAnimationFrame(() => {\n      setMnemonic(pastedMnemonic);\n    });\n\n    if (document.activeElement?.id.startsWith('import-mnemonic-')) {\n      (document.activeElement as HTMLInputElement).blur();\n    }\n  }, []);\n\n  useClipboardPaste(Boolean(isActive), handlePasteMnemonic);\n\n  const isSubmitDisabled = useMemo(() => {\n    const mnemonicValues = Object.values(mnemonic);\n\n    return mnemonicValues.length !== MNEMONIC_COUNT || mnemonicValues.some((word) => !word);\n  }, [mnemonic]);\n\n  const handleSetWord = useCallback((value: string, index: number) => {\n    setMnemonic({\n      ...mnemonic,\n      [index]: value?.toLowerCase(),\n    });\n  }, [mnemonic]);\n\n  const handleCancel = useCallback(() => {\n    setTimeout(() => {\n      restartAuth();\n    }, SLIDE_ANIMATION_DURATION_MS);\n  }, [restartAuth]);\n\n  const handleSubmit = useCallback(() => {\n    if (!isSubmitDisabled) {\n      afterImportMnemonic({ mnemonic: Object.values(mnemonic) });\n    }\n  }, [afterImportMnemonic, isSubmitDisabled, mnemonic]);\n\n  useEffect(() => {\n    return isSubmitDisabled\n      ? undefined\n      : captureKeyboardListeners({\n        onEnter: handleSubmit,\n      });\n  }, [afterImportMnemonic, handleSubmit, isSubmitDisabled, mnemonic]);\n\n  return (\n    <div className={buildClassName(styles.container, styles.container_scrollable, 'custom-scroll')}>\n      <AnimatedIconWithPreview\n        play={isActive}\n        size={ANIMATED_STICKER_SMALL_SIZE_PX}\n        tgsUrl={ANIMATED_STICKERS_PATHS.snitch}\n        previewUrl={ANIMATED_STICKERS_PATHS.snitchPreview}\n        nonInteractive\n        noLoop={false}\n        className={styles.sticker}\n      />\n      <div className={buildClassName(styles.title, styles.title_afterSmallSticker)}>\n        {lang('%1$d Secret Words', MNEMONIC_COUNT)}\n      </div>\n      <div className={buildClassName(styles.info, styles.info_pull)}>\n        {renderText(lang('$auth_import_mnemonic_description', MNEMONIC_COUNT))}\n      </div>\n\n      <div className={styles.importingContent}>\n        {MNEMONIC_INPUTS.map(({ id, label }) => (\n          <InputMnemonic\n            key={id}\n            id={`import-mnemonic-${id}`}\n            nextId={id + 1 < MNEMONIC_COUNT ? `import-mnemonic-${id + 1}` : undefined}\n            labelText={label}\n            value={mnemonic[id]}\n            suggestionsPosition={getSuggestPosition(id, isPortrait)}\n            inputArg={id}\n            onInput={handleSetWord}\n          />\n        ))}\n      </div>\n\n      <div className={styles.buttons}>\n        {error && <div className={styles.footerError}>{error}</div>}\n        <div className={styles.buttons__inner}>\n          <Button onClick={handleCancel} className={styles.footerButton}>\n            {lang('Cancel')}\n          </Button>\n          <Button\n            isPrimary\n            isDisabled={isSubmitDisabled}\n            isLoading={isLoading}\n            className={styles.footerButton}\n            onClick={handleSubmit}\n          >\n            {lang('Continue')}\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    error: global.auth.error,\n    isLoading: global.auth.isLoading,\n  };\n})(AuthImportMnemonic));\n\nfunction parsePastedText(str: string) {\n  return str.replace(/(?:\\r\\n)+|[\\r\\n\\s;,\\t]+/g, ' ').trim().split(' ');\n}\n\nfunction getSuggestPosition(id: number, isPortrait: boolean = false) {\n  if (!isPortrait && ((id > 5 && id < 8) || (id > 13 && id < 16) || id > 21)) {\n    return 'top';\n  }\n\n  return isPortrait && ((id > 7 && id < 12) || id > 19) ? 'top' : undefined;\n}\n","import { useEffect } from '../lib/teact/teact';\n\nconst MAX_MESSAGE_LENGTH = 4096;\n\nconst useClipboardPaste = (isActive: boolean, onPaste: (value: string) => void) => {\n  useEffect(() => {\n    if (!isActive) {\n      return undefined;\n    }\n\n    function handlePaste(e: ClipboardEvent) {\n      if (!e.clipboardData) {\n        return;\n      }\n\n      const pastedText = e.clipboardData.getData('text').substring(0, MAX_MESSAGE_LENGTH);\n\n      if (!pastedText) {\n        return;\n      }\n\n      e.preventDefault();\n\n      onPaste(pastedText);\n    }\n\n    document.addEventListener('paste', handlePaste, false);\n\n    return () => {\n      document.removeEventListener('paste', handlePaste, false);\n    };\n  }, [isActive, onPaste]);\n};\n\nexport default useClipboardPaste;\n","import React, { memo, useCallback } from '../../lib/teact/teact';\n\nimport { APP_NAME, MNEMONIC_COUNT } from '../../config';\nimport { getActions } from '../../global';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { IS_LEDGER_SUPPORTED } from '../../util/windowEnvironment';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\nimport logoPath from '../../assets/logo.svg';\n\nconst AuthStart = () => {\n  const {\n    startCreatingWallet,\n    startImportingWallet,\n    openAbout,\n    openHardwareWalletModal,\n  } = getActions();\n\n  const lang = useLang();\n  const [isLogoReady, markLogoReady] = useFlag();\n  const { transitionClassNames } = useShowTransition(isLogoReady, undefined, undefined, 'slow');\n\n  const handleCreateWallet = useCallback(() => {\n    startCreatingWallet();\n  }, [startCreatingWallet]);\n\n  return (\n    <div className={buildClassName(styles.container, 'custom-scroll')}>\n      <img\n        src={logoPath}\n        alt={APP_NAME}\n        className={buildClassName(styles.logo, transitionClassNames)}\n        onLoad={markLogoReady}\n      />\n      <div className={styles.appName}>{APP_NAME}</div>\n      <div className={styles.info}>\n        {renderText(lang('$auth_intro'))}\n      </div>\n      <Button\n        isText\n        className={buildClassName(styles.btn, styles.btn_about)}\n        onClick={openAbout}\n      >\n        {lang('More about MyTonWallet')}\n        <i className=\"icon-chevron-right\" />\n      </Button>\n      <div className={styles.importButtonsBlock}>\n        <Button\n          isPrimary\n          className={styles.btn}\n          onClick={handleCreateWallet}\n        >\n          {lang('Create Wallet')}\n        </Button>\n        <span className={styles.importText}>{lang('Or import from...')}</span>\n        <div className={styles.importButtons}>\n          <Button\n            className={buildClassName(styles.btn, !IS_LEDGER_SUPPORTED && styles.btn_single)}\n            onClick={startImportingWallet}\n          >\n            {lang('%1$d Secret Words', MNEMONIC_COUNT)}\n          </Button>\n          {IS_LEDGER_SUPPORTED && (\n            <Button\n              className={buildClassName(styles.btn, styles.btn_mini)}\n              onClick={openHardwareWalletModal}\n            >\n              {lang('Ledger')}\n            </Button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(AuthStart);\n","import React, { memo, useCallback, useState } from '../../lib/teact/teact';\nimport { getActions } from '../../lib/teact/teactn';\n\nimport { AuthState } from '../../global/types';\nimport type { GlobalState } from '../../global/types';\n\nimport { withGlobal } from '../../global';\nimport { pick } from '../../util/iteratees';\n\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\n\nimport SettingsAbout from '../settings/SettingsAbout';\nimport Transition from '../ui/Transition';\nimport AuthCreateBackup from './AuthCreateBackup';\nimport AuthCreatePassword from './AuthCreatePassword';\nimport AuthCreatingWallet from './AuthCreatingWallet';\nimport AuthImportMnemonic from './AuthImportMnemonic';\nimport AuthStart from './AuthStart';\n\nimport styles from './Auth.module.scss';\n\ntype StateProps = Pick<GlobalState['auth'], (\n  'state' | 'mnemonic' | 'mnemonicCheckIndexes' | 'isLoading' | 'method'\n)>;\n\nconst RENDER_COUNT = Object.keys(AuthState).length / 2;\n\nconst Auth = ({\n  state,\n  isLoading,\n  mnemonic,\n  mnemonicCheckIndexes,\n  method,\n}: StateProps) => {\n  const {\n    closeAbout,\n  } = getActions();\n\n  const { isPortrait } = useDeviceScreen();\n\n  // Transitioning to ready state is done in another component\n  const renderingAuthState = useCurrentOrPrev(\n    state === AuthState.ready ? undefined : state,\n    true,\n  ) ?? -1;\n\n  const [nextKey, setNextKey] = useState(renderingAuthState + 1);\n  const updateNextKey = useCallback(() => {\n    setNextKey(renderingAuthState + 1);\n  }, [renderingAuthState]);\n\n  // eslint-disable-next-line consistent-return\n  function renderAuthScreen(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case AuthState.none:\n        return <AuthStart />;\n      case AuthState.creatingWallet:\n        return <AuthCreatingWallet isActive={isActive} />;\n      case AuthState.createPassword:\n        return <AuthCreatePassword isActive={isActive} isLoading={isLoading} method=\"createAccount\" />;\n      case AuthState.createBackup:\n        return <AuthCreateBackup isActive={isActive} mnemonic={mnemonic} checkIndexes={mnemonicCheckIndexes} />;\n      case AuthState.importWallet:\n        return <AuthImportMnemonic isActive={isActive} />;\n      case AuthState.importWalletCreatePassword:\n        return <AuthCreatePassword isActive={isActive} isLoading={isLoading} method={method} />;\n      case AuthState.about:\n        return <SettingsAbout handleBackClick={closeAbout} />;\n    }\n  }\n\n  return (\n    <Transition\n      name={isPortrait ? 'pushSlide' : 'semiFade'}\n      activeKey={renderingAuthState}\n      renderCount={RENDER_COUNT}\n      shouldCleanup\n      className={styles.transitionContainer}\n      slideClassName={styles.transitionSlide}\n      nextKey={nextKey}\n      onStop={updateNextKey}\n    >\n      {renderAuthScreen}\n    </Transition>\n  );\n};\n\nexport default memo(withGlobal((global): StateProps => {\n  return pick(global.auth, [\n    'state', 'mnemonic', 'mnemonicCheckIndexes', 'isLoading', 'method',\n  ]);\n})(Auth));\n","import { DEFAULT_DECIMAL_PLACES } from '../../config';\n\nexport function bigStrToHuman(amount: string, decimalPlaces?: number) {\n  if (decimalPlaces === undefined) decimalPlaces = DEFAULT_DECIMAL_PLACES;\n  return divideBigInt(BigInt(amount), BigInt(10 ** decimalPlaces));\n}\n\nexport function humanToBigStr(amount: number, decimalPlaces?: number) {\n  if (decimalPlaces === undefined) decimalPlaces = DEFAULT_DECIMAL_PLACES;\n  return String(Math.round(amount * (10 ** decimalPlaces)));\n}\n\nfunction divideBigInt(a: bigint, b: bigint) {\n  const div = a / b;\n  return Number(div) + Number(a - div * b) / Number(b);\n}\n\nexport function getIsTxIdLocal(txId: string) {\n  return txId.includes('|');\n}\n","import type { AccountIdParsed, ApiBlockchainKey, ApiNetwork } from '../api/types';\n\nexport function genRelatedAccountIds(accountId: string): string[] {\n  const account = parseAccountId(accountId);\n  return [\n    buildAccountId({ ...account, network: 'mainnet' }),\n    buildAccountId({ ...account, network: 'testnet' }),\n  ];\n}\n\nexport function parseAccountId(accountId: string): AccountIdParsed {\n  const [\n    id,\n    blockchain = 'ton', // Handle deprecated case when `accountId = '0'`\n    network = 'mainnet',\n  ] = accountId.split('-');\n  return {\n    id: Number(id),\n    blockchain: blockchain as ApiBlockchainKey,\n    network: network as ApiNetwork,\n  };\n}\n\nexport function buildAccountId(account: AccountIdParsed) {\n  const { id, network, blockchain } = account;\n  return `${id}-${blockchain}-${network}`;\n}\n","/*\n *  big.js v6.2.1\n *  A small, fast, easy-to-use library for arbitrary-precision decimal arithmetic.\n *  Copyright (c) 2022 Michael Mclaughlin\n *  https://github.com/MikeMcl/big.js/LICENCE.md\n */\n\n\n/************************************** EDITABLE DEFAULTS *****************************************/\n\n\n  // The default values below must be integers within the stated ranges.\n\n  /*\n   * The maximum number of decimal places (DP) of the results of operations involving division:\n   * div and sqrt, and pow with negative exponents.\n   */\nvar DP = 20,          // 0 to MAX_DP\n\n  /*\n   * The rounding mode (RM) used when rounding to the above decimal places.\n   *\n   *  0  Towards zero (i.e. truncate, no rounding).       (ROUND_DOWN)\n   *  1  To nearest neighbour. If equidistant, round up.  (ROUND_HALF_UP)\n   *  2  To nearest neighbour. If equidistant, to even.   (ROUND_HALF_EVEN)\n   *  3  Away from zero.                                  (ROUND_UP)\n   */\n  RM = 1,             // 0, 1, 2 or 3\n\n  // The maximum value of DP and Big.DP.\n  MAX_DP = 1E6,       // 0 to 1000000\n\n  // The maximum magnitude of the exponent argument to the pow method.\n  MAX_POWER = 1E6,    // 1 to 1000000\n\n  /*\n   * The negative exponent (NE) at and beneath which toString returns exponential notation.\n   * (JavaScript numbers: -7)\n   * -1000000 is the minimum recommended exponent value of a Big.\n   */\n  NE = -7,            // 0 to -1000000\n\n  /*\n   * The positive exponent (PE) at and above which toString returns exponential notation.\n   * (JavaScript numbers: 21)\n   * 1000000 is the maximum recommended exponent value of a Big, but this limit is not enforced.\n   */\n  PE = 21,            // 0 to 1000000\n\n  /*\n   * When true, an error will be thrown if a primitive number is passed to the Big constructor,\n   * or if valueOf is called, or if toNumber is called on a Big which cannot be converted to a\n   * primitive number without a loss of precision.\n   */\n  STRICT = false,     // true or false\n\n\n/**************************************************************************************************/\n\n\n  // Error messages.\n  NAME = '[big.js] ',\n  INVALID = NAME + 'Invalid ',\n  INVALID_DP = INVALID + 'decimal places',\n  INVALID_RM = INVALID + 'rounding mode',\n  DIV_BY_ZERO = NAME + 'Division by zero',\n\n  // The shared prototype object.\n  P = {},\n  UNDEFINED = void 0,\n  NUMERIC = /^-?(\\d+(\\.\\d*)?|\\.\\d+)(e[+-]?\\d+)?$/i;\n\n\n/*\n * Create and return a Big constructor.\n */\nfunction _Big_() {\n\n  /*\n   * The Big constructor and exported function.\n   * Create and return a new instance of a Big number object.\n   *\n   * n {number|string|Big} A numeric value.\n   */\n  function Big(n) {\n    var x = this;\n\n    // Enable constructor usage without new.\n    if (!(x instanceof Big)) return n === UNDEFINED ? _Big_() : new Big(n);\n\n    // Duplicate.\n    if (n instanceof Big) {\n      x.s = n.s;\n      x.e = n.e;\n      x.c = n.c.slice();\n    } else {\n      if (typeof n !== 'string') {\n        if (Big.strict === true && typeof n !== 'bigint') {\n          throw TypeError(INVALID + 'value');\n        }\n\n        // Minus zero?\n        n = n === 0 && 1 / n < 0 ? '-0' : String(n);\n      }\n\n      parse(x, n);\n    }\n\n    // Retain a reference to this Big constructor.\n    // Shadow Big.prototype.constructor which points to Object.\n    x.constructor = Big;\n  }\n\n  Big.prototype = P;\n  Big.DP = DP;\n  Big.RM = RM;\n  Big.NE = NE;\n  Big.PE = PE;\n  Big.strict = STRICT;\n  Big.roundDown = 0;\n  Big.roundHalfUp = 1;\n  Big.roundHalfEven = 2;\n  Big.roundUp = 3;\n\n  return Big;\n}\n\n\n/*\n * Parse the number or string value passed to a Big constructor.\n *\n * x {Big} A Big number instance.\n * n {number|string} A numeric value.\n */\nfunction parse(x, n) {\n  var e, i, nl;\n\n  if (!NUMERIC.test(n)) {\n    throw Error(INVALID + 'number');\n  }\n\n  // Determine sign.\n  x.s = n.charAt(0) == '-' ? (n = n.slice(1), -1) : 1;\n\n  // Decimal point?\n  if ((e = n.indexOf('.')) > -1) n = n.replace('.', '');\n\n  // Exponential form?\n  if ((i = n.search(/e/i)) > 0) {\n\n    // Determine exponent.\n    if (e < 0) e = i;\n    e += +n.slice(i + 1);\n    n = n.substring(0, i);\n  } else if (e < 0) {\n\n    // Integer.\n    e = n.length;\n  }\n\n  nl = n.length;\n\n  // Determine leading zeros.\n  for (i = 0; i < nl && n.charAt(i) == '0';) ++i;\n\n  if (i == nl) {\n\n    // Zero.\n    x.c = [x.e = 0];\n  } else {\n\n    // Determine trailing zeros.\n    for (; nl > 0 && n.charAt(--nl) == '0';);\n    x.e = e - i - 1;\n    x.c = [];\n\n    // Convert string to array of digits without leading/trailing zeros.\n    for (e = 0; i <= nl;) x.c[e++] = +n.charAt(i++);\n  }\n\n  return x;\n}\n\n\n/*\n * Round Big x to a maximum of sd significant digits using rounding mode rm.\n *\n * x {Big} The Big to round.\n * sd {number} Significant digits: integer, 0 to MAX_DP inclusive.\n * rm {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n * [more] {boolean} Whether the result of division was truncated.\n */\nfunction round(x, sd, rm, more) {\n  var xc = x.c;\n\n  if (rm === UNDEFINED) rm = x.constructor.RM;\n  if (rm !== 0 && rm !== 1 && rm !== 2 && rm !== 3) {\n    throw Error(INVALID_RM);\n  }\n\n  if (sd < 1) {\n    more =\n      rm === 3 && (more || !!xc[0]) || sd === 0 && (\n      rm === 1 && xc[0] >= 5 ||\n      rm === 2 && (xc[0] > 5 || xc[0] === 5 && (more || xc[1] !== UNDEFINED))\n    );\n\n    xc.length = 1;\n\n    if (more) {\n\n      // 1, 0.1, 0.01, 0.001, 0.0001 etc.\n      x.e = x.e - sd + 1;\n      xc[0] = 1;\n    } else {\n\n      // Zero.\n      xc[0] = x.e = 0;\n    }\n  } else if (sd < xc.length) {\n\n    // xc[sd] is the digit after the digit that may be rounded up.\n    more =\n      rm === 1 && xc[sd] >= 5 ||\n      rm === 2 && (xc[sd] > 5 || xc[sd] === 5 &&\n        (more || xc[sd + 1] !== UNDEFINED || xc[sd - 1] & 1)) ||\n      rm === 3 && (more || !!xc[0]);\n\n    // Remove any digits after the required precision.\n    xc.length = sd;\n\n    // Round up?\n    if (more) {\n\n      // Rounding up may mean the previous digit has to be rounded up.\n      for (; ++xc[--sd] > 9;) {\n        xc[sd] = 0;\n        if (sd === 0) {\n          ++x.e;\n          xc.unshift(1);\n          break;\n        }\n      }\n    }\n\n    // Remove trailing zeros.\n    for (sd = xc.length; !xc[--sd];) xc.pop();\n  }\n\n  return x;\n}\n\n\n/*\n * Return a string representing the value of Big x in normal or exponential notation.\n * Handles P.toExponential, P.toFixed, P.toJSON, P.toPrecision, P.toString and P.valueOf.\n */\nfunction stringify(x, doExponential, isNonzero) {\n  var e = x.e,\n    s = x.c.join(''),\n    n = s.length;\n\n  // Exponential notation?\n  if (doExponential) {\n    s = s.charAt(0) + (n > 1 ? '.' + s.slice(1) : '') + (e < 0 ? 'e' : 'e+') + e;\n\n  // Normal notation.\n  } else if (e < 0) {\n    for (; ++e;) s = '0' + s;\n    s = '0.' + s;\n  } else if (e > 0) {\n    if (++e > n) {\n      for (e -= n; e--;) s += '0';\n    } else if (e < n) {\n      s = s.slice(0, e) + '.' + s.slice(e);\n    }\n  } else if (n > 1) {\n    s = s.charAt(0) + '.' + s.slice(1);\n  }\n\n  return x.s < 0 && isNonzero ? '-' + s : s;\n}\n\n\n// Prototype/instance methods\n\n\n/*\n * Return a new Big whose value is the absolute value of this Big.\n */\nP.abs = function () {\n  var x = new this.constructor(this);\n  x.s = 1;\n  return x;\n};\n\n\n/*\n * Return 1 if the value of this Big is greater than the value of Big y,\n *       -1 if the value of this Big is less than the value of Big y, or\n *        0 if they have the same value.\n */\nP.cmp = function (y) {\n  var isneg,\n    x = this,\n    xc = x.c,\n    yc = (y = new x.constructor(y)).c,\n    i = x.s,\n    j = y.s,\n    k = x.e,\n    l = y.e;\n\n  // Either zero?\n  if (!xc[0] || !yc[0]) return !xc[0] ? !yc[0] ? 0 : -j : i;\n\n  // Signs differ?\n  if (i != j) return i;\n\n  isneg = i < 0;\n\n  // Compare exponents.\n  if (k != l) return k > l ^ isneg ? 1 : -1;\n\n  j = (k = xc.length) < (l = yc.length) ? k : l;\n\n  // Compare digit by digit.\n  for (i = -1; ++i < j;) {\n    if (xc[i] != yc[i]) return xc[i] > yc[i] ^ isneg ? 1 : -1;\n  }\n\n  // Compare lengths.\n  return k == l ? 0 : k > l ^ isneg ? 1 : -1;\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big divided by the value of Big y, rounded,\n * if necessary, to a maximum of Big.DP decimal places using rounding mode Big.RM.\n */\nP.div = function (y) {\n  var x = this,\n    Big = x.constructor,\n    a = x.c,                  // dividend\n    b = (y = new Big(y)).c,   // divisor\n    k = x.s == y.s ? 1 : -1,\n    dp = Big.DP;\n\n  if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {\n    throw Error(INVALID_DP);\n  }\n\n  // Divisor is zero?\n  if (!b[0]) {\n    throw Error(DIV_BY_ZERO);\n  }\n\n  // Dividend is 0? Return +-0.\n  if (!a[0]) {\n    y.s = k;\n    y.c = [y.e = 0];\n    return y;\n  }\n\n  var bl, bt, n, cmp, ri,\n    bz = b.slice(),\n    ai = bl = b.length,\n    al = a.length,\n    r = a.slice(0, bl),   // remainder\n    rl = r.length,\n    q = y,                // quotient\n    qc = q.c = [],\n    qi = 0,\n    p = dp + (q.e = x.e - y.e) + 1;    // precision of the result\n\n  q.s = k;\n  k = p < 0 ? 0 : p;\n\n  // Create version of divisor with leading zero.\n  bz.unshift(0);\n\n  // Add zeros to make remainder as long as divisor.\n  for (; rl++ < bl;) r.push(0);\n\n  do {\n\n    // n is how many times the divisor goes into current remainder.\n    for (n = 0; n < 10; n++) {\n\n      // Compare divisor and remainder.\n      if (bl != (rl = r.length)) {\n        cmp = bl > rl ? 1 : -1;\n      } else {\n        for (ri = -1, cmp = 0; ++ri < bl;) {\n          if (b[ri] != r[ri]) {\n            cmp = b[ri] > r[ri] ? 1 : -1;\n            break;\n          }\n        }\n      }\n\n      // If divisor < remainder, subtract divisor from remainder.\n      if (cmp < 0) {\n\n        // Remainder can't be more than 1 digit longer than divisor.\n        // Equalise lengths using divisor with extra leading zero?\n        for (bt = rl == bl ? b : bz; rl;) {\n          if (r[--rl] < bt[rl]) {\n            ri = rl;\n            for (; ri && !r[--ri];) r[ri] = 9;\n            --r[ri];\n            r[rl] += 10;\n          }\n          r[rl] -= bt[rl];\n        }\n\n        for (; !r[0];) r.shift();\n      } else {\n        break;\n      }\n    }\n\n    // Add the digit n to the result array.\n    qc[qi++] = cmp ? n : ++n;\n\n    // Update the remainder.\n    if (r[0] && cmp) r[rl] = a[ai] || 0;\n    else r = [a[ai]];\n\n  } while ((ai++ < al || r[0] !== UNDEFINED) && k--);\n\n  // Leading zero? Do not remove if result is simply zero (qi == 1).\n  if (!qc[0] && qi != 1) {\n\n    // There can't be more than one zero.\n    qc.shift();\n    q.e--;\n    p--;\n  }\n\n  // Round?\n  if (qi > p) round(q, p, Big.RM, r[0] !== UNDEFINED);\n\n  return q;\n};\n\n\n/*\n * Return true if the value of this Big is equal to the value of Big y, otherwise return false.\n */\nP.eq = function (y) {\n  return this.cmp(y) === 0;\n};\n\n\n/*\n * Return true if the value of this Big is greater than the value of Big y, otherwise return\n * false.\n */\nP.gt = function (y) {\n  return this.cmp(y) > 0;\n};\n\n\n/*\n * Return true if the value of this Big is greater than or equal to the value of Big y, otherwise\n * return false.\n */\nP.gte = function (y) {\n  return this.cmp(y) > -1;\n};\n\n\n/*\n * Return true if the value of this Big is less than the value of Big y, otherwise return false.\n */\nP.lt = function (y) {\n  return this.cmp(y) < 0;\n};\n\n\n/*\n * Return true if the value of this Big is less than or equal to the value of Big y, otherwise\n * return false.\n */\nP.lte = function (y) {\n  return this.cmp(y) < 1;\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big minus the value of Big y.\n */\nP.minus = P.sub = function (y) {\n  var i, j, t, xlty,\n    x = this,\n    Big = x.constructor,\n    a = x.s,\n    b = (y = new Big(y)).s;\n\n  // Signs differ?\n  if (a != b) {\n    y.s = -b;\n    return x.plus(y);\n  }\n\n  var xc = x.c.slice(),\n    xe = x.e,\n    yc = y.c,\n    ye = y.e;\n\n  // Either zero?\n  if (!xc[0] || !yc[0]) {\n    if (yc[0]) {\n      y.s = -b;\n    } else if (xc[0]) {\n      y = new Big(x);\n    } else {\n      y.s = 1;\n    }\n    return y;\n  }\n\n  // Determine which is the bigger number. Prepend zeros to equalise exponents.\n  if (a = xe - ye) {\n\n    if (xlty = a < 0) {\n      a = -a;\n      t = xc;\n    } else {\n      ye = xe;\n      t = yc;\n    }\n\n    t.reverse();\n    for (b = a; b--;) t.push(0);\n    t.reverse();\n  } else {\n\n    // Exponents equal. Check digit by digit.\n    j = ((xlty = xc.length < yc.length) ? xc : yc).length;\n\n    for (a = b = 0; b < j; b++) {\n      if (xc[b] != yc[b]) {\n        xlty = xc[b] < yc[b];\n        break;\n      }\n    }\n  }\n\n  // x < y? Point xc to the array of the bigger number.\n  if (xlty) {\n    t = xc;\n    xc = yc;\n    yc = t;\n    y.s = -y.s;\n  }\n\n  /*\n   * Append zeros to xc if shorter. No need to add zeros to yc if shorter as subtraction only\n   * needs to start at yc.length.\n   */\n  if ((b = (j = yc.length) - (i = xc.length)) > 0) for (; b--;) xc[i++] = 0;\n\n  // Subtract yc from xc.\n  for (b = i; j > a;) {\n    if (xc[--j] < yc[j]) {\n      for (i = j; i && !xc[--i];) xc[i] = 9;\n      --xc[i];\n      xc[j] += 10;\n    }\n\n    xc[j] -= yc[j];\n  }\n\n  // Remove trailing zeros.\n  for (; xc[--b] === 0;) xc.pop();\n\n  // Remove leading zeros and adjust exponent accordingly.\n  for (; xc[0] === 0;) {\n    xc.shift();\n    --ye;\n  }\n\n  if (!xc[0]) {\n\n    // n - n = +0\n    y.s = 1;\n\n    // Result must be zero.\n    xc = [ye = 0];\n  }\n\n  y.c = xc;\n  y.e = ye;\n\n  return y;\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big modulo the value of Big y.\n */\nP.mod = function (y) {\n  var ygtx,\n    x = this,\n    Big = x.constructor,\n    a = x.s,\n    b = (y = new Big(y)).s;\n\n  if (!y.c[0]) {\n    throw Error(DIV_BY_ZERO);\n  }\n\n  x.s = y.s = 1;\n  ygtx = y.cmp(x) == 1;\n  x.s = a;\n  y.s = b;\n\n  if (ygtx) return new Big(x);\n\n  a = Big.DP;\n  b = Big.RM;\n  Big.DP = Big.RM = 0;\n  x = x.div(y);\n  Big.DP = a;\n  Big.RM = b;\n\n  return this.minus(x.times(y));\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big negated.\n */\nP.neg = function () {\n  var x = new this.constructor(this);\n  x.s = -x.s;\n  return x;\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big plus the value of Big y.\n */\nP.plus = P.add = function (y) {\n  var e, k, t,\n    x = this,\n    Big = x.constructor;\n\n  y = new Big(y);\n\n  // Signs differ?\n  if (x.s != y.s) {\n    y.s = -y.s;\n    return x.minus(y);\n  }\n\n  var xe = x.e,\n    xc = x.c,\n    ye = y.e,\n    yc = y.c;\n\n  // Either zero?\n  if (!xc[0] || !yc[0]) {\n    if (!yc[0]) {\n      if (xc[0]) {\n        y = new Big(x);\n      } else {\n        y.s = x.s;\n      }\n    }\n    return y;\n  }\n\n  xc = xc.slice();\n\n  // Prepend zeros to equalise exponents.\n  // Note: reverse faster than unshifts.\n  if (e = xe - ye) {\n    if (e > 0) {\n      ye = xe;\n      t = yc;\n    } else {\n      e = -e;\n      t = xc;\n    }\n\n    t.reverse();\n    for (; e--;) t.push(0);\n    t.reverse();\n  }\n\n  // Point xc to the longer array.\n  if (xc.length - yc.length < 0) {\n    t = yc;\n    yc = xc;\n    xc = t;\n  }\n\n  e = yc.length;\n\n  // Only start adding at yc.length - 1 as the further digits of xc can be left as they are.\n  for (k = 0; e; xc[e] %= 10) k = (xc[--e] = xc[e] + yc[e] + k) / 10 | 0;\n\n  // No need to check for zero, as +x + +y != 0 && -x + -y != 0\n\n  if (k) {\n    xc.unshift(k);\n    ++ye;\n  }\n\n  // Remove trailing zeros.\n  for (e = xc.length; xc[--e] === 0;) xc.pop();\n\n  y.c = xc;\n  y.e = ye;\n\n  return y;\n};\n\n\n/*\n * Return a Big whose value is the value of this Big raised to the power n.\n * If n is negative, round to a maximum of Big.DP decimal places using rounding\n * mode Big.RM.\n *\n * n {number} Integer, -MAX_POWER to MAX_POWER inclusive.\n */\nP.pow = function (n) {\n  var x = this,\n    one = new x.constructor('1'),\n    y = one,\n    isneg = n < 0;\n\n  if (n !== ~~n || n < -MAX_POWER || n > MAX_POWER) {\n    throw Error(INVALID + 'exponent');\n  }\n\n  if (isneg) n = -n;\n\n  for (;;) {\n    if (n & 1) y = y.times(x);\n    n >>= 1;\n    if (!n) break;\n    x = x.times(x);\n  }\n\n  return isneg ? one.div(y) : y;\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big rounded to a maximum precision of sd\n * significant digits using rounding mode rm, or Big.RM if rm is not specified.\n *\n * sd {number} Significant digits: integer, 1 to MAX_DP inclusive.\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n */\nP.prec = function (sd, rm) {\n  if (sd !== ~~sd || sd < 1 || sd > MAX_DP) {\n    throw Error(INVALID + 'precision');\n  }\n  return round(new this.constructor(this), sd, rm);\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big rounded to a maximum of dp decimal places\n * using rounding mode rm, or Big.RM if rm is not specified.\n * If dp is negative, round to an integer which is a multiple of 10**-dp.\n * If dp is not specified, round to 0 decimal places.\n *\n * dp? {number} Integer, -MAX_DP to MAX_DP inclusive.\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n */\nP.round = function (dp, rm) {\n  if (dp === UNDEFINED) dp = 0;\n  else if (dp !== ~~dp || dp < -MAX_DP || dp > MAX_DP) {\n    throw Error(INVALID_DP);\n  }\n  return round(new this.constructor(this), dp + this.e + 1, rm);\n};\n\n\n/*\n * Return a new Big whose value is the square root of the value of this Big, rounded, if\n * necessary, to a maximum of Big.DP decimal places using rounding mode Big.RM.\n */\nP.sqrt = function () {\n  var r, c, t,\n    x = this,\n    Big = x.constructor,\n    s = x.s,\n    e = x.e,\n    half = new Big('0.5');\n\n  // Zero?\n  if (!x.c[0]) return new Big(x);\n\n  // Negative?\n  if (s < 0) {\n    throw Error(NAME + 'No square root');\n  }\n\n  // Estimate.\n  s = Math.sqrt(x + '');\n\n  // Math.sqrt underflow/overflow?\n  // Re-estimate: pass x coefficient to Math.sqrt as integer, then adjust the result exponent.\n  if (s === 0 || s === 1 / 0) {\n    c = x.c.join('');\n    if (!(c.length + e & 1)) c += '0';\n    s = Math.sqrt(c);\n    e = ((e + 1) / 2 | 0) - (e < 0 || e & 1);\n    r = new Big((s == 1 / 0 ? '5e' : (s = s.toExponential()).slice(0, s.indexOf('e') + 1)) + e);\n  } else {\n    r = new Big(s + '');\n  }\n\n  e = r.e + (Big.DP += 4);\n\n  // Newton-Raphson iteration.\n  do {\n    t = r;\n    r = half.times(t.plus(x.div(t)));\n  } while (t.c.slice(0, e).join('') !== r.c.slice(0, e).join(''));\n\n  return round(r, (Big.DP -= 4) + r.e + 1, Big.RM);\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big times the value of Big y.\n */\nP.times = P.mul = function (y) {\n  var c,\n    x = this,\n    Big = x.constructor,\n    xc = x.c,\n    yc = (y = new Big(y)).c,\n    a = xc.length,\n    b = yc.length,\n    i = x.e,\n    j = y.e;\n\n  // Determine sign of result.\n  y.s = x.s == y.s ? 1 : -1;\n\n  // Return signed 0 if either 0.\n  if (!xc[0] || !yc[0]) {\n    y.c = [y.e = 0];\n    return y;\n  }\n\n  // Initialise exponent of result as x.e + y.e.\n  y.e = i + j;\n\n  // If array xc has fewer digits than yc, swap xc and yc, and lengths.\n  if (a < b) {\n    c = xc;\n    xc = yc;\n    yc = c;\n    j = a;\n    a = b;\n    b = j;\n  }\n\n  // Initialise coefficient array of result with zeros.\n  for (c = new Array(j = a + b); j--;) c[j] = 0;\n\n  // Multiply.\n\n  // i is initially xc.length.\n  for (i = b; i--;) {\n    b = 0;\n\n    // a is yc.length.\n    for (j = a + i; j > i;) {\n\n      // Current sum of products at this digit position, plus carry.\n      b = c[j] + yc[i] * xc[j - i - 1] + b;\n      c[j--] = b % 10;\n\n      // carry\n      b = b / 10 | 0;\n    }\n\n    c[j] = b;\n  }\n\n  // Increment result exponent if there is a final carry, otherwise remove leading zero.\n  if (b) ++y.e;\n  else c.shift();\n\n  // Remove trailing zeros.\n  for (i = c.length; !c[--i];) c.pop();\n  y.c = c;\n\n  return y;\n};\n\n\n/*\n * Return a string representing the value of this Big in exponential notation rounded to dp fixed\n * decimal places using rounding mode rm, or Big.RM if rm is not specified.\n *\n * dp? {number} Decimal places: integer, 0 to MAX_DP inclusive.\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n */\nP.toExponential = function (dp, rm) {\n  var x = this,\n    n = x.c[0];\n\n  if (dp !== UNDEFINED) {\n    if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {\n      throw Error(INVALID_DP);\n    }\n    x = round(new x.constructor(x), ++dp, rm);\n    for (; x.c.length < dp;) x.c.push(0);\n  }\n\n  return stringify(x, true, !!n);\n};\n\n\n/*\n * Return a string representing the value of this Big in normal notation rounded to dp fixed\n * decimal places using rounding mode rm, or Big.RM if rm is not specified.\n *\n * dp? {number} Decimal places: integer, 0 to MAX_DP inclusive.\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n *\n * (-0).toFixed(0) is '0', but (-0.1).toFixed(0) is '-0'.\n * (-0).toFixed(1) is '0.0', but (-0.01).toFixed(1) is '-0.0'.\n */\nP.toFixed = function (dp, rm) {\n  var x = this,\n    n = x.c[0];\n\n  if (dp !== UNDEFINED) {\n    if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {\n      throw Error(INVALID_DP);\n    }\n    x = round(new x.constructor(x), dp + x.e + 1, rm);\n\n    // x.e may have changed if the value is rounded up.\n    for (dp = dp + x.e + 1; x.c.length < dp;) x.c.push(0);\n  }\n\n  return stringify(x, false, !!n);\n};\n\n\n/*\n * Return a string representing the value of this Big.\n * Return exponential notation if this Big has a positive exponent equal to or greater than\n * Big.PE, or a negative exponent equal to or less than Big.NE.\n * Omit the sign for negative zero.\n */\nP[Symbol.for('nodejs.util.inspect.custom')] = P.toJSON = P.toString = function () {\n  var x = this,\n    Big = x.constructor;\n  return stringify(x, x.e <= Big.NE || x.e >= Big.PE, !!x.c[0]);\n};\n\n\n/*\n * Return the value of this Big as a primitve number.\n */\nP.toNumber = function () {\n  var n = Number(stringify(this, true, true));\n  if (this.constructor.strict === true && !this.eq(n.toString())) {\n    throw Error(NAME + 'Imprecise conversion');\n  }\n  return n;\n};\n\n\n/*\n * Return a string representing the value of this Big rounded to sd significant digits using\n * rounding mode rm, or Big.RM if rm is not specified.\n * Use exponential notation if sd is less than the number of digits necessary to represent\n * the integer part of the value in normal notation.\n *\n * sd {number} Significant digits: integer, 1 to MAX_DP inclusive.\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n */\nP.toPrecision = function (sd, rm) {\n  var x = this,\n    Big = x.constructor,\n    n = x.c[0];\n\n  if (sd !== UNDEFINED) {\n    if (sd !== ~~sd || sd < 1 || sd > MAX_DP) {\n      throw Error(INVALID + 'precision');\n    }\n    x = round(new Big(x), sd, rm);\n    for (; x.c.length < sd;) x.c.push(0);\n  }\n\n  return stringify(x, sd <= x.e || x.e <= Big.NE || x.e >= Big.PE, !!n);\n};\n\n\n/*\n * Return a string representing the value of this Big.\n * Return exponential notation if this Big has a positive exponent equal to or greater than\n * Big.PE, or a negative exponent equal to or less than Big.NE.\n * Include the sign for negative zero.\n */\nP.valueOf = function () {\n  var x = this,\n    Big = x.constructor;\n  if (Big.strict === true) {\n    throw Error(NAME + 'valueOf disallowed');\n  }\n  return stringify(x, x.e <= Big.NE || x.e >= Big.PE, true);\n};\n\n\n// Export\n\n\nexport var Big = _Big_();\n\n/// <reference types=\"https://raw.githubusercontent.com/DefinitelyTyped/DefinitelyTyped/master/types/big.js/index.d.ts\" />\nexport default Big;\n","import { Big } from '../lib/big.js';\n\nexport function round(value: number, precision = 0) {\n  const bn = new Big(value);\n\n  return bn.round(precision, Big.roundHalfUp).toNumber();\n}\n\nexport function floor(value: number, precision = 0) {\n  const bn = new Big(value);\n\n  return bn.round(precision, Big.roundDown).toNumber();\n}\n","import type { ApiNetwork, ApiTxIdBySlug } from '../../api/types';\nimport type {\n  Account, AccountSettings, GlobalState, UserToken,\n} from '../types';\n\nimport { DEFAULT_LANDSCAPE_ACTION_TAB_ID } from '../../config';\nimport { parseAccountId } from '../../util/account';\nimport { findLast, mapValues, unique } from '../../util/iteratees';\nimport memoized from '../../util/memoized';\nimport { round } from '../../util/round';\nimport { bigStrToHuman, getIsTxIdLocal } from '../helpers';\n\nexport function selectHasSession(global: GlobalState) {\n  return Boolean(global.currentAccountId);\n}\n\nexport const selectAccountTokensMemoized = memoized((\n  balancesBySlug: Record<string, string>,\n  tokenInfo: GlobalState['tokenInfo'],\n  accountSettings: AccountSettings,\n) => {\n  return Object\n    .entries(balancesBySlug)\n    .filter(([slug]) => (slug in tokenInfo.bySlug))\n    .sort(([slugA], [slugB]) => {\n      if (!accountSettings.orderedSlugs) {\n        return 1;\n      }\n      const indexA = accountSettings.orderedSlugs.indexOf(slugA);\n      const indexB = accountSettings.orderedSlugs.indexOf(slugB);\n      return indexA - indexB;\n    })\n    .map(([slug, balance]) => {\n      const {\n        symbol, name, image, decimals, quote: {\n          price, percentChange24h, percentChange7d, percentChange30d, history7d, history24h, history30d,\n        },\n      } = tokenInfo.bySlug[slug];\n      const isDisabled = accountSettings.disabledSlugs?.includes(slug);\n      const amount = bigStrToHuman(balance, decimals);\n\n      return {\n        symbol,\n        slug,\n        amount,\n        name,\n        image,\n        price,\n        decimals,\n        change24h: round(percentChange24h / 100, 4),\n        change7d: round(percentChange7d / 100, 4),\n        change30d: round(percentChange30d / 100, 4),\n        history24h,\n        history7d,\n        history30d,\n        isDisabled,\n      } as UserToken;\n    });\n});\n\nexport function selectCurrentAccountTokens(global: GlobalState) {\n  const balancesBySlug = selectCurrentAccountState(global)?.balances?.bySlug;\n  if (!balancesBySlug || !global.tokenInfo) {\n    return undefined;\n  }\n\n  const accountSettings = selectAccountSettings(global, global.currentAccountId!) ?? {};\n\n  return selectAccountTokensMemoized(balancesBySlug, global.tokenInfo, accountSettings);\n}\n\nexport const selectPopularTokensMemoized = memoized((\n  balancesBySlug: Record<string, string>,\n  tokenInfo: GlobalState['tokenInfo'],\n) => {\n  return Object.entries(tokenInfo.bySlug)\n    .filter(([, token]) => token.isPopular)\n    .filter(([slug]) => !(slug in balancesBySlug))\n    .map(([slug]) => {\n      const {\n        symbol, name, image, decimals, keywords, quote: {\n          price, percentChange24h, percentChange7d, percentChange30d, history7d, history24h, history30d,\n        },\n      } = tokenInfo.bySlug[slug];\n      const amount = bigStrToHuman('0', decimals);\n\n      return {\n        symbol,\n        slug,\n        amount,\n        name,\n        image,\n        price,\n        decimals,\n        change24h: round(percentChange24h / 100, 4),\n        change7d: round(percentChange7d / 100, 4),\n        change30d: round(percentChange30d / 100, 4),\n        history24h,\n        history7d,\n        history30d,\n        isDisabled: false,\n        keywords,\n      } as UserToken;\n    });\n});\n\nexport function selectPopularTokensWithoutAccountTokens(global: GlobalState) {\n  const balancesBySlug = selectCurrentAccountState(global)?.balances?.bySlug;\n  if (!balancesBySlug || !global.tokenInfo) {\n    return undefined;\n  }\n\n  return selectPopularTokensMemoized(balancesBySlug, global.tokenInfo);\n}\n\nexport function selectIsNewWallet(global: GlobalState) {\n  const tokens = selectCurrentAccountTokens(global);\n\n  return tokens?.length === 0 || (tokens?.length === 1 && tokens[0].amount === 0);\n}\n\nexport function selectAccounts(global: GlobalState) {\n  return global.accounts?.byId;\n}\n\nexport const selectNetworkAccountsMemoized = memoized((network: ApiNetwork, accountsById?: Record<string, Account>) => {\n  if (!accountsById) {\n    return undefined;\n  }\n\n  return Object.fromEntries(\n    Object.entries(accountsById).filter(([accountId]) => parseAccountId(accountId).network === network),\n  );\n});\n\nexport function selectNetworkAccounts(global: GlobalState) {\n  return selectNetworkAccountsMemoized(selectCurrentNetwork(global), global.accounts?.byId);\n}\n\nexport function selectCurrentNetwork(global: GlobalState) {\n  return global.settings.isTestnet ? 'testnet' : 'mainnet';\n}\n\nexport function selectAccount(global: GlobalState, accountId: string) {\n  return selectAccounts(global)?.[accountId];\n}\n\nexport function selectCurrentAccountState(global: GlobalState) {\n  return selectAccountState(global, global.currentAccountId!);\n}\n\nexport function selectAccountState(global: GlobalState, accountId: string) {\n  return global.byAccountId[accountId];\n}\n\nexport function selectLandscapeActionsActiveTabIndex(global: GlobalState) {\n  return global.landscapeActionsActiveTabIndex ?? DEFAULT_LANDSCAPE_ACTION_TAB_ID;\n}\n\nexport function selectFirstNonHardwareAccount(global: GlobalState) {\n  const accounts = selectAccounts(global);\n\n  if (!accounts) {\n    return undefined;\n  }\n\n  return Object.values(accounts).find((account) => !account.isHardware);\n}\n\nexport function selectNewestTxIds(global: GlobalState, accountId: string): ApiTxIdBySlug {\n  return mapValues(\n    selectAccountState(global, accountId)?.transactions?.newestTransactionsBySlug || {},\n    ({ txId }) => txId,\n  );\n}\n\nexport function selectLastTxIds(global: GlobalState, accountId: string): ApiTxIdBySlug {\n  const txIdsBySlug = selectAccountState(global, accountId)?.transactions?.txIdsBySlug || {};\n\n  return mapValues(txIdsBySlug, (tokenTxIds) => {\n    return findLast(tokenTxIds, (txId) => !getIsTxIdLocal(txId));\n  });\n}\n\nexport function selectAccountSettings(global: GlobalState, accountId: string): AccountSettings | undefined {\n  return global.settings.byAccountId[accountId];\n}\n\nexport function selectDisabledSlugs(\n  global: GlobalState,\n  areTokensWithNoBalanceHidden = false,\n  areTokensWithNoPriceHidden = false,\n): string[] {\n  const accountId = global.currentAccountId!;\n  const tokens = selectCurrentAccountTokens(global) ?? [];\n  const { enabledSlugs = [], disabledSlugs = [] } = selectAccountSettings(global, accountId) ?? {};\n\n  const newDisabledSlugs = tokens\n    .filter(({ slug }) => !enabledSlugs.includes(slug))\n    .filter(({ amount, price }) => {\n      if (areTokensWithNoBalanceHidden && areTokensWithNoPriceHidden) {\n        return amount === 0 || price === 0;\n      } else if (areTokensWithNoBalanceHidden) {\n        return amount === 0;\n      } else if (areTokensWithNoPriceHidden) {\n        return price === 0;\n      }\n      return false;\n    }).map(({ slug }) => slug);\n\n  return unique([...disabledSlugs, ...newDisabledSlugs]);\n}\n\nexport function selectIsHardwareAccount(global: GlobalState) {\n  const state = selectAccount(global, global.currentAccountId!);\n\n  return state?.isHardware;\n}\n","import withCache from './withCache';\n\nconst DEFAULT_SHIFT = 6;\n\nexport const shortenAddress = withCache((address: string, shift = DEFAULT_SHIFT, fromRight = shift) => {\n  if (!address) return undefined;\n\n  return `${address.slice(0, shift)}...${address.slice(-fromRight)}`;\n});\n","import { useEffect, useState } from '../lib/teact/teact';\n\nimport type { TransferState } from '../global/types';\n\nimport useCurrentOrPrev from './useCurrentOrPrev';\nimport useLastCallback from './useLastCallback';\n\nconst ANIMATION_DURATION = 300;\n\nexport default function useModalTransitionKeys(activeKey: number, isOpen: boolean) {\n  // Use previous key during closing animation\n  const renderingKey = useCurrentOrPrev(isOpen ? activeKey : undefined, true) ?? -1;\n  const [nextKey, setNextKey] = useState<TransferState>();\n\n  const updateNextKey = useLastCallback(() => {\n    setNextKey(isOpen ? renderingKey + 1 : undefined);\n  });\n\n  // Set next key after modal is fully open\n  useEffect(() => {\n    if (isOpen) {\n      setTimeout(updateNextKey, ANIMATION_DURATION);\n    }\n  }, [isOpen, updateNextKey]);\n\n  return { renderingKey, nextKey, updateNextKey };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"Eg_4ekTn_aEDWynoNOkM\",\"slide\":\"ef0ZhSPs87IHT1AJAhLS\",\"container\":\"ig3yl4CS69QAuCOFXy8g\",\"content\":\"jERyGsY8sPpv4iy3gzda\",\"iconBlock\":\"xyE7LGCnGGkcpJP9zuTG\",\"iconBlock_base\":\"DL0dCMJBv3Ayhg7a_hxs\",\"iconBlockBase\":\"DL0dCMJBv3Ayhg7a_hxs\",\"iconBlock_success\":\"cyRsdv9PmNi_fLUcQaGa\",\"iconBlockSuccess\":\"cyRsdv9PmNi_fLUcQaGa\",\"textBlock\":\"e4AdLaiiJQFkRU3Iqztm\",\"textBlock_gap\":\"XTNkBNZORPu8g__CVzv4\",\"textBlockGap\":\"XTNkBNZORPu8g__CVzv4\",\"textBlock_success\":\"CfekGI0mgHJ2ZcRatEpu\",\"textBlockSuccess\":\"CfekGI0mgHJ2ZcRatEpu\",\"textBlock_small\":\"Om5dH_gWQCrj5jxkwiiE\",\"textBlockSmall\":\"Om5dH_gWQCrj5jxkwiiE\",\"textIcon\":\"KFbcBC2WqQBkZE7CeDyV\",\"text\":\"Qp6vMW6j4pFwX0nKOPKD\",\"text_failed\":\"TxlFJCf5B734MwAHHR6j\",\"textFailed\":\"TxlFJCf5B734MwAHHR6j\",\"text_connected\":\"PY2rLISyyVScmQbsONrm\",\"textConnected\":\"PY2rLISyyVScmQbsONrm\",\"text_success\":\"bIyCM0UytBpfIu_3EmCu\",\"textSuccess\":\"bIyCM0UytBpfIu_3EmCu\",\"actionBlock\":\"CLpfs9JwqDxlSDvWV9_s\",\"actionBlock_single\":\"jGuxMVcJHTJO2Tu8INeA\",\"actionBlockSingle\":\"jGuxMVcJHTJO2Tu8INeA\",\"button\":\"r8Jk7uegeg2ia7xV_WUN\",\"button_single\":\"m8BjjfIM7WJl3zO7S5Di\",\"buttonSingle\":\"m8BjjfIM7WJl3zO7S5Di\",\"accounts\":\"O8vLmsOnoEnYFMWXixug\",\"account\":\"IIjeX5JjXoCEZoNbKh86\",\"account_current\":\"FdZnmri2afIv9jT6vNE_\",\"accountCurrent\":\"FdZnmri2afIv9jT6vNE_\",\"accountName\":\"tw03uUqLgATMLLjhGT0Y\",\"accountFooter\":\"qX2IJtetnton1CEJo8Bq\",\"accountCurrencyIcon\":\"a7V8u3W7_sZkZTmgMWvz\",\"accountAddress\":\"KJG1xd524OpEBRF0Y9FS\",\"accountCheckMark\":\"mvsHQSjEwRfeApWz_YUu\",\"accountCheckMark_active\":\"chC6DTx56Ii5W8bxVXzt\",\"accountCheckMarkActive\":\"chC6DTx56Ii5W8bxVXzt\",\"sticker\":\"T8Sb8VrzL8gffAskp5q1\",\"declinedLabel\":\"J46AdiyFMQ4TkWJzePMG\"};","import React, {\n  memo, useEffect,\n  useState,\n} from '../../lib/teact/teact';\n\nimport { ANIMATED_STICKER_BIG_SIZE_PX } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useLang from '../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './LedgerModal.module.scss';\n\ninterface OwnProps {\n  text: string;\n  error?: string;\n  onClose: () => void;\n  onTryAgain: () => void;\n}\n\nenum ConfirmTransactionState {\n  Waiting,\n  Error,\n}\n\nfunction LedgerConfirmOperation({\n  text, error, onClose, onTryAgain,\n}: OwnProps) {\n  const lang = useLang();\n\n  const [activeState, setActiveState] = useState(ConfirmTransactionState.Waiting);\n  const [nextKey, setNextKey] = useState(ConfirmTransactionState.Error);\n\n  useEffect(() => {\n    if (error) {\n      setActiveState(ConfirmTransactionState.Error);\n      setNextKey(ConfirmTransactionState.Waiting);\n    } else {\n      setActiveState(ConfirmTransactionState.Waiting);\n      setNextKey(ConfirmTransactionState.Error);\n    }\n  }, [error]);\n\n  function renderWaitingConfirm(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Confirm via Ledger')} onClose={onClose} />\n        <div className={styles.container}>\n          <AnimatedIconWithPreview\n            size={ANIMATED_STICKER_BIG_SIZE_PX}\n            play={isActive}\n            noLoop={false}\n            nonInteractive\n            className={styles.sticker}\n            tgsUrl={ANIMATED_STICKERS_PATHS.holdTon}\n            previewUrl={ANIMATED_STICKERS_PATHS.holdTonPreview}\n          />\n          <div className={buildClassName(styles.textBlock, styles.textBlock_small)}>\n            <span className={styles.text}>{text}</span>\n          </div>\n          <div className={buildClassName(styles.actionBlock, styles.actionBlock_single)}>\n            <Button onClick={onClose} className={styles.button}>{lang('Cancel')}</Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderTryAgain(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Confirm via Ledger')} onClose={onClose} />\n        <div className={styles.container}>\n          <AnimatedIconWithPreview\n            size={ANIMATED_STICKER_BIG_SIZE_PX}\n            play={isActive}\n            noLoop={false}\n            nonInteractive\n            className={styles.sticker}\n            tgsUrl={ANIMATED_STICKERS_PATHS.holdTon}\n            previewUrl={ANIMATED_STICKERS_PATHS.holdTonPreview}\n          />\n          <div className={buildClassName(styles.textBlock, styles.textBlock_small)}>\n            <span className={styles.text}>{text}</span>\n          </div>\n          <span className={styles.declinedLabel}>{lang('Declined')}</span>\n          <div className={styles.actionBlock}>\n            <Button onClick={onClose} className={styles.button}>{lang('Cancel')}</Button>\n            <Button isPrimary onClick={onTryAgain} className={styles.button}>{lang('Try Again')}</Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case ConfirmTransactionState.Waiting:\n        return renderWaitingConfirm(isActive);\n      case ConfirmTransactionState.Error:\n        return renderTryAgain(isActive);\n    }\n  }\n\n  return (\n    <Transition\n      name=\"pushSlide\"\n      className={buildClassName(modalStyles.transition, 'custom-scroll')}\n      slideClassName={buildClassName(modalStyles.transitionSlide, styles.slide)}\n      activeKey={activeState}\n      nextKey={nextKey}\n    >\n      {renderContent}\n    </Transition>\n  );\n}\n\nexport default memo(LedgerConfirmOperation);\n","import React, {\n  memo, useCallback, useEffect,\n} from '../../lib/teact/teact';\n\nimport { HardwareConnectState } from '../../global/types';\n\nimport { getActions } from '../../global';\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\n\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport styles from './LedgerModal.module.scss';\n\ninterface OwnProps {\n  state?: HardwareConnectState;\n  isLedgerConnected?: boolean;\n  isTonAppConnected?: boolean;\n  isRemoteTab?: boolean;\n  onConnected: NoneToVoidFunction;\n  onCancel?: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n}\n\nconst NEXT_SLIDE_DELAY = 500;\n\nfunction LedgerConnect({\n  state,\n  isLedgerConnected,\n  isTonAppConnected,\n  isRemoteTab,\n  onConnected,\n  onCancel,\n  onClose,\n}: OwnProps) {\n  const {\n    connectHardwareWallet,\n    resetHardwareWalletConnect,\n  } = getActions();\n  const lang = useLang();\n\n  const isLedgerFailed = isLedgerConnected === false;\n  const isTonAppFailed = isTonAppConnected === false;\n  const isConnected = state === HardwareConnectState.Connected;\n  const title = isConnected ? lang('Ledger Connected!') : lang('Connect Ledger');\n  const shouldCloseOnCancel = !onCancel;\n\n  const handleConnect = useCallback(() => {\n    connectHardwareWallet();\n  }, [connectHardwareWallet]);\n\n  const handleConnected = useCallback(() => {\n    if (isRemoteTab) {\n      return;\n    }\n\n    setTimeout(() => {\n      onConnected();\n\n      setTimeout(() => {\n        resetHardwareWalletConnect();\n      }, NEXT_SLIDE_DELAY);\n    }, NEXT_SLIDE_DELAY);\n  }, [onConnected, resetHardwareWalletConnect, isRemoteTab]);\n\n  useEffect(() => {\n    if (state === HardwareConnectState.Connected) {\n      handleConnected();\n    }\n  }, [state, handleConnected]);\n\n  function renderButtons() {\n    const isConnecting = state === HardwareConnectState.Connecting;\n    const isFailed = state === HardwareConnectState.Failed;\n\n    if (isRemoteTab && isConnected) {\n      return (\n        <div className={buildClassName(styles.actionBlock, isConnected && styles.actionBlock_single)}>\n          <Button\n            isDisabled={isConnecting}\n            className={buildClassName(styles.button, isConnected && styles.button_single)}\n            onClick={onClose}\n          >\n            {lang('Continue')}\n          </Button>\n        </div>\n      );\n    }\n\n    return (\n      <div className={buildClassName(styles.actionBlock, isConnected && styles.actionBlock_single)}>\n        <Button\n          isDisabled={isConnecting}\n          className={buildClassName(styles.button, isConnected && styles.button_single)}\n          onClick={shouldCloseOnCancel ? onClose : onCancel}\n        >\n          {lang(shouldCloseOnCancel ? 'Cancel' : 'Back')}\n        </Button>\n        {!isConnected && (\n          <Button\n            isPrimary\n            isDisabled={isConnecting}\n            className={styles.button}\n            onClick={handleConnect}\n          >\n            {isFailed ? lang('Try Again') : lang('Continue')}\n          </Button>\n        )}\n      </div>\n    );\n  }\n\n  function renderWaitingForBrowser() {\n    return (\n      <>\n        <ModalHeader title={title} onClose={onClose} />\n        <div className={styles.container}>\n          <div\n            className={buildClassName(\n              styles.iconBlock,\n              styles.iconBlock_base,\n            )}\n          />\n          <div\n            className={buildClassName(\n              styles.textBlock,\n              styles.textBlock_gap,\n            )}\n          >\n            <span className={styles.text}>\n              <i className={buildClassName(styles.textIcon, 'icon-dot')} />\n              {lang('Switch to the newly opened tab to connect Ledger.')}\n            </span>\n            <span className={styles.text}>\n              <i className={buildClassName(styles.textIcon, 'icon-dot')} />\n              {lang('Once connected, switch back to this window to proceed.')}\n            </span>\n          </div>\n          <div className={buildClassName(styles.actionBlock, styles.actionBlock_single)}>\n            <Button\n              className={buildClassName(styles.button, styles.button_single)}\n              onClick={shouldCloseOnCancel ? onClose : onCancel}\n            >\n              {lang(shouldCloseOnCancel ? 'Cancel' : 'Back')}\n            </Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderConnect() {\n    return (\n      <>\n        <ModalHeader title={title} onClose={onClose} />\n        <div className={styles.container}>\n          <div\n            className={buildClassName(\n              styles.iconBlock,\n              isConnected ? styles.iconBlock_success : styles.iconBlock_base,\n            )}\n          />\n          <div\n            className={buildClassName(\n              styles.textBlock,\n              isConnected && styles.textBlock_success,\n            )}\n          >\n            <span\n              className={buildClassName(\n                styles.text,\n                isLedgerFailed && styles.text_failed,\n                isLedgerConnected && styles.text_connected,\n                isConnected && styles.text_success,\n              )}\n            >\n              <i className={buildClassName(styles.textIcon, isLedgerConnected ? 'icon-accept' : 'icon-dot')} />\n              {lang('Connect your Ledger to PC')}\n            </span>\n            <span\n              className={buildClassName(\n                styles.text,\n                isTonAppFailed && styles.text_failed,\n                isTonAppConnected && styles.text_connected,\n                isConnected && styles.text_success,\n              )}\n            >\n              <i className={buildClassName(styles.textIcon, isTonAppConnected ? 'icon-accept' : 'icon-dot')} />\n              {lang('Unlock it and open the TON App')}\n            </span>\n          </div>\n          {renderButtons()}\n        </div>\n      </>\n    );\n  }\n\n  function renderContent() {\n    if (state === HardwareConnectState.WaitingForBrowser) {\n      return renderWaitingForBrowser();\n    }\n\n    return renderConnect();\n  }\n\n  return renderContent();\n}\n\nexport default memo(LedgerConnect);\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport { ANIMATED_STICKERS_PATHS } from './helpers/animatedAssets';\n\nimport useFocusAfterAnimation from '../../hooks/useFocusAfterAnimation';\nimport useLang from '../../hooks/useLang';\n\nimport AnimatedIconWithPreview from './AnimatedIconWithPreview';\nimport Button from './Button';\nimport Input from './Input';\n\nimport modalStyles from './Modal.module.scss';\nimport styles from './PasswordForm.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  isLoading?: boolean;\n  cancelLabel?: string;\n  submitLabel: string;\n  stickerSize?: number;\n  placeholder?: string;\n  error?: string;\n  containerClassName?: string;\n  children?: TeactNode;\n  onCancel: NoneToVoidFunction;\n  onUpdate: NoneToVoidFunction;\n  onSubmit: (password: string) => void;\n}\n\nconst STICKER_SIZE = 180;\n\nfunction PasswordForm({\n  isActive,\n  isLoading,\n  cancelLabel,\n  submitLabel,\n  stickerSize = STICKER_SIZE,\n  placeholder,\n  error,\n  containerClassName,\n  children,\n  onUpdate,\n  onCancel,\n  onSubmit,\n}: OwnProps) {\n  const lang = useLang();\n\n  // eslint-disable-next-line no-null/no-null\n  const passwordRef = useRef<HTMLInputElement>(null);\n  const [password, setPassword] = useState<string>('');\n  const isSubmitDisabled = !password.length;\n\n  useEffect(() => {\n    if (isActive) {\n      setPassword('');\n    }\n  }, [isActive]);\n\n  useFocusAfterAnimation(passwordRef, !isActive);\n\n  const handleInput = useCallback((value: string) => {\n    setPassword(value);\n    if (error) {\n      onUpdate();\n    }\n  }, [error, onUpdate]);\n\n  const handleSubmit = useCallback(() => {\n    onSubmit(password);\n  }, [onSubmit, password]);\n\n  useEffect(() => {\n    return isSubmitDisabled\n      ? undefined\n      : captureKeyboardListeners({\n        onEnter: handleSubmit,\n      });\n  }, [handleSubmit, isSubmitDisabled]);\n\n  return (\n    <div className={buildClassName(modalStyles.transitionContent, containerClassName)}>\n      <AnimatedIconWithPreview\n        tgsUrl={ANIMATED_STICKERS_PATHS.holdTon}\n        previewUrl={ANIMATED_STICKERS_PATHS.holdTonPreview}\n        play={isActive}\n        size={stickerSize}\n        nonInteractive\n        noLoop={false}\n        className={styles.sticker}\n      />\n\n      {children}\n\n      <Input\n        ref={passwordRef}\n        type=\"password\"\n        isRequired\n        id=\"first-password\"\n        error={error ? lang(error) : undefined}\n        placeholder={placeholder}\n        value={password}\n        onInput={handleInput}\n      />\n\n      <div className={modalStyles.buttons}>\n        {onCancel && (\n          <Button onClick={onCancel}>\n            {cancelLabel || lang('Cancel')}\n          </Button>\n        )}\n        <Button\n          isPrimary\n          isLoading={isLoading}\n          isDisabled={isSubmitDisabled}\n          onClick={!isLoading ? handleSubmit : undefined}\n        >\n          {submitLabel || lang('Send')}\n        </Button>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(PasswordForm);\n","// extracted by mini-css-extract-plugin\nexport default {\"sticker\":\"y7uI37nZpYabFvy9zTvn\",\"buttons\":\"kCN8Csa8gHX0rpyaEU4k\",\"button\":\"lDC6gBLd7AICI2gZwrPg\",\"buttonLoading\":\"gNqK35whyn3qlT1PT9KL\",\"buttonText\":\"Hv25IHIwZBBgLYisQ4o0\",\"button-loading-spinner\":\"DoEiYzlkg2QELrqNdvIz\",\"buttonLoadingSpinner\":\"DoEiYzlkg2QELrqNdvIz\"};","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"yVgDPOejAMqNiOOJullD\",\"dapp\":\"IqixNmFzhyGsd0DECCiR\",\"dapp_first\":\"JeV_Eti0tu92TxBPJKle\",\"dappFirst\":\"JeV_Eti0tu92TxBPJKle\",\"dapp_push\":\"cJjQumjvIh7kN3ZsrmIE\",\"dappPush\":\"cJjQumjvIh7kN3ZsrmIE\",\"dappIcon\":\"VHT2Car9NepY9Hm9vzR4\",\"dappLogo\":\"tHBLrd0i7OGM_8NXvVU0\",\"dappLogo_icon\":\"oIdgNXHtDqAL4bL3jf0b\",\"dappLogoIcon\":\"oIdgNXHtDqAL4bL3jf0b\",\"transactionAccount\":\"B1DDx8WDvN13lio7dmGZ\",\"dappInfo\":\"DjN_kBO5yxAxd0kABUYu\",\"dappName\":\"kFrN1qNGY769AXBicl8v\",\"dappUrl\":\"oqCvVL23sEmZecc270AJ\",\"dappDisconnect\":\"jR946bivrmZIMjbbkTLY\",\"label\":\"lp7rInAK0QzI6YPi8c_A\",\"accounts\":\"AnYy5G9vJiT9T1sJhj_Z\",\"accounts_two\":\"BT49wl30cArHv6DJp7mT\",\"accountsTwo\":\"BT49wl30cArHv6DJp7mT\",\"account\":\"uGV7m6xHKQjJfHB0s2ha\",\"account_current\":\"NalxoSrRUanpAANmrFJh\",\"accountCurrent\":\"NalxoSrRUanpAANmrFJh\",\"account_active\":\"UD9coyBBE22J0hTW1pDg\",\"accountActive\":\"UD9coyBBE22J0hTW1pDg\",\"accounts_single\":\"acc21nj4Yv0Fr2rEN7HE\",\"accountsSingle\":\"acc21nj4Yv0Fr2rEN7HE\",\"accountName\":\"doWqoXfNdp52v0UUgCAj\",\"button_current\":\"tawjZJirAoarTC28fubQ\",\"buttonCurrent\":\"tawjZJirAoarTC28fubQ\",\"accountFooter\":\"doYvgnDTgiPKmiKPuo8S\",\"accountCurrencyIcon\":\"On_rQsvP9rMEusUxK4nF\",\"accountAddress\":\"n1_tfC9EgDhPZLGSHosm\",\"accountCheckMark\":\"jUIetJPwN1mqrLJIn6_C\",\"accountCheckMark_active\":\"XFeYdIH4p0eTa_w4xQp5\",\"accountCheckMarkActive\":\"XFeYdIH4p0eTa_w4xQp5\",\"description\":\"ur4e74nJ1UlsIoprI3b7\",\"footer\":\"udq48SFmEVTf3CmT2h41\",\"buttons\":\"UoHChbi2HsbivC5sKZQu\",\"button\":\"p4U9tS5ZrvcS2Mw81TEk\",\"dataField\":\"lsIG0fExt_nUMOYAo2l9\",\"receivingAddress\":\"FVp_0JwrtYRe_q5kVmv5\",\"payloadField\":\"jLVRL7KmPzUst6xUKSz6\",\"payloadField_expanded\":\"NUO1ZrWaqhnwyHIUJzZ4\",\"payloadFieldExpanded\":\"NUO1ZrWaqhnwyHIUJzZ4\",\"payloadFieldExpand\":\"oELKPbVgfTQa9u82P1bD\",\"transactionList\":\"gacnfmC1dNa38XjjyHYK\",\"transactionRow\":\"rL9FiImj26APnH7onDTC\",\"transactionRowAmount\":\"vg2AehumdvADfAg1_nwu\",\"transactionRowAddress\":\"laQhSEnX1UBFVvKu7hB7\",\"transactionRowChevron\":\"FiSrfyj0U7VSAgW7rb_Q\",\"transactionDirection\":\"bQV942O7pEYWXFqjo1yA\",\"accountTitle\":\"j3keNP9hUm2v7hfCyQ5w\",\"accountBalance\":\"PsQcXz23h9CEFU3EMXIY\",\"transactionDapp\":\"hB3wpvUkHdZr33SNchnL\",\"sticker\":\"CvbsvSeJXwdpTwYSQfdq\",\"sticker_sizeSmall\":\"T6fah7hAOv5BIdSfaCd8\",\"stickerSizeSmall\":\"T6fah7hAOv5BIdSfaCd8\",\"descriptionContent\":\"qinIYitBfjLRUDghhhS7\"};","import React, { memo, useCallback } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\n\nimport Button from '../ui/Button';\n\nimport styles from './Dapp.module.scss';\n\ninterface OwnProps {\n  iconUrl?: string;\n  name?: string;\n  url?: string;\n  origin?: string;\n  onDisconnect?: (origin: string) => void;\n  className?: string;\n}\n\nfunction DappInfo({\n  iconUrl,\n  name,\n  url,\n  origin,\n  onDisconnect,\n  className,\n}: OwnProps) {\n  const lang = useLang();\n\n  const shouldShowDisconnect = Boolean(onDisconnect && origin);\n\n  const handleDisconnect = useCallback(() => {\n    onDisconnect!(origin!);\n  }, [origin, onDisconnect]);\n\n  function renderIcon() {\n    if (iconUrl) {\n      return (\n        <img src={iconUrl} alt={lang('Logo')} className={styles.dappLogo} />\n      );\n    }\n\n    return (\n      <div className={buildClassName(styles.dappLogo, styles.dappLogo_icon)}>\n        <i className={buildClassName(styles.dappIcon, 'icon-laptop')} aria-hidden />\n      </div>\n    );\n  }\n\n  return (\n    <div className={buildClassName(styles.dapp, className)}>\n      {renderIcon()}\n      <div className={styles.dappInfo}>\n        <span className={styles.dappName}>{name}</span>\n        <span className={styles.dappUrl}>{url}</span>\n      </div>\n      {shouldShowDisconnect && (\n        <Button\n          isSmall\n          isPrimary\n          className={styles.dappDisconnect}\n          onClick={handleDisconnect}\n        >\n          {lang('Disconnect')}\n        </Button>\n      )}\n    </div>\n  );\n}\n\nexport default memo(DappInfo);\n","import React, {\n  memo, useCallback, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\n\nimport { DappConnectState } from '../../global/types';\nimport type { ApiTonConnectProof } from '../../api/tonConnect/types';\nimport type { ApiDapp, ApiDappPermissions } from '../../api/types';\nimport type {\n  Account, AccountState, HardwareConnectState, UserToken,\n} from '../../global/types';\n\nimport { TON_TOKEN_SLUG } from '../../config';\nimport { getActions, withGlobal } from '../../global';\nimport { bigStrToHuman } from '../../global/helpers';\nimport { selectCurrentAccountTokens, selectNetworkAccounts } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { formatCurrency } from '../../util/formatNumber';\nimport { shortenAddress } from '../../util/shortenAddress';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\nimport Transition from '../ui/Transition';\nimport DappInfo from './DappInfo';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Dapp.module.scss';\n\ninterface StateProps {\n  state?: DappConnectState;\n  hasConnectRequest: boolean;\n  dapp?: ApiDapp;\n  error?: string;\n  requiredPermissions?: ApiDappPermissions;\n  requiredProof?: ApiTonConnectProof;\n  tokens?: UserToken[];\n  currentAccountId: string;\n  accounts?: Record<string, Account>;\n  accountsData?: Record<string, AccountState>;\n  hardwareState?: HardwareConnectState;\n  isLedgerConnected?: boolean;\n  isTonAppConnected?: boolean;\n}\n\nconst ACCOUNT_ADDRESS_SHIFT = 2;\nconst ACCOUNT_ADDRESS_SHIFT_END = 3;\nconst ACCOUNT_BALANCE_DECIMALS = 3;\n\nfunction DappConnectModal({\n  state,\n  hasConnectRequest,\n  dapp,\n  error,\n  requiredPermissions,\n  requiredProof,\n  accounts,\n  accountsData,\n  currentAccountId,\n  tokens,\n  hardwareState,\n  isLedgerConnected,\n  isTonAppConnected,\n}: StateProps) {\n  const {\n    submitDappConnectRequestConfirm,\n    submitDappConnectRequestConfirmHardware,\n    clearDappConnectRequestError,\n    cancelDappConnectRequestConfirm,\n    setDappConnectRequestState,\n  } = getActions();\n\n  const lang = useLang();\n  const [selectedAccountIds, setSelectedAccountIds] = useState<string[]>([]);\n  const [isModalOpen, openModal, closeModal] = useFlag(hasConnectRequest);\n  const [isConfirmOpen, openConfirm, closeConfirm] = useFlag(false);\n\n  const { renderingKey, nextKey } = useModalTransitionKeys(state ?? 0, isModalOpen);\n\n  useEffect(() => {\n    if (hasConnectRequest) {\n      openModal();\n    } else {\n      closeModal();\n    }\n  }, [closeModal, hasConnectRequest, openModal]);\n\n  const shouldRenderAccounts = useMemo(() => {\n    return accounts && Object.keys(accounts).length > 1;\n  }, [accounts]);\n  const tonToken = useMemo(() => tokens?.find(({ slug }) => slug === TON_TOKEN_SLUG), [tokens])!;\n\n  const { iconUrl, name, url } = dapp || {};\n\n  const handleClose = useCallback(() => {\n    cancelDappConnectRequestConfirm();\n    setSelectedAccountIds([]);\n  }, [cancelDappConnectRequestConfirm]);\n\n  const handleSubmit = useCallback(() => {\n    closeConfirm();\n\n    if (!requiredProof) {\n      submitDappConnectRequestConfirm({\n        additionalAccountIds: selectedAccountIds,\n      });\n\n      closeModal();\n    } else if (accounts![currentAccountId].isHardware && requiredProof) {\n      setDappConnectRequestState({ state: DappConnectState.ConnectHardware });\n    } else if (requiredPermissions?.isPasswordRequired) {\n      setDappConnectRequestState({ state: DappConnectState.Password });\n    }\n  }, [\n    accounts, currentAccountId, closeConfirm, closeModal, requiredPermissions,\n    selectedAccountIds, submitDappConnectRequestConfirm, requiredProof,\n  ]);\n\n  const handlePasswordCancel = useCallback(() => {\n    setDappConnectRequestState({ state: DappConnectState.Info });\n  }, []);\n\n  const submitDappConnectRequestHardware = useCallback(() => {\n    submitDappConnectRequestConfirmHardware({\n      additionalAccountIds: selectedAccountIds,\n    });\n  }, [selectedAccountIds]);\n\n  const handlePasswordSubmit = useCallback((password: string) => {\n    submitDappConnectRequestConfirm({\n      additionalAccountIds: selectedAccountIds,\n      password,\n    });\n  }, [selectedAccountIds, submitDappConnectRequestConfirm]);\n\n  const handleAccountToggle = useCallback((accountId: string) => {\n    if (selectedAccountIds.includes(accountId)) {\n      setSelectedAccountIds(selectedAccountIds.filter((id) => id !== accountId));\n    } else {\n      setSelectedAccountIds(selectedAccountIds.concat([accountId]));\n    }\n  }, [selectedAccountIds]);\n\n  const iterableAccounts = useMemo(() => {\n    return Object.entries(accounts || {});\n  }, [accounts]);\n\n  function renderAccount(accountId: string, address: string, title?: string) {\n    const isActive = accountId === currentAccountId || selectedAccountIds.includes(accountId);\n    const balance = accountsData?.[accountId].balances?.bySlug[tonToken.slug] || '0';\n    const fullClassName = buildClassName(\n      styles.account,\n      isActive && styles.account_active,\n      accountId === currentAccountId && styles.account_current,\n    );\n\n    return (\n      <div\n        className={fullClassName}\n        aria-label={lang('Switch Account')}\n        onClick={accountId !== currentAccountId ? () => handleAccountToggle(accountId) : undefined}\n      >\n        {title && <span className={styles.accountName}>{title}</span>}\n        <div className={styles.accountFooter}>\n          <i className={buildClassName(styles.accountCurrencyIcon, 'icon-ton')} aria-hidden />\n          {formatCurrency(bigStrToHuman(balance), '', ACCOUNT_BALANCE_DECIMALS)}\n          <span className={styles.accountAddress}>\n            {shortenAddress(address, ACCOUNT_ADDRESS_SHIFT, ACCOUNT_ADDRESS_SHIFT_END)}\n          </span>\n        </div>\n\n        <div className={buildClassName(styles.accountCheckMark, isActive && styles.accountCheckMark_active)} />\n      </div>\n    );\n  }\n\n  function renderAccounts() {\n    const fullClassName = buildClassName(\n      styles.accounts,\n      'custom-scroll',\n      iterableAccounts.length === 1 && styles.accounts_single,\n      iterableAccounts.length === 2 && styles.accounts_two,\n    );\n    return (\n      <>\n        <p className={styles.label}>{lang('Select wallets to use on this dapp')}</p>\n        <div className={fullClassName}>\n          {iterableAccounts.map(\n            ([accountId, { title, address }]) => renderAccount(accountId, address, title),\n          )}\n        </div>\n      </>\n    );\n  }\n\n  function renderPasswordForm(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Enter Password')} onClose={closeModal} />\n        <PasswordForm\n          isActive={isActive}\n          error={error}\n          placeholder={lang('Enter your password')}\n          submitLabel={lang('Connect')}\n          onUpdate={clearDappConnectRequestError}\n          onSubmit={handlePasswordSubmit}\n          cancelLabel={lang('Cancel')}\n          onCancel={handlePasswordCancel}\n        />\n      </>\n    );\n  }\n\n  function renderDappInfo() {\n    return (\n      <>\n        <ModalHeader title={lang('Connect Dapp')} onClose={closeModal} />\n\n        <div className={modalStyles.transitionContent}>\n          <DappInfo\n            iconUrl={iconUrl}\n            name={name}\n            url={url}\n            className={buildClassName(styles.dapp_first, styles.dapp_push)}\n          />\n          {shouldRenderAccounts && renderAccounts()}\n\n          <div className={styles.footer}>\n            <Button onClick={openConfirm} isPrimary>{lang('Connect')}</Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case DappConnectState.Info:\n        return renderDappInfo();\n      case DappConnectState.Password:\n        return renderPasswordForm(isActive);\n      case DappConnectState.ConnectHardware:\n        return (\n          <LedgerConnect\n            state={hardwareState}\n            isTonAppConnected={isTonAppConnected}\n            isLedgerConnected={isLedgerConnected}\n            onConnected={submitDappConnectRequestHardware}\n            onClose={handlePasswordCancel}\n          />\n        );\n      case DappConnectState.ConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm operation on your Ledger')}\n            error={error}\n            onTryAgain={submitDappConnectRequestHardware}\n            onClose={handlePasswordCancel}\n          />\n        );\n    }\n  }\n\n  return (\n    <>\n      <Modal\n        isOpen={isModalOpen}\n        isSlideUp\n        dialogClassName={styles.modalDialog}\n        onClose={handleClose}\n        onCloseAnimationEnd={handleClose}\n      >\n        <Transition\n          name=\"pushSlide\"\n          className={buildClassName(modalStyles.transition, 'custom-scroll')}\n          slideClassName={modalStyles.transitionSlide}\n          activeKey={renderingKey}\n          nextKey={nextKey}\n        >\n          {renderContent}\n        </Transition>\n      </Modal>\n      <Modal\n        isOpen={isConfirmOpen}\n        isCompact\n        title={lang('Dapp Permissions')}\n        onClose={closeConfirm}\n      >\n        <div className={styles.description}>\n          {lang('$dapp_can_view_balance', {\n            dappname: <strong>{name}</strong>,\n          })}\n        </div>\n        <div className={styles.buttons}>\n          <Button onClick={closeConfirm} className={styles.button}>{lang('Cancel')}</Button>\n          <Button isPrimary onClick={handleSubmit} className={styles.button}>{lang('Connect')}</Button>\n        </div>\n      </Modal>\n    </>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accounts = selectNetworkAccounts(global);\n  const hasConnectRequest = Boolean(global.dappConnectRequest?.dapp);\n\n  const {\n    state, dapp, error, accountId, permissions, proof,\n  } = global.dappConnectRequest || {};\n\n  const currentAccountId = accountId || global.currentAccountId!;\n\n  const {\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n  } = global.hardware;\n\n  return {\n    state,\n    hasConnectRequest,\n    dapp,\n    error,\n    requiredPermissions: permissions,\n    requiredProof: proof,\n    tokens: selectCurrentAccountTokens(global),\n    currentAccountId,\n    accounts,\n    accountsData: global.byAccountId,\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n  };\n})(DappConnectModal));\n","import React, {\n  memo,\n} from '../../lib/teact/teact';\n\nimport { type Account, TransferState, type UserToken } from '../../global/types';\nimport type { ApiDapp } from '../../api/types';\n\nimport { getActions, withGlobal } from '../../global';\nimport renderText from '../../global/helpers/renderText';\nimport { selectNetworkAccounts } from '../../global/selectors';\nimport { formatCurrency } from '../../util/formatNumber';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport DappInfo from './DappInfo';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Dapp.module.scss';\n\ninterface OwnProps {\n  tonToken: UserToken;\n}\n\ninterface StateProps {\n  currentAccount?: Account;\n  dapp?: ApiDapp;\n}\n\nfunction DappLedgerWarning({\n  tonToken,\n  currentAccount,\n  dapp,\n}: OwnProps & StateProps) {\n  const { cancelDappTransfer, setDappTransferScreen } = getActions();\n\n  const lang = useLang();\n\n  const handleAgree = useLastCallback(() => {\n    setDappTransferScreen({ state: TransferState.Initial });\n  });\n\n  function renderDapp() {\n    return (\n      <div className={styles.transactionDirection}>\n        <div className={styles.transactionAccount}>\n          <div className={styles.accountTitle}>{currentAccount?.title}</div>\n          <div className={styles.accountBalance}>{formatCurrency(tonToken.amount, tonToken.symbol)}</div>\n        </div>\n\n        <DappInfo\n          iconUrl={dapp?.iconUrl}\n          name={dapp?.name}\n          url={dapp?.url}\n          className={styles.transactionDapp}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <div className={modalStyles.transitionContent}>\n      {renderDapp()}\n\n      <div className={styles.descriptionContent}>\n        <span>{renderText(lang('$dapp_ledger_warning1'))}</span>\n        <span>{renderText(lang('$dapp_ledger_warning2'))}</span>\n      </div>\n\n      <div className={modalStyles.buttons}>\n        <Button onClick={cancelDappTransfer}>{lang('Cancel')}</Button>\n        <Button\n          isPrimary\n          isSubmit\n          onClick={handleAgree}\n        >\n          {lang('Agree')}\n        </Button>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { dapp } = global.currentDappTransfer;\n  const accounts = selectNetworkAccounts(global);\n\n  return {\n    currentAccount: accounts?.[global.currentAccountId!],\n    dapp,\n  };\n})(DappLedgerWarning));\n","import React, { memo } from '../../lib/teact/teact';\n\nimport { CARD_SECONDARY_VALUE_SYMBOL } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { formatCurrencyExtended } from '../../util/formatNumber';\n\nimport useLang from '../../hooks/useLang';\n\nimport styles from './AmountWithFeeTextField.module.scss';\n\ninterface OwnProps {\n  amount: number;\n  label: string;\n  currency?: string;\n  symbol?: string;\n  fee?: number;\n  className?: string;\n}\n\nfunction AmountWithFeeTextField({\n  amount,\n  label,\n  currency = '',\n  symbol,\n  fee,\n  className,\n}: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <>\n      <div className={styles.label}>{label}</div>\n      <div className={buildClassName(styles.root, className)}>\n        {formatCurrencyExtended(amount, currency, true)}\n        {symbol && <span className={styles.suffix}>{symbol}</span>}\n        {Boolean(fee) && (\n          <>\n            <div className={styles.feeLabel}>{lang('Fee')}</div>\n            <span className={styles.feeConfirm}>\n              {formatCurrencyExtended(fee, CARD_SECONDARY_VALUE_SYMBOL)}\n            </span>\n          </>\n        )}\n      </div>\n    </>\n  );\n}\n\nexport default memo(AmountWithFeeTextField);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"F6yLmNxlr1fpwrxkpAIu\",\"suffix\":\"FJOSKsAs5qG8xn8TjAo9\",\"label\":\"a13XwOMzYwbcEIQASnvV\",\"feeLabel\":\"uYpMh7tjyRw9aws_2OA3\",\"feeConfirm\":\"WJDEJfV8HJlBXS7xL378\"};","import { logDebugError } from './logs';\n\nexport const CLIPBOARD_ITEM_SUPPORTED = window.navigator.clipboard && window.ClipboardItem;\n\nconst textCopyEl = document.createElement('textarea');\ntextCopyEl.setAttribute('readonly', '');\ntextCopyEl.tabIndex = -1;\ntextCopyEl.className = 'visually-hidden';\n\nexport const copyTextToClipboard = (str: string): void => {\n  textCopyEl.value = str;\n  document.body.appendChild(textCopyEl);\n  const selection = document.getSelection();\n\n  if (selection) {\n    // Store previous selection\n    const rangeToRestore = selection.rangeCount > 0 && selection.getRangeAt(0);\n    textCopyEl.select();\n    document.execCommand('copy');\n    // Restore the original selection\n    if (rangeToRestore) {\n      selection.removeAllRanges();\n      selection.addRange(rangeToRestore);\n    }\n  }\n\n  document.body.removeChild(textCopyEl);\n};\n\nexport const copyImageToClipboard = (imageUrl?: string) => {\n  if (!imageUrl) return;\n  const canvas = document.createElement('canvas');\n  const ctx = canvas.getContext('2d');\n  const imageEl = new Image();\n  imageEl.onload = (e: Event) => {\n    if (ctx && e.currentTarget) {\n      const img = e.currentTarget as HTMLImageElement;\n      canvas.width = img.width;\n      canvas.height = img.height;\n      ctx.drawImage(img, 0, 0, img.width, img.height);\n      canvas.toBlob(copyBlobToClipboard, 'image/png', 1);\n    }\n  };\n\n  imageEl.src = imageUrl;\n};\n\nasync function copyBlobToClipboard(pngBlob: Blob | null) {\n  if (!pngBlob || !CLIPBOARD_ITEM_SUPPORTED) {\n    return;\n  }\n\n  try {\n    await window.navigator.clipboard.write?.([\n      new ClipboardItem({\n        [pngBlob.type]: pngBlob,\n      }),\n    ]);\n  } catch (err) {\n    logDebugError('copyBlobToClipboard', err);\n  }\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"text\":\"UfI1IdhDJDCYEaxx_8z8\"};","import React, { memo, useCallback } from '../../../lib/teact/teact';\n\nimport { getActions } from '../../../global';\n\nimport useLang from '../../../hooks/useLang';\n\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './DeleteSavedAddressModal.module.scss';\n\ninterface OwnProps {\n  isOpen?: boolean;\n  address?: string;\n  onClose: NoneToVoidFunction;\n}\n\nfunction DeleteSavedAddressModal({ isOpen, address, onClose }: OwnProps) {\n  const { removeFromSavedAddress, showNotification } = getActions();\n\n  const lang = useLang();\n\n  const handleDeleteSavedAddress = useCallback(() => {\n    if (!address) {\n      return;\n    }\n\n    removeFromSavedAddress({ address });\n    showNotification({ message: lang('Address removed from saved') as string, icon: 'icon-trash' });\n    onClose();\n  }, [address, lang, onClose, removeFromSavedAddress, showNotification]);\n\n  return (\n    <Modal\n      title={lang('Delete Saved Address')}\n      isCompact\n      isOpen={isOpen}\n      onClose={onClose}\n    >\n      <p className={styles.text}>{lang('Are you sure you want to remove this address from your saved ones?')}</p>\n\n      <p className={styles.text}>{lang('You will be able to save it again via Transaction Info with this address.')}</p>\n\n      <div className={modalStyles.buttons}>\n        <Button onClick={onClose} className={modalStyles.button}>{lang('Cancel')}</Button>\n        <Button isDestructive onClick={handleDeleteSavedAddress} className={modalStyles.button}>\n          {lang('Delete')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(DeleteSavedAddressModal);\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"AmTfePy3EmpA5ddzp318\",\"button\":\"gJAxBTpweYXg6YhomBst\",\"button_spoiler\":\"Zso9anc1hSZZDFIk_BNA\",\"buttonSpoiler\":\"Zso9anc1hSZZDFIk_BNA\",\"icon\":\"G86aeGWVYY_JuoKo7wxn\",\"iconStar\":\"d3YDuYpyW71I6PD38VZH\",\"nameInput\":\"fhgqWH0v88aO1FyAm28T\",\"shortAddress\":\"vUTbwN1u4amdz9wSrOnA\",\"revealSpoiler\":\"_67nppB1zHOK8CpoyWc4A\"};","import React, {\n  memo, useCallback, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport { TONSCAN_BASE_MAINNET_URL, TONSCAN_BASE_TESTNET_URL } from '../../config';\nimport { getActions, withGlobal } from '../../global';\nimport { selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport { copyTextToClipboard } from '../../util/clipboard';\nimport { shortenAddress } from '../../util/shortenAddress';\n\nimport useFlag from '../../hooks/useFlag';\nimport useFocusAfterAnimation from '../../hooks/useFocusAfterAnimation';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport DeleteSavedAddressModal from '../main/modals/DeleteSavedAddressModal';\nimport Button from './Button';\nimport Input from './Input';\nimport Modal from './Modal';\nimport Transition from './Transition';\n\nimport styles from './InteractiveTextField.module.scss';\nimport modalStyles from './Modal.module.scss';\n\ninterface OwnProps {\n  address?: string;\n  addressName?: string;\n  text?: string;\n  spoiler?: string;\n  spoilerRevealText?: string;\n  spoilerCallback?: NoneToVoidFunction;\n  copyNotification: string;\n  className?: string;\n  textClassName?: string;\n  noSavedAddress?: boolean;\n}\n\ninterface StateProps {\n  isAddressAlreadySaved?: boolean;\n  isTestnet?: boolean;\n}\n\nconst SAVED_ADDRESS_NAME_MAX_LENGTH = 255;\n\nfunction InteractiveTextField({\n  address,\n  addressName,\n  text,\n  spoiler,\n  spoilerRevealText,\n  spoilerCallback,\n  copyNotification,\n  noSavedAddress,\n  className,\n  textClassName,\n  isAddressAlreadySaved,\n  isTestnet,\n}: OwnProps & StateProps) {\n  const { showNotification, addSavedAddress } = getActions();\n\n  // eslint-disable-next-line no-null/no-null\n  const addressNameRef = useRef<HTMLInputElement>(null);\n  const lang = useLang();\n  const [isSaveAddressModalOpen, openSaveAddressModal, closeSaveAddressModal] = useFlag();\n  const [isDeleteSavedAddressModalOpen, openDeletedSavedAddressModal, closeDeleteSavedAddressModal] = useFlag();\n  const [savedAddressName, setSavedAddressName] = useState<string | undefined>(addressName);\n  const [isConcealedWithSpoiler, , revealSpoiler] = useFlag(Boolean(spoiler));\n\n  const tonscanBaseUrl = isTestnet ? TONSCAN_BASE_TESTNET_URL : TONSCAN_BASE_MAINNET_URL;\n  const tonscanAddressUrl = address ? `${tonscanBaseUrl}address/${address}` : undefined;\n\n  useEffect(() => {\n    if (isSaveAddressModalOpen) {\n      setSavedAddressName('');\n    }\n  }, [isSaveAddressModalOpen]);\n\n  const handleSaveAddressSubmit = useCallback(() => {\n    if (!savedAddressName || !address) {\n      return;\n    }\n\n    addSavedAddress({ address, name: savedAddressName });\n    showNotification({ message: 'Address was saved!', icon: 'icon-star' });\n    closeSaveAddressModal();\n  }, [addSavedAddress, address, closeSaveAddressModal, savedAddressName, showNotification]);\n\n  useEffect(() => (\n    isSaveAddressModalOpen\n      ? captureKeyboardListeners({\n        onEnter: handleSaveAddressSubmit,\n      })\n      : undefined\n  ), [handleSaveAddressSubmit, isSaveAddressModalOpen]);\n\n  useFocusAfterAnimation(addressNameRef, !isSaveAddressModalOpen);\n\n  const handleCopy = useCallback(() => {\n    showNotification({ message: copyNotification, icon: 'icon-copy' });\n    copyTextToClipboard(address || text || '');\n  }, [address, copyNotification, showNotification, text]);\n\n  const handleRevealSpoiler = useLastCallback(() => {\n    revealSpoiler();\n    spoilerCallback?.();\n  });\n\n  function renderContentOrSpoiler() {\n    const content = addressName || address || text;\n\n    if (!spoiler) {\n      return renderContent(content);\n    }\n\n    const isConcealed = isConcealedWithSpoiler || !content;\n    return (\n      <Transition activeKey={isConcealed ? 1 : 0} name=\"fade\" className={styles.commentContainer}>\n        {isConcealed ? (\n          <span className={buildClassName(styles.button, styles.button_spoiler, textClassName)}>\n            <i>{spoiler}</i>\n            <span\n              onClick={handleRevealSpoiler}\n              tabIndex={0}\n              role=\"button\"\n              className={styles.revealSpoiler}\n            >\n              {spoilerRevealText}\n            </span>\n          </span>\n        ) : renderContent(content)}\n      </Transition>\n    );\n  }\n\n  function renderContent(content?: string) {\n    return (\n      <span\n        className={buildClassName(styles.button, textClassName)}\n        title={lang('Copy')}\n        onClick={handleCopy}\n        tabIndex={0}\n        role=\"button\"\n      >\n        {content}\n        {Boolean(addressName) && (\n          <span className={styles.shortAddress}>{shortenAddress(address!)}</span>\n        )}\n        <i className={buildClassName(styles.icon, 'icon-copy')} aria-hidden />\n      </span>\n    );\n  }\n\n  function renderSaveAddressModal() {\n    return (\n      <Modal\n        title={lang('Save Address')}\n        isCompact\n        isOpen={isSaveAddressModalOpen}\n        onClose={closeSaveAddressModal}\n      >\n        <p>{lang('You can save this address for quick access while sending.')}</p>\n        <Input\n          ref={addressNameRef}\n          placeholder={lang('Name')}\n          onInput={setSavedAddressName}\n          value={savedAddressName}\n          maxLength={SAVED_ADDRESS_NAME_MAX_LENGTH}\n          className={styles.nameInput}\n        />\n\n        <div className={modalStyles.buttons}>\n          <Button onClick={closeSaveAddressModal} className={modalStyles.button}>{lang('Cancel')}</Button>\n          <Button\n            onClick={handleSaveAddressSubmit}\n            isPrimary\n            isDisabled={!savedAddressName}\n            className={modalStyles.button}\n          >\n            {lang('Save')}\n          </Button>\n        </div>\n      </Modal>\n    );\n  }\n\n  return (\n    <>\n      <div className={buildClassName(styles.wrapper, className)}>\n        {renderContentOrSpoiler()}\n\n        {!noSavedAddress && address && (\n          <span\n            className={styles.button}\n            title={lang(isAddressAlreadySaved ? 'Remove From Saved Addresses' : 'Add To Saved Addresses')}\n            onClick={isAddressAlreadySaved ? openDeletedSavedAddressModal : openSaveAddressModal}\n            tabIndex={0}\n            role=\"button\"\n          >\n            <i\n              className={buildClassName(\n                styles.icon,\n                styles.iconStar,\n                isAddressAlreadySaved ? 'icon-star-filled' : 'icon-star',\n              )}\n              aria-hidden\n            />\n          </span>\n        )}\n\n        {address && (\n          <a\n            href={tonscanAddressUrl}\n            className={styles.button}\n            title={lang('View Address on TON Explorer')}\n            target=\"_blank\"\n            rel=\"noreferrer noopener\"\n          >\n            <i className={buildClassName(styles.icon, 'icon-tonscan')} aria-hidden />\n          </a>\n        )}\n      </div>\n      {address && (\n        <>\n          {renderSaveAddressModal()}\n          <DeleteSavedAddressModal\n            isOpen={isDeleteSavedAddressModalOpen}\n            address={address}\n            onClose={closeDeleteSavedAddressModal}\n          />\n        </>\n      )}\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { address }): StateProps => {\n    const accountState = selectCurrentAccountState(global);\n    const isAddressAlreadySaved = Boolean(address && accountState?.savedAddresses?.[address]);\n\n    return {\n      isAddressAlreadySaved,\n      isTestnet: global.settings.isTestnet,\n    };\n  },\n)(InteractiveTextField));\n","import React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiDappTransaction, ApiParsedPayload } from '../../api/types';\nimport type { UserToken } from '../../global/types';\n\nimport { bigStrToHuman } from '../../global/helpers';\nimport buildClassName from '../../util/buildClassName';\nimport { formatCurrency } from '../../util/formatNumber';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\n\nimport AmountWithFeeTextField from '../ui/AmountWithFeeTextField';\nimport InteractiveTextField from '../ui/InteractiveTextField';\n\nimport styles from './Dapp.module.scss';\n\ninterface OwnProps {\n  tonToken: UserToken;\n  transaction: ApiDappTransaction;\n  fee?: string;\n  tokens?: UserToken[];\n}\n\nconst FRACTION_DIGITS = 2;\n\nfunction DappTransaction({\n  tonToken,\n  transaction,\n  fee,\n  tokens,\n}: OwnProps) {\n  const lang = useLang();\n  const [isPayloadExpanded, expandPayload] = useFlag(false);\n\n  // eslint-disable-next-line consistent-return\n  function renderPayload(payload: ApiParsedPayload) {\n    switch (payload.type) {\n      case 'comment':\n        return payload.comment;\n\n      case 'transfer-nft': {\n        const { nftAddress, nftName, newOwner } = payload;\n        return lang('$dapp_transfer_nft_payload', {\n          nft: nftName ?? nftAddress,\n          address: newOwner,\n        });\n      }\n\n      case 'transfer-tokens:non-standard':\n      case 'transfer-tokens': {\n        const {\n          slug: tokenSlug,\n          amount: tokenAmount,\n          destination,\n        } = payload;\n        const token = tokens?.find(({ slug }) => slug === tokenSlug)!;\n\n        return lang('$dapp_transfer_tokens_payload', {\n          amount: formatCurrency(bigStrToHuman(tokenAmount, token.decimals), token.symbol, FRACTION_DIGITS),\n          address: destination,\n        });\n      }\n\n      case 'unknown':\n        return payload.base64;\n    }\n  }\n\n  return (\n    <>\n      <p className={styles.label}>{lang('Receiving Address')}</p>\n      <InteractiveTextField\n        address={transaction.toAddress}\n        className={buildClassName(styles.dataField, styles.receivingAddress)}\n        copyNotification={lang('Address was copied!')}\n      />\n      <AmountWithFeeTextField\n        label={lang('Amount')}\n        amount={bigStrToHuman(transaction.amount, tonToken.decimals)}\n        symbol={tonToken.symbol}\n        fee={fee ? bigStrToHuman(fee, tonToken.decimals) : undefined}\n        className={styles.dataField}\n      />\n\n      {transaction.payload && (\n        <>\n          <p className={styles.label}>{lang('Nested Transaction')}</p>\n          <div className={buildClassName(styles.payloadField, isPayloadExpanded && styles.payloadField_expanded)}>\n            {renderPayload(transaction.payload)}\n            {!isPayloadExpanded && (\n              <div className={styles.payloadFieldExpand} onClick={expandPayload}>\n                {lang('View')}\n              </div>\n            )}\n          </div>\n        </>\n      )}\n    </>\n  );\n}\n\nexport default memo(DappTransaction);\n","import React, {\n  memo,\n  useMemo,\n} from '../../lib/teact/teact';\n\nimport type { ApiDapp, ApiDappTransaction } from '../../api/types';\nimport type { Account, UserToken } from '../../global/types';\n\nimport { SHORT_FRACTION_DIGITS } from '../../config';\nimport { getActions, withGlobal } from '../../global';\nimport { bigStrToHuman } from '../../global/helpers';\nimport { selectCurrentAccountTokens, selectNetworkAccounts } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { formatCurrency } from '../../util/formatNumber';\nimport { shortenAddress } from '../../util/shortenAddress';\n\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport useLang from '../../hooks/useLang';\n\nimport AmountWithFeeTextField from '../ui/AmountWithFeeTextField';\nimport Button from '../ui/Button';\nimport DappInfo from './DappInfo';\nimport DappTransaction from './DappTransaction';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Dapp.module.scss';\n\ninterface OwnProps {\n  tonToken: UserToken;\n}\n\ninterface StateProps {\n  currentAccount?: Account;\n  transactions?: ApiDappTransaction[];\n  fee?: string;\n  dapp?: ApiDapp;\n  isLoading?: boolean;\n  tokens?: UserToken[];\n}\n\nfunction DappTransferInitial({\n  tonToken,\n  currentAccount,\n  transactions,\n  fee,\n  dapp,\n  isLoading,\n  tokens,\n}: OwnProps & StateProps) {\n  const { showDappTransaction, submitDappTransferConfirm, cancelDappTransfer } = getActions();\n\n  const lang = useLang();\n  const isSingleTransaction = transactions?.length === 1;\n  const renderingTransactions = useCurrentOrPrev(transactions, true);\n\n  const totalAmount = useMemo(() => {\n    return renderingTransactions?.reduce((acc, { amount }) => {\n      return acc + bigStrToHuman(amount, tonToken.decimals);\n    }, fee ? bigStrToHuman(fee, tonToken.decimals) : 0) || 0;\n  }, [renderingTransactions, fee, tonToken.decimals]);\n\n  function renderDapp() {\n    return (\n      <div className={styles.transactionDirection}>\n        <div className={styles.transactionAccount}>\n          <div className={styles.accountTitle}>{currentAccount?.title}</div>\n          <div className={styles.accountBalance}>{formatCurrency(tonToken.amount, tonToken.symbol)}</div>\n        </div>\n\n        <DappInfo\n          iconUrl={dapp?.iconUrl}\n          name={dapp?.name}\n          url={dapp?.url}\n          className={styles.transactionDapp}\n        />\n      </div>\n    );\n  }\n\n  function renderTransaction() {\n    return (\n      <DappTransaction\n        transaction={renderingTransactions![0]}\n        tonToken={tonToken}\n        fee={fee}\n        tokens={tokens}\n      />\n    );\n  }\n\n  function renderTransactionRow(transaction: ApiDappTransaction, i: number) {\n    const { payload } = transaction;\n\n    let extraText: string = '';\n    if (payload?.type === 'transfer-nft') {\n      extraText = '1 NFT + ';\n    } else if (payload?.type === 'transfer-tokens') {\n      const { slug, amount } = payload;\n      const { decimals, symbol } = tokens!.find((token) => token.slug === slug)!;\n      extraText = `${formatCurrency(bigStrToHuman(amount, decimals), symbol, SHORT_FRACTION_DIGITS)} + `;\n    }\n\n    return (\n      <div\n        key={`${transaction.toAddress}_${transaction.amount}`}\n        className={styles.transactionRow}\n        onClick={() => { showDappTransaction({ transactionIdx: i }); }}\n      >\n        <span className={styles.transactionRowAmount}>\n          {extraText}\n          {formatCurrency(bigStrToHuman(transaction.amount, tonToken.decimals), tonToken.symbol, SHORT_FRACTION_DIGITS)}\n        </span>\n        {' '}\n        <span className={styles.transactionRowAddress}>\n          {lang('$transaction_to', {\n            address: shortenAddress(transaction.toAddress),\n          })}\n        </span>\n        <i className={buildClassName(styles.transactionRowChevron, 'icon-chevron-right')} aria-hidden />\n      </div>\n    );\n  }\n\n  function renderTransactions() {\n    return (\n      <>\n        <p className={styles.label}>{lang('$many_transactions', renderingTransactions?.length, 'i')}</p>\n        <div className={styles.transactionList}>\n          {renderingTransactions?.map(renderTransactionRow)}\n        </div>\n        <AmountWithFeeTextField\n          label={lang('Total Amount')}\n          amount={totalAmount}\n          symbol={tonToken.symbol}\n        />\n      </>\n    );\n  }\n\n  if (!renderingTransactions) {\n    return undefined;\n  }\n\n  return (\n    <div className={modalStyles.transitionContent}>\n      {renderDapp()}\n\n      {isSingleTransaction ? renderTransaction() : renderTransactions()}\n\n      <div className={modalStyles.buttons}>\n        <Button onClick={cancelDappTransfer}>{lang('Cancel')}</Button>\n        <Button\n          isPrimary\n          isSubmit\n          isLoading={isLoading}\n          onClick={submitDappTransferConfirm}\n        >\n          {lang('Send')}\n        </Button>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const {\n    transactions,\n    fee,\n    isLoading,\n    dapp,\n  } = global.currentDappTransfer;\n  const accounts = selectNetworkAccounts(global);\n\n  return {\n    currentAccount: accounts?.[global.currentAccountId!],\n    transactions,\n    fee,\n    dapp,\n    isLoading,\n    tokens: selectCurrentAccountTokens(global),\n  };\n})(DappTransferInitial));\n","import React, { memo, useCallback, useMemo } from '../../lib/teact/teact';\n\nimport { TransferState } from '../../global/types';\nimport type { GlobalState, HardwareConnectState, UserToken } from '../../global/types';\n\nimport { ANIMATED_STICKER_SMALL_SIZE_PX, TON_TOKEN_SLUG } from '../../config';\nimport { getActions, withGlobal } from '../../global';\nimport { selectCurrentAccountTokens } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useLang from '../../hooks/useLang';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\nimport Transition from '../ui/Transition';\nimport DappLedgerWarning from './DappLedgerWarning';\nimport DappTransaction from './DappTransaction';\nimport DappTransferInitial from './DappTransferInitial';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Dapp.module.scss';\n\ninterface StateProps {\n  currentDappTransfer: GlobalState['currentDappTransfer'];\n  tokens?: UserToken[];\n  hardwareState?: HardwareConnectState;\n  isLedgerConnected?: boolean;\n  isTonAppConnected?: boolean;\n}\n\nfunction DappTransactionModal({\n  currentDappTransfer: {\n    transactions,\n    isLoading,\n    viewTransactionOnIdx,\n    state,\n    error,\n  },\n  tokens,\n  hardwareState,\n  isLedgerConnected,\n  isTonAppConnected,\n}: StateProps) {\n  const {\n    setDappTransferScreen,\n    clearDappTransferError,\n    submitDappTransferPassword,\n    submitDappTransferHardware,\n    cancelDappTransfer,\n  } = getActions();\n\n  const lang = useLang();\n  const tonToken = useMemo(() => tokens?.find(({ slug }) => slug === TON_TOKEN_SLUG), [tokens])!;\n\n  const isOpen = state !== TransferState.None;\n\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n\n  const handleBackClick = useCallback(() => {\n    if (state === TransferState.Confirm || state === TransferState.Password) {\n      setDappTransferScreen({ state: TransferState.Initial });\n    }\n  }, [setDappTransferScreen, state]);\n\n  const handleTransferPasswordSubmit = useCallback((password: string) => {\n    submitDappTransferPassword({ password });\n  }, [submitDappTransferPassword]);\n\n  function renderSingleTransaction(isActive: boolean) {\n    const transaction = viewTransactionOnIdx !== undefined ? transactions?.[viewTransactionOnIdx] : undefined;\n\n    return (\n      <>\n        <ModalHeader title={lang('Is it all ok?')} onClose={cancelDappTransfer} />\n        <div className={modalStyles.transitionContent}>\n          <AnimatedIconWithPreview\n            size={ANIMATED_STICKER_SMALL_SIZE_PX}\n            play={isActive}\n            noLoop={false}\n            nonInteractive\n            className={buildClassName(styles.sticker, styles.sticker_sizeSmall)}\n            tgsUrl={ANIMATED_STICKERS_PATHS.bill}\n            previewUrl={ANIMATED_STICKERS_PATHS.billPreview}\n          />\n\n          {Boolean(transaction) && (\n            <DappTransaction\n              transaction={transaction}\n              tonToken={tonToken}\n              tokens={tokens}\n            />\n          )}\n          <div className={modalStyles.buttons}>\n            <Button onClick={handleBackClick}>{lang('Back')}</Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderPassword(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Confirm Transaction')} onClose={cancelDappTransfer} />\n        <PasswordForm\n          isActive={isActive}\n          isLoading={isLoading}\n          error={error}\n          placeholder={lang('Enter your password')}\n          onUpdate={clearDappTransferError}\n          onSubmit={handleTransferPasswordSubmit}\n          submitLabel={lang('Send')}\n          onCancel={handleBackClick}\n          cancelLabel={lang('Back')}\n        />\n      </>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case TransferState.Initial:\n        return (\n          <>\n            <ModalHeader title={lang('Send Transaction')} onClose={cancelDappTransfer} />\n            <DappTransferInitial tonToken={tonToken} />\n          </>\n        );\n      case TransferState.WarningHardware:\n        return (\n          <>\n            <ModalHeader title={lang('Send Transaction')} onClose={cancelDappTransfer} />\n            <DappLedgerWarning tonToken={tonToken} />\n          </>\n        );\n      case TransferState.Confirm:\n        return renderSingleTransaction(isActive);\n      case TransferState.Password:\n        return renderPassword(isActive);\n      case TransferState.ConnectHardware:\n        return (\n          <LedgerConnect\n            state={hardwareState}\n            isTonAppConnected={isTonAppConnected}\n            isLedgerConnected={isLedgerConnected}\n            onConnected={submitDappTransferHardware}\n            onClose={cancelDappTransfer}\n          />\n        );\n      case TransferState.ConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm transaction on your Ledger')}\n            error={error}\n            onTryAgain={submitDappTransferHardware}\n            onClose={cancelDappTransfer}\n          />\n        );\n    }\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      isSlideUp\n      isOpen={isOpen}\n      onClose={cancelDappTransfer}\n      noBackdropClose\n      dialogClassName={styles.modalDialog}\n      onCloseAnimationEnd={updateNextKey}\n    >\n      <Transition\n        name=\"pushSlide\"\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const {\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n  } = global.hardware;\n\n  return {\n    currentDappTransfer: global.currentDappTransfer,\n    tokens: selectCurrentAccountTokens(global),\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n  };\n})(DappTransactionModal));\n","import type { FC } from '../lib/teact/teact';\nimport React, { memo, useEffect } from '../lib/teact/teact';\n\nimport { getActions, withGlobal } from '../global';\nimport renderText from '../global/helpers/renderText';\nimport { pick } from '../util/iteratees';\n\nimport useFlag from '../hooks/useFlag';\nimport useLang from '../hooks/useLang';\n\nimport Button from './ui/Button';\nimport Modal from './ui/Modal';\n\nimport styles from './Dialogs.module.scss';\nimport modalStyles from './ui/Modal.module.scss';\n\ntype StateProps = {\n  dialogs: string[];\n};\n\nconst Dialogs: FC<StateProps> = ({ dialogs }) => {\n  const { dismissDialog } = getActions();\n\n  const lang = useLang();\n  const [isModalOpen, openModal, closeModal] = useFlag();\n\n  useEffect(() => {\n    if (dialogs.length > 0) {\n      openModal();\n    } else {\n      closeModal();\n    }\n  }, [dialogs, openModal]);\n\n  if (!dialogs.length) {\n    return undefined;\n  }\n\n  const message = dialogs[dialogs.length - 1];\n\n  return (\n    <Modal\n      isCompact\n      isOpen={isModalOpen}\n      onClose={closeModal}\n      onCloseAnimationEnd={dismissDialog}\n      title={lang('Something went wrong')}\n    >\n      <div className={styles.content}>\n        {renderText(lang(message))}\n      </div>\n      <div className={modalStyles.buttons}>\n        <Button onClick={closeModal}>OK</Button>\n      </div>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal(\n  (global): StateProps => pick(global, ['dialogs']),\n)(Dialogs));\n","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"mJ2Hr775vSd5B8bjbMy8\"};","export enum ElectronEvent {\n  DEEPLINK = 'deeplink',\n  DEEPLINK_TONCONNECT = 'deeplink-tonconnect',\n  UPDATE_ERROR = 'update-error',\n  UPDATE_AVAILABLE = 'update-available',\n  UPDATE_DOWNLOAD_PROGRESS = 'update-download-progress',\n  UPDATE_DOWNLOADED = 'update-downloaded',\n}\n\nexport enum ElectronAction {\n  CLOSE = 'close',\n  MINIMIZE = 'minimize',\n  MAXIMIZE = 'maximize',\n  UNMAXIMIZE = 'unmaximize',\n  GET_IS_MAXIMIZED = 'get-is-maximized',\n\n  DOWNLOAD_UPDATE = 'download-update',\n  INSTALL_UPDATE = 'install-update',\n  CANCEL_UPDATE = 'cancel-update',\n  HANDLE_DOUBLE_CLICK = 'handle-double-click',\n}\n\nexport interface ElectronApi {\n  close: VoidFunction;\n  minimize: VoidFunction;\n  maximize: VoidFunction;\n  unmaximize: VoidFunction;\n  getIsMaximized: () => Promise<boolean>;\n\n  downloadUpdate: () => Promise<void>;\n  cancelUpdate: () => Promise<void>;\n  installUpdate: () => Promise<void>;\n  handleDoubleClick: () => Promise<void>;\n\n  on: (eventName: ElectronEvent, callback: any) => VoidFunction;\n}\n\ndeclare global {\n  interface Window {\n    electron?: ElectronApi;\n  }\n}\n","export default function getBoundingClientRectsAsync(element: Element) {\n  return new Promise<DOMRectReadOnly>((resolve) => {\n    const observer = new IntersectionObserver((entries, ob) => {\n      ob.disconnect();\n\n      resolve(entries[0]?.boundingClientRect);\n    });\n\n    observer.observe(element);\n  });\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"BJ1l2ousFSmhBa2ibg31\",\"icon\":\"giRA566yZvswCUxkWS8B\",\"success\":\"YRQnHVrQHVoXj7MWAkCG\",\"progress-bar\":\"EkvJqVB5P3b7DmBED7C_\",\"progressBar\":\"EkvJqVB5P3b7DmBED7C_\",\"with-progress\":\"NTLW7XfBwsefnhxTKisd\",\"withProgress\":\"NTLW7XfBwsefnhxTKisd\",\"disabled\":\"RWgoE5fzgYymjiIw8vKB\",\"wrapper\":\"ryxWtwlbQgWcnYFZEr2t\",\"with-text\":\"EL4xTVDHmKC9Np12NjVA\",\"withText\":\"EL4xTVDHmKC9Np12NjVA\",\"text\":\"PtZ3ZdB09_PdVZyy9J0z\",\"fake\":\"zsKaf7p7a9CLSfNvcbbj\",\"close\":\"fuiQjwDNN5aQrTmltvgi\"};","import React, {\n  memo, useCallback, useEffect, useMemo, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport { ElectronEvent } from '../../electron/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport getBoundingClientRectsAsync from '../../util/getBoundingClientReactAsync';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport styles from './UpdateApp.module.scss';\n\nconst PROGRESS_OFFSET = 28.5; // Minimum progress in % when progressbar starts to explicitly grow\n\n// Fake progress is shown between Update click and actual download progress received\nconst FAKE_PROGRESS_STEP = 1;\nconst FAKE_PROGRESS_TIMEOUT = 1 * 1000;\nconst FAKE_PROGRESS_MAX = 20;\n\nfunction UpdateApp() {\n  const lang = useLang();\n\n  const [isUpdateAvailable, setIsUpdateAvailable] = useState(false);\n  const [isUpdateDownloaded, setIsUpdateDownloaded] = useState(false);\n  const [isDisabled, disable, enable] = useFlag(false);\n\n  const [progress, setProgress] = useState(0);\n  const [fakeProgress, setFakeProgress] = useState(0);\n\n  const progressStep = useMemo(() => (100 - fakeProgress) / 100, [fakeProgress]);\n  const progressWidth = useMemo(() => PROGRESS_OFFSET + fakeProgress + progress * progressStep,\n    [progress, progressStep, fakeProgress]);\n\n  const timer = useRef<number | undefined>();\n  const isCanceled = useRef<boolean>(false);\n\n  const reset = useCallback(() => {\n    clearInterval(timer.current);\n    setIsUpdateAvailable(true);\n    setIsUpdateDownloaded(false);\n    setFakeProgress(0);\n    setProgress(0);\n  }, []);\n\n  useEffect(() => {\n    const removeUpdateErrorListener = window.electron?.on(ElectronEvent.UPDATE_ERROR, () => {\n      setIsUpdateAvailable(false);\n    });\n    const removeUpdateAvailableListener = window.electron?.on(ElectronEvent.UPDATE_AVAILABLE, () => {\n      setIsUpdateAvailable(true);\n    });\n    const removeUpdateProgressListener = window.electron?.on(ElectronEvent.UPDATE_DOWNLOAD_PROGRESS, async (p: any) => {\n      if (isCanceled.current) {\n        await window.electron?.cancelUpdate();\n        enable();\n        return;\n      }\n\n      clearInterval(timer.current);\n      setProgress(p.percent);\n    });\n\n    const removeUpdateDownloadedListener = window.electron?.on(ElectronEvent.UPDATE_DOWNLOADED, () => {\n      setProgress(100);\n\n      setTimeout(() => {\n        setFakeProgress(0);\n        setProgress(0);\n        setIsUpdateDownloaded(true);\n      }, 2000);\n    });\n\n    return () => {\n      removeUpdateErrorListener?.();\n      removeUpdateAvailableListener?.();\n      removeUpdateProgressListener?.();\n      removeUpdateDownloadedListener?.();\n    };\n  }, [reset, enable]);\n\n  const handleClick = useCallback(async () => {\n    isCanceled.current = false;\n\n    if (isDisabled || progress) {\n      return;\n    }\n\n    if (isUpdateDownloaded) {\n      disable();\n      await window.electron?.installUpdate();\n      return;\n    }\n\n    if (isUpdateAvailable) {\n      window.electron?.downloadUpdate();\n\n      timer.current = window.setInterval(() => {\n        setFakeProgress((fp) => {\n          if (fp >= FAKE_PROGRESS_MAX) {\n            clearInterval(timer.current);\n            return fp;\n          }\n\n          return fp + FAKE_PROGRESS_STEP;\n        });\n      }, FAKE_PROGRESS_TIMEOUT);\n    }\n  }, [progress, isUpdateDownloaded, isUpdateAvailable, isDisabled, disable]);\n\n  const handleCancel = useCallback(async (event: React.MouseEvent<HTMLDivElement>) => {\n    event.stopPropagation();\n    disable();\n\n    if (progress) {\n      await window.electron?.cancelUpdate();\n      enable();\n    } else {\n      isCanceled.current = true;\n    }\n\n    reset();\n  }, [reset, progress, disable, enable]);\n\n  const { transitionClassNames, shouldRender } = useShowTransition(isUpdateDownloaded);\n\n  const hasProgress = useMemo(() => !!(fakeProgress || progress) && !isDisabled, [progress, fakeProgress, isDisabled]);\n  const isProgressShown = useMemo(() => !isUpdateDownloaded && hasProgress, [isUpdateDownloaded, hasProgress]);\n\n  const isCancelShown = useMemo(() => isProgressShown && progressWidth <= 100, [isProgressShown, progressWidth]);\n  const {\n    transitionClassNames: cancelTransitionClassNames, shouldRender: shouldRenderCancel,\n  } = useShowTransition(isCancelShown);\n\n  // TODO: Return back \"Restart\" button after animation fix\n  const text = isUpdateDownloaded ? lang('Update MyTonWallet') : lang('Update');\n  const { transitionClassNames: textTransitionClassNames } = useShowTransition(!hasProgress);\n\n  const icon = useMemo(() => (isUpdateDownloaded\n    ? <i className={buildClassName('icon-update', styles.icon)} />\n    : hasProgress ? undefined : <i className={buildClassName('icon-download', styles.icon)} />),\n  [hasProgress, isUpdateDownloaded]);\n\n  const { containerRef, renderedFakeText } = useContainerAnimation(text);\n\n  if (!shouldRender) {\n    return null; // eslint-disable-line no-null/no-null\n  }\n\n  return (\n    <div\n      className={buildClassName(\n        styles.container,\n        transitionClassNames,\n        isProgressShown && styles.withProgress,\n        isDisabled && styles.disabled,\n        (isUpdateDownloaded || progress === 100) && styles.success,\n      )}\n      ref={containerRef}\n      onClick={handleClick}\n    >\n      <div className={buildClassName(styles.wrapper, isProgressShown && styles.withProgress)}>\n        <div\n          className={buildClassName(styles.progressBar, !hasProgress && styles.withText)}\n          style={`width: ${progressWidth}%`}\n        >\n          {icon}\n        </div>\n      </div>\n\n      {renderedFakeText}\n\n      <div className={buildClassName(styles.text, textTransitionClassNames)}>\n        {text}\n      </div>\n\n      {shouldRenderCancel && (\n        <div className={buildClassName(styles.close, cancelTransitionClassNames)}>\n          <i className=\"icon-close\" onClick={handleCancel} />\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction useContainerAnimation(text?: string) {\n  const lang = useLang();\n\n  const containerRef = useRef<HTMLDivElement>(null); // eslint-disable-line no-null/no-null\n  const textRef = useRef<HTMLDivElement>(null); // eslint-disable-line no-null/no-null\n  const lastWidthRef = useRef<number>();\n\n  const calculateWidth = useCallback(() => {\n    if (!textRef.current) {\n      return;\n    }\n\n    getBoundingClientRectsAsync(textRef.current).then((rect) => {\n      if (lastWidthRef.current !== rect.width) {\n        // Text width + icon width (19) + paddings (8 * 2)\n        containerRef.current!.style.maxWidth = `${rect.width + 19 + 16}px`;\n        lastWidthRef.current = rect.width;\n      }\n    });\n  }, []);\n\n  useEffect(() => {\n    calculateWidth();\n  }, [calculateWidth, lang, text]);\n\n  const renderedFakeText = useMemo(() => (\n    <div ref={textRef} className={buildClassName(styles.text, styles.fake)}>{text}</div>\n  ), [text]);\n\n  return { containerRef, renderedFakeText };\n}\n\nexport default memo(UpdateApp);\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"uvWzmSRVwikQQiVDfeUT\",\"wrapper\":\"a2k0XSVbGvMCpKkepGpZ\",\"applicationName\":\"LbHm4l14ATlL25xRZHzz\",\"buttons\":\"EUfOJONA2t4g5WrIoEps\",\"windowsButtons\":\"af3cKX2tjX1g8zCLIQ8Q\",\"windowsButton\":\"BMVOdTEAT8hmkgtVWDq2\"};","import React, { memo, useCallback, useRef } from '../../lib/teact/teact';\n\nimport { IS_WINDOWS } from '../../util/windowEnvironment';\n\nimport useElectronDrag from '../../hooks/useElectronDrag';\n\nimport UpdateApp from './UpdateApp';\n\nimport styles from './ElectronHeader.module.scss';\n\ntype Props = {\n  children?: React.ReactNode;\n  withTitle?: boolean;\n};\n\nfunction ElectronHeader({ children, withTitle }: Props) {\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n  useElectronDrag(containerRef);\n\n  const handleMinimize = useCallback(() => {\n    window.electron?.minimize();\n  }, []);\n\n  const handleMaximize = useCallback(async () => {\n    if (await window.electron?.getIsMaximized()) {\n      window.electron?.unmaximize();\n    } else {\n      window.electron?.maximize();\n    }\n  }, []);\n\n  const handleClose = useCallback(() => {\n    window.electron?.close();\n  }, []);\n\n  const handleDoubleClick = useCallback(() => {\n    window.electron?.handleDoubleClick();\n  }, []);\n\n  if (IS_WINDOWS) {\n    return (\n      <div ref={containerRef} className={styles.container} onDoubleClick={handleDoubleClick}>\n        <div className={styles.wrapper}>\n          {Boolean(children) && <div className={styles.buttons}>{children}</div>}\n\n          {withTitle && <div className={styles.applicationName}>MyTonWallet</div>}\n        </div>\n\n        <div className={styles.windowsButtons}>\n          <UpdateApp />\n\n          <div className={styles.windowsButton} onClick={handleMinimize}>\n            <i className=\"icon-windows-minimize\" />\n          </div>\n\n          <div className={styles.windowsButton} onClick={handleMaximize}>\n            <i className=\"icon-windows-maximize\" />\n          </div>\n\n          <div className={styles.windowsButton} onClick={handleClose}>\n            <i className=\"icon-windows-close\" />\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div ref={containerRef} className={styles.container} onDoubleClick={handleDoubleClick}>\n      <div className={styles.wrapper}>\n        {withTitle && <div className={styles.applicationName}>MyTonWallet</div>}\n\n        <div className={styles.buttons}>\n          <UpdateApp />\n\n          {children}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(ElectronHeader);\n","import type { RefObject } from 'react';\nimport { useEffect, useRef } from '../lib/teact/teact';\n\nimport { IS_ELECTRON } from '../config';\nimport { IS_MAC_OS } from '../util/windowEnvironment';\n\nconst DRAG_DISTANCE_THRESHOLD = 5;\n\nconst useElectronDrag = (ref: RefObject<HTMLDivElement>) => {\n  const isDragging = useRef(false);\n\n  const x = useRef(window.screenX);\n  const y = useRef(window.screenY);\n  const distance = useRef(0);\n\n  useEffect(() => {\n    const element: HTMLDivElement | null = ref.current;\n    if (!element || !(IS_ELECTRON && IS_MAC_OS)) return undefined;\n\n    const handleClick = (event: MouseEvent) => {\n      distance.current = 0;\n\n      if (isDragging.current) {\n        event.preventDefault();\n        event.stopPropagation();\n        isDragging.current = false;\n      }\n    };\n\n    const handleMousedown = (event: MouseEvent) => {\n      if (isDragging.current) {\n        event.preventDefault();\n        event.stopPropagation();\n      }\n    };\n\n    const handleDrag = (event: MouseEvent) => {\n      if (event.buttons === 1) {\n        distance.current += Math.sqrt((x.current - window.screenX) ** 2 + (y.current - window.screenY) ** 2);\n\n        x.current = window.screenX;\n        y.current = window.screenY;\n\n        if (!isDragging.current && distance.current > DRAG_DISTANCE_THRESHOLD) {\n          isDragging.current = true;\n        }\n      }\n    };\n\n    const handleDoubleClick = (event: MouseEvent) => {\n      if (event.currentTarget === event.target) {\n        window.electron?.handleDoubleClick();\n      }\n    };\n\n    element.addEventListener('click', handleClick);\n    element.addEventListener('mousedown', handleMousedown);\n    element.addEventListener('mousemove', handleDrag);\n    element.addEventListener('dblclick', handleDoubleClick);\n\n    return () => {\n      element.removeEventListener('click', handleClick);\n      element.removeEventListener('mouseup', handleMousedown);\n      element.removeEventListener('mousemove', handleDrag);\n      element.removeEventListener('dblclick', handleDoubleClick);\n    };\n  }, [ref]);\n};\n\nexport default useElectronDrag;\n","import React, {\n  memo, useCallback, useMemo, useState,\n} from '../../lib/teact/teact';\n\nimport type { Account } from '../../global/types';\nimport type { LedgerWalletInfo } from '../../util/ledger/types';\n\nimport { getActions } from '../../global';\nimport { bigStrToHuman } from '../../global/helpers';\nimport buildClassName from '../../util/buildClassName';\nimport { formatCurrency } from '../../util/formatNumber';\nimport { shortenAddress } from '../../util/shortenAddress';\n\nimport useLang from '../../hooks/useLang';\n\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport styles from './LedgerModal.module.scss';\n\ntype OwnProps = {\n  hardwareWallets?: LedgerWalletInfo[];\n  accounts?: Record<string, Account>;\n  onCancel?: NoneToVoidFunction ;\n  onClose: NoneToVoidFunction ;\n};\n\nconst ACCOUNT_ADDRESS_SHIFT = 6;\nconst ACCOUNT_ADDRESS_SHIFT_END = 6;\nconst ACCOUNT_BALANCE_DECIMALS = 3;\n\nfunction LedgerSelectWallets({\n  hardwareWallets,\n  accounts,\n  onCancel,\n  onClose,\n}: OwnProps) {\n  const {\n    afterSelectHardwareWallets,\n  } = getActions();\n  const lang = useLang();\n\n  const [selectedAccountIndices, setSelectedAccountIndices] = useState<number[]>([]);\n  const shouldCloseOnCancel = !onCancel;\n\n  const handleAccountToggle = useCallback((index: number) => {\n    if (selectedAccountIndices.includes(index)) {\n      setSelectedAccountIndices(selectedAccountIndices.filter((id) => id !== index));\n    } else {\n      setSelectedAccountIndices(selectedAccountIndices.concat([index]));\n    }\n  }, [selectedAccountIndices]);\n\n  const handleAddLedgerWallets = useCallback(() => {\n    afterSelectHardwareWallets({ hardwareSelectedIndices: selectedAccountIndices });\n    onClose();\n  }, [afterSelectHardwareWallets, selectedAccountIndices, onClose]);\n\n  const alreadyConnectedList = useMemo(\n    () => Object.values(accounts ?? []).map(({ address }) => address),\n    [accounts],\n  );\n\n  function renderAccount(address: string, balance: string, index: number, isConnected: boolean) {\n    const isActive = isConnected || selectedAccountIndices.includes(index);\n\n    return (\n      <div\n        key={address}\n        className={buildClassName(styles.account, isActive && styles.account_current)}\n        aria-label={lang('Switch Account')}\n        onClick={isConnected ? undefined : () => handleAccountToggle(index)}\n      >\n        <span className={styles.accountName}>\n          <i className={buildClassName(styles.accountCurrencyIcon, 'icon-ton')} aria-hidden />\n          {formatCurrency(bigStrToHuman(balance), '', ACCOUNT_BALANCE_DECIMALS)}\n        </span>\n        <div className={styles.accountFooter}>\n          <span className={styles.accountAddress}>\n            {shortenAddress(address, ACCOUNT_ADDRESS_SHIFT, ACCOUNT_ADDRESS_SHIFT_END)}\n          </span>\n        </div>\n\n        <div className={buildClassName(styles.accountCheckMark, isActive && styles.accountCheckMark_active)} />\n      </div>\n    );\n  }\n\n  function renderAccounts() {\n    const list = hardwareWallets ?? [];\n\n    return (\n      <div className={styles.accounts}>\n        {list.map(\n          ({ address, balance, index }) => renderAccount(\n            address,\n            balance,\n            index,\n            alreadyConnectedList.includes(address),\n          ),\n        )}\n      </div>\n    );\n  }\n\n  const areAccountsSelected = !selectedAccountIndices.length;\n  const title = selectedAccountIndices.length\n    ? lang('%1$d Selected', selectedAccountIndices.length) as string\n    : lang('Select Ledger Wallets');\n\n  return (\n    <>\n      <ModalHeader title={title} onClose={onClose} />\n      <div className={styles.container}>\n        {renderAccounts()}\n        <div className={styles.actionBlock}>\n          <Button\n            className={styles.button}\n            onClick={shouldCloseOnCancel ? onClose : onCancel}\n          >\n            {lang(shouldCloseOnCancel ? 'Cancel' : 'Back')}\n          </Button>\n          <Button\n            isPrimary\n            isDisabled={areAccountsSelected}\n            onClick={handleAddLedgerWallets}\n            className={styles.button}\n          >\n            {lang('Add')}\n          </Button>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default memo(LedgerSelectWallets);\n","import React, {\n  memo, useCallback, useState,\n} from '../../lib/teact/teact';\n\nimport type { Account, HardwareConnectState } from '../../global/types';\nimport type { LedgerWalletInfo } from '../../util/ledger/types';\n\nimport { getActions, withGlobal } from '../../global';\nimport { selectNetworkAccounts } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\n\nimport Modal from '../ui/Modal';\nimport Transition from '../ui/Transition';\nimport LedgerConnect from './LedgerConnect';\nimport LedgerSelectWallets from './LedgerSelectWallets';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './LedgerModal.module.scss';\n\ntype OwnProps = {\n  isOpen?: boolean;\n  onClose: () => void;\n};\n\ntype StateProps = {\n  hardwareWallets?: LedgerWalletInfo[];\n  accounts?: Record<string, Account>;\n  hardwareState?: HardwareConnectState;\n  isLedgerConnected?: boolean;\n  isTonAppConnected?: boolean;\n  isRemoteTab?: boolean;\n};\n\nenum LedgerModalState {\n  Password,\n  Connect,\n  SelectWallets,\n}\n\nfunction LedgerModal({\n  isOpen,\n  onClose,\n  hardwareWallets,\n  accounts,\n  hardwareState,\n  isLedgerConnected,\n  isTonAppConnected,\n  isRemoteTab,\n}: OwnProps & StateProps) {\n  const {\n    resetHardwareWalletConnect,\n  } = getActions();\n  const [currentSlide, setCurrentSlide] = useState<number>(\n    LedgerModalState.Connect,\n  );\n  const [nextKey] = useState<number | undefined>(\n    LedgerModalState.SelectWallets,\n  );\n\n  const handleConnected = useCallback(() => {\n    setCurrentSlide(LedgerModalState.SelectWallets);\n  }, []);\n\n  const handleLedgerModalClose = useCallback(() => {\n    setCurrentSlide(LedgerModalState.Connect);\n    resetHardwareWalletConnect();\n  }, [resetHardwareWalletConnect]);\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case LedgerModalState.Connect:\n        return (\n          <LedgerConnect\n            state={hardwareState}\n            isLedgerConnected={isLedgerConnected}\n            isTonAppConnected={isTonAppConnected}\n            isRemoteTab={isRemoteTab}\n            onConnected={handleConnected}\n            onClose={onClose}\n          />\n        );\n      case LedgerModalState.SelectWallets:\n        return (\n          <LedgerSelectWallets\n            accounts={accounts}\n            hardwareWallets={hardwareWallets}\n            onClose={onClose}\n          />\n        );\n    }\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      isSlideUp\n      isOpen={isOpen}\n      onClose={onClose}\n      onCloseAnimationEnd={handleLedgerModalClose}\n      dialogClassName={styles.modalDialog}\n    >\n      <Transition\n        name=\"pushSlide\"\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={currentSlide}\n        nextKey={nextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const accounts = selectNetworkAccounts(global);\n\n  const {\n    hardwareWallets,\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n    isRemoteTab,\n  } = global.hardware;\n\n  return {\n    accounts,\n    hardwareWallets,\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n    isRemoteTab,\n  };\n})(LedgerModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"sticker\":\"A5WFj38ZnriwTCiTw0Wz\",\"balanceChange\":\"Ba44MsfiGoCIxU3JECmp\",\"amount\":\"ooItwWzOaeSgDG9HxN0p\",\"amount_purple\":\"dZsrQMUXxWncJ5EzVj8Q\",\"amountPurple\":\"dZsrQMUXxWncJ5EzVj8Q\",\"amount_green\":\"Dkfs6QcR9MyaYcHi6nme\",\"amountGreen\":\"Dkfs6QcR9MyaYcHi6nme\",\"amountSymbol\":\"sELQazWOggo_lKrf4qUV\",\"amountFraction\":\"_Yj6gjDLdt4MYlfKFF3u\",\"buttons\":\"pqdFePn2wic6rDDg1DIf\",\"button\":\"KU8G5e3lPApuwNRk7sTu\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport { CARD_SECONDARY_VALUE_SYMBOL } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { formatCurrency, formatCurrencyExtended } from '../../util/formatNumber';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\n\nimport styles from './TransferResult.module.scss';\n\ninterface OwnProps {\n  playAnimation?: boolean;\n  color?: 'green' | 'purple';\n  noSign?: boolean;\n  amount?: number;\n  tokenSymbol?: string;\n  precision?: number;\n  balance?: number;\n  operationAmount?: number;\n  fee?: number;\n  firstButtonText?: string;\n  secondButtonText?: string;\n  onFirstButtonClick?: NoneToVoidFunction;\n  onSecondButtonClick?: NoneToVoidFunction;\n}\n\nfunction TransferResult({\n  playAnimation,\n  amount = 0,\n  tokenSymbol = CARD_SECONDARY_VALUE_SYMBOL,\n  precision = 2,\n  noSign,\n  color,\n  balance,\n  operationAmount,\n  fee,\n  firstButtonText,\n  secondButtonText,\n  onFirstButtonClick,\n  onSecondButtonClick,\n}: OwnProps) {\n  const withBalanceChange = balance && operationAmount;\n  const finalBalance = withBalanceChange ? balance + operationAmount - (fee ?? 0) : 0;\n  const [wholePart, fractionPart] = formatCurrencyExtended(amount, '', noSign).split('.');\n\n  function renderButtons() {\n    if (!firstButtonText && !secondButtonText) {\n      return undefined;\n    }\n\n    return (\n      <div className={styles.buttons}>\n        {firstButtonText && (\n          <Button className={styles.button} onClick={onFirstButtonClick}>{firstButtonText}</Button>\n        )}\n        {firstButtonText && (\n          <Button className={styles.button} onClick={onSecondButtonClick}>{secondButtonText}</Button>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <AnimatedIconWithPreview\n        play={playAnimation}\n        noLoop={false}\n        nonInteractive\n        className={styles.sticker}\n        tgsUrl={ANIMATED_STICKERS_PATHS.thumbUp}\n        previewUrl={ANIMATED_STICKERS_PATHS.thumbUpPreview}\n      />\n\n      {Boolean(withBalanceChange) && (\n        <div className={styles.balanceChange}>\n          {formatCurrency(balance!, tokenSymbol, precision)}\n          &nbsp;&rarr;&nbsp;\n          {formatCurrency(finalBalance, tokenSymbol, precision)}\n        </div>\n      )}\n\n      <div className={buildClassName(styles.amount, color && styles[`amount_${color}`])}>\n        {wholePart.trim().replace('\\u202F', '').replace('-', '−')}\n        {fractionPart && <span className={styles.amountFraction}>.{fractionPart.trim()}</span>}\n        <span className={styles.amountSymbol}>{tokenSymbol}</span>\n      </div>\n\n      {renderButtons()}\n    </>\n  );\n}\n\nexport default memo(TransferResult);\n","import btc from '../../../assets/coins/btc.png';\nimport ton from '../../../assets/coins/ton.png';\n\nexport const ASSET_LOGO_PATHS = {\n  ton,\n  btc,\n};\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, {\n  memo,\n  useCallback, useEffect, useRef,\n} from '../../lib/teact/teact';\n\nimport { FRACTION_DIGITS } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { floor } from '../../util/round';\nimport { saveCaretPosition } from '../../util/saveCaretPosition';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\n\nimport styles from './Input.module.scss';\n\ntype OwnProps = {\n  id?: string;\n  labelText?: string;\n  value?: number;\n  hasError?: boolean;\n  suffix?: string;\n  className?: string;\n  inputClassName?: string;\n  labelClassName?: string;\n  valueClassName?: string;\n  children?: TeactNode;\n  onChange?: (value?: number) => void;\n  onBlur?: NoneToVoidFunction;\n  onPressEnter?: (e: React.KeyboardEvent<HTMLDivElement>) => void;\n  decimals?: number;\n};\n\nfunction RichNumberInput({\n  id,\n  labelText,\n  hasError,\n  suffix,\n  value,\n  children,\n  className,\n  inputClassName,\n  labelClassName,\n  valueClassName,\n  onChange,\n  onBlur,\n  onPressEnter,\n  decimals = FRACTION_DIGITS,\n}: OwnProps) {\n  // eslint-disable-next-line no-null/no-null\n  const inputRef = useRef<HTMLInputElement | null>(null);\n  const lang = useLang();\n  const [hasFocus, markHasFocus, unmarkHasFocus] = useFlag(false);\n\n  const updateHtml = useCallback((parts?: RegExpMatchArray) => {\n    const input = inputRef.current!;\n    const newHtml = parts ? buildContentHtml(parts, suffix, decimals) : '';\n\n    const restoreCaretPosition = document.activeElement === inputRef.current\n      ? saveCaretPosition(input, decimals)\n      : undefined;\n    input.innerHTML = newHtml;\n    restoreCaretPosition?.();\n\n    // Trick to remove pseudo-element with placeholder in this tick\n    input.classList.toggle(styles.isEmpty, !newHtml.length);\n  }, [decimals, suffix]);\n\n  useEffect(() => {\n    const newValue = castValue(value, decimals);\n\n    const parts = getParts(String(newValue), decimals);\n    updateHtml(parts);\n\n    if (value !== newValue) {\n      onChange?.(newValue);\n    }\n  }, [decimals, onChange, updateHtml, value]);\n\n  function handleChange(e: React.FormEvent<HTMLDivElement>) {\n    const inputValue = e.currentTarget.innerText.trim();\n    const parts = getParts(inputValue, decimals);\n    const isEmpty = inputValue === '';\n\n    if (!parts && !isEmpty && value) {\n      updateHtml(getParts(String(value), decimals));\n    } else {\n      updateHtml(parts);\n    }\n\n    const newValue = castValue(Number(inputValue), decimals);\n    if ((newValue || isEmpty) && newValue !== value) {\n      onChange?.(newValue);\n    }\n  }\n\n  const handleBlur = useCallback(() => {\n    unmarkHasFocus();\n    onBlur?.();\n  }, [onBlur, unmarkHasFocus]);\n\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLDivElement>) => {\n    if (e.key === 'Enter' && onPressEnter) {\n      onPressEnter(e);\n    }\n  };\n\n  const inputWrapperFullClass = buildClassName(\n    styles.input__wrapper,\n    hasError && styles.error,\n    hasFocus && styles.input__wrapper_hasFocus,\n    inputClassName,\n  );\n  const inputFullClass = buildClassName(\n    styles.input,\n    styles.input_rich,\n    !value && styles.isEmpty,\n    valueClassName,\n  );\n  const labelTextClassName = buildClassName(\n    styles.label,\n    hasError && styles.error,\n    labelClassName,\n  );\n\n  return (\n    <div className={buildClassName(styles.wrapper, className)}>\n      {labelText && (\n        <label\n          className={labelTextClassName}\n          htmlFor={id}\n          id={`${id}Label`}\n        >\n          {labelText}\n        </label>\n      )}\n      <div className={inputWrapperFullClass}>\n        {/* eslint-disable-next-line jsx-a11y/control-has-associated-label */}\n        <div\n          ref={inputRef}\n          contentEditable\n          id={id}\n          role=\"textbox\"\n          aria-required\n          aria-placeholder={lang('Amount value')}\n          aria-labelledby={labelText ? `${id}Label` : undefined}\n          tabIndex={0}\n          className={inputFullClass}\n          onKeyDown={handleKeyDown}\n          onChange={handleChange}\n          onFocus={markHasFocus}\n          onBlur={handleBlur}\n        />\n        {children}\n      </div>\n    </div>\n  );\n}\n\nfunction getParts(value: string, decimals: number) {\n  return value.match(new RegExp(`^(\\\\d+)([.,])?(\\\\d{1,${decimals}})?$`)) || undefined;\n}\n\nfunction castValue(value?: number, decimals?: number) {\n  return value ? floor(value, decimals) : undefined;\n}\n\nexport function buildContentHtml(values: RegExpMatchArray, suffix?: string, decimals = FRACTION_DIGITS) {\n  const [, wholePart, dotPart, fractionPart] = values;\n\n  const wholeStr = String(parseInt(wholePart, 10)); // Properly handle leading zero\n  const fractionStr = (fractionPart || dotPart) ? `.${(fractionPart || '').substring(0, decimals)}` : '';\n  const suffixStr = suffix ? ` ${suffix}` : '';\n\n  return `${wholeStr}<span class=\"${styles.fractional}\">${fractionStr}${suffixStr}</span>`;\n}\n\nexport default memo(RichNumberInput);\n","export function saveCaretPosition(context: HTMLElement, decimals: number) {\n  const selection = window.getSelection();\n  if (!selection || selection.rangeCount === 0) {\n    return undefined;\n  }\n\n  const range = selection.getRangeAt(0);\n  range.setStart(context, 0);\n  const clearedValue = range.toString().match(new RegExp(`(\\\\d+(?:\\\\.\\\\d{0,${decimals}})?)`));\n  const len = clearedValue?.[0]?.length || range.toString().length || 0;\n\n  return function restore() {\n    try {\n      const { node, position } = getTextNodeAtPosition(context, len);\n\n      selection.removeAllRanges();\n      const newRange = new Range();\n      newRange.setStart(node, position);\n      newRange.setEnd(node, position);\n      selection.addRange(newRange);\n    } catch (e) {\n      // ignore\n    }\n  };\n}\n\nfunction getTextNodeAtPosition(root: HTMLElement, index: number) {\n  const NODE_TYPE = NodeFilter.SHOW_TEXT;\n  const treeWalker = document.createTreeWalker(root, NODE_TYPE, (elem) => {\n    if (index > elem.textContent!.length) {\n      index -= elem.textContent!.length;\n      return NodeFilter.FILTER_REJECT;\n    }\n\n    return NodeFilter.FILTER_ACCEPT;\n  });\n\n  const node = treeWalker.nextNode();\n\n  return {\n    node: node || root,\n    position: index,\n  };\n}\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useLayoutEffect, useRef,\n} from '../../lib/teact/teact';\n\nimport { FRACTION_DIGITS } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { floor } from '../../util/round';\n\nimport { buildContentHtml } from './RichNumberInput';\n\nimport styles from './Input.module.scss';\n\ntype OwnProps = {\n  id?: string;\n  labelText?: string;\n  value?: number;\n  error?: string;\n  suffix?: string;\n  zeroValue?: string;\n  decimals?: number;\n  className?: string;\n  inputClassName?: string;\n  labelClassName?: string;\n  valueClassName?: string;\n  children?: TeactNode;\n};\n\nfunction RichNumberInput({\n  id,\n  labelText,\n  value,\n  error,\n  suffix,\n  zeroValue,\n  decimals = FRACTION_DIGITS,\n  className,\n  inputClassName,\n  labelClassName,\n  valueClassName,\n  children,\n}: OwnProps) {\n  // eslint-disable-next-line no-null/no-null\n  const contentRef = useRef<HTMLInputElement | null>(null);\n  const prevValueRef = useRef<string>('');\n\n  const renderValue = useCallback((inputValue = '', noFallbackToPrev = false) => {\n    const contentEl = contentRef.current!;\n\n    const valueRegex = new RegExp(`^(\\\\d+)([.,])?(\\\\d{1,${decimals}})?$`);\n    const values = inputValue.toString().match(valueRegex);\n\n    // eslint-disable-next-line no-null/no-null\n    if (values === null || values.length < 4 || values[0] === '') {\n      if (noFallbackToPrev || inputValue === '') {\n        prevValueRef.current = '';\n        contentEl.innerText = '';\n      } else {\n        renderValue(prevValueRef.current, true);\n      }\n\n      return;\n    }\n\n    prevValueRef.current = inputValue;\n\n    contentEl.innerHTML = buildContentHtml(values, suffix, decimals);\n  }, [decimals, suffix]);\n\n  useLayoutEffect(() => {\n    if (value) {\n      renderValue(floor(value, decimals));\n    } else if (zeroValue) {\n      contentRef.current!.innerHTML = zeroValue;\n    }\n  }, [decimals, renderValue, value, zeroValue]);\n\n  const inputWrapperFullClass = buildClassName(\n    styles.input__wrapper,\n    inputClassName,\n  );\n  const inputFullClass = buildClassName(\n    styles.input,\n    styles.input_rich,\n    styles.disabled,\n    error && styles.error,\n    valueClassName,\n  );\n  const labelTextClassName = buildClassName(\n    styles.label,\n    labelClassName,\n  );\n\n  return (\n    <div className={buildClassName(styles.wrapper, className)}>\n      {error && (\n        <label className={buildClassName(styles.label, styles.label_error, styles.error)} htmlFor={id}>{error}</label>\n      )}\n      {labelText && (\n        <label\n          className={labelTextClassName}\n          htmlFor={id}\n          id={`${id}Label`}\n        >\n          {labelText}\n        </label>\n      )}\n      <div className={inputWrapperFullClass}>\n        <div\n          ref={contentRef}\n          id={id}\n          className={inputFullClass}\n        />\n        {children}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(RichNumberInput);\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"NFuvG779Z6LhsgGvSlZb\",\"welcome\":\"Msv5QVLVso39UMgDtoAn\",\"welcome_static\":\"_3PAVX7HSVTtJDUSlkh7g\",\"welcomeStatic\":\"_3PAVX7HSVTtJDUSlkh7g\",\"welcomeInformation\":\"BZjhP6uiD1cbjbB7h6UT\",\"unstakeInformation\":\"HI6KQvTkEAoQiKkwEpQu\",\"welcomeInformation_static\":\"_iAT3BoDXXj7lSA9Zlwt\",\"welcomeInformationStatic\":\"_iAT3BoDXXj7lSA9Zlwt\",\"stakingApy\":\"mUNP0p6x_FrYLkvexsVV\",\"textButton\":\"aaUTb5m7UuC_tmKtVvwH\",\"sticker\":\"JDicTTdz2inMDKrSW5S7\",\"sticker_static\":\"Pd1ky9Xxh0o7liw2NGtU\",\"stickerStatic\":\"Pd1ky9Xxh0o7liw2NGtU\",\"stakingSafeDialog\":\"nvUUpxTTKjnKD30ffKln\",\"ton\":\"g5bO96jVildGobwKphO7\",\"tonIcon\":\"hE7rxQvMIlKquc2rCZax\",\"tonName\":\"KaMATQB07QyEMfsm1bYw\",\"amountTopRight\":\"guHIn7vAD_YIcJ82zPKf\",\"amountTopRight_static\":\"UltwIWaTUaGH4kTXG4D6\",\"amountTopRightStatic\":\"UltwIWaTUaGH4kTXG4D6\",\"amountTopRight_slide\":\"MTUDExI5tpcpuz1EPYGm\",\"amountTopRightSlide\":\"MTUDExI5tpcpuz1EPYGm\",\"Transition\":\"P9wt9ZXxdW23lmSaXo4C\",\"transition\":\"P9wt9ZXxdW23lmSaXo4C\",\"Transition_slide-from\":\"ViZZZxnoX7kkLYLDGz_r\",\"transitionSlideFrom\":\"ViZZZxnoX7kkLYLDGz_r\",\"Transition_slide-to\":\"feU26_AGs4Tz4u7qHMUY\",\"transitionSlideTo\":\"feU26_AGs4Tz4u7qHMUY\",\"amountBottomWrapper\":\"iZLDvutBJBAyNzxgyQU4\",\"amountBottomWrapper_static\":\"wbYJTTRxyfJjzg_aLwPS\",\"amountBottomWrapperStatic\":\"wbYJTTRxyfJjzg_aLwPS\",\"amountBottom\":\"oE2XJqAMoFbGgzN8J76m\",\"amountBottomRight\":\"YoAXfN8EIm4e1ChNhJ2c\",\"amountBottomRight_error\":\"Sk2d5X1ernc1HtDSV6XW\",\"amountBottomRightError\":\"Sk2d5X1ernc1HtDSV6XW\",\"amountBottomRight_slide\":\"PTuKU2NZMKCyVi_Q0aE8\",\"amountBottomRightSlide\":\"PTuKU2NZMKCyVi_Q0aE8\",\"animating\":\"gnXe8affdrJU2Q46nFQg\",\"from\":\"qbrBRhcRMTFsBNbD74Nf\",\"to\":\"pQmxOc8RyOVuZULq9VsO\",\"balanceError\":\"SU7WPwNwJLR4riJEj4AB\",\"minAmountValue\":\"uoFHjL25qEtRj99hm1Pm\",\"balanceLink\":\"Usc5EPy2gqCRBMn8PaZZ\",\"stakingBalance\":\"hzduM32PQyN8iuHZIYWS\",\"amountInput\":\"J8Zn3l03eabbsTvfZimg\",\"inputStatic\":\"lNJdt_q9bvyJDYzyKEhi\",\"inputRichStatic\":\"Ou6M52PBoTOzdQqNEdH8\",\"balanceResultInput\":\"InQabE3DMB0jKZbA4xgk\",\"balanceResultLabel\":\"kXhyCy1UtsodPx3e8WQs\",\"balanceStakedLabel\":\"G6zfpYLafre64NvGmUgM\",\"balanceStakedResult\":\"ATh1aKZ2lA5xbqykfaZG\",\"balanceResult\":\"zCuPMOeIld8cr5lpOrxz\",\"stakingInfoModal\":\"RgicY8bUdpp312qk836j\",\"stakingInfoModal_withHistory\":\"cpEodrW5_IX5Mdd16NVh\",\"stakingInfoModalWithHistory\":\"cpEodrW5_IX5Mdd16NVh\",\"stakingInfo\":\"iEdWKQ00c0FP723lLbmA\",\"stakingInfo_modal\":\"RgicY8bUdpp312qk836j\",\"stakingInfoModalContent\":\"ZuhkvkheQgqKy9FKPKSE\",\"history\":\"DRKs7JgnkqaJOuWrPvxQ\",\"historyList\":\"j6XC9FGtKGf_aX7I7Zdg\",\"stakingInfoLoading\":\"Yz6cYcVsaIIl00SME4pw\",\"stakingInfoClose\":\"nrAGVpMUp9b60ujja1Kx\",\"stakingInfoButtons\":\"eWIMTRvSb1RYVKGp30iZ\",\"stakingInfoButton\":\"U5oosGMc35RwLidyfZzI\",\"insufficientBalance\":\"olur_1pMOZ9DxABxEDD9\",\"unstakeTime\":\"zTsZSc2OlWOTHbu7JjsZ\",\"unstakeTime_purple\":\"VoI35A8vGyxFNAlzM6oW\",\"unstakeTimePurple\":\"VoI35A8vGyxFNAlzM6oW\",\"unstakeTimeIcon\":\"dmqD8FNlPxlZO6pn0_TQ\",\"history_static\":\"CPkpWrbd85j1RWVVez_n\",\"historyStatic\":\"CPkpWrbd85j1RWVVez_n\",\"historyTotal\":\"Njk3aCBbgwX2_ky9ntKe\",\"historyTotalValue\":\"kq_JHYM6qF1lyDEAx1tQ\",\"historyTitle\":\"EsdzBJskGAFx4bPROOYL\",\"historyList_static\":\"VnJGx7wDxSeYA4xMbL8d\",\"historyListStatic\":\"VnJGx7wDxSeYA4xMbL8d\",\"buttonSubmit\":\"oFZvN6IRbzrjOeUZwZNA\"};","import React, {\n  memo, useCallback, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\n\nimport type { UserToken } from '../../global/types';\n\nimport {\n  ANIMATED_STICKER_MIDDLE_SIZE_PX,\n  ANIMATED_STICKER_SMALL_SIZE_PX,\n  MIN_BALANCE_FOR_UNSTAKE,\n  TON_TOKEN_SLUG,\n} from '../../config';\nimport { getActions, withGlobal } from '../../global';\nimport { bigStrToHuman } from '../../global/helpers';\nimport renderText from '../../global/helpers/renderText';\nimport { selectCurrentAccountState, selectCurrentAccountTokens } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { formatCurrency, formatCurrencyExtended } from '../../util/formatNumber';\nimport { floor } from '../../util/round';\nimport { throttle } from '../../util/schedulers';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\nimport { ASSET_LOGO_PATHS } from '../ui/helpers/assetLogos';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\nimport RichNumberField from '../ui/RichNumberField';\nimport RichNumberInput from '../ui/RichNumberInput';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Staking.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isStatic?: boolean;\n}\n\ninterface StateProps {\n  isLoading?: boolean;\n  apiError?: string;\n  tokens?: UserToken[];\n  fee?: string;\n  stakingBalance: number;\n  stakingMinAmount: number;\n  apyValue: number;\n}\n\nexport const STAKING_DECIMAL = 2;\n\n// Fee may change, so we add 5% for more reliability. This is only safe for low-fee blockchains such as TON.\nconst RESERVED_FEE_FACTOR = 1.05;\nconst runThrottled = throttle((cb) => cb(), 1500, true);\n\nfunction StakingInitial({\n  isActive,\n  isStatic,\n  isLoading,\n  apiError,\n  tokens,\n  fee,\n  stakingBalance,\n  stakingMinAmount,\n  apyValue,\n}: OwnProps & StateProps) {\n  const { submitStakingInitial, fetchStakingFee } = getActions();\n\n  const lang = useLang();\n\n  const [isStakingInfoModalOpen, openStakingInfoModal, closeStakingInfoModal] = useFlag();\n  const [amount, setAmount] = useState<number | undefined>(0);\n  const [isNotEnough, setIsNotEnough] = useState<boolean>(false);\n  const [isInsufficientBalance, setIsInsufficientBalance] = useState<boolean>(false);\n  const [shouldUseAllBalance, setShouldUseAllBalance] = useState<boolean>(false);\n\n  const {\n    amount: balance, decimals, symbol,\n  } = useMemo(() => tokens?.find(({ slug }) => slug === TON_TOKEN_SLUG), [tokens]) || {};\n  const hasAmountError = Boolean(isInsufficientBalance || apiError);\n\n  const validateAndSetAmount = useCallback((newAmount: number | undefined, noReset = false) => {\n    if (!noReset) {\n      setShouldUseAllBalance(false);\n      setIsNotEnough(false);\n      setIsInsufficientBalance(false);\n    }\n\n    if (newAmount === undefined) {\n      setAmount(undefined);\n      return;\n    }\n\n    if (Number.isNaN(newAmount) || newAmount < 0) {\n      setIsNotEnough(true);\n      return;\n    }\n\n    if (!balance || newAmount > balance) {\n      setIsInsufficientBalance(true);\n    } else if (balance + stakingBalance < stakingMinAmount) {\n      setIsNotEnough(true);\n    }\n\n    setAmount(newAmount);\n  }, [balance, stakingBalance, stakingMinAmount]);\n\n  useEffect(() => {\n    if (shouldUseAllBalance && balance) {\n      const calculatedFee = fee && shouldUseAllBalance ? bigStrToHuman(fee, decimals) : 0;\n      const newAmount = balance - calculatedFee * RESERVED_FEE_FACTOR;\n\n      validateAndSetAmount(newAmount, true);\n    } else {\n      validateAndSetAmount(amount, true);\n    }\n  }, [amount, balance, decimals, fee, shouldUseAllBalance, validateAndSetAmount]);\n\n  useEffect(() => {\n    if (!amount) {\n      return;\n    }\n\n    runThrottled(() => {\n      fetchStakingFee({\n        amount,\n      });\n    });\n  }, [amount, fetchStakingFee]);\n\n  const handleAmountChange = useCallback(validateAndSetAmount, [validateAndSetAmount]);\n\n  const handleAmountBlur = useCallback(() => {\n    if (amount && amount + stakingBalance < stakingMinAmount) {\n      setIsNotEnough(true);\n    }\n  }, [amount, stakingBalance, stakingMinAmount]);\n\n  const handleBalanceLinkClick = useCallback((e: React.MouseEvent<HTMLElement>) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (!balance) {\n      return;\n    }\n\n    setShouldUseAllBalance(true);\n  }, [balance]);\n\n  const handleMinusOneClick = useCallback((e: React.MouseEvent<HTMLElement>) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (!balance || !amount || amount <= MIN_BALANCE_FOR_UNSTAKE) {\n      return;\n    }\n\n    validateAndSetAmount(amount - MIN_BALANCE_FOR_UNSTAKE);\n  }, [amount, balance, validateAndSetAmount]);\n\n  const canSubmit = amount && balance && !isNotEnough\n    && amount <= balance\n    && (amount + stakingBalance >= stakingMinAmount);\n\n  const handleSubmit = useCallback((e) => {\n    e.preventDefault();\n\n    if (!canSubmit) {\n      return;\n    }\n\n    submitStakingInitial({ amount });\n  }, [canSubmit, submitStakingInitial, amount]);\n\n  function getError() {\n    if (isInsufficientBalance) {\n      return lang('Insufficient balance');\n    }\n\n    return apiError ? lang(apiError) : undefined;\n  }\n\n  function renderTopRight() {\n    if (!symbol) {\n      return undefined;\n    }\n\n    const isFullBalanceSelected = balance && amount\n      && (balance >= amount && balance - amount <= MIN_BALANCE_FOR_UNSTAKE);\n    const balanceLink = lang('$your_balance_is', {\n      balance: (\n        <a href=\"#\" onClick={handleBalanceLinkClick} className={styles.balanceLink}>\n          {balance !== undefined\n            ? formatCurrencyExtended(floor(balance, STAKING_DECIMAL), symbol, true)\n            : lang('Loading...')}\n        </a>\n      ),\n    });\n    const minusOneLink = (\n      <a href=\"#\" onClick={handleMinusOneClick} className={styles.balanceLink}>\n        {formatCurrency(-Math.round(MIN_BALANCE_FOR_UNSTAKE), symbol)}\n      </a>\n    );\n\n    return (\n      <Transition\n        className={buildClassName(styles.amountTopRight, isStatic && styles.amountTopRight_static)}\n        slideClassName={styles.amountTopRight_slide}\n        name=\"fade\"\n        activeKey={isFullBalanceSelected ? 1 : 0}\n      >\n        {isFullBalanceSelected ? minusOneLink : balanceLink}\n      </Transition>\n    );\n  }\n\n  function renderBottomRight() {\n    const error = getError();\n\n    return (\n      <Transition\n        className={buildClassName(styles.amountBottomRight, isNotEnough && styles.amountBottomRight_error)}\n        slideClassName={styles.amountBottomRight_slide}\n        name=\"fade\"\n        activeKey={error ? 2 : !stakingBalance && !hasAmountError ? 1 : 0}\n      >\n        {error ? (\n          <span className={styles.balanceError}>{error}</span>\n        ) : !stakingBalance ? (\n          lang('$min_value', {\n            value: (\n              <span className={styles.minAmountValue}>\n                {formatCurrency(stakingMinAmount, 'TON')}\n              </span>\n            ),\n          })\n        ) : ' '}\n      </Transition>\n    );\n  }\n\n  function renderStakingSafeModal() {\n    return (\n      <Modal\n        isCompact\n        isOpen={isStakingInfoModalOpen}\n        title={lang('Why staking is safe?')}\n        onClose={closeStakingInfoModal}\n        dialogClassName={styles.stakingSafeDialog}\n      >\n        <p className={modalStyles.text}>\n          {renderText(lang('$safe_staking_description1'))}\n        </p>\n        <p className={modalStyles.text}>\n          {renderText(lang('$safe_staking_description2'))}\n        </p>\n        <p className={modalStyles.text}>\n          {renderText(lang('$safe_staking_description3'))}\n        </p>\n\n        <div className={modalStyles.buttons}>\n          <Button onClick={closeStakingInfoModal}>{lang('Close')}</Button>\n        </div>\n      </Modal>\n    );\n  }\n\n  function renderStakingResult() {\n    const balanceResult = amount ? floor(amount! + (amount! / 100) * apyValue, STAKING_DECIMAL) : 0;\n\n    return (\n      <RichNumberField\n        labelText={lang('Est. balance in a year')}\n        zeroValue=\"...\"\n        value={balanceResult}\n        decimals={decimals}\n        inputClassName={buildClassName(styles.balanceResultInput, isStatic && styles.inputRichStatic)}\n        labelClassName={styles.balanceResultLabel}\n        valueClassName={styles.balanceResult}\n      />\n    );\n  }\n\n  return (\n    <form\n      className={isStatic ? undefined : modalStyles.transitionContent}\n      onSubmit={handleSubmit}\n    >\n      <div className={buildClassName(styles.welcome, isStatic && styles.welcome_static)}>\n        <AnimatedIconWithPreview\n          size={isStatic ? ANIMATED_STICKER_MIDDLE_SIZE_PX : ANIMATED_STICKER_SMALL_SIZE_PX}\n          play={isActive}\n          noLoop={false}\n          nonInteractive\n          className={buildClassName(styles.sticker, isStatic && styles.sticker_static)}\n          tgsUrl={ANIMATED_STICKERS_PATHS.wait}\n          previewUrl={ANIMATED_STICKERS_PATHS.waitPreview}\n        />\n        <div className={buildClassName(styles.welcomeInformation, isStatic && styles.welcomeInformation_static)}>\n          <div>{lang('Earn from your tokens while holding them')}</div>\n          <div className={styles.stakingApy}>{lang('$est_apy_val', apyValue)}</div>\n          <Button isText className={styles.textButton} onClick={openStakingInfoModal}>\n            {lang('Why this is safe')}\n          </Button>\n        </div>\n      </div>\n\n      {renderTopRight()}\n      <RichNumberInput\n        key=\"staking_amount\"\n        id=\"staking_amount\"\n        hasError={isNotEnough || isInsufficientBalance}\n        value={amount}\n        labelText={lang('Amount')}\n        onBlur={handleAmountBlur}\n        onChange={handleAmountChange}\n        onPressEnter={handleSubmit}\n        decimals={decimals}\n        inputClassName={isStatic ? styles.inputRichStatic : undefined}\n        className={styles.amountInput}\n      >\n        <div className={styles.ton}>\n          <img src={ASSET_LOGO_PATHS.ton} alt=\"\" className={styles.tonIcon} />\n          <span className={styles.tonName}>{symbol}</span>\n        </div>\n      </RichNumberInput>\n      <div className={buildClassName(styles.amountBottomWrapper, isStatic && styles.amountBottomWrapper_static)}>\n        <div className={styles.amountBottom}>\n          {renderBottomRight()}\n        </div>\n      </div>\n\n      {renderStakingResult()}\n\n      <div className={buildClassName(modalStyles.buttons, isStatic && styles.buttonSubmit)}>\n        <Button\n          isPrimary\n          isSubmit\n          isDisabled={!canSubmit}\n          isLoading={isLoading}\n        >\n          {lang('Stake TON')}\n        </Button>\n      </div>\n      {renderStakingSafeModal()}\n    </form>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const {\n    isLoading,\n    fee,\n    error: apiError,\n  } = global.staking;\n  const tokens = selectCurrentAccountTokens(global);\n  const accountState = selectCurrentAccountState(global);\n\n  return {\n    isLoading,\n    tokens,\n    apiError,\n    fee,\n    stakingBalance: accountState?.stakingBalance || 0,\n    stakingMinAmount: accountState?.poolState?.minStake || 0,\n    apyValue: accountState?.poolState?.lastApy || 0,\n  };\n})(StakingInitial));\n","import React, { memo, useCallback, useMemo } from '../../lib/teact/teact';\n\nimport { StakingState } from '../../global/types';\nimport type { GlobalState, UserToken } from '../../global/types';\n\nimport { TON_TOKEN_SLUG } from '../../config';\nimport { getActions, withGlobal } from '../../global';\nimport { selectCurrentAccountTokens } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\nimport usePrevious from '../../hooks/usePrevious';\n\nimport TransferResult from '../common/TransferResult';\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\nimport Transition from '../ui/Transition';\nimport StakingInitial from './StakingInitial';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Staking.module.scss';\n\ninterface OwnProps {\n  onViewStakingInfo: NoneToVoidFunction;\n}\n\ntype StateProps = GlobalState['staking'] & {\n  tokens?: UserToken[];\n};\n\nconst IS_OPEN_STATES = new Set([\n  StakingState.StakeInitial,\n  StakingState.StakePassword,\n  StakingState.StakeComplete,\n]);\n\nfunction StakeModal({\n  state,\n  isLoading,\n  amount,\n  error,\n  tokens,\n  onViewStakingInfo,\n}: OwnProps & StateProps) {\n  const {\n    startStaking,\n    setStakingScreen,\n    cancelStaking,\n    clearStakingError,\n    submitStakingPassword,\n  } = getActions();\n\n  const lang = useLang();\n  const isOpen = IS_OPEN_STATES.has(state);\n  const tonToken = useMemo(() => tokens?.find(({ slug }) => slug === TON_TOKEN_SLUG), [tokens]);\n  const renderedTokenBalance = usePrevious(tonToken?.amount, true);\n  const renderedStakingAmount = usePrevious(amount, true);\n\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n\n  const handleBackClick = useCallback(() => {\n    if (state === StakingState.StakePassword) {\n      setStakingScreen({ state: StakingState.StakeInitial });\n    }\n  }, [setStakingScreen, state]);\n\n  const handleTransferSubmit = useCallback((password: string) => {\n    submitStakingPassword({ password });\n  }, [submitStakingPassword]);\n\n  const handleViewStakingInfoClick = useCallback(() => {\n    onViewStakingInfo();\n    cancelStaking();\n  }, [cancelStaking, onViewStakingInfo]);\n\n  function renderPassword(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Confirm Staking')} onClose={cancelStaking} />\n        <PasswordForm\n          isActive={isActive}\n          isLoading={isLoading}\n          error={error}\n          placeholder={lang('Confirm operation with your password')}\n          onUpdate={clearStakingError}\n          onSubmit={handleTransferSubmit}\n          submitLabel={lang('Confirm')}\n          onCancel={handleBackClick}\n          cancelLabel={lang('Back')}\n        />\n      </>\n    );\n  }\n\n  function renderComplete(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Coins have been staked!')} onClose={cancelStaking} />\n\n        <div className={modalStyles.transitionContent}>\n          <TransferResult\n            color=\"purple\"\n            playAnimation={isActive}\n            amount={renderedStakingAmount}\n            noSign\n            balance={renderedTokenBalance}\n            operationAmount={amount ? -amount : undefined}\n            firstButtonText={lang('View')}\n            secondButtonText={lang('Stake More')}\n            onFirstButtonClick={handleViewStakingInfoClick}\n            onSecondButtonClick={startStaking}\n          />\n\n          <div className={modalStyles.buttons}>\n            <Button onClick={cancelStaking} isPrimary>{lang('Close')}</Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case StakingState.StakeInitial:\n        return (\n          <>\n            <ModalHeader title={lang('Stake TON')} onClose={cancelStaking} />\n            <StakingInitial isActive={isActive} />\n          </>\n        );\n\n      case StakingState.StakePassword:\n        return renderPassword(isActive);\n\n      case StakingState.StakeComplete:\n        return renderComplete(isActive);\n    }\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      isSlideUp\n      isOpen={isOpen}\n      onClose={cancelStaking}\n      noBackdropClose\n      dialogClassName={styles.modalDialog}\n      onCloseAnimationEnd={updateNextKey}\n    >\n      <Transition\n        name=\"pushSlide\"\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global) => {\n  const tokens = selectCurrentAccountTokens(global);\n\n  return {\n    ...global.staking,\n    tokens,\n  };\n})(StakeModal));\n","import { useEffect, useLayoutEffect, useRef } from '../lib/teact/teact';\n\nfunction useInterval(callback: NoneToVoidFunction, delay?: number, noFirst = false) {\n  const savedCallback = useRef(callback);\n\n  useLayoutEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  useEffect(() => {\n    if (delay === undefined) {\n      return undefined;\n    }\n\n    const id = setInterval(() => savedCallback.current(), delay);\n    if (!noFirst) savedCallback.current();\n\n    return () => clearInterval(id);\n  }, [delay, noFirst]);\n}\n\nexport default useInterval;\n","import type { LangCode } from '../global/types';\n\nimport type { LangFn } from './langProvider';\nimport withCache from './withCache';\n\nconst formatDayToStringWithCache = withCache((\n  langCode: LangCode,\n  dayStartAt: number,\n  noYear?: boolean,\n  monthFormat: 'short' | 'long' | 'numeric' | false = 'short',\n  noDay?: boolean,\n  withTime = false,\n) => {\n  return new Date(dayStartAt).toLocaleString(\n    langCode,\n    {\n      year: noYear ? undefined : 'numeric',\n      month: monthFormat || undefined,\n      day: noDay ? undefined : 'numeric',\n      hour: withTime ? 'numeric' : undefined,\n      minute: withTime ? 'numeric' : undefined,\n      hour12: false,\n    },\n  );\n});\n\nexport function formatRelativeHumanDateTime(\n  langCode: LangCode = 'en',\n  time: number,\n) {\n  const total = time - Date.now();\n  const minutes = Math.floor((total / 1000 / 60) % 60);\n  const hours = Math.floor((total / (1000 * 3600)) % 24);\n  const days = Math.floor(total / 1000 / 3600 / 24);\n\n  const rtf = new Intl.RelativeTimeFormat(langCode, {\n    localeMatcher: 'best fit',\n    numeric: 'always',\n    style: 'long',\n  });\n\n  const result: string[] = [];\n\n  if (days > 0) {\n    const [daysPlural, daysValue] = rtf.formatToParts(days, 'day').reverse();\n    result.push(`${daysValue.value}${daysPlural.value}`);\n  }\n  if (hours > 0) {\n    const [hoursPlural, hoursValue] = rtf.formatToParts(hours, 'hour').reverse();\n    result.push(`${hoursValue.value}${hoursPlural.value}`);\n  }\n  if (minutes > 0) {\n    const [minutesPlural, minutesValue] = rtf.formatToParts(minutes, 'minute').reverse();\n    result.push(`${minutesValue.value}${minutesPlural.value}`);\n  }\n\n  return result.join(' ');\n}\n\nexport function formatHumanDay(lang: LangFn, datetime: string | number) {\n  if (isToday(datetime)) {\n    return lang('Today');\n  }\n\n  if (isYesterday(datetime)) {\n    return lang('Yesterday');\n  }\n\n  return formatFullDay(lang.code!, datetime);\n}\n\nexport function formatFullDay(langCode: LangCode, datetime: string | number | Date) {\n  const date = new Date(datetime);\n  const dayStartAt = getDayStartAt(date);\n  const today = getDayStart(new Date());\n  const noYear = date.getFullYear() === today.getFullYear();\n\n  return formatDayToStringWithCache(langCode, dayStartAt, noYear, 'long');\n}\n\nexport function formatShortDay(langCode: LangCode, datetime: string | number | Date, withTime = false, noYear = false) {\n  const date = new Date(datetime);\n  const dayStartAt = getDayStartAt(date);\n  const today = getDayStart(new Date());\n  const todayStartAt = getDayStartAt(today);\n  const noDate = withTime && dayStartAt === todayStartAt;\n  const targetAt = withTime ? getMinuteStart(date).getTime() : dayStartAt;\n\n  noYear ||= date.getFullYear() === today.getFullYear();\n\n  return formatDayToStringWithCache(langCode, targetAt, noYear, !noDate && 'short', noDate, withTime);\n}\n\nexport function formatTime(datetime: string | number) {\n  const date = new Date(datetime);\n\n  return `${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}`;\n}\n\nexport function getDayStart(datetime: number | Date) {\n  const date = new Date(datetime);\n  date.setHours(0, 0, 0, 0);\n  return date;\n}\n\nexport function getDayStartAt(datetime: number | Date) {\n  return getDayStart(datetime).getTime();\n}\n\nexport function getMinuteStart(datetime: number | Date) {\n  const date = new Date(datetime);\n  date.setSeconds(0, 0);\n  return date;\n}\n\nfunction isToday(datetime: string | number) {\n  return getDayStartAt(new Date()) === getDayStartAt(new Date(datetime));\n}\n\nfunction isYesterday(datetime: string | number) {\n  const yesterday = new Date();\n  yesterday.setDate(yesterday.getDate() - 1);\n\n  return getDayStartAt(yesterday) === getDayStartAt(new Date(datetime));\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"spinner\":\"NsSZg65bieEj6lksen7g\",\"inner\":\"iQkEwHyiJSGYtE2mqZSH\",\"spin\":\"L8xWt3npdELxTDRu3hpb\",\"withBackground\":\"gpM9TbBV8id1dWBU51HK\",\"dark\":\"JHE85tmuWIegGGzE97qu\",\"light\":\"Qcx6g3F6ckN_DMsSxbL3\",\"white\":\"_kf_4B5i8CSX2A3S5i43\",\"blue\":\"yvN5CQNOrrcwHyumzxWw\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\n\nimport styles from './Loading.module.scss';\n\ntype OwnProps = {\n  color?: 'blue' | 'white';\n  backgroundColor?: 'light' | 'dark';\n  className?: string;\n};\n\nfunction Loading({ color = 'blue', backgroundColor, className }: OwnProps) {\n  const lang = useLang();\n\n  const fullClassName = buildClassName(\n    styles.spinner,\n    styles[color],\n    className,\n    backgroundColor && styles.withBackground,\n    backgroundColor && styles[backgroundColor],\n  );\n\n  return (\n    <div className={fullClassName} aria-label={lang('Loading...')}>\n      <div className={styles.inner} />\n    </div>\n  );\n}\n\nexport default memo(Loading);\n","import React, { memo } from '../../lib/teact/teact';\n\nimport type { UserToken } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { formatHumanDay, formatTime } from '../../util/dateFormat';\nimport { formatCurrencyExtended } from '../../util/formatNumber';\n\nimport useLang from '../../hooks/useLang';\n\nimport styles from './StakingProfileItem.module.scss';\n\ninterface OwnProps {\n  tonToken: UserToken;\n  timestamp: number;\n  profit: number;\n}\n\nfunction StakingProfitItem({ tonToken, timestamp, profit }: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <div className={styles.item}>\n      <i className={buildClassName(styles.icon, 'icon-earn')} aria-hidden />\n      <div className={styles.leftBlock}>\n        <div className={styles.operationName}>{lang('Earned')}</div>\n        <div className={styles.date}>{formatHumanDay(lang, timestamp)}, {formatTime(timestamp)}</div>\n      </div>\n      <div className={styles.amount}>\n        {formatCurrencyExtended(profit, tonToken.symbol)}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(StakingProfitItem);\n","// extracted by mini-css-extract-plugin\nexport default {\"item\":\"c3a0UYMxZD4LuCPe0fWB\",\"icon\":\"Fq_zwerxHUTyJKg6PyPF\",\"leftBlock\":\"GvDi4Lh596tqzsfNET2d\",\"amount\":\"i0FvFpwf2hQLhFtZAR3q\",\"operationName\":\"kWeVE3yy61iSZ6LfCbtm\",\"date\":\"MOgwT8PjFvVZF4gdtLRi\"};","import React, {\n  memo, useCallback, useEffect, useMemo,\n} from '../../lib/teact/teact';\n\nimport type { ApiBackendStakingState } from '../../api/types';\nimport type { UserToken } from '../../global/types';\n\nimport { CARD_SECONDARY_VALUE_SYMBOL, TON_TOKEN_SLUG } from '../../config';\nimport { getActions, withGlobal } from '../../global';\nimport { selectCurrentAccountState, selectCurrentAccountTokens } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { formatRelativeHumanDateTime } from '../../util/dateFormat';\nimport { formatCurrency } from '../../util/formatNumber';\nimport { round } from '../../util/round';\n\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport useInterval from '../../hooks/useInterval';\nimport useLang from '../../hooks/useLang';\nimport useShowTransition from '../../hooks/useShowTransition';\nimport useWindowSize from '../../hooks/useWindowSize';\n\nimport Button from '../ui/Button';\nimport Loading from '../ui/Loading';\nimport ModalHeader from '../ui/ModalHeader';\nimport RichNumberField from '../ui/RichNumberField';\nimport { STAKING_DECIMAL } from './StakingInitial';\nimport StakingProfitItem from './StakingProfitItem';\n\nimport styles from './Staking.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isStatic?: boolean;\n  onClose?: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  amount: number;\n  apyValue: number;\n  stakingHistory?: ApiBackendStakingState;\n  tokens?: UserToken[];\n  isUnstakeRequested?: boolean;\n  endOfStakingCycle?: number;\n}\n\nconst UPDATE_UNSTAKE_DATE_INTERVAL_MS = 30000; // 30 sec\nconst HISTORY_SCROLL_APPEARANCE_HEIGHT_PX = 640;\n\nfunction StakingInfoContent({\n  isActive,\n  isStatic,\n  amount,\n  apyValue,\n  stakingHistory,\n  tokens,\n  isUnstakeRequested,\n  endOfStakingCycle,\n  onClose,\n}: OwnProps & StateProps) {\n  const { startStaking, fetchBackendStakingState } = getActions();\n\n  const lang = useLang();\n  const isLoading = !amount;\n  const hasHistory = Boolean(stakingHistory?.profitHistory.length);\n  const {\n    shouldRender: shouldRenderSpinner,\n    transitionClassNames: spinnerClassNames,\n  } = useShowTransition(isLoading && isActive);\n  const tonToken = useMemo(() => tokens?.find(({ slug }) => slug === TON_TOKEN_SLUG)!, [tokens]);\n  const forceUpdate = useForceUpdate();\n  const { height } = useWindowSize();\n\n  useInterval(forceUpdate, isUnstakeRequested ? UPDATE_UNSTAKE_DATE_INTERVAL_MS : undefined);\n\n  useEffect(() => {\n    if (isActive) {\n      fetchBackendStakingState();\n    }\n  }, [fetchBackendStakingState, isActive]);\n\n  const handleStakeClick = useCallback(() => {\n    onClose?.();\n    startStaking();\n  }, [onClose, startStaking]);\n\n  const handleUnstakeClick = useCallback(() => {\n    onClose?.();\n    startStaking({ isUnstaking: true });\n  }, [onClose, startStaking]);\n\n  const stakingResult = round(amount, STAKING_DECIMAL);\n  const balanceResult = round(amount + (amount / 100) * apyValue, STAKING_DECIMAL);\n\n  function renderUnstakeDescription() {\n    return (\n      <div className={buildClassName(styles.unstakeTime, styles.unstakeTime_purple)}>\n        <i className={buildClassName(styles.unstakeTimeIcon, 'icon-clock')} />\n        {Boolean(endOfStakingCycle) && lang('$unstaking_when_receive', {\n          time: <strong>{formatRelativeHumanDateTime(lang.code, endOfStakingCycle)}</strong>,\n        })}\n      </div>\n    );\n  }\n\n  function renderHistory() {\n    return (\n      <div className={buildClassName(styles.history, isStatic && styles.history_static)}\n      >\n        <div className={styles.historyTotal}>\n          {lang('$total', {\n            value: (\n              <span className={styles.historyTotalValue}>\n                {formatCurrency(stakingHistory!.totalProfit, CARD_SECONDARY_VALUE_SYMBOL)}\n              </span>\n            ),\n          })}\n        </div>\n        <div className={styles.historyTitle}>{lang('Earning History')}</div>\n        <div className={buildClassName(\n          styles.historyList,\n          isStatic && styles.historyList_static,\n          isStatic && 'custom-scroll',\n          !isStatic && height >= HISTORY_SCROLL_APPEARANCE_HEIGHT_PX && 'custom-scroll',\n        )}\n        >\n          {stakingHistory?.profitHistory.map((record) => (\n            <StakingProfitItem\n              key={record.timestamp}\n              profit={record.profit}\n              timestamp={record.timestamp}\n              tonToken={tonToken}\n            />\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  const fullClassName = buildClassName(\n    styles.stakingInfo,\n    !isStatic && styles.stakingInfo_modal,\n    isStatic && 'staking-info',\n  );\n\n  return (\n    <>\n      <div className={fullClassName}>\n        {!isStatic && (\n          <ModalHeader\n            title={lang('Staking')}\n            closeClassName={styles.stakingInfoClose}\n            onClose={onClose}\n          />\n        )}\n        <RichNumberField\n          labelText={lang('Currently Staked')}\n          zeroValue=\"...\"\n          value={stakingResult}\n          decimals={STAKING_DECIMAL}\n          suffix={CARD_SECONDARY_VALUE_SYMBOL}\n          className={styles.stakingBalance}\n          labelClassName={styles.balanceStakedLabel}\n          valueClassName={styles.balanceStakedResult}\n        >\n          {shouldRenderSpinner && <Loading className={buildClassName(styles.stakingInfoLoading, spinnerClassNames)} />}\n        </RichNumberField>\n        {isUnstakeRequested\n          ? renderUnstakeDescription()\n          : (\n            <>\n              <RichNumberField\n                labelText={lang('Est. balance in a year')}\n                zeroValue=\"...\"\n                value={balanceResult}\n                decimals={STAKING_DECIMAL}\n                suffix={CARD_SECONDARY_VALUE_SYMBOL}\n                inputClassName={styles.balanceResultInput}\n                labelClassName={styles.balanceStakedLabel}\n                valueClassName={styles.balanceResult}\n              />\n              <div className={styles.stakingInfoButtons}>\n                <Button className={styles.stakingInfoButton} isPrimary onClick={handleStakeClick}>\n                  {lang('Stake More')}\n                </Button>\n                <Button className={styles.stakingInfoButton} onClick={handleUnstakeClick}>{lang('Unstake')}</Button>\n              </div>\n            </>\n          )}\n      </div>\n\n      {hasHistory && renderHistory()}\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const accountState = selectCurrentAccountState(global);\n\n  return {\n    amount: accountState?.stakingBalance || 0,\n    apyValue: accountState?.poolState?.lastApy || 0,\n    stakingHistory: accountState?.stakingHistory,\n    tokens: selectCurrentAccountTokens(global),\n    isUnstakeRequested: accountState?.isUnstakeRequested,\n    endOfStakingCycle: accountState?.poolState?.endOfCycle,\n  };\n})(StakingInfoContent));\n","import { useEffect, useMemo, useState } from '../lib/teact/teact';\n\nimport { throttle } from '../util/schedulers';\nimport windowSize from '../util/windowSize';\nimport useDebouncedCallback from './useDebouncedCallback';\n\nconst THROTTLE = 250;\n\nexport default function useWindowSize() {\n  const { width: initialWidth, height: initialHeight } = windowSize.get();\n  const [width, setWidth] = useState(initialWidth);\n  const [height, setHeight] = useState(initialHeight);\n  const [isResizing, setIsResizing] = useState(false);\n  const setIsResizingDebounced = useDebouncedCallback(setIsResizing, [setIsResizing], THROTTLE, true);\n\n  useEffect(() => {\n    const throttledSetIsResizing = throttle(() => {\n      setIsResizing(true);\n    }, THROTTLE, true);\n\n    const throttledSetSize = throttle(() => {\n      const { width: newWidth, height: newHeight } = windowSize.get();\n      setWidth(newWidth);\n      setHeight(newHeight);\n      setIsResizingDebounced(false);\n    }, THROTTLE, false);\n\n    const handleResize = () => {\n      throttledSetIsResizing();\n      throttledSetSize();\n    };\n\n    window.addEventListener('resize', handleResize);\n\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, [setIsResizingDebounced]);\n\n  return useMemo(() => ({ width, height, isResizing }), [height, isResizing, width]);\n}\n","import { useCallback, useMemo } from '../lib/teact/teact';\n\nimport { debounce } from '../util/schedulers';\n\nexport default function useDebouncedCallback<T extends AnyToVoidFunction>(\n  fn: T,\n  deps: any[],\n  ms: number,\n  noFirst = false,\n  noLast = false,\n) {\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  const fnMemo = useCallback(fn, deps);\n\n  return useMemo(() => {\n    return debounce(fnMemo, ms, !noFirst, !noLast);\n  }, [fnMemo, ms, noFirst, noLast]);\n}\n","import React, { memo, useEffect } from '../../lib/teact/teact';\n\nimport { getActions, withGlobal } from '../../global';\nimport { selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\n\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport useInterval from '../../hooks/useInterval';\n\nimport Modal from '../ui/Modal';\nimport StakingInfoContent from './StakingInfoContent';\n\nimport styles from './Staking.module.scss';\n\ninterface OwnProps {\n  isOpen?: boolean;\n  onClose: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  isUnstakeRequested?: boolean;\n}\n\nconst UPDATE_UNSTAKE_DATE_INTERVAL_MS = 30000; // 30 sec\n\nfunction StakingInfoModal({\n  isOpen,\n  isUnstakeRequested,\n  onClose,\n}: OwnProps & StateProps) {\n  const { fetchBackendStakingState } = getActions();\n\n  const forceUpdate = useForceUpdate();\n\n  useInterval(forceUpdate, isUnstakeRequested ? UPDATE_UNSTAKE_DATE_INTERVAL_MS : undefined);\n\n  useEffect(() => {\n    if (isOpen) {\n      fetchBackendStakingState();\n    }\n  }, [fetchBackendStakingState, isOpen]);\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      isSlideUp\n      onClose={onClose}\n      contentClassName={buildClassName(styles.stakingInfoModalContent)}\n    >\n      <StakingInfoContent isActive={isOpen} onClose={onClose} />\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const accountState = selectCurrentAccountState(global);\n\n  return {\n    isUnstakeRequested: accountState?.isUnstakeRequested,\n  };\n})(StakingInfoModal));\n","import React, {\n  memo, useCallback, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\n\nimport { StakingState } from '../../global/types';\nimport type { GlobalState, UserToken } from '../../global/types';\n\nimport {\n  CARD_SECONDARY_VALUE_SYMBOL, MIN_BALANCE_FOR_UNSTAKE, STAKING_CYCLE_DURATION_MS, TON_TOKEN_SLUG,\n} from '../../config';\nimport { getActions, withGlobal } from '../../global';\nimport { selectCurrentAccountState, selectCurrentAccountTokens } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { formatRelativeHumanDateTime } from '../../util/dateFormat';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\nimport { ASSET_LOGO_PATHS } from '../ui/helpers/assetLogos';\n\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport useInterval from '../../hooks/useInterval';\nimport useLang from '../../hooks/useLang';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\nimport usePrevious from '../../hooks/usePrevious';\nimport useSyncEffect from '../../hooks/useSyncEffect';\n\nimport TransferResult from '../common/TransferResult';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\nimport RichNumberField from '../ui/RichNumberField';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Staking.module.scss';\n\ntype StateProps = GlobalState['staking'] & {\n  tokens?: UserToken[];\n  stakingBalance?: number;\n  endOfStakingCycle?: number;\n};\n\nconst IS_OPEN_STATES = new Set([\n  StakingState.UnstakeInitial,\n  StakingState.UnstakePassword,\n  StakingState.UnstakeComplete,\n]);\n\nconst ICON_SIZE = 80;\nconst UPDATE_UNSTAKE_DATE_INTERVAL_MS = 30000; // 30 sec\n\nfunction UnstakeModal({\n  state,\n  isLoading,\n  error,\n  tokens,\n  stakingBalance,\n  endOfStakingCycle,\n}: StateProps) {\n  const {\n    setStakingScreen,\n    cancelStaking,\n    clearStakingError,\n    submitStakingInitial,\n    submitStakingPassword,\n    fetchBackendStakingState,\n  } = getActions();\n\n  const lang = useLang();\n  const isOpen = IS_OPEN_STATES.has(state);\n  const tonToken = useMemo(() => tokens?.find(({ slug }) => slug === TON_TOKEN_SLUG), [tokens]);\n  const renderedStakingBalance = usePrevious(stakingBalance, true);\n  const renderedTokenBalance = usePrevious(tonToken?.amount, true);\n  const [unstakeDate, setUnstakeDate] = useState<number>(Date.now() + STAKING_CYCLE_DURATION_MS);\n  const hasBalanceForUnstake = tonToken && tonToken.amount >= MIN_BALANCE_FOR_UNSTAKE;\n  const forceUpdate = useForceUpdate();\n\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n\n  useEffect(() => {\n    if (isOpen) {\n      fetchBackendStakingState();\n    }\n  }, [isOpen, fetchBackendStakingState]);\n\n  useSyncEffect(() => {\n    if (endOfStakingCycle) {\n      setUnstakeDate(endOfStakingCycle);\n    }\n  }, [endOfStakingCycle]);\n\n  const refreshUnstakeDate = useCallback(() => {\n    if (unstakeDate < Date.now()) {\n      fetchBackendStakingState();\n    }\n    forceUpdate();\n  }, [fetchBackendStakingState, forceUpdate, unstakeDate]);\n\n  useInterval(refreshUnstakeDate, UPDATE_UNSTAKE_DATE_INTERVAL_MS);\n\n  const handleBackClick = useCallback(() => {\n    if (state === StakingState.UnstakePassword) {\n      setStakingScreen({ state: StakingState.UnstakeInitial });\n    }\n  }, [setStakingScreen, state]);\n\n  const handleStartUnstakeClick = useCallback(() => {\n    submitStakingInitial({ isUnstaking: true });\n  }, [submitStakingInitial]);\n\n  const handleTransferSubmit = useCallback((password: string) => {\n    submitStakingPassword({ password, isUnstaking: true });\n  }, [submitStakingPassword]);\n\n  function renderInitial(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Unstake TON')} onClose={cancelStaking} />\n        <div className={modalStyles.transitionContent}>\n          <div className={styles.welcome}>\n            <AnimatedIconWithPreview\n              size={ICON_SIZE}\n              play={isActive}\n              noLoop={false}\n              nonInteractive\n              className={styles.sticker}\n              tgsUrl={ANIMATED_STICKERS_PATHS.snitch}\n              previewUrl={ANIMATED_STICKERS_PATHS.snitchPreview}\n            />\n            <div className={styles.unstakeInformation}>\n              {lang('$unstake_information_with_time', {\n                time: <strong>{formatRelativeHumanDateTime(lang.code, unstakeDate)}</strong>,\n              })}\n            </div>\n          </div>\n\n          <RichNumberField\n            key=\"unstaking_amount\"\n            id=\"unstaking_amount\"\n            error={error ? lang(error) : undefined}\n            value={stakingBalance}\n            labelText={lang('Amount to unstake')}\n            decimals={tonToken?.decimals}\n          >\n            <div className={styles.ton}>\n              <img src={ASSET_LOGO_PATHS.ton} alt=\"\" className={styles.tonIcon} />\n              <span className={styles.tonName}>{tonToken?.symbol}</span>\n            </div>\n          </RichNumberField>\n          {!hasBalanceForUnstake && (\n            <p className={styles.insufficientBalance}>\n              {lang('$unstake_insufficient_balance', {\n                balance: `${MIN_BALANCE_FOR_UNSTAKE} ${CARD_SECONDARY_VALUE_SYMBOL}`,\n              })}\n            </p>\n          )}\n\n          <div className={modalStyles.buttons}>\n            <Button onClick={cancelStaking}>{lang('Cancel')}</Button>\n            <Button\n              isPrimary\n              onClick={handleStartUnstakeClick}\n              isLoading={isLoading}\n              isDisabled={!hasBalanceForUnstake}\n            >\n              {lang('Unstake')}\n            </Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderPassword(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Confirm Unstaking')} onClose={cancelStaking} />\n        <PasswordForm\n          isActive={isActive}\n          isLoading={isLoading}\n          error={error}\n          placeholder={lang('Confirm operation with your password')}\n          onUpdate={clearStakingError}\n          onSubmit={handleTransferSubmit}\n          submitLabel={lang('Confirm')}\n          onCancel={handleBackClick}\n          cancelLabel={lang('Back')}\n        />\n      </>\n    );\n  }\n\n  function renderComplete(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Request for unstaking is sent!')} onClose={cancelStaking} />\n\n        <div className={modalStyles.transitionContent}>\n          <TransferResult\n            color=\"green\"\n            playAnimation={isActive}\n            amount={renderedStakingBalance}\n            noSign\n            balance={renderedTokenBalance}\n            operationAmount={stakingBalance}\n          />\n\n          <div className={styles.unstakeTime}>\n            <i className={buildClassName(styles.unstakeTimeIcon, 'icon-clock')} />\n            {lang('$unstaking_when_receive', {\n              time: <strong>{formatRelativeHumanDateTime(lang.code, unstakeDate)}</strong>,\n            })}\n          </div>\n\n          <div className={modalStyles.buttons}>\n            <Button onClick={cancelStaking} isPrimary>{lang('Close')}</Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case StakingState.UnstakeInitial:\n        return renderInitial(isActive);\n\n      case StakingState.UnstakePassword:\n        return renderPassword(isActive);\n\n      case StakingState.UnstakeComplete:\n        return renderComplete(isActive);\n    }\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      isSlideUp\n      isOpen={isOpen}\n      onClose={cancelStaking}\n      noBackdropClose\n      dialogClassName={styles.modalDialog}\n      onCloseAnimationEnd={updateNextKey}\n    >\n      <Transition\n        name=\"pushSlide\"\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const tokens = selectCurrentAccountTokens(global);\n  const currentAccountState = selectCurrentAccountState(global);\n\n  return {\n    ...global.staking,\n    tokens,\n    stakingBalance: currentAccountState?.stakingBalance,\n    endOfStakingCycle: currentAccountState?.poolState?.endOfCycle,\n  };\n})(UnstakeModal));\n","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport styles from './Modal.module.scss';\n\ntype Props = {\n  className?: string;\n  children: React.ReactNode;\n};\n\nfunction ModalTransitionContent({ className, children }: Props) {\n  return <div className={buildClassName(styles.transitionContent, className)}>{children}</div>;\n}\n\nexport default memo(ModalTransitionContent);\n","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"jiIPDZKb93q0d6DR65HI\",\"contentInvoice\":\"P5JKqupCRQ7KT0CKpOu9\",\"contentQr\":\"wxQW2cO1r9NqU0tqg_XY\",\"info\":\"VCia26wVKo9zkQNfJvzp\",\"info_push\":\"pz4Oc3xcP8JTIR5NPHvv\",\"infoPush\":\"pz4Oc3xcP8JTIR5NPHvv\",\"info_small\":\"RSZE0g7xdHMKQSo7WTkB\",\"infoSmall\":\"RSZE0g7xdHMKQSo7WTkB\",\"infoStatic\":\"k5h4VYfCBTaYUoSjNP2e\",\"qrCode\":\"lZS2ULob6PiDdyGivqm8\",\"description\":\"kKL0Cn1b8nTnkaVa8iEh\",\"description_forInvoice\":\"QRXcv3ae3k67lyw5bTg0\",\"descriptionForInvoice\":\"QRXcv3ae3k67lyw5bTg0\",\"copyButtonStatic\":\"vWwa31TadP3RxFdrSfvl\",\"buttons\":\"jikxjfsqHazaFX4Su9Wq\",\"qrButton\":\"cKEIWNDh7BG05sgh2IM4\",\"qrIcon\":\"Vf7cFE5am1qzcbwX3d18\",\"tokenDropdown\":\"IJ9RAXxhcenGBwmtFJ6q\",\"invoiceComment\":\"B3ZbIL0kQplobxOwHB5g\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport { withGlobal } from '../../global';\nimport renderText from '../../global/helpers/renderText';\nimport { selectAccount } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\n\nimport Button from '../ui/Button';\nimport InteractiveTextField from '../ui/InteractiveTextField';\n\nimport styles from './ReceiveModal.module.scss';\n\ninterface StateProps {\n  address?: string;\n}\n\ntype OwnProps = {\n  isStatic?: boolean;\n  onInvoiceModalOpen: () => void;\n  onQrModalOpen: () => void;\n};\n\nfunction Content({\n  address, isStatic, onInvoiceModalOpen, onQrModalOpen,\n}: StateProps & OwnProps) {\n  const lang = useLang();\n\n  return (\n    <>\n      <div className={buildClassName(styles.info, isStatic && styles.infoStatic)}>\n        {renderText(lang('$receive_ton_description'))}\n      </div>\n\n      <p className={styles.description}>{lang('Your address')}</p>\n      <InteractiveTextField\n        address={address!}\n        className={isStatic ? styles.copyButtonStatic : undefined}\n        copyNotification={lang('Your address was copied!')}\n        noSavedAddress\n      />\n\n      <div className={styles.buttons}>\n        <Button\n          className={styles.qrButton}\n          onClick={onQrModalOpen}\n          ariaLabel={lang('Show QR-Code')}\n        >\n          <i className={buildClassName('icon-qrcode', styles.qrIcon)} aria-hidden />\n        </Button>\n        <Button onClick={onInvoiceModalOpen}>\n          {lang('Create Invoice')}\n        </Button>\n      </div>\n    </>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>((global): StateProps => {\n    const address = selectAccount(global, global.currentAccountId!)?.address;\n\n    return {\n      address,\n    };\n  })(Content),\n);\n","import captureKeyboardListener from './captureKeyboardListeners';\n\ntype IHandlerFunction = () => void;\n\nexport default function captureEscKeyListener(handler: IHandlerFunction) {\n  return captureKeyboardListener({ onEsc: handler });\n}\n","import type React from '../lib/teact/teact';\n\nconst stopEvent = (e: React.UIEvent | Event | React.FormEvent) => {\n  e.stopPropagation();\n  e.preventDefault();\n};\n\nexport default stopEvent;\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"vSXfoE_LZvr0mraGwy3k\",\"bubble\":\"OrjK7PtzczDqz_I6PouO\",\"top\":\"zHotBHm7tB286QOLDkaP\",\"bottom\":\"ktuET_rpDRjdPEO7nk7c\",\"left\":\"kMVWDKc5BlDPR7g4u8fR\",\"right\":\"xU_eU2TkTDVFBOnndEbs\",\"backdrop\":\"MyiefDaGjeIMuN5ZCplN\",\"menu\":\"PtNS17Z307LQOPcZtFgR\",\"suggestion\":\"QelsAHXDyn2r1EmVdMp5\",\"dropdown\":\"dFdVD95sEVCke66k_Q9g\"};","import type { FC } from '../../lib/teact/teact';\nimport React, { useEffect, useRef } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport captureEscKeyListener from '../../util/captureEscKeyListener';\nimport stopEvent from '../../util/stopEvent';\n\nimport useEffectWithPrevDeps from '../../hooks/useEffectWithPrevDeps';\nimport { dispatchHeavyAnimationEvent } from '../../hooks/useHeavyAnimationCheck';\nimport useShowTransition from '../../hooks/useShowTransition';\nimport useVirtualBackdrop from '../../hooks/useVirtualBackdrop';\n\nimport styles from './Menu.module.scss';\n\ntype OwnProps = {\n  children: React.ReactNode;\n  isOpen: boolean;\n  id?: string;\n  className?: string;\n  bubbleClassName?: string;\n  type?: 'menu' | 'suggestion' | 'dropdown';\n  positionX?: 'left' | 'right';\n  positionY?: 'top' | 'bottom';\n  autoClose?: boolean;\n  shouldSkipTransition?: boolean;\n  noBackdrop?: boolean;\n  noCloseOnBackdrop?: boolean;\n  onCloseAnimationEnd?: () => void;\n  onClose?: () => void;\n  onMouseEnter?: (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n  onMouseLeave?: (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n};\n\nconst ANIMATION_DURATION = 200;\n\nconst Menu: FC<OwnProps> = ({\n  children,\n  isOpen,\n  id,\n  className,\n  bubbleClassName,\n  positionX = 'left',\n  positionY = 'top',\n  type = 'menu',\n  autoClose = false,\n  shouldSkipTransition,\n  noBackdrop = false,\n  noCloseOnBackdrop = false,\n  onCloseAnimationEnd,\n  onClose,\n  onMouseEnter,\n  onMouseLeave,\n}) => {\n  // eslint-disable-next-line no-null/no-null\n  const menuRef = useRef<HTMLDivElement>(null);\n\n  const {\n    transitionClassNames,\n  } = useShowTransition(\n    isOpen,\n    onCloseAnimationEnd,\n    shouldSkipTransition,\n    undefined,\n    shouldSkipTransition,\n  );\n\n  useEffect(\n    () => (isOpen && onClose ? captureEscKeyListener(onClose) : undefined),\n    [isOpen, onClose],\n  );\n\n  useEffectWithPrevDeps(([prevIsOpen]) => {\n    if (isOpen || (!isOpen && prevIsOpen === true)) {\n      dispatchHeavyAnimationEvent(ANIMATION_DURATION);\n    }\n  }, [isOpen]);\n\n  useVirtualBackdrop(isOpen && !noBackdrop, menuRef, noCloseOnBackdrop ? undefined : onClose);\n\n  const fullBubbleClassName = buildClassName(\n    styles.bubble,\n    bubbleClassName,\n    'custom-scroll',\n    styles[positionY],\n    styles[positionX],\n    styles[type],\n    transitionClassNames,\n  );\n\n  return (\n    <div\n      id={id}\n      className={buildClassName(styles.wrapper, className)}\n      onMouseEnter={onMouseEnter}\n      onMouseLeave={isOpen ? onMouseLeave : undefined}\n    >\n      {isOpen && !noBackdrop && (\n        // This only prevents click events triggering on underlying elements\n        <div className={styles.backdrop} onClick={stopEvent} />\n      )}\n      <div\n        ref={menuRef}\n        className={fullBubbleClassName}\n        style={`transform-origin: ${positionX} ${positionY}`}\n        onClick={autoClose ? onClose : undefined}\n      >\n        {children}\n      </div>\n    </div>\n  );\n};\n\nexport default Menu;\n","import type { RefObject } from 'react';\nimport { useEffect } from '../lib/teact/teact';\n\nimport styles from '../components/ui/Menu.module.scss';\n\n// This effect implements closing menus by clicking outside of them\n// without adding extra elements to the DOM\nexport default function useVirtualBackdrop(\n  isOpen: boolean,\n  menuRef: RefObject<HTMLElement>,\n  onClose?: () => void | undefined,\n) {\n  useEffect(() => {\n    const handleEvent = (e: Event) => {\n      const menu = menuRef.current;\n      const target = e.target as HTMLElement | null;\n      if (!menu || !target) {\n        return;\n      }\n\n      if (\n        !menu.contains(e.target as Node | null)\n        || target.classList.contains(styles.backdrop)\n      ) {\n        e.preventDefault();\n        e.stopPropagation();\n        if (onClose) {\n          onClose();\n        }\n      }\n    };\n\n    if (isOpen && onClose) {\n      document.addEventListener('mousedown', handleEvent);\n    }\n\n    return () => {\n      document.removeEventListener('mousedown', handleEvent);\n    };\n  }, [isOpen, menuRef, onClose]);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"hb6lWefhuFfkWAU5ZIEq\",\"item\":\"ynZRgzlfOJPuoqAhawUI\",\"wide\":\"fSZjmeHMkVvTI2bHPT4J\",\"interactive\":\"f66IfidZx1bV5nzDdgIm\",\"label\":\"ni4ACngrjOy76conx_SD\",\"light\":\"Myjt9nrbuZvoqLmsDZIY\",\"disabled\":\"fDTtBdvgIijEK0KoUv_C\",\"buttonIcon\":\"hlSpqcev0GLST7Jwr1cF\",\"item_selected\":\"UcRe__09UlDnzo5J11P6\",\"itemSelected\":\"UcRe__09UlDnzo5J11P6\",\"item_with_icon\":\"W_z2_c40Vv7O0WLP9jkb\",\"itemWithIcon\":\"W_z2_c40Vv7O0WLP9jkb\",\"itemIcon\":\"lqziI3S3i9yirEHCJW_q\",\"itemName\":\"jo2ctB2TkkBrrZeqKjfG\"};","import React, { memo, useMemo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\n\nimport Menu from './Menu';\n\nimport styles from './DropDown.module.scss';\n\nexport interface DropdownItem {\n  value: string;\n  name: string;\n  icon?: string;\n}\n\ninterface OwnProps {\n  label?: string;\n  selectedValue: string;\n  items: DropdownItem[];\n  className?: string;\n  theme?: 'light';\n  arrow?: 'caret' | 'chevron';\n  menuPosition?: 'top' | 'bottom';\n  menuPositionHorizontal?: 'right' | 'left';\n  disabled?: boolean;\n  shouldTranslateOptions?: boolean;\n  onChange?: (value: string) => void;\n}\n\nconst DEFAULT_ARROW = 'caret';\nconst DEFAULT_MENU_POSITION_HORIZONTAL = 'right';\n\nfunction DropDown({\n  label,\n  items,\n  selectedValue,\n  className,\n  theme,\n  arrow = DEFAULT_ARROW,\n  menuPosition,\n  menuPositionHorizontal = DEFAULT_MENU_POSITION_HORIZONTAL,\n  disabled,\n  shouldTranslateOptions,\n  onChange,\n}: OwnProps): TeactJsx {\n  const lang = useLang();\n  const [isMenuOpen, openMenu, closeMenu] = useFlag();\n\n  const selectedItem = useMemo(() => {\n    return items.find((item) => item.value === selectedValue);\n  }, [items, selectedValue]);\n\n  const handleItemClick = (e: React.MouseEvent, value: string) => {\n    e.stopPropagation();\n    onChange?.(value);\n    closeMenu();\n  };\n\n  if (!items.length) {\n    return undefined;\n  }\n\n  const buttonArrowIcon = buildClassName(\n    styles.buttonIcon,\n    arrow === 'chevron' ? 'icon-chevron-down' : 'icon-caret-down',\n  );\n\n  const withMenu = items.length > 1;\n  const isFullyInteractive = Boolean(label);\n  const fullClassName = buildClassName(\n    className,\n    theme && styles[theme],\n    withMenu && styles.interactive,\n    isFullyInteractive && styles.wide,\n    isFullyInteractive && disabled && styles.disabled,\n  );\n  const buttonFullClassName = buildClassName(\n    styles.button,\n    withMenu && styles.interactive,\n    !isFullyInteractive && disabled && styles.disabled,\n  );\n\n  return (\n    <div\n      className={fullClassName}\n      onClick={isFullyInteractive && !disabled && withMenu ? openMenu : undefined}\n    >\n      {label && <span className={styles.label}>{label}</span>}\n      <button\n        type=\"button\"\n        className={buttonFullClassName}\n        onClick={!isFullyInteractive && withMenu ? openMenu : undefined}\n        disabled={disabled}\n      >\n        {selectedItem?.icon && <img src={selectedItem.icon} alt=\"\" className={styles.itemIcon} />}\n        <span className={buildClassName(styles.itemName, 'itemName')}>\n          {shouldTranslateOptions ? lang(selectedItem!.name) : selectedItem!.name}\n        </span>\n        {withMenu && <i className={buttonArrowIcon} />}\n      </button>\n      {withMenu && (\n        <Menu\n          positionX={menuPositionHorizontal}\n          positionY={menuPosition}\n          isOpen={isMenuOpen}\n          onClose={closeMenu}\n          type=\"dropdown\"\n        >\n          {items.map((item) => {\n            const buttonClassName = buildClassName(\n              styles.item,\n              item.icon && styles.item_with_icon,\n              selectedValue === item.value && styles.item_selected,\n            );\n            return (\n              <button\n                type=\"button\"\n                onClick={(e) => handleItemClick(e, item.value)}\n                className={buttonClassName}\n              >\n                {item.icon && <img src={item.icon} alt=\"\" className={styles.itemIcon} />}\n                <span className={buildClassName(styles.itemName, 'menuItemName')}>\n                  {shouldTranslateOptions ? lang(item.name) : item.name}\n                </span>\n              </button>\n            );\n          })}\n        </Menu>\n      )}\n    </div>\n  );\n}\n\nexport default memo(DropDown);\n","import TonWeb from 'tonweb';\nimport React, {\n  memo, useCallback, useMemo, useState,\n} from '../../lib/teact/teact';\n\nimport type { UserToken } from '../../global/types';\n\nimport { TON_TOKEN_SLUG } from '../../config';\nimport { withGlobal } from '../../global';\nimport { humanToBigStr } from '../../global/helpers';\nimport renderText from '../../global/helpers/renderText';\nimport { selectAccount, selectCurrentAccountTokens } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { ASSET_LOGO_PATHS } from '../ui/helpers/assetLogos';\n\nimport useLang from '../../hooks/useLang';\n\nimport Button from '../ui/Button';\nimport type { DropdownItem } from '../ui/DropDown';\nimport DropDown from '../ui/DropDown';\nimport Input from '../ui/Input';\nimport InteractiveTextField from '../ui/InteractiveTextField';\nimport Modal from '../ui/Modal';\nimport ModalTransitionContent from '../ui/ModalTransitionContent';\nimport RichNumberInput from '../ui/RichNumberInput';\n\nimport styles from './ReceiveModal.module.scss';\n\ninterface StateProps {\n  address?: string;\n  tokens?: UserToken[];\n}\n\ntype OwnProps = {\n  backButtonText?: string;\n  isOpen: boolean;\n  onBackButtonClick: () => void;\n  onClose: () => void;\n};\n\nfunction InvoiceModal({\n  address,\n  backButtonText = 'Back',\n  isOpen,\n  tokens,\n  onBackButtonClick,\n  onClose,\n}: StateProps & OwnProps) {\n  const lang = useLang();\n\n  const [amount, setAmount] = useState<number | undefined>(undefined);\n  const [comment, setComment] = useState<string>('');\n  const [hasAmountError, setHasAmountError] = useState<boolean>(false);\n\n  const invoiceAmount = amount ? humanToBigStr(amount) : undefined;\n  const invoiceUrl = address ? TonWeb.utils.formatTransferUrl(address, invoiceAmount, comment) : '';\n\n  const dropdownItems = useMemo(() => {\n    if (!tokens) {\n      return [];\n    }\n\n    return tokens.reduce<DropdownItem[]>((acc, token) => {\n      if (token.slug === TON_TOKEN_SLUG) {\n        acc.push({\n          value: token.slug,\n          icon: token.image || ASSET_LOGO_PATHS[token.symbol.toLowerCase() as keyof typeof ASSET_LOGO_PATHS],\n          name: token.symbol,\n        });\n      }\n\n      return acc;\n    }, []);\n  }, [tokens]);\n\n  const handleAmountInput = useCallback((value?: number) => {\n    setHasAmountError(false);\n\n    if (value === undefined) {\n      setAmount(undefined);\n      return;\n    }\n\n    if (Number.isNaN(value) || value < 0) {\n      setHasAmountError(true);\n      return;\n    }\n\n    setAmount(value);\n  }, []);\n\n  function renderTokens() {\n    return <DropDown items={dropdownItems} selectedValue={TON_TOKEN_SLUG} className={styles.tokenDropdown} />;\n  }\n\n  return (\n    <Modal isSlideUp hasCloseButton title={lang('Create Invoice')} isOpen={isOpen} onClose={onClose}>\n      <ModalTransitionContent className={styles.contentInvoice}>\n        <div className={buildClassName(styles.info, styles.info_push)}>\n          {renderText(lang('$receive_invoice_description'))}\n        </div>\n        <RichNumberInput\n          key=\"amount\"\n          id=\"amount\"\n          hasError={hasAmountError}\n          value={amount}\n          labelText={lang('Amount')}\n          onChange={handleAmountInput}\n        >\n          {renderTokens()}\n        </RichNumberInput>\n        <Input\n          value={comment}\n          onInput={setComment}\n          label={lang('Comment')}\n          placeholder={lang('Optional')}\n          wrapperClassName={styles.invoiceComment}\n        />\n\n        <p className={buildClassName(styles.description, styles.description_forInvoice)}>\n          {lang('Share this URL to receive TON')}\n        </p>\n        <InteractiveTextField text={invoiceUrl} copyNotification={lang('Invoice link was copied!')} />\n\n        <div className={styles.buttons}>\n          <Button onClick={onBackButtonClick}>{backButtonText ?? lang('Back')}</Button>\n        </div>\n      </ModalTransitionContent>\n    </Modal>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>((global): StateProps => {\n    const address = selectAccount(global, global.currentAccountId!)?.address;\n\n    return {\n      address,\n      tokens: selectCurrentAccountTokens(global),\n    };\n  })(InvoiceModal),\n);\n","import type { CornerDotTypes } from '../types';\n\nexport default {\n  dot: 'dot',\n  square: 'square',\n} as CornerDotTypes;\n","import type { CornerSquareTypes } from '../types';\n\nexport default {\n  dot: 'dot',\n  square: 'square',\n  extraRounded: 'extra-rounded',\n} as CornerSquareTypes;\n","import type { DotTypes } from '../types';\n\nexport default {\n  dots: 'dots',\n  rounded: 'rounded',\n  classy: 'classy',\n  classyRounded: 'classy-rounded',\n  square: 'square',\n  extraRounded: 'extra-rounded',\n} as DotTypes;\n","import type { DrawTypes } from '../types';\n\nexport default {\n  canvas: 'canvas',\n  svg: 'svg',\n} as DrawTypes;\n","interface ErrorCorrectionPercents {\n  [key: string]: number;\n}\n\nexport default {\n  L: 0.07,\n  M: 0.15,\n  Q: 0.25,\n  H: 0.3,\n} as ErrorCorrectionPercents;\n","import type { TypeNumber } from '../types';\n\ninterface TypesMap {\n  [key: number]: TypeNumber;\n}\n\nconst qrTypes: TypesMap = {};\n\nfor (let type = 0; type <= 40; type++) {\n  qrTypes[type] = type as TypeNumber;\n}\n\n// 0 types is autodetect\n\n// types = {\n//     0: 0,\n//     1: 1,\n//     ...\n//     40: 40\n// }\n\nexport default qrTypes;\n","export default function downloadURI(uri: string, name: string): void {\n  const link = document.createElement('a');\n  link.download = name;\n  link.href = uri;\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n}\n","import type { UnknownObject } from '../types';\n\nconst isObject = (obj: Record<string, unknown>): boolean => !!obj && typeof obj === 'object' && !Array.isArray(obj);\n\nexport default function mergeDeep(target: UnknownObject, ...sources: UnknownObject[]): UnknownObject {\n  if (!sources.length) return target;\n  const source = sources.shift();\n  if (source === undefined || !isObject(target) || !isObject(source)) return target;\n  target = { ...target };\n  Object.keys(source).forEach((key: string): void => {\n    const targetValue = target[key];\n    const sourceValue = source[key];\n\n    if (Array.isArray(targetValue) && Array.isArray(sourceValue)) {\n      target[key] = sourceValue;\n    } else if (isObject(targetValue) && isObject(sourceValue)) {\n      target[key] = mergeDeep({ ...targetValue }, sourceValue);\n    } else {\n      target[key] = sourceValue;\n    }\n  });\n\n  return mergeDeep(target, ...sources);\n}\n","import type { Gradient } from '../types';\n\nimport type { RequiredOptions } from '../core/QROptions';\n\nfunction sanitizeGradient(gradient: Gradient): Gradient {\n  const newGradient = { ...gradient };\n\n  if (!newGradient.colorStops || !newGradient.colorStops.length) {\n    throw new Error(\"Field 'colorStops' is required in gradient\");\n  }\n\n  if (newGradient.rotation) {\n    newGradient.rotation = Number(newGradient.rotation);\n  } else {\n    newGradient.rotation = 0;\n  }\n\n  newGradient.colorStops = newGradient.colorStops.map((colorStop: { offset: number; color: string }) => ({\n    ...colorStop,\n    offset: Number(colorStop.offset),\n  }));\n\n  return newGradient;\n}\n\nexport default function sanitizeOptions(options: RequiredOptions): RequiredOptions {\n  const newOptions = { ...options };\n\n  newOptions.width = Number(newOptions.width);\n  newOptions.height = Number(newOptions.height);\n  newOptions.margin = Number(newOptions.margin);\n  newOptions.imageOptions = {\n    ...newOptions.imageOptions,\n    hideBackgroundDots: Boolean(newOptions.imageOptions.hideBackgroundDots),\n    imageSize: Number(newOptions.imageOptions.imageSize),\n    margin: Number(newOptions.imageOptions.margin),\n  };\n\n  if (newOptions.margin > Math.min(newOptions.width, newOptions.height)) {\n    newOptions.margin = Math.min(newOptions.width, newOptions.height);\n  }\n\n  newOptions.dotsOptions = {\n    ...newOptions.dotsOptions,\n  };\n  if (newOptions.dotsOptions.gradient) {\n    newOptions.dotsOptions.gradient = sanitizeGradient(newOptions.dotsOptions.gradient);\n  }\n\n  if (newOptions.cornersSquareOptions) {\n    newOptions.cornersSquareOptions = {\n      ...newOptions.cornersSquareOptions,\n    };\n    if (newOptions.cornersSquareOptions.gradient) {\n      newOptions.cornersSquareOptions.gradient = sanitizeGradient(newOptions.cornersSquareOptions.gradient);\n    }\n  }\n\n  if (newOptions.cornersDotOptions) {\n    newOptions.cornersDotOptions = {\n      ...newOptions.cornersDotOptions,\n    };\n    if (newOptions.cornersDotOptions.gradient) {\n      newOptions.cornersDotOptions.gradient = sanitizeGradient(newOptions.cornersDotOptions.gradient);\n    }\n  }\n\n  if (newOptions.backgroundOptions) {\n    newOptions.backgroundOptions = {\n      ...newOptions.backgroundOptions,\n    };\n    if (newOptions.backgroundOptions.gradient) {\n      newOptions.backgroundOptions.gradient = sanitizeGradient(newOptions.backgroundOptions.gradient);\n    }\n  }\n\n  return newOptions;\n}\n","import type { GradientTypes } from '../types';\n\nexport default {\n  radial: 'radial',\n  linear: 'linear',\n} as GradientTypes;\n","/* eslint-disable no-underscore-dangle,class-methods-use-this,@typescript-eslint/no-unused-expressions */\nimport type {\n  BasicFigureDrawArgsCanvas, CornerDotType, DrawArgsCanvas, RotateFigureArgsCanvas,\n} from '../../../types';\n\nimport cornerDotTypes from '../../../constants/cornerDotTypes';\n\nexport default class QRCornerDot {\n  _context: CanvasRenderingContext2D;\n\n  _type: CornerDotType;\n\n  constructor({ context, type }: { context: CanvasRenderingContext2D; type: CornerDotType }) {\n    this._context = context;\n    this._type = type;\n  }\n\n  draw(x: number, y: number, size: number, rotation: number): void {\n    const context = this._context;\n    const type = this._type;\n    let drawFunction;\n\n    switch (type) {\n      case cornerDotTypes.square:\n        drawFunction = this._drawSquare;\n        break;\n      case cornerDotTypes.dot:\n      default:\n        drawFunction = this._drawDot;\n    }\n\n    drawFunction.call(this, {\n      x, y, size, context, rotation,\n    });\n  }\n\n  _rotateFigure({\n    x, y, size, context, rotation = 0, draw,\n  }: RotateFigureArgsCanvas): void {\n    const cx = x + size / 2;\n    const cy = y + size / 2;\n\n    context.translate(cx, cy);\n    rotation && context.rotate(rotation);\n    draw();\n    context.closePath();\n    rotation && context.rotate(-rotation);\n    context.translate(-cx, -cy);\n  }\n\n  _basicDot(args: BasicFigureDrawArgsCanvas): void {\n    const { size, context } = args;\n\n    this._rotateFigure({\n      ...args,\n      draw: () => {\n        context.arc(0, 0, size / 2, 0, Math.PI * 2);\n      },\n    });\n  }\n\n  _basicSquare(args: BasicFigureDrawArgsCanvas): void {\n    const { size, context } = args;\n\n    this._rotateFigure({\n      ...args,\n      draw: () => {\n        context.rect(-size / 2, -size / 2, size, size);\n      },\n    });\n  }\n\n  _drawDot({\n    x, y, size, context, rotation,\n  }: DrawArgsCanvas): void {\n    this._basicDot({\n      x, y, size, context, rotation,\n    });\n  }\n\n  _drawSquare({\n    x, y, size, context, rotation,\n  }: DrawArgsCanvas): void {\n    this._basicSquare({\n      x, y, size, context, rotation,\n    });\n  }\n}\n","/* eslint-disable no-underscore-dangle,class-methods-use-this,@typescript-eslint/no-unused-expressions */\nimport type {\n  BasicFigureDrawArgsCanvas, CornerSquareType, DrawArgsCanvas, RotateFigureArgsCanvas,\n} from '../../../types';\n\nimport cornerSquareTypes from '../../../constants/cornerSquareTypes';\n\nexport default class QRCornerSquare {\n  _context: CanvasRenderingContext2D;\n\n  _type: CornerSquareType;\n\n  constructor({ context, type }: { context: CanvasRenderingContext2D; type: CornerSquareType }) {\n    this._context = context;\n    this._type = type;\n  }\n\n  draw(x: number, y: number, size: number, rotation: number): void {\n    const context = this._context;\n    const type = this._type;\n    let drawFunction;\n\n    switch (type) {\n      case cornerSquareTypes.square:\n        drawFunction = this._drawSquare;\n        break;\n      case cornerSquareTypes.extraRounded:\n        drawFunction = this._drawExtraRounded;\n        break;\n      case cornerSquareTypes.dot:\n      default:\n        drawFunction = this._drawDot;\n    }\n\n    drawFunction.call(this, {\n      x, y, size, context, rotation,\n    });\n  }\n\n  _rotateFigure({\n    x, y, size, context, rotation = 0, draw,\n  }: RotateFigureArgsCanvas): void {\n    const cx = x + size / 2;\n    const cy = y + size / 2;\n\n    context.translate(cx, cy);\n    rotation && context.rotate(rotation);\n    draw();\n    context.closePath();\n    rotation && context.rotate(-rotation);\n    context.translate(-cx, -cy);\n  }\n\n  _basicDot(args: BasicFigureDrawArgsCanvas): void {\n    const { size, context } = args;\n    const dotSize = size / 7;\n\n    this._rotateFigure({\n      ...args,\n      draw: () => {\n        context.arc(0, 0, size / 2, 0, Math.PI * 2);\n        context.arc(0, 0, size / 2 - dotSize, 0, Math.PI * 2);\n      },\n    });\n  }\n\n  _basicSquare(args: BasicFigureDrawArgsCanvas): void {\n    const { size, context } = args;\n    const dotSize = size / 7;\n\n    this._rotateFigure({\n      ...args,\n      draw: () => {\n        context.rect(-size / 2, -size / 2, size, size);\n        context.rect(-size / 2 + dotSize, -size / 2 + dotSize, size - 2 * dotSize, size - 2 * dotSize);\n      },\n    });\n  }\n\n  _basicExtraRounded(args: BasicFigureDrawArgsCanvas): void {\n    const { size, context } = args;\n    const dotSize = size / 7;\n\n    this._rotateFigure({\n      ...args,\n      draw: () => {\n        context.arc(-dotSize, -dotSize, 2.5 * dotSize, Math.PI, -Math.PI / 2);\n        context.lineTo(dotSize, -3.5 * dotSize);\n        context.arc(dotSize, -dotSize, 2.5 * dotSize, -Math.PI / 2, 0);\n        context.lineTo(3.5 * dotSize, -dotSize);\n        context.arc(dotSize, dotSize, 2.5 * dotSize, 0, Math.PI / 2);\n        context.lineTo(-dotSize, 3.5 * dotSize);\n        context.arc(-dotSize, dotSize, 2.5 * dotSize, Math.PI / 2, Math.PI);\n        context.lineTo(-3.5 * dotSize, -dotSize);\n\n        context.arc(-dotSize, -dotSize, 1.5 * dotSize, Math.PI, -Math.PI / 2);\n        context.lineTo(dotSize, -2.5 * dotSize);\n        context.arc(dotSize, -dotSize, 1.5 * dotSize, -Math.PI / 2, 0);\n        context.lineTo(2.5 * dotSize, -dotSize);\n        context.arc(dotSize, dotSize, 1.5 * dotSize, 0, Math.PI / 2);\n        context.lineTo(-dotSize, 2.5 * dotSize);\n        context.arc(-dotSize, dotSize, 1.5 * dotSize, Math.PI / 2, Math.PI);\n        context.lineTo(-2.5 * dotSize, -dotSize);\n      },\n    });\n  }\n\n  _drawDot({\n    x, y, size, context, rotation,\n  }: DrawArgsCanvas): void {\n    this._basicDot({\n      x, y, size, context, rotation,\n    });\n  }\n\n  _drawSquare({\n    x, y, size, context, rotation,\n  }: DrawArgsCanvas): void {\n    this._basicSquare({\n      x, y, size, context, rotation,\n    });\n  }\n\n  _drawExtraRounded({\n    x, y, size, context, rotation,\n  }: DrawArgsCanvas): void {\n    this._basicExtraRounded({\n      x, y, size, context, rotation,\n    });\n  }\n}\n","/* eslint-disable no-underscore-dangle,class-methods-use-this,@typescript-eslint/no-unused-expressions */\nimport type {\n  BasicFigureDrawArgsCanvas,\n  DotType,\n  DrawArgsCanvas,\n  GetNeighbor,\n  RotateFigureArgsCanvas,\n} from '../../../types';\n\nimport dotTypes from '../../../constants/dotTypes';\n\nexport default class QRDot {\n  _context: CanvasRenderingContext2D;\n\n  _type: DotType;\n\n  constructor({ context, type }: { context: CanvasRenderingContext2D; type: DotType }) {\n    this._context = context;\n    this._type = type;\n  }\n\n  draw(x: number, y: number, size: number, getNeighbor: GetNeighbor): void {\n    const context = this._context;\n    const type = this._type;\n    let drawFunction;\n\n    switch (type) {\n      case dotTypes.dots:\n        drawFunction = this._drawDot;\n        break;\n      case dotTypes.classy:\n        drawFunction = this._drawClassy;\n        break;\n      case dotTypes.classyRounded:\n        drawFunction = this._drawClassyRounded;\n        break;\n      case dotTypes.rounded:\n        drawFunction = this._drawRounded;\n        break;\n      case dotTypes.extraRounded:\n        drawFunction = this._drawExtraRounded;\n        break;\n      case dotTypes.square:\n      default:\n        drawFunction = this._drawSquare;\n    }\n\n    drawFunction.call(this, {\n      x, y, size, context, getNeighbor,\n    });\n  }\n\n  _rotateFigure({\n    x, y, size, context, rotation = 0, draw,\n  }: RotateFigureArgsCanvas): void {\n    const cx = x + size / 2;\n    const cy = y + size / 2;\n\n    context.translate(cx, cy);\n    rotation && context.rotate(rotation);\n    draw();\n    context.closePath();\n    rotation && context.rotate(-rotation);\n    context.translate(-cx, -cy);\n  }\n\n  _basicDot(args: BasicFigureDrawArgsCanvas): void {\n    const { size, context } = args;\n\n    this._rotateFigure({\n      ...args,\n      draw: () => {\n        context.arc(0, 0, size / 2, 0, Math.PI * 2);\n      },\n    });\n  }\n\n  _basicSquare(args: BasicFigureDrawArgsCanvas): void {\n    const { size, context } = args;\n\n    this._rotateFigure({\n      ...args,\n      draw: () => {\n        context.rect(-size / 2, -size / 2, size, size);\n      },\n    });\n  }\n\n  // if rotation === 0 - right side is rounded\n  _basicSideRounded(args: BasicFigureDrawArgsCanvas): void {\n    const { size, context } = args;\n\n    this._rotateFigure({\n      ...args,\n      draw: () => {\n        context.arc(0, 0, size / 2, -Math.PI / 2, Math.PI / 2);\n        context.lineTo(-size / 2, size / 2);\n        context.lineTo(-size / 2, -size / 2);\n        context.lineTo(0, -size / 2);\n      },\n    });\n  }\n\n  // if rotation === 0 - top right corner is rounded\n  _basicCornerRounded(args: BasicFigureDrawArgsCanvas): void {\n    const { size, context } = args;\n\n    this._rotateFigure({\n      ...args,\n      draw: () => {\n        context.arc(0, 0, size / 2, -Math.PI / 2, 0);\n        context.lineTo(size / 2, size / 2);\n        context.lineTo(-size / 2, size / 2);\n        context.lineTo(-size / 2, -size / 2);\n        context.lineTo(0, -size / 2);\n      },\n    });\n  }\n\n  // if rotation === 0 - top right corner is rounded\n  _basicCornerExtraRounded(args: BasicFigureDrawArgsCanvas): void {\n    const { size, context } = args;\n\n    this._rotateFigure({\n      ...args,\n      draw: () => {\n        context.arc(-size / 2, size / 2, size, -Math.PI / 2, 0);\n        context.lineTo(-size / 2, size / 2);\n        context.lineTo(-size / 2, -size / 2);\n      },\n    });\n  }\n\n  _basicCornersRounded(args: BasicFigureDrawArgsCanvas): void {\n    const { size, context } = args;\n\n    this._rotateFigure({\n      ...args,\n      draw: () => {\n        context.arc(0, 0, size / 2, -Math.PI / 2, 0);\n        context.lineTo(size / 2, size / 2);\n        context.lineTo(0, size / 2);\n        context.arc(0, 0, size / 2, Math.PI / 2, Math.PI);\n        context.lineTo(-size / 2, -size / 2);\n        context.lineTo(0, -size / 2);\n      },\n    });\n  }\n\n  _basicCornersExtraRounded(args: BasicFigureDrawArgsCanvas): void {\n    const { size, context } = args;\n\n    this._rotateFigure({\n      ...args,\n      draw: () => {\n        context.arc(-size / 2, size / 2, size, -Math.PI / 2, 0);\n        context.arc(size / 2, -size / 2, size, Math.PI / 2, Math.PI);\n      },\n    });\n  }\n\n  _drawDot({\n    x, y, size, context,\n  }: DrawArgsCanvas): void {\n    this._basicDot({\n      x, y, size, context, rotation: 0,\n    });\n  }\n\n  _drawSquare({\n    x, y, size, context,\n  }: DrawArgsCanvas): void {\n    this._basicSquare({\n      x, y, size, context, rotation: 0,\n    });\n  }\n\n  _drawRounded({\n    x, y, size, context, getNeighbor,\n  }: DrawArgsCanvas): void {\n    const leftNeighbor = getNeighbor ? Number(getNeighbor(-1, 0)) : 0;\n    const rightNeighbor = getNeighbor ? Number(getNeighbor(1, 0)) : 0;\n    const topNeighbor = getNeighbor ? Number(getNeighbor(0, -1)) : 0;\n    const bottomNeighbor = getNeighbor ? Number(getNeighbor(0, 1)) : 0;\n\n    const neighborsCount = leftNeighbor + rightNeighbor + topNeighbor + bottomNeighbor;\n\n    if (neighborsCount === 0) {\n      this._basicDot({\n        x, y, size, context, rotation: 0,\n      });\n      return;\n    }\n\n    if (neighborsCount > 2 || (leftNeighbor && rightNeighbor) || (topNeighbor && bottomNeighbor)) {\n      this._basicSquare({\n        x, y, size, context, rotation: 0,\n      });\n      return;\n    }\n\n    if (neighborsCount === 2) {\n      let rotation = 0;\n\n      if (leftNeighbor && topNeighbor) {\n        rotation = Math.PI / 2;\n      } else if (topNeighbor && rightNeighbor) {\n        rotation = Math.PI;\n      } else if (rightNeighbor && bottomNeighbor) {\n        rotation = -Math.PI / 2;\n      }\n\n      this._basicCornerRounded({\n        x, y, size, context, rotation,\n      });\n      return;\n    }\n\n    if (neighborsCount === 1) {\n      let rotation = 0;\n\n      if (topNeighbor) {\n        rotation = Math.PI / 2;\n      } else if (rightNeighbor) {\n        rotation = Math.PI;\n      } else if (bottomNeighbor) {\n        rotation = -Math.PI / 2;\n      }\n\n      this._basicSideRounded({\n        x, y, size, context, rotation,\n      });\n    }\n  }\n\n  _drawExtraRounded({\n    x, y, size, context, getNeighbor,\n  }: DrawArgsCanvas): void {\n    const leftNeighbor = getNeighbor ? Number(getNeighbor(-1, 0)) : 0;\n    const rightNeighbor = getNeighbor ? Number(getNeighbor(1, 0)) : 0;\n    const topNeighbor = getNeighbor ? Number(getNeighbor(0, -1)) : 0;\n    const bottomNeighbor = getNeighbor ? Number(getNeighbor(0, 1)) : 0;\n\n    const neighborsCount = leftNeighbor + rightNeighbor + topNeighbor + bottomNeighbor;\n\n    if (neighborsCount === 0) {\n      this._basicDot({\n        x, y, size, context, rotation: 0,\n      });\n      return;\n    }\n\n    if (neighborsCount > 2 || (leftNeighbor && rightNeighbor) || (topNeighbor && bottomNeighbor)) {\n      this._basicSquare({\n        x, y, size, context, rotation: 0,\n      });\n      return;\n    }\n\n    if (neighborsCount === 2) {\n      let rotation = 0;\n\n      if (leftNeighbor && topNeighbor) {\n        rotation = Math.PI / 2;\n      } else if (topNeighbor && rightNeighbor) {\n        rotation = Math.PI;\n      } else if (rightNeighbor && bottomNeighbor) {\n        rotation = -Math.PI / 2;\n      }\n\n      this._basicCornerExtraRounded({\n        x, y, size, context, rotation,\n      });\n      return;\n    }\n\n    if (neighborsCount === 1) {\n      let rotation = 0;\n\n      if (topNeighbor) {\n        rotation = Math.PI / 2;\n      } else if (rightNeighbor) {\n        rotation = Math.PI;\n      } else if (bottomNeighbor) {\n        rotation = -Math.PI / 2;\n      }\n\n      this._basicSideRounded({\n        x, y, size, context, rotation,\n      });\n    }\n  }\n\n  _drawClassy({\n    x, y, size, context, getNeighbor,\n  }: DrawArgsCanvas): void {\n    const leftNeighbor = getNeighbor ? Number(getNeighbor(-1, 0)) : 0;\n    const rightNeighbor = getNeighbor ? Number(getNeighbor(1, 0)) : 0;\n    const topNeighbor = getNeighbor ? Number(getNeighbor(0, -1)) : 0;\n    const bottomNeighbor = getNeighbor ? Number(getNeighbor(0, 1)) : 0;\n\n    const neighborsCount = leftNeighbor + rightNeighbor + topNeighbor + bottomNeighbor;\n\n    if (neighborsCount === 0) {\n      this._basicCornersRounded({\n        x, y, size, context, rotation: Math.PI / 2,\n      });\n      return;\n    }\n\n    if (!leftNeighbor && !topNeighbor) {\n      this._basicCornerRounded({\n        x, y, size, context, rotation: -Math.PI / 2,\n      });\n      return;\n    }\n\n    if (!rightNeighbor && !bottomNeighbor) {\n      this._basicCornerRounded({\n        x, y, size, context, rotation: Math.PI / 2,\n      });\n      return;\n    }\n\n    this._basicSquare({\n      x, y, size, context, rotation: 0,\n    });\n  }\n\n  _drawClassyRounded({\n    x, y, size, context, getNeighbor,\n  }: DrawArgsCanvas): void {\n    const leftNeighbor = getNeighbor ? Number(getNeighbor(-1, 0)) : 0;\n    const rightNeighbor = getNeighbor ? Number(getNeighbor(1, 0)) : 0;\n    const topNeighbor = getNeighbor ? Number(getNeighbor(0, -1)) : 0;\n    const bottomNeighbor = getNeighbor ? Number(getNeighbor(0, 1)) : 0;\n\n    const neighborsCount = leftNeighbor + rightNeighbor + topNeighbor + bottomNeighbor;\n\n    if (neighborsCount === 0) {\n      this._basicCornersRounded({\n        x, y, size, context, rotation: Math.PI / 2,\n      });\n      return;\n    }\n\n    if (!leftNeighbor && !topNeighbor) {\n      this._basicCornerExtraRounded({\n        x, y, size, context, rotation: -Math.PI / 2,\n      });\n      return;\n    }\n\n    if (!rightNeighbor && !bottomNeighbor) {\n      this._basicCornerExtraRounded({\n        x, y, size, context, rotation: Math.PI / 2,\n      });\n      return;\n    }\n\n    this._basicSquare({\n      x, y, size, context, rotation: 0,\n    });\n  }\n}\n","interface ImageSizeOptions {\n  originalHeight: number;\n  originalWidth: number;\n  maxHiddenDots: number;\n  maxHiddenAxisDots?: number;\n  dotSize: number;\n}\n\ninterface ImageSizeResult {\n  height: number;\n  width: number;\n  hideYDots: number;\n  hideXDots: number;\n}\n\nexport default function calculateImageSize({\n  originalHeight,\n  originalWidth,\n  maxHiddenDots,\n  maxHiddenAxisDots,\n  dotSize,\n}: ImageSizeOptions): ImageSizeResult {\n  const hideDots = { x: 0, y: 0 };\n  const imageSize = { x: 0, y: 0 };\n\n  if (originalHeight <= 0 || originalWidth <= 0 || maxHiddenDots <= 0 || dotSize <= 0) {\n    return {\n      height: 0,\n      width: 0,\n      hideYDots: 0,\n      hideXDots: 0,\n    };\n  }\n\n  const k = originalHeight / originalWidth;\n\n  // Getting the maximum possible axis hidden dots\n  hideDots.x = Math.floor(Math.sqrt(maxHiddenDots / k));\n  // The count of hidden dot's can't be less than 1\n  if (hideDots.x <= 0) hideDots.x = 1;\n  // Check the limit of the maximum allowed axis hidden dots\n  if (maxHiddenAxisDots && maxHiddenAxisDots < hideDots.x) hideDots.x = maxHiddenAxisDots;\n  // The count of dots should be odd\n  if (hideDots.x % 2 === 0) hideDots.x--;\n  imageSize.x = hideDots.x * dotSize;\n  // Calculate opposite axis hidden dots based on axis value.\n  // The value will be odd.\n  // We use ceil to prevent dots covering by the image.\n  hideDots.y = 1 + 2 * Math.ceil((hideDots.x * k - 1) / 2);\n  imageSize.y = Math.round(imageSize.x * k);\n  // If the result dots count is bigger than max - then decrease size and calculate again\n  if (hideDots.y * hideDots.x > maxHiddenDots || (maxHiddenAxisDots && maxHiddenAxisDots < hideDots.y)) {\n    if (maxHiddenAxisDots && maxHiddenAxisDots < hideDots.y) {\n      hideDots.y = maxHiddenAxisDots;\n      if (hideDots.y % 2 === 0) hideDots.x--;\n    } else {\n      hideDots.y -= 2;\n    }\n    imageSize.y = hideDots.y * dotSize;\n    hideDots.x = 1 + 2 * Math.ceil((hideDots.y / k - 1) / 2);\n    imageSize.x = Math.round(imageSize.y / k);\n  }\n\n  return {\n    height: imageSize.y,\n    width: imageSize.x,\n    hideYDots: hideDots.y,\n    hideXDots: hideDots.x,\n  };\n}\n","/* eslint-disable */\nimport type { FilterFunction, Gradient, QRCode } from '../types';\n\nimport errorCorrectionPercents from '../constants/errorCorrectionPercents';\nimport gradientTypes from '../constants/gradientTypes';\nimport QRCornerDot from '../figures/cornerDot/canvas/QRCornerDot';\nimport QRCornerSquare from '../figures/cornerSquare/canvas/QRCornerSquare';\nimport QRDot from '../figures/dot/canvas/QRDot';\nimport calculateImageSize from '../tools/calculateImageSize';\n\nimport type { RequiredOptions } from './QROptions';\n\nconst squareMask = [\n  [1, 1, 1, 1, 1, 1, 1],\n  [1, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 1],\n  [1, 1, 1, 1, 1, 1, 1],\n];\n\nconst dotMask = [\n  [0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 1, 1, 1, 0, 0],\n  [0, 0, 1, 1, 1, 0, 0],\n  [0, 0, 1, 1, 1, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0],\n];\n\nexport default class QRCanvas {\n  _canvas: HTMLCanvasElement;\n\n  _options: RequiredOptions;\n\n  _qr?: QRCode;\n\n  _image?: HTMLImageElement;\n\n  // TODO don't pass all options to this class\n  constructor(options: RequiredOptions) {\n    this._canvas = document.createElement('canvas');\n    this._canvas.width = options.width;\n    this._canvas.height = options.height;\n    this._options = options;\n  }\n\n  get context(): CanvasRenderingContext2D | null {\n    return this._canvas.getContext('2d');\n  }\n\n  get width(): number {\n    return this._canvas.width;\n  }\n\n  get height(): number {\n    return this._canvas.height;\n  }\n\n  getCanvas(): HTMLCanvasElement {\n    return this._canvas;\n  }\n\n  clear(): void {\n    const canvasContext = this.context;\n\n    if (canvasContext) {\n      canvasContext.clearRect(0, 0, this._canvas.width, this._canvas.height);\n    }\n  }\n\n  async drawQR(qr: QRCode): Promise<void> {\n    const count = qr.getModuleCount();\n    const minSize = Math.min(this._options.width, this._options.height) - this._options.margin * 2;\n    const dotSize = Math.floor(minSize / count);\n    let drawImageSize = {\n      hideXDots: 0,\n      hideYDots: 0,\n      width: 0,\n      height: 0,\n    };\n\n    this._qr = qr;\n\n    if (this._options.image) {\n      await this.loadImage();\n      if (!this._image) return;\n      const { imageOptions, qrOptions } = this._options;\n      const coverLevel = imageOptions.imageSize * errorCorrectionPercents[qrOptions.errorCorrectionLevel];\n      const maxHiddenDots = Math.floor(coverLevel * count * count);\n\n      drawImageSize = calculateImageSize({\n        originalWidth: this._image.width,\n        originalHeight: this._image.height,\n        maxHiddenDots,\n        maxHiddenAxisDots: count - 14,\n        dotSize,\n      });\n    }\n\n    this.clear();\n    this.drawBackground();\n    this.drawDots((i: number, j: number): boolean => {\n      if (this._options.imageOptions.hideBackgroundDots) {\n        if (\n          i >= (count - drawImageSize.hideXDots) / 2\n          && i < (count + drawImageSize.hideXDots) / 2\n          && j >= (count - drawImageSize.hideYDots) / 2\n          && j < (count + drawImageSize.hideYDots) / 2\n        ) {\n          return false;\n        }\n      }\n\n      if (squareMask[i]?.[j] || squareMask[i - count + 7]?.[j] || squareMask[i]?.[j - count + 7]) {\n        return false;\n      }\n\n      if (dotMask[i]?.[j] || dotMask[i - count + 7]?.[j] || dotMask[i]?.[j - count + 7]) {\n        return false;\n      }\n\n      return true;\n    });\n    this.drawCorners();\n\n    if (this._options.image) {\n      this.drawImage({\n        width: drawImageSize.width, height: drawImageSize.height, count, dotSize,\n      });\n    }\n  }\n\n  drawBackground(): void {\n    const canvasContext = this.context;\n    const options = this._options;\n\n    if (canvasContext) {\n      if (options.backgroundOptions.gradient) {\n        const gradientOptions = options.backgroundOptions.gradient;\n        const gradient = this._createGradient({\n          context: canvasContext,\n          options: gradientOptions,\n          additionalRotation: 0,\n          x: 0,\n          y: 0,\n          size: this._canvas.width > this._canvas.height ? this._canvas.width : this._canvas.height,\n        });\n\n        gradientOptions.colorStops.forEach(({ offset, color }: { offset: number; color: string }) => {\n          gradient.addColorStop(offset, color);\n        });\n\n        canvasContext.fillStyle = gradient;\n      } else if (options.backgroundOptions.color) {\n        canvasContext.fillStyle = options.backgroundOptions.color;\n      }\n      canvasContext.fillRect(0, 0, this._canvas.width, this._canvas.height);\n    }\n  }\n\n  drawDots(filter?: FilterFunction): void {\n    if (!this._qr) {\n      throw new Error('QR code is not defined');\n    }\n\n    const canvasContext = this.context;\n\n    if (!canvasContext) {\n      throw new Error('QR code is not defined');\n    }\n\n    const options = this._options;\n    const count = this._qr.getModuleCount();\n\n    if (count > options.width || count > options.height) {\n      throw new Error('The canvas is too small');\n    }\n\n    const minSize = Math.min(options.width, options.height) - options.margin * 2;\n    const dotSize = Math.floor(minSize / count);\n    const xBeginning = Math.floor((options.width - count * dotSize) / 2);\n    const yBeginning = Math.floor((options.height - count * dotSize) / 2);\n    const dot = new QRDot({ context: canvasContext, type: options.dotsOptions.type });\n\n    canvasContext.beginPath();\n\n    for (let i = 0; i < count; i++) {\n      for (let j = 0; j < count; j++) {\n        if (filter && !filter(i, j)) {\n          continue;\n        }\n        if (!this._qr.isDark(i, j)) {\n          continue;\n        }\n        dot.draw(\n          xBeginning + i * dotSize,\n          yBeginning + j * dotSize,\n          dotSize,\n          (xOffset: number, yOffset: number): boolean => {\n            if (i + xOffset < 0 || j + yOffset < 0 || i + xOffset >= count || j + yOffset >= count) return false;\n            if (filter && !filter(i + xOffset, j + yOffset)) return false;\n            return !!this._qr && this._qr.isDark(i + xOffset, j + yOffset);\n          },\n        );\n      }\n    }\n\n    if (options.dotsOptions.gradient) {\n      const gradientOptions = options.dotsOptions.gradient;\n      const gradient = this._createGradient({\n        context: canvasContext,\n        options: gradientOptions,\n        additionalRotation: 0,\n        x: xBeginning,\n        y: yBeginning,\n        size: count * dotSize,\n      });\n\n      gradientOptions.colorStops.forEach(({ offset, color }: { offset: number; color: string }) => {\n        gradient.addColorStop(offset, color);\n      });\n\n      canvasContext.fillStyle = canvasContext.strokeStyle = gradient;\n    } else if (options.dotsOptions.color) {\n      canvasContext.fillStyle = canvasContext.strokeStyle = options.dotsOptions.color;\n    }\n\n    canvasContext.fill('evenodd');\n  }\n\n  drawCorners(filter?: FilterFunction): void {\n    if (!this._qr) {\n      throw new Error('QR code is not defined');\n    }\n\n    const canvasContext = this.context;\n\n    if (!canvasContext) {\n      throw new Error('QR code is not defined');\n    }\n\n    const options = this._options;\n\n    const count = this._qr.getModuleCount();\n    const minSize = Math.min(options.width, options.height) - options.margin * 2;\n    const dotSize = Math.floor(minSize / count);\n    const cornersSquareSize = dotSize * 7;\n    const cornersDotSize = dotSize * 3;\n    const xBeginning = Math.floor((options.width - count * dotSize) / 2);\n    const yBeginning = Math.floor((options.height - count * dotSize) / 2);\n\n    [\n      [0, 0, 0],\n      [1, 0, Math.PI / 2],\n      [0, 1, -Math.PI / 2],\n    ].forEach(([column, row, rotation]) => {\n      if (filter && !filter(column, row)) {\n        return;\n      }\n\n      const x = xBeginning + column * dotSize * (count - 7);\n      const y = yBeginning + row * dotSize * (count - 7);\n\n      if (options.cornersSquareOptions?.type) {\n        const cornersSquare = new QRCornerSquare({ context: canvasContext, type: options.cornersSquareOptions?.type });\n\n        canvasContext.beginPath();\n        cornersSquare.draw(x, y, cornersSquareSize, rotation);\n      } else {\n        const dot = new QRDot({ context: canvasContext, type: options.dotsOptions.type });\n\n        canvasContext.beginPath();\n\n        for (let i = 0; i < squareMask.length; i++) {\n          for (let j = 0; j < squareMask[i].length; j++) {\n            if (!squareMask[i]?.[j]) {\n              continue;\n            }\n\n            dot.draw(\n              x + i * dotSize,\n              y + j * dotSize,\n              dotSize,\n              (xOffset: number, yOffset: number): boolean => !!squareMask[i + xOffset]?.[j + yOffset],\n            );\n          }\n        }\n      }\n\n      if (options.cornersSquareOptions?.gradient) {\n        const gradientOptions = options.cornersSquareOptions.gradient;\n        const gradient = this._createGradient({\n          context: canvasContext,\n          options: gradientOptions,\n          additionalRotation: rotation,\n          x,\n          y,\n          size: cornersSquareSize,\n        });\n\n        gradientOptions.colorStops.forEach(({ offset, color }: { offset: number; color: string }) => {\n          gradient.addColorStop(offset, color);\n        });\n\n        canvasContext.fillStyle = canvasContext.strokeStyle = gradient;\n      } else if (options.cornersSquareOptions?.color) {\n        canvasContext.fillStyle = canvasContext.strokeStyle = options.cornersSquareOptions.color;\n      }\n\n      canvasContext.fill('evenodd');\n\n      if (options.cornersDotOptions?.type) {\n        const cornersDot = new QRCornerDot({ context: canvasContext, type: options.cornersDotOptions?.type });\n\n        canvasContext.beginPath();\n        cornersDot.draw(x + dotSize * 2, y + dotSize * 2, cornersDotSize, rotation);\n      } else {\n        const dot = new QRDot({ context: canvasContext, type: options.dotsOptions.type });\n\n        canvasContext.beginPath();\n\n        for (let i = 0; i < dotMask.length; i++) {\n          for (let j = 0; j < dotMask[i].length; j++) {\n            if (!dotMask[i]?.[j]) {\n              continue;\n            }\n\n            dot.draw(\n              x + i * dotSize,\n              y + j * dotSize,\n              dotSize,\n              (xOffset: number, yOffset: number): boolean => !!dotMask[i + xOffset]?.[j + yOffset],\n            );\n          }\n        }\n      }\n\n      if (options.cornersDotOptions?.gradient) {\n        const gradientOptions = options.cornersDotOptions.gradient;\n        const gradient = this._createGradient({\n          context: canvasContext,\n          options: gradientOptions,\n          additionalRotation: rotation,\n          x: x + dotSize * 2,\n          y: y + dotSize * 2,\n          size: cornersDotSize,\n        });\n\n        gradientOptions.colorStops.forEach(({ offset, color }: { offset: number; color: string }) => {\n          gradient.addColorStop(offset, color);\n        });\n\n        canvasContext.fillStyle = canvasContext.strokeStyle = gradient;\n      } else if (options.cornersDotOptions?.color) {\n        canvasContext.fillStyle = canvasContext.strokeStyle = options.cornersDotOptions.color;\n      }\n\n      canvasContext.fill('evenodd');\n    });\n  }\n\n  loadImage(): Promise<void> {\n    return new Promise((resolve, reject) => {\n      const options = this._options;\n      const image = new Image();\n\n      if (!options.image) {\n        return reject('Image is not defined');\n      }\n\n      if (typeof options.imageOptions.crossOrigin === 'string') {\n        image.crossOrigin = options.imageOptions.crossOrigin;\n      }\n\n      this._image = image;\n      image.onload = (): void => {\n        resolve();\n      };\n      image.src = options.image;\n    });\n  }\n\n  drawImage({\n    width,\n    height,\n    count,\n    dotSize,\n  }: {\n    width: number;\n    height: number;\n    count: number;\n    dotSize: number;\n  }): void {\n    const canvasContext = this.context;\n\n    if (!canvasContext) {\n      throw 'canvasContext is not defined';\n    }\n\n    if (!this._image) {\n      throw 'image is not defined';\n    }\n\n    const options = this._options;\n    const xBeginning = Math.floor((options.width - count * dotSize) / 2);\n    const yBeginning = Math.floor((options.height - count * dotSize) / 2);\n    const dx = xBeginning + options.imageOptions.margin + (count * dotSize - width) / 2;\n    const dy = yBeginning + options.imageOptions.margin + (count * dotSize - height) / 2;\n    const dw = width - options.imageOptions.margin * 2;\n    const dh = height - options.imageOptions.margin * 2;\n\n    canvasContext.drawImage(this._image, dx, dy, dw < 0 ? 0 : dw, dh < 0 ? 0 : dh);\n  }\n\n  _createGradient({\n    context,\n    options,\n    additionalRotation,\n    x,\n    y,\n    size,\n  }: {\n    context: CanvasRenderingContext2D;\n    options: Gradient;\n    additionalRotation: number;\n    x: number;\n    y: number;\n    size: number;\n  }): CanvasGradient {\n    let gradient;\n\n    if (options.type === gradientTypes.radial) {\n      gradient = context.createRadialGradient(x + size / 2, y + size / 2, 0, x + size / 2, y + size / 2, size / 2);\n    } else {\n      const rotation = ((options.rotation || 0) + additionalRotation) % (2 * Math.PI);\n      const positiveRotation = (rotation + 2 * Math.PI) % (2 * Math.PI);\n      let x0 = x + size / 2;\n      let y0 = y + size / 2;\n      let x1 = x + size / 2;\n      let y1 = y + size / 2;\n\n      if (\n        (positiveRotation >= 0 && positiveRotation <= 0.25 * Math.PI)\n        || (positiveRotation > 1.75 * Math.PI && positiveRotation <= 2 * Math.PI)\n      ) {\n        x0 -= size / 2;\n        y0 -= (size / 2) * Math.tan(rotation);\n        x1 += size / 2;\n        y1 += (size / 2) * Math.tan(rotation);\n      } else if (positiveRotation > 0.25 * Math.PI && positiveRotation <= 0.75 * Math.PI) {\n        y0 -= size / 2;\n        x0 -= size / 2 / Math.tan(rotation);\n        y1 += size / 2;\n        x1 += size / 2 / Math.tan(rotation);\n      } else if (positiveRotation > 0.75 * Math.PI && positiveRotation <= 1.25 * Math.PI) {\n        x0 += size / 2;\n        y0 += (size / 2) * Math.tan(rotation);\n        x1 -= size / 2;\n        y1 -= (size / 2) * Math.tan(rotation);\n      } else if (positiveRotation > 1.25 * Math.PI && positiveRotation <= 1.75 * Math.PI) {\n        y0 += size / 2;\n        x0 += size / 2 / Math.tan(rotation);\n        y1 -= size / 2;\n        x1 -= size / 2 / Math.tan(rotation);\n      }\n\n      gradient = context.createLinearGradient(Math.round(x0), Math.round(y0), Math.round(x1), Math.round(y1));\n    }\n\n    return gradient;\n  }\n}\n","import type {\n  DotType, DrawType, ErrorCorrectionLevel, Gradient, Mode, Options, TypeNumber,\n} from '../types';\n\nimport drawTypes from '../constants/drawTypes';\nimport errorCorrectionLevels from '../constants/errorCorrectionLevels';\nimport qrTypes from '../constants/qrTypes';\n\nexport interface RequiredOptions extends Options {\n  type: DrawType;\n  width: number;\n  height: number;\n  margin: number;\n  data: string;\n  qrOptions: {\n    typeNumber: TypeNumber;\n    mode?: Mode;\n    errorCorrectionLevel: ErrorCorrectionLevel;\n  };\n  imageOptions: {\n    hideBackgroundDots: boolean;\n    imageSize: number;\n    crossOrigin?: string;\n    margin: number;\n  };\n  dotsOptions: {\n    type: DotType;\n    color: string;\n    gradient?: Gradient;\n  };\n  backgroundOptions: {\n    color: string;\n    gradient?: Gradient;\n  };\n}\n\nconst defaultOptions: RequiredOptions = {\n  type: drawTypes.canvas,\n  width: 300,\n  height: 300,\n  data: '',\n  margin: 0,\n  qrOptions: {\n    typeNumber: qrTypes[0],\n    mode: undefined,\n    errorCorrectionLevel: errorCorrectionLevels.Q,\n  },\n  imageOptions: {\n    hideBackgroundDots: true,\n    imageSize: 0.4,\n    crossOrigin: undefined,\n    margin: 0,\n  },\n  dotsOptions: {\n    type: 'square',\n    color: '#000',\n  },\n  backgroundOptions: {\n    color: '#fff',\n  },\n};\n\nexport default defaultOptions;\n","import type { ErrorCorrectionLevel } from '../types';\n\ninterface ErrorCorrectionLevels {\n  [key: string]: ErrorCorrectionLevel;\n}\n\nexport default {\n  L: 'L',\n  M: 'M',\n  Q: 'Q',\n  H: 'H',\n} as ErrorCorrectionLevels;\n","/* eslint-disable no-underscore-dangle */\nimport type {\n  BasicFigureDrawArgs, CornerDotType, DrawArgs, RotateFigureArgs,\n} from '../../../types';\n\nimport cornerDotTypes from '../../../constants/cornerDotTypes';\n\nexport default class QRCornerDot {\n  _element?: SVGElement;\n\n  _svg: SVGElement;\n\n  _type: CornerDotType;\n\n  constructor({ svg, type }: { svg: SVGElement; type: CornerDotType }) {\n    this._svg = svg;\n    this._type = type;\n  }\n\n  draw(x: number, y: number, size: number, rotation: number): void {\n    const type = this._type;\n    let drawFunction;\n\n    switch (type) {\n      case cornerDotTypes.square:\n        drawFunction = this._drawSquare;\n        break;\n      case cornerDotTypes.dot:\n      default:\n        drawFunction = this._drawDot;\n    }\n\n    drawFunction.call(this, {\n      x, y, size, rotation,\n    });\n  }\n\n  _rotateFigure({\n    x, y, size, rotation = 0, draw,\n  }: RotateFigureArgs): void {\n    const cx = x + size / 2;\n    const cy = y + size / 2;\n\n    draw();\n    this._element?.setAttribute('transform', `rotate(${(180 * rotation) / Math.PI},${cx},${cy})`);\n  }\n\n  _basicDot(args: BasicFigureDrawArgs): void {\n    const { size, x, y } = args;\n\n    this._rotateFigure({\n      ...args,\n      draw: () => {\n        this._element = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\n        this._element.setAttribute('cx', String(x + size / 2));\n        this._element.setAttribute('cy', String(y + size / 2));\n        this._element.setAttribute('r', String(size / 2));\n      },\n    });\n  }\n\n  _basicSquare(args: BasicFigureDrawArgs): void {\n    const { size, x, y } = args;\n\n    this._rotateFigure({\n      ...args,\n      draw: () => {\n        this._element = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n        this._element.setAttribute('x', String(x));\n        this._element.setAttribute('y', String(y));\n        this._element.setAttribute('width', String(size));\n        this._element.setAttribute('height', String(size));\n      },\n    });\n  }\n\n  _drawDot({\n    x, y, size, rotation,\n  }: DrawArgs): void {\n    this._basicDot({\n      x, y, size, rotation,\n    });\n  }\n\n  _drawSquare({\n    x, y, size, rotation,\n  }: DrawArgs): void {\n    this._basicSquare({\n      x, y, size, rotation,\n    });\n  }\n}\n","/* eslint-disable no-underscore-dangle */\nimport type {\n  BasicFigureDrawArgs, CornerSquareType, DrawArgs, RotateFigureArgs,\n} from '../../../types';\n\nimport cornerSquareTypes from '../../../constants/cornerSquareTypes';\n\nexport default class QRCornerSquare {\n  _element?: SVGElement;\n\n  _svg: SVGElement;\n\n  _type: CornerSquareType;\n\n  constructor({ svg, type }: { svg: SVGElement; type: CornerSquareType }) {\n    this._svg = svg;\n    this._type = type;\n  }\n\n  draw(x: number, y: number, size: number, rotation: number): void {\n    const type = this._type;\n    let drawFunction;\n\n    switch (type) {\n      case cornerSquareTypes.square:\n        drawFunction = this._drawSquare;\n        break;\n      case cornerSquareTypes.extraRounded:\n        drawFunction = this._drawExtraRounded;\n        break;\n      case cornerSquareTypes.dot:\n      default:\n        drawFunction = this._drawDot;\n    }\n\n    drawFunction.call(this, {\n      x, y, size, rotation,\n    });\n  }\n\n  _rotateFigure({\n    x, y, size, rotation = 0, draw,\n  }: RotateFigureArgs): void {\n    const cx = x + size / 2;\n    const cy = y + size / 2;\n\n    draw();\n    this._element?.setAttribute('transform', `rotate(${(180 * rotation) / Math.PI},${cx},${cy})`);\n  }\n\n  _basicDot(args: BasicFigureDrawArgs): void {\n    const { size, x, y } = args;\n    const dotSize = size / 7;\n\n    this._rotateFigure({\n      ...args,\n      draw: () => {\n        this._element = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n        this._element.setAttribute('clip-rule', 'evenodd');\n        this._element.setAttribute(\n          'd',\n          `M ${x + size / 2} ${y}` // M cx, y //  Move to top of ring\n            + `a ${size / 2} ${size / 2} 0 1 0 0.1 0` // a outerRadius, outerRadius, 0, 1, 0, 1, 0 // Draw outer arc, but don't close it\n            + 'z' // Z // Close the outer shape\n            + `m 0 ${dotSize}` // m -1 outerRadius-innerRadius // Move to top point of inner radius\n            + `a ${size / 2 - dotSize} ${size / 2 - dotSize} 0 1 1 -0.1 0` // a innerRadius, innerRadius, 0, 1, 1, -1, 0 // Draw inner arc, but don't close it\n            + 'Z', // Z // Close the inner ring. Actually will still work without, but inner ring will have one unit missing in stroke\n        );\n      },\n    });\n  }\n\n  _basicSquare(args: BasicFigureDrawArgs): void {\n    const { size, x, y } = args;\n    const dotSize = size / 7;\n\n    this._rotateFigure({\n      ...args,\n      draw: () => {\n        this._element = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n        this._element.setAttribute('clip-rule', 'evenodd');\n        this._element.setAttribute(\n          'd',\n          `M ${x} ${y}`\n            + `v ${size}`\n            + `h ${size}`\n            + `v ${-size}`\n            + 'z'\n            + `M ${x + dotSize} ${y + dotSize}`\n            + `h ${size - 2 * dotSize}`\n            + `v ${size - 2 * dotSize}`\n            + `h ${-size + 2 * dotSize}`\n            + 'z',\n        );\n      },\n    });\n  }\n\n  _basicExtraRounded(args: BasicFigureDrawArgs): void {\n    const { size, x, y } = args;\n    const dotSize = size / 7;\n\n    this._rotateFigure({\n      ...args,\n      draw: () => {\n        this._element = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n        this._element.setAttribute('clip-rule', 'evenodd');\n        this._element.setAttribute(\n          'd',\n          `M ${x} ${y + 2.5 * dotSize}`\n            + `v ${2 * dotSize}`\n            + `a ${2.5 * dotSize} ${2.5 * dotSize}, 0, 0, 0, ${dotSize * 2.5} ${dotSize * 2.5}`\n            + `h ${2 * dotSize}`\n            + `a ${2.5 * dotSize} ${2.5 * dotSize}, 0, 0, 0, ${dotSize * 2.5} ${-dotSize * 2.5}`\n            + `v ${-2 * dotSize}`\n            + `a ${2.5 * dotSize} ${2.5 * dotSize}, 0, 0, 0, ${-dotSize * 2.5} ${-dotSize * 2.5}`\n            + `h ${-2 * dotSize}`\n            + `a ${2.5 * dotSize} ${2.5 * dotSize}, 0, 0, 0, ${-dotSize * 2.5} ${dotSize * 2.5}`\n            + `M ${x + 2.5 * dotSize} ${y + dotSize}`\n            + `h ${2 * dotSize}`\n            + `a ${1.5 * dotSize} ${1.5 * dotSize}, 0, 0, 1, ${dotSize * 1.5} ${dotSize * 1.5}`\n            + `v ${2 * dotSize}`\n            + `a ${1.5 * dotSize} ${1.5 * dotSize}, 0, 0, 1, ${-dotSize * 1.5} ${dotSize * 1.5}`\n            + `h ${-2 * dotSize}`\n            + `a ${1.5 * dotSize} ${1.5 * dotSize}, 0, 0, 1, ${-dotSize * 1.5} ${-dotSize * 1.5}`\n            + `v ${-2 * dotSize}`\n            + `a ${1.5 * dotSize} ${1.5 * dotSize}, 0, 0, 1, ${dotSize * 1.5} ${-dotSize * 1.5}`,\n        );\n      },\n    });\n  }\n\n  _drawDot({\n    x, y, size, rotation,\n  }: DrawArgs): void {\n    this._basicDot({\n      x, y, size, rotation,\n    });\n  }\n\n  _drawSquare({\n    x, y, size, rotation,\n  }: DrawArgs): void {\n    this._basicSquare({\n      x, y, size, rotation,\n    });\n  }\n\n  _drawExtraRounded({\n    x, y, size, rotation,\n  }: DrawArgs): void {\n    this._basicExtraRounded({\n      x, y, size, rotation,\n    });\n  }\n}\n","/* eslint-disable no-underscore-dangle */\nimport type {\n  BasicFigureDrawArgs, DotType, DrawArgs, GetNeighbor, RotateFigureArgs,\n} from '../../../types';\n\nimport dotTypes from '../../../constants/dotTypes';\n\nexport default class QRDot {\n  _element?: SVGElement;\n\n  _svg: SVGElement;\n\n  _type: DotType;\n\n  constructor({ svg, type }: { svg: SVGElement; type: DotType }) {\n    this._svg = svg;\n    this._type = type;\n  }\n\n  draw(x: number, y: number, size: number, getNeighbor: GetNeighbor): void {\n    const type = this._type;\n    let drawFunction;\n\n    switch (type) {\n      case dotTypes.dots:\n        drawFunction = this._drawDot;\n        break;\n      case dotTypes.classy:\n        drawFunction = this._drawClassy;\n        break;\n      case dotTypes.classyRounded:\n        drawFunction = this._drawClassyRounded;\n        break;\n      case dotTypes.rounded:\n        drawFunction = this._drawRounded;\n        break;\n      case dotTypes.extraRounded:\n        drawFunction = this._drawExtraRounded;\n        break;\n      case dotTypes.square:\n      default:\n        drawFunction = this._drawSquare;\n    }\n\n    drawFunction.call(this, {\n      x, y, size, getNeighbor,\n    });\n  }\n\n  _rotateFigure({\n    x, y, size, rotation = 0, draw,\n  }: RotateFigureArgs): void {\n    const cx = x + size / 2;\n    const cy = y + size / 2;\n\n    draw();\n    this._element?.setAttribute('transform', `rotate(${(180 * rotation) / Math.PI},${cx},${cy})`);\n  }\n\n  _basicDot(args: BasicFigureDrawArgs): void {\n    const { size, x, y } = args;\n\n    this._rotateFigure({\n      ...args,\n      draw: () => {\n        this._element = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\n        this._element.setAttribute('cx', String(x + size / 2));\n        this._element.setAttribute('cy', String(y + size / 2));\n        this._element.setAttribute('r', String(size / 2));\n      },\n    });\n  }\n\n  _basicSquare(args: BasicFigureDrawArgs): void {\n    const { size, x, y } = args;\n\n    this._rotateFigure({\n      ...args,\n      draw: () => {\n        this._element = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n        this._element.setAttribute('x', String(x));\n        this._element.setAttribute('y', String(y));\n        this._element.setAttribute('width', String(size));\n        this._element.setAttribute('height', String(size));\n      },\n    });\n  }\n\n  // if rotation === 0 - right side is rounded\n  _basicSideRounded(args: BasicFigureDrawArgs): void {\n    const { size, x, y } = args;\n\n    this._rotateFigure({\n      ...args,\n      draw: () => {\n        this._element = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n        this._element.setAttribute(\n          'd',\n          `M ${x} ${y}` // go to top left position\n            + `v ${size}` // draw line to left bottom corner\n            + `h ${size / 2}` // draw line to left bottom corner + half of size right\n            + `a ${size / 2} ${size / 2}, 0, 0, 0, 0 ${-size}`, // draw rounded corner\n        );\n      },\n    });\n  }\n\n  // if rotation === 0 - top right corner is rounded\n  _basicCornerRounded(args: BasicFigureDrawArgs): void {\n    const { size, x, y } = args;\n\n    this._rotateFigure({\n      ...args,\n      draw: () => {\n        this._element = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n        this._element.setAttribute(\n          'd',\n          `M ${x} ${y}` // go to top left position\n            + `v ${size}` // draw line to left bottom corner\n            + `h ${size}` // draw line to right bottom corner\n            + `v ${-size / 2}` // draw line to right bottom corner + half of size top\n            + `a ${size / 2} ${size / 2}, 0, 0, 0, ${-size / 2} ${-size / 2}`, // draw rounded corner\n        );\n      },\n    });\n  }\n\n  // if rotation === 0 - top right corner is rounded\n  _basicCornerExtraRounded(args: BasicFigureDrawArgs): void {\n    const { size, x, y } = args;\n\n    this._rotateFigure({\n      ...args,\n      draw: () => {\n        this._element = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n        this._element.setAttribute(\n          'd',\n          `M ${x} ${y}` // go to top left position\n            + `v ${size}` // draw line to left bottom corner\n            + `h ${size}` // draw line to right bottom corner\n            + `a ${size} ${size}, 0, 0, 0, ${-size} ${-size}`, // draw rounded top right corner\n        );\n      },\n    });\n  }\n\n  // if rotation === 0 - left bottom and right top corners are rounded\n  _basicCornersRounded(args: BasicFigureDrawArgs): void {\n    const { size, x, y } = args;\n\n    this._rotateFigure({\n      ...args,\n      draw: () => {\n        this._element = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n        this._element.setAttribute(\n          'd',\n          `M ${x} ${y}` // go to left top position\n            + `v ${size / 2}` // draw line to left top corner + half of size bottom\n            + `a ${size / 2} ${size / 2}, 0, 0, 0, ${size / 2} ${size / 2}` // draw rounded left bottom corner\n            + `h ${size / 2}` // draw line to right bottom corner\n            + `v ${-size / 2}` // draw line to right bottom corner + half of size top\n            + `a ${size / 2} ${size / 2}, 0, 0, 0, ${-size / 2} ${-size / 2}`, // draw rounded right top corner\n        );\n      },\n    });\n  }\n\n  _drawDot({ x, y, size }: DrawArgs): void {\n    this._basicDot({\n      x, y, size, rotation: 0,\n    });\n  }\n\n  _drawSquare({ x, y, size }: DrawArgs): void {\n    this._basicSquare({\n      x, y, size, rotation: 0,\n    });\n  }\n\n  _drawRounded({\n    x, y, size, getNeighbor,\n  }: DrawArgs): void {\n    const leftNeighbor = getNeighbor ? Number(getNeighbor(-1, 0)) : 0;\n    const rightNeighbor = getNeighbor ? Number(getNeighbor(1, 0)) : 0;\n    const topNeighbor = getNeighbor ? Number(getNeighbor(0, -1)) : 0;\n    const bottomNeighbor = getNeighbor ? Number(getNeighbor(0, 1)) : 0;\n\n    const neighborsCount = leftNeighbor + rightNeighbor + topNeighbor + bottomNeighbor;\n\n    if (neighborsCount === 0) {\n      this._basicDot({\n        x, y, size, rotation: 0,\n      });\n      return;\n    }\n\n    if (neighborsCount > 2 || (leftNeighbor && rightNeighbor) || (topNeighbor && bottomNeighbor)) {\n      this._basicSquare({\n        x, y, size, rotation: 0,\n      });\n      return;\n    }\n\n    if (neighborsCount === 2) {\n      let rotation = 0;\n\n      if (leftNeighbor && topNeighbor) {\n        rotation = Math.PI / 2;\n      } else if (topNeighbor && rightNeighbor) {\n        rotation = Math.PI;\n      } else if (rightNeighbor && bottomNeighbor) {\n        rotation = -Math.PI / 2;\n      }\n\n      this._basicCornerRounded({\n        x, y, size, rotation,\n      });\n      return;\n    }\n\n    if (neighborsCount === 1) {\n      let rotation = 0;\n\n      if (topNeighbor) {\n        rotation = Math.PI / 2;\n      } else if (rightNeighbor) {\n        rotation = Math.PI;\n      } else if (bottomNeighbor) {\n        rotation = -Math.PI / 2;\n      }\n\n      this._basicSideRounded({\n        x, y, size, rotation,\n      });\n    }\n  }\n\n  _drawExtraRounded({\n    x, y, size, getNeighbor,\n  }: DrawArgs): void {\n    const leftNeighbor = getNeighbor ? Number(getNeighbor(-1, 0)) : 0;\n    const rightNeighbor = getNeighbor ? Number(getNeighbor(1, 0)) : 0;\n    const topNeighbor = getNeighbor ? Number(getNeighbor(0, -1)) : 0;\n    const bottomNeighbor = getNeighbor ? Number(getNeighbor(0, 1)) : 0;\n\n    const neighborsCount = leftNeighbor + rightNeighbor + topNeighbor + bottomNeighbor;\n\n    if (neighborsCount === 0) {\n      this._basicDot({\n        x, y, size, rotation: 0,\n      });\n      return;\n    }\n\n    if (neighborsCount > 2 || (leftNeighbor && rightNeighbor) || (topNeighbor && bottomNeighbor)) {\n      this._basicSquare({\n        x, y, size, rotation: 0,\n      });\n      return;\n    }\n\n    if (neighborsCount === 2) {\n      let rotation = 0;\n\n      if (leftNeighbor && topNeighbor) {\n        rotation = Math.PI / 2;\n      } else if (topNeighbor && rightNeighbor) {\n        rotation = Math.PI;\n      } else if (rightNeighbor && bottomNeighbor) {\n        rotation = -Math.PI / 2;\n      }\n\n      this._basicCornerExtraRounded({\n        x, y, size, rotation,\n      });\n      return;\n    }\n\n    if (neighborsCount === 1) {\n      let rotation = 0;\n\n      if (topNeighbor) {\n        rotation = Math.PI / 2;\n      } else if (rightNeighbor) {\n        rotation = Math.PI;\n      } else if (bottomNeighbor) {\n        rotation = -Math.PI / 2;\n      }\n\n      this._basicSideRounded({\n        x, y, size, rotation,\n      });\n    }\n  }\n\n  _drawClassy({\n    x, y, size, getNeighbor,\n  }: DrawArgs): void {\n    const leftNeighbor = getNeighbor ? Number(getNeighbor(-1, 0)) : 0;\n    const rightNeighbor = getNeighbor ? Number(getNeighbor(1, 0)) : 0;\n    const topNeighbor = getNeighbor ? Number(getNeighbor(0, -1)) : 0;\n    const bottomNeighbor = getNeighbor ? Number(getNeighbor(0, 1)) : 0;\n\n    const neighborsCount = leftNeighbor + rightNeighbor + topNeighbor + bottomNeighbor;\n\n    if (neighborsCount === 0) {\n      this._basicCornersRounded({\n        x, y, size, rotation: Math.PI / 2,\n      });\n      return;\n    }\n\n    if (!leftNeighbor && !topNeighbor) {\n      this._basicCornerRounded({\n        x, y, size, rotation: -Math.PI / 2,\n      });\n      return;\n    }\n\n    if (!rightNeighbor && !bottomNeighbor) {\n      this._basicCornerRounded({\n        x, y, size, rotation: Math.PI / 2,\n      });\n      return;\n    }\n\n    this._basicSquare({\n      x, y, size, rotation: 0,\n    });\n  }\n\n  _drawClassyRounded({\n    x, y, size, getNeighbor,\n  }: DrawArgs): void {\n    const leftNeighbor = getNeighbor ? Number(getNeighbor(-1, 0)) : 0;\n    const rightNeighbor = getNeighbor ? Number(getNeighbor(1, 0)) : 0;\n    const topNeighbor = getNeighbor ? Number(getNeighbor(0, -1)) : 0;\n    const bottomNeighbor = getNeighbor ? Number(getNeighbor(0, 1)) : 0;\n\n    const neighborsCount = leftNeighbor + rightNeighbor + topNeighbor + bottomNeighbor;\n\n    if (neighborsCount === 0) {\n      this._basicCornersRounded({\n        x, y, size, rotation: Math.PI / 2,\n      });\n      return;\n    }\n\n    if (!leftNeighbor && !topNeighbor) {\n      this._basicCornerExtraRounded({\n        x, y, size, rotation: -Math.PI / 2,\n      });\n      return;\n    }\n\n    if (!rightNeighbor && !bottomNeighbor) {\n      this._basicCornerExtraRounded({\n        x, y, size, rotation: Math.PI / 2,\n      });\n      return;\n    }\n\n    this._basicSquare({\n      x, y, size, rotation: 0,\n    });\n  }\n}\n","/* eslint-disable no-underscore-dangle,no-multi-assign,consistent-return */\nimport type { FilterFunction, Gradient, QRCode } from '../types';\n\nimport errorCorrectionPercents from '../constants/errorCorrectionPercents';\nimport gradientTypes from '../constants/gradientTypes';\nimport QRCornerDot from '../figures/cornerDot/svg/QRCornerDot';\nimport QRCornerSquare from '../figures/cornerSquare/svg/QRCornerSquare';\nimport QRDot from '../figures/dot/svg/QRDot';\nimport calculateImageSize from '../tools/calculateImageSize';\n\nimport type { RequiredOptions } from './QROptions';\n\nconst squareMask = [\n  [1, 1, 1, 1, 1, 1, 1],\n  [1, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 1],\n  [1, 1, 1, 1, 1, 1, 1],\n];\n\nconst dotMask = [\n  [0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 1, 1, 1, 0, 0],\n  [0, 0, 1, 1, 1, 0, 0],\n  [0, 0, 1, 1, 1, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0],\n];\n\nexport default class QRSVG {\n  _element: SVGElement;\n\n  _defs: SVGElement;\n\n  _dotsClipPath?: SVGElement;\n\n  _cornersSquareClipPath?: SVGElement;\n\n  _cornersDotClipPath?: SVGElement;\n\n  _options: RequiredOptions;\n\n  _qr?: QRCode;\n\n  _image?: HTMLImageElement;\n\n  // TODO don't pass all options to this class\n  constructor(options: RequiredOptions) {\n    this._element = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    this._element.setAttribute('width', String(options.width));\n    this._element.setAttribute('height', String(options.height));\n    this._defs = document.createElementNS('http://www.w3.org/2000/svg', 'defs');\n    this._element.appendChild(this._defs);\n\n    this._options = options;\n  }\n\n  get width(): number {\n    return this._options.width;\n  }\n\n  get height(): number {\n    return this._options.height;\n  }\n\n  getElement(): SVGElement {\n    return this._element;\n  }\n\n  clear(): void {\n    const oldElement = this._element;\n    this._element = oldElement.cloneNode(false) as SVGElement;\n    oldElement?.parentNode?.replaceChild(this._element, oldElement);\n    this._defs = document.createElementNS('http://www.w3.org/2000/svg', 'defs');\n    this._element.appendChild(this._defs);\n  }\n\n  async drawQR(qr: QRCode): Promise<void> {\n    const count = qr.getModuleCount();\n    const minSize = Math.min(this._options.width, this._options.height) - this._options.margin * 2;\n    const dotSize = Math.floor(minSize / count);\n    let drawImageSize = {\n      hideXDots: 0,\n      hideYDots: 0,\n      width: 0,\n      height: 0,\n    };\n\n    this._qr = qr;\n\n    if (this._options.image) {\n      // We need it to get image size\n      await this.loadImage();\n      if (!this._image) return;\n      const { imageOptions, qrOptions } = this._options;\n      const coverLevel = imageOptions.imageSize * errorCorrectionPercents[qrOptions.errorCorrectionLevel];\n      const maxHiddenDots = Math.floor(coverLevel * count * count);\n\n      drawImageSize = calculateImageSize({\n        originalWidth: this._image.width,\n        originalHeight: this._image.height,\n        maxHiddenDots,\n        maxHiddenAxisDots: count - 14,\n        dotSize,\n      });\n    }\n\n    this.clear();\n    this.drawBackground();\n    this.drawDots((i: number, j: number): boolean => {\n      if (this._options.imageOptions.hideBackgroundDots) {\n        if (\n          i >= (count - drawImageSize.hideXDots) / 2\n          && i < (count + drawImageSize.hideXDots) / 2\n          && j >= (count - drawImageSize.hideYDots) / 2\n          && j < (count + drawImageSize.hideYDots) / 2\n        ) {\n          return false;\n        }\n      }\n\n      if (squareMask[i]?.[j] || squareMask[i - count + 7]?.[j] || squareMask[i]?.[j - count + 7]) {\n        return false;\n      }\n\n      if (dotMask[i]?.[j] || dotMask[i - count + 7]?.[j] || dotMask[i]?.[j - count + 7]) {\n        return false;\n      }\n\n      return true;\n    });\n    this.drawCorners();\n\n    if (this._options.image) {\n      this.drawImage({\n        width: drawImageSize.width, height: drawImageSize.height, count, dotSize,\n      });\n    }\n  }\n\n  drawBackground(): void {\n    const element = this._element;\n    const options = this._options;\n\n    if (element) {\n      const gradientOptions = options.backgroundOptions?.gradient;\n      const color = options.backgroundOptions?.color;\n\n      if (gradientOptions || color) {\n        this._createColor({\n          options: gradientOptions,\n          color,\n          additionalRotation: 0,\n          x: 0,\n          y: 0,\n          height: options.height,\n          width: options.width,\n          name: 'background-color',\n        });\n      }\n    }\n  }\n\n  drawDots(filter?: FilterFunction): void {\n    if (!this._qr) {\n      throw new Error('QR code is not defined');\n    }\n\n    const options = this._options;\n    const count = this._qr.getModuleCount();\n\n    if (count > options.width || count > options.height) {\n      throw new Error('The canvas is too small');\n    }\n\n    const minSize = Math.min(options.width, options.height) - options.margin * 2;\n    const dotSize = Math.floor(minSize / count);\n    const xBeginning = Math.floor((options.width - count * dotSize) / 2);\n    const yBeginning = Math.floor((options.height - count * dotSize) / 2);\n    const dot = new QRDot({ svg: this._element, type: options.dotsOptions.type });\n\n    this._dotsClipPath = document.createElementNS('http://www.w3.org/2000/svg', 'clipPath');\n    this._dotsClipPath.setAttribute('id', 'clip-path-dot-color');\n    this._defs.appendChild(this._dotsClipPath);\n\n    this._createColor({\n      options: options.dotsOptions?.gradient,\n      color: options.dotsOptions.color,\n      additionalRotation: 0,\n      x: xBeginning,\n      y: yBeginning,\n      height: count * dotSize,\n      width: count * dotSize,\n      name: 'dot-color',\n    });\n\n    for (let i = 0; i < count; i++) {\n      for (let j = 0; j < count; j++) {\n        if (filter && !filter(i, j)) {\n          continue;\n        }\n        if (!this._qr?.isDark(i, j)) {\n          continue;\n        }\n\n        dot.draw(\n          xBeginning + i * dotSize,\n          yBeginning + j * dotSize,\n          dotSize,\n          (xOffset: number, yOffset: number): boolean => {\n            if (i + xOffset < 0 || j + yOffset < 0 || i + xOffset >= count || j + yOffset >= count) return false;\n            if (filter && !filter(i + xOffset, j + yOffset)) return false;\n            return !!this._qr && this._qr.isDark(i + xOffset, j + yOffset);\n          },\n        );\n\n        if (dot._element && this._dotsClipPath) {\n          this._dotsClipPath.appendChild(dot._element);\n        }\n      }\n    }\n  }\n\n  drawCorners(): void {\n    if (!this._qr) {\n      throw new Error('QR code is not defined');\n    }\n\n    const element = this._element;\n    const options = this._options;\n\n    if (!element) {\n      throw new Error('Element code is not defined');\n    }\n\n    const count = this._qr.getModuleCount();\n    const minSize = Math.min(options.width, options.height) - options.margin * 2;\n    const dotSize = Math.floor(minSize / count);\n    const cornersSquareSize = dotSize * 7;\n    const cornersDotSize = dotSize * 3;\n    const xBeginning = Math.floor((options.width - count * dotSize) / 2);\n    const yBeginning = Math.floor((options.height - count * dotSize) / 2);\n\n    [\n      [0, 0, 0],\n      [1, 0, Math.PI / 2],\n      [0, 1, -Math.PI / 2],\n    ].forEach(([column, row, rotation]) => {\n      const x = xBeginning + column * dotSize * (count - 7);\n      const y = yBeginning + row * dotSize * (count - 7);\n      let cornersSquareClipPath = this._dotsClipPath;\n      let cornersDotClipPath = this._dotsClipPath;\n\n      if (options.cornersSquareOptions?.gradient || options.cornersSquareOptions?.color) {\n        cornersSquareClipPath = document.createElementNS('http://www.w3.org/2000/svg', 'clipPath');\n        cornersSquareClipPath.setAttribute('id', `clip-path-corners-square-color-${column}-${row}`);\n        this._defs.appendChild(cornersSquareClipPath);\n        this._cornersSquareClipPath = this._cornersDotClipPath = cornersDotClipPath = cornersSquareClipPath;\n\n        this._createColor({\n          options: options.cornersSquareOptions?.gradient,\n          color: options.cornersSquareOptions?.color,\n          additionalRotation: rotation,\n          x,\n          y,\n          height: cornersSquareSize,\n          width: cornersSquareSize,\n          name: `corners-square-color-${column}-${row}`,\n        });\n      }\n\n      if (options.cornersSquareOptions?.type) {\n        const cornersSquare = new QRCornerSquare({ svg: this._element, type: options.cornersSquareOptions.type });\n\n        cornersSquare.draw(x, y, cornersSquareSize, rotation);\n\n        if (cornersSquare._element && cornersSquareClipPath) {\n          cornersSquareClipPath.appendChild(cornersSquare._element);\n        }\n      } else {\n        const dot = new QRDot({ svg: this._element, type: options.dotsOptions.type });\n\n        for (let i = 0; i < squareMask.length; i++) {\n          for (let j = 0; j < squareMask[i].length; j++) {\n            if (!squareMask[i]?.[j]) {\n              continue;\n            }\n\n            dot.draw(\n              x + i * dotSize,\n              y + j * dotSize,\n              dotSize,\n              (xOffset: number, yOffset: number): boolean => !!squareMask[i + xOffset]?.[j + yOffset],\n            );\n\n            if (dot._element && cornersSquareClipPath) {\n              cornersSquareClipPath.appendChild(dot._element);\n            }\n          }\n        }\n      }\n\n      if (options.cornersDotOptions?.gradient || options.cornersDotOptions?.color) {\n        cornersDotClipPath = document.createElementNS('http://www.w3.org/2000/svg', 'clipPath');\n        cornersDotClipPath.setAttribute('id', `clip-path-corners-dot-color-${column}-${row}`);\n        this._defs.appendChild(cornersDotClipPath);\n        this._cornersDotClipPath = cornersDotClipPath;\n\n        this._createColor({\n          options: options.cornersDotOptions?.gradient,\n          color: options.cornersDotOptions?.color,\n          additionalRotation: rotation,\n          x: x + dotSize * 2,\n          y: y + dotSize * 2,\n          height: cornersDotSize,\n          width: cornersDotSize,\n          name: `corners-dot-color-${column}-${row}`,\n        });\n      }\n\n      if (options.cornersDotOptions?.type) {\n        const cornersDot = new QRCornerDot({ svg: this._element, type: options.cornersDotOptions.type });\n\n        cornersDot.draw(x + dotSize * 2, y + dotSize * 2, cornersDotSize, rotation);\n\n        if (cornersDot._element && cornersDotClipPath) {\n          cornersDotClipPath.appendChild(cornersDot._element);\n        }\n      } else {\n        const dot = new QRDot({ svg: this._element, type: options.dotsOptions.type });\n\n        for (let i = 0; i < dotMask.length; i++) {\n          for (let j = 0; j < dotMask[i].length; j++) {\n            if (!dotMask[i]?.[j]) {\n              continue;\n            }\n\n            dot.draw(\n              x + i * dotSize,\n              y + j * dotSize,\n              dotSize,\n              (xOffset: number, yOffset: number): boolean => !!dotMask[i + xOffset]?.[j + yOffset],\n            );\n\n            if (dot._element && cornersDotClipPath) {\n              cornersDotClipPath.appendChild(dot._element);\n            }\n          }\n        }\n      }\n    });\n  }\n\n  loadImage(): Promise<void> {\n    return new Promise((resolve, reject) => {\n      const options = this._options;\n      const image = new Image();\n\n      if (!options.image) {\n        // eslint-disable-next-line prefer-promise-reject-errors,no-promise-executor-return\n        return reject('Image is not defined');\n      }\n\n      if (typeof options.imageOptions.crossOrigin === 'string') {\n        image.crossOrigin = options.imageOptions.crossOrigin;\n      }\n\n      this._image = image;\n      image.onload = (): void => {\n        resolve();\n      };\n      image.src = options.image;\n    });\n  }\n\n  drawImage({\n    width,\n    height,\n    count,\n    dotSize,\n  }: {\n    width: number;\n    height: number;\n    count: number;\n    dotSize: number;\n  }): void {\n    const options = this._options;\n    const xBeginning = Math.floor((options.width - count * dotSize) / 2);\n    const yBeginning = Math.floor((options.height - count * dotSize) / 2);\n    const dx = xBeginning + options.imageOptions.margin + (count * dotSize - width) / 2;\n    const dy = yBeginning + options.imageOptions.margin + (count * dotSize - height) / 2;\n    const dw = width - options.imageOptions.margin * 2;\n    const dh = height - options.imageOptions.margin * 2;\n\n    const image = document.createElementNS('http://www.w3.org/2000/svg', 'image');\n    image.setAttribute('href', options.image || '');\n    image.setAttribute('x', String(dx));\n    image.setAttribute('y', String(dy));\n    image.setAttribute('width', `${dw}px`);\n    image.setAttribute('height', `${dh}px`);\n\n    this._element.appendChild(image);\n  }\n\n  _createColor({\n    options,\n    color,\n    additionalRotation,\n    x,\n    y,\n    height,\n    width,\n    name,\n  }: {\n    options?: Gradient;\n    color?: string;\n    additionalRotation: number;\n    x: number;\n    y: number;\n    height: number;\n    width: number;\n    name: string;\n  }): void {\n    const size = width > height ? width : height;\n    const rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n    rect.setAttribute('x', String(x));\n    rect.setAttribute('y', String(y));\n    rect.setAttribute('height', String(height));\n    rect.setAttribute('width', String(width));\n    rect.setAttribute('clip-path', `url('#clip-path-${name}')`);\n\n    if (options) {\n      let gradient: SVGElement;\n      if (options.type === gradientTypes.radial) {\n        gradient = document.createElementNS('http://www.w3.org/2000/svg', 'radialGradient');\n        gradient.setAttribute('id', name);\n        gradient.setAttribute('gradientUnits', 'userSpaceOnUse');\n        gradient.setAttribute('fx', String(x + width / 2));\n        gradient.setAttribute('fy', String(y + height / 2));\n        gradient.setAttribute('cx', String(x + width / 2));\n        gradient.setAttribute('cy', String(y + height / 2));\n        gradient.setAttribute('r', String(size / 2));\n      } else {\n        const rotation = ((options.rotation || 0) + additionalRotation) % (2 * Math.PI);\n        const positiveRotation = (rotation + 2 * Math.PI) % (2 * Math.PI);\n        let x0 = x + width / 2;\n        let y0 = y + height / 2;\n        let x1 = x + width / 2;\n        let y1 = y + height / 2;\n\n        if (\n          (positiveRotation >= 0 && positiveRotation <= 0.25 * Math.PI)\n          || (positiveRotation > 1.75 * Math.PI && positiveRotation <= 2 * Math.PI)\n        ) {\n          x0 -= width / 2;\n          y0 -= (height / 2) * Math.tan(rotation);\n          x1 += width / 2;\n          y1 += (height / 2) * Math.tan(rotation);\n        } else if (positiveRotation > 0.25 * Math.PI && positiveRotation <= 0.75 * Math.PI) {\n          y0 -= height / 2;\n          x0 -= width / 2 / Math.tan(rotation);\n          y1 += height / 2;\n          x1 += width / 2 / Math.tan(rotation);\n        } else if (positiveRotation > 0.75 * Math.PI && positiveRotation <= 1.25 * Math.PI) {\n          x0 += width / 2;\n          y0 += (height / 2) * Math.tan(rotation);\n          x1 -= width / 2;\n          y1 -= (height / 2) * Math.tan(rotation);\n        } else if (positiveRotation > 1.25 * Math.PI && positiveRotation <= 1.75 * Math.PI) {\n          y0 += height / 2;\n          x0 += width / 2 / Math.tan(rotation);\n          y1 -= height / 2;\n          x1 -= width / 2 / Math.tan(rotation);\n        }\n\n        gradient = document.createElementNS('http://www.w3.org/2000/svg', 'linearGradient');\n        gradient.setAttribute('id', name);\n        gradient.setAttribute('gradientUnits', 'userSpaceOnUse');\n        gradient.setAttribute('x1', String(Math.round(x0)));\n        gradient.setAttribute('y1', String(Math.round(y0)));\n        gradient.setAttribute('x2', String(Math.round(x1)));\n        gradient.setAttribute('y2', String(Math.round(y1)));\n      }\n\n      // eslint-disable-next-line @typescript-eslint/no-shadow\n      options.colorStops.forEach(({ offset, color }: { offset: number; color: string }) => {\n        const stop = document.createElementNS('http://www.w3.org/2000/svg', 'stop');\n        stop.setAttribute('offset', `${100 * offset}%`);\n        stop.setAttribute('stop-color', color);\n        gradient.appendChild(stop);\n      });\n\n      rect.setAttribute('fill', `url('#${name}')`);\n      this._defs.appendChild(gradient);\n    } else if (color) {\n      rect.setAttribute('fill', color);\n    }\n\n    this._element.appendChild(rect);\n  }\n}\n","/* eslint-disable no-underscore-dangle,no-promise-executor-return */\nimport qrcode from 'qrcode-generator';\n\nimport type {\n  DownloadOptions, Extension, Options, QRCode,\n} from '../types';\n\nimport drawTypes from '../constants/drawTypes';\nimport downloadURI from '../tools/downloadURI';\nimport getMode from '../tools/getMode';\nimport mergeDeep from '../tools/merge';\nimport sanitizeOptions from '../tools/sanitizeOptions';\n\nimport QRCanvas from './QRCanvas';\nimport type { RequiredOptions } from './QROptions';\nimport defaultOptions from './QROptions';\nimport QRSVG from './QRSVG';\n\nexport default class QRCodeStyling {\n  _options: RequiredOptions;\n\n  _container?: HTMLElement;\n\n  _canvas?: QRCanvas;\n\n  _svg?: QRSVG;\n\n  _qr?: QRCode;\n\n  _canvasDrawingPromise?: Promise<void>;\n\n  _svgDrawingPromise?: Promise<void>;\n\n  constructor(options?: Partial<Options>) {\n    this._options = options ? sanitizeOptions(mergeDeep(defaultOptions, options) as RequiredOptions) : defaultOptions;\n    this.update();\n  }\n\n  static _clearContainer(container?: HTMLElement): void {\n    if (container) {\n      container.innerHTML = '';\n    }\n  }\n\n  async _getQRStylingElement(extension: Extension = 'png'): Promise<QRCanvas | QRSVG> {\n    if (!this._qr) throw new Error('QR code is empty');\n\n    if (extension.toLowerCase() === 'svg') {\n      let promise; let\n        svg: QRSVG;\n\n      if (this._svg && this._svgDrawingPromise) {\n        svg = this._svg;\n        promise = this._svgDrawingPromise;\n      } else {\n        svg = new QRSVG(this._options);\n        promise = svg.drawQR(this._qr);\n      }\n\n      await promise;\n\n      return svg;\n    } else {\n      let promise; let\n        canvas: QRCanvas;\n\n      if (this._canvas && this._canvasDrawingPromise) {\n        canvas = this._canvas;\n        promise = this._canvasDrawingPromise;\n      } else {\n        canvas = new QRCanvas(this._options);\n        promise = canvas.drawQR(this._qr);\n      }\n\n      await promise;\n\n      return canvas;\n    }\n  }\n\n  update(options?: Partial<Options>): void {\n    QRCodeStyling._clearContainer(this._container);\n    this._options = options ? sanitizeOptions(mergeDeep(this._options, options) as RequiredOptions) : this._options;\n\n    if (!this._options.data) {\n      return;\n    }\n\n    this._qr = qrcode(this._options.qrOptions.typeNumber, this._options.qrOptions.errorCorrectionLevel);\n    this._qr.addData(this._options.data, this._options.qrOptions.mode || getMode(this._options.data));\n    this._qr.make();\n\n    if (this._options.type === drawTypes.canvas) {\n      this._canvas = new QRCanvas(this._options);\n      this._canvasDrawingPromise = this._canvas.drawQR(this._qr);\n      this._svgDrawingPromise = undefined;\n      this._svg = undefined;\n    } else {\n      this._svg = new QRSVG(this._options);\n      this._svgDrawingPromise = this._svg.drawQR(this._qr);\n      this._canvasDrawingPromise = undefined;\n      this._canvas = undefined;\n    }\n\n    this.append(this._container);\n  }\n\n  append(container?: HTMLElement): void {\n    if (!container) {\n      return;\n    }\n\n    if (typeof container.appendChild !== 'function') {\n      throw new Error('Container should be a single DOM node');\n    }\n\n    if (this._options.type === drawTypes.canvas) {\n      if (this._canvas) {\n        container.appendChild(this._canvas.getCanvas());\n      }\n    } else if (this._svg) {\n      container.appendChild(this._svg.getElement());\n    }\n\n    this._container = container;\n  }\n\n  async getRawData(extension: Extension = 'png'): Promise<Blob | null> {\n    if (!this._qr) throw new Error('QR code is empty');\n    const element = await this._getQRStylingElement(extension);\n\n    if (extension.toLowerCase() === 'svg') {\n      const serializer = new XMLSerializer();\n      const source = serializer.serializeToString(((element as unknown) as QRSVG).getElement());\n\n      return new Blob([`<?xml version=\"1.0\" standalone=\"no\"?>\\r\\n${source}`], { type: 'image/svg+xml' });\n    } else {\n      // eslint-disable-next-line max-len\n      return new Promise((resolve) => ((element as unknown) as QRCanvas).getCanvas().toBlob(resolve, `image/${extension}`, 1));\n    }\n  }\n\n  async download(downloadOptions?: Partial<DownloadOptions> | string): Promise<void> {\n    if (!this._qr) throw new Error('QR code is empty');\n    let extension = 'png' as Extension;\n    let name = 'qr';\n\n    // TODO remove deprecated code in the v2\n    if (typeof downloadOptions === 'string') {\n      extension = downloadOptions as Extension;\n      // eslint-disable-next-line no-console\n      console.warn(\n        // eslint-disable-next-line max-len\n        \"Extension is deprecated as argument for 'download' method, please pass object { name: '...', extension: '...' } as argument\",\n      );\n      // eslint-disable-next-line no-null/no-null\n    } else if (typeof downloadOptions === 'object' && downloadOptions !== null) {\n      if (downloadOptions.name) {\n        name = downloadOptions.name;\n      }\n      if (downloadOptions.extension) {\n        extension = downloadOptions.extension;\n      }\n    }\n\n    const element = await this._getQRStylingElement(extension);\n\n    if (extension.toLowerCase() === 'svg') {\n      const serializer = new XMLSerializer();\n      let source = serializer.serializeToString(((element as unknown) as QRSVG).getElement());\n\n      source = `<?xml version=\"1.0\" standalone=\"no\"?>\\r\\n${source}`;\n      const url = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(source)}`;\n      downloadURI(url, `${name}.svg`);\n    } else {\n      const url = ((element as unknown) as QRCanvas).getCanvas().toDataURL(`image/${extension}`);\n      downloadURI(url, `${name}.${extension}`);\n    }\n  }\n}\n","import type { Mode } from '../types';\n\nimport modes from '../constants/modes';\n\nexport default function getMode(data: string): Mode {\n  switch (true) {\n    case /^[0-9]*$/.test(data):\n      return modes.numeric;\n    case /^[0-9A-Z $%*+\\-./:]*$/.test(data):\n      return modes.alphanumeric;\n    default:\n      return modes.byte;\n  }\n}\n","import type { Mode } from '../types';\n\ninterface Modes {\n  [key: string]: Mode;\n}\n\nexport default {\n  numeric: 'Numeric',\n  alphanumeric: 'Alphanumeric',\n  byte: 'Byte',\n  kanji: 'Kanji',\n} as Modes;\n","import cornerDotTypes from './constants/cornerDotTypes';\nimport cornerSquareTypes from './constants/cornerSquareTypes';\nimport dotTypes from './constants/dotTypes';\nimport drawTypes from './constants/drawTypes';\nimport errorCorrectionLevels from './constants/errorCorrectionLevels';\nimport errorCorrectionPercents from './constants/errorCorrectionPercents';\nimport modes from './constants/modes';\nimport qrTypes from './constants/qrTypes';\nimport QRCodeStyling from './core/QRCodeStyling';\n\nexport * from './types';\n\nexport {\n  dotTypes,\n  cornerDotTypes,\n  cornerSquareTypes,\n  errorCorrectionLevels,\n  errorCorrectionPercents,\n  modes,\n  qrTypes,\n  drawTypes,\n};\n\nexport default QRCodeStyling;\n","import TonWeb from 'tonweb';\nimport QrCodeStyling from '../../lib/qr-code-styling';\nimport React, { memo, useEffect, useRef } from '../../lib/teact/teact';\n\nimport { withGlobal } from '../../global';\nimport { selectAccount } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { shortenAddress } from '../../util/shortenAddress';\n\nimport useLang from '../../hooks/useLang';\n\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\nimport ModalTransitionContent from '../ui/ModalTransitionContent';\n\nimport styles from './ReceiveModal.module.scss';\n\nconst QR_SIZE = 600;\nconst QR_CODE = new QrCodeStyling({\n  width: QR_SIZE,\n  height: QR_SIZE,\n  image: './logo.svg',\n  margin: 0,\n  type: 'canvas',\n  dotsOptions: {\n    type: 'rounded',\n  },\n  cornersSquareOptions: {\n    type: 'extra-rounded',\n  },\n  imageOptions: {\n    imageSize: 0.4,\n    margin: 8,\n    crossOrigin: 'anonymous',\n  },\n  qrOptions: {\n    errorCorrectionLevel: 'M',\n  },\n});\n\ntype StateProps = {\n  address?: string;\n};\n\ntype OwnProps = {\n  backButtonText?: string;\n  isOpen: boolean;\n  onBackButtonClick: () => void;\n  onClose: () => void;\n};\n\nfunction QrModal({\n  address, backButtonText, isOpen, onBackButtonClick, onClose,\n}: StateProps & OwnProps) {\n  const lang = useLang();\n  // eslint-disable-next-line no-null/no-null\n  const qrCodeRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (isOpen) {\n      QR_CODE.append(qrCodeRef.current || undefined);\n    }\n  }, [isOpen]);\n\n  useEffect(() => {\n    if (!address) {\n      return;\n    }\n    QR_CODE.update({ data: TonWeb.utils.formatTransferUrl(address) });\n  }, [address]);\n\n  return (\n    <Modal isSlideUp hasCloseButton title={lang('QR-code')} isOpen={isOpen} onClose={onClose}>\n      <ModalTransitionContent className={buildClassName(styles.content, styles.contentQr)}>\n        <div className={styles.qrCode} ref={qrCodeRef} />\n        <p className={buildClassName(styles.info, styles.info_small)}>{address && shortenAddress(address)}</p>\n\n        <div className={styles.buttons}>\n          <Button onClick={onBackButtonClick}>{backButtonText ?? lang('Back')}</Button>\n        </div>\n      </ModalTransitionContent>\n    </Modal>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>((global): StateProps => {\n    const address = selectAccount(global, global.currentAccountId!)?.address;\n\n    return {\n      address,\n    };\n  })(QrModal),\n);\n","import React, { memo, useCallback } from '../../lib/teact/teact';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\n\nimport Modal from '../ui/Modal';\nimport ModalTransitionContent from '../ui/ModalTransitionContent';\nimport Content from './Content';\nimport InvoiceModal from './InvoiceModal';\nimport QrModal from './QrModal';\n\ntype Props = {\n  isOpen: boolean;\n  onClose: () => void;\n};\n\nfunction ReceiveModal({ isOpen, onClose }: Props) {\n  const lang = useLang();\n  const [isQrModalOpen, openQrModal, closeQrModal] = useFlag(false);\n  const [isInvoiceModalOpen, openInvoiceModal, closeInvoiceModal] = useFlag(false);\n\n  const handleClose = useCallback(() => {\n    onClose();\n    closeInvoiceModal();\n    closeQrModal();\n  }, [closeInvoiceModal, closeQrModal, onClose]);\n\n  return (\n    <>\n      <Modal isSlideUp hasCloseButton title={lang('Receive TON')} isOpen={isOpen} onClose={handleClose}>\n        <ModalTransitionContent>\n          <Content onInvoiceModalOpen={openInvoiceModal} onQrModalOpen={openQrModal} />\n        </ModalTransitionContent>\n      </Modal>\n      <QrModal isOpen={isQrModalOpen} onBackButtonClick={closeQrModal} onClose={handleClose} />\n      <InvoiceModal isOpen={isInvoiceModalOpen} onBackButtonClick={closeInvoiceModal} onClose={handleClose} />\n    </>\n  );\n}\n\nexport default memo(ReceiveModal);\n","import React, { memo, useCallback } from '../../lib/teact/teact';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\n\nimport Content from './Content';\nimport InvoiceModal from './InvoiceModal';\nimport QrModal from './QrModal';\n\ntype Props = {\n  className?: string;\n};\n\nfunction ReceiveStatic({ className }: Props) {\n  const lang = useLang();\n  const [isQrModalOpen, openQrModal, closeQrModal] = useFlag(false);\n  const [isInvoiceModalOpen, openInvoiceModal, closeInvoiceModal] = useFlag(false);\n\n  const handleClose = useCallback(() => {\n    closeInvoiceModal();\n    closeQrModal();\n  }, [closeInvoiceModal, closeQrModal]);\n\n  return (\n    <div className={className}>\n      <Content isStatic onInvoiceModalOpen={openInvoiceModal} onQrModalOpen={openQrModal} />\n      <QrModal\n        backButtonText={lang('Close')}\n        isOpen={isQrModalOpen}\n        onBackButtonClick={closeQrModal}\n        onClose={handleClose}\n      />\n      <InvoiceModal\n        backButtonText={lang('Close')}\n        isOpen={isInvoiceModalOpen}\n        onBackButtonClick={closeInvoiceModal}\n        onClose={handleClose}\n      />\n    </div>\n  );\n}\n\nexport default memo(ReceiveStatic);\n","const zones = ['ton', 't.me', 'vip'];\nconst zonesRegex = {\n  ton: /^([-\\da-z]{4,126})\\.ton$/i,\n  't.me': /^([-_\\da-z]{4,126})\\.t\\.me$/i,\n  vip: /^([\\da-z]{1,24})\\.(vip|vip\\.ton|ton\\.vip)$/i,\n};\n\nfunction isDnsDomain(value: string) {\n  return Object.values(zonesRegex).some((zone) => zone.test(value));\n}\n\nfunction isVipDnsDomain(value: string) {\n  return zonesRegex.vip.test(value);\n}\n\nfunction removeZone(value: string) {\n  return Object.values(zonesRegex).map((zone) => (\n    zone.test(value) && value.match(zone)![1]\n  )).find(Boolean);\n}\n\nexport default {\n  zones,\n  zonesRegex,\n  isDnsDomain,\n  isVipDnsDomain,\n  removeZone,\n};\n","import dns from './dns';\n\nconst TON_ADDRESS_REGEX = /^[-\\w_]{48}$/i;\nconst TON_RAW_ADDRESS_REGEX = /^0:[\\da-h]{64}$/i;\n\nexport function getIsAddressValid(address?: string) {\n  return (\n    address && (TON_ADDRESS_REGEX.test(address) || TON_RAW_ADDRESS_REGEX.test(address) || dns.isDnsDomain(address))\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"cJc6eiNAsyJjdMEUR4sY\",\"inputButton\":\"I3ceW18C07B4dGDpkySq\",\"amountInput\":\"zA4yCB3QfaLfuLQYNhs2\",\"help\":\"zmHNWyurZSQXIJkOuavG\",\"label\":\"xbLaRgLMDnwW5Ru_8giZ\",\"amountBottomWrapper\":\"JgUEiIyh8ONVHm0YV3Wq\",\"amountBottom\":\"kKHlYNPxk_1V4wx7xZh1\",\"amountBottomRight\":\"CjQTlpkz77EHxpEB40b7\",\"amountBottomRight_slide\":\"DKWhO0RS44QEcKGJuDyw\",\"amountBottomRightSlide\":\"DKWhO0RS44QEcKGJuDyw\",\"Transition\":\"q8CvVgfHx8jy9R17gjtw\",\"transition\":\"q8CvVgfHx8jy9R17gjtw\",\"Transition_slide-from\":\"Fn8siLiU4jCYxbr0STlT\",\"transitionSlideFrom\":\"Fn8siLiU4jCYxbr0STlT\",\"Transition_slide-to\":\"n9tUGjRZfcdltyrlxIVH\",\"transitionSlideTo\":\"n9tUGjRZfcdltyrlxIVH\",\"amountBottomRight_static\":\"RKiGYTcJIv7A3_STNSgR\",\"amountBottomRightStatic\":\"RKiGYTcJIv7A3_STNSgR\",\"balanceError\":\"o7puMAtQNOyxU4AtOtZx\",\"feeValue\":\"TW5UIdsXRMhizisZ93U0\",\"balanceContainer\":\"vEObzvUuorocKOhx9O_C\",\"balance\":\"roe04JydmkaKkXYQEBTQ\",\"balanceLink\":\"zFIhI69cGcSXD_1f7V0g\",\"amountInCurrency\":\"RyzcWqtKWvfu_WVMYZEO\",\"description\":\"A_taTpu88YjfvfzrXHzZ\",\"error\":\"ynqdmsUmIxCNLg8l1sNM\",\"addressWidget\":\"c9pliD1_gkDkerASzDNx\",\"inputReadOnly\":\"prTexLYizXaV4DXBLk7S\",\"inputReadOnly_words\":\"lTnqP5UvTSB30UoGNG47\",\"inputReadOnlyWords\":\"lTnqP5UvTSB30UoGNG47\",\"sticker\":\"tAx7oZZwY369QZR96K2A\",\"sticker_sizeSmall\":\"A9OYBH3uV_ILySdNj7Dj\",\"stickerSizeSmall\":\"A9OYBH3uV_ILySdNj7Dj\",\"buttonLoading\":\"g3ixJXR1iyKrPiZZNtR_\",\"buttonText\":\"r__axeB0cedpWbWnh0Ve\",\"button-loading-spinner\":\"uch1FjpprIAc0fH74agS\",\"buttonLoadingSpinner\":\"uch1FjpprIAc0fH74agS\",\"buttonSubmit\":\"OC4KfQRgIrUhfSA5ubQy\",\"savedAddressItem\":\"QKrk3WTNjSS5sjmDS74f\",\"savedAddressName\":\"jL_H1y0BsyDmNoPZaMPj\",\"savedAddressAddress\":\"g8AcZGZbPPj6BVyRRO4K\",\"savedAddressDelete\":\"jAbyIVnROnOeJfSozf50\",\"savedAddressDeleteInner\":\"VYuanfQZnPuzoj9SFUnv\",\"tokenDropdown\":\"uzFeON6qzIoNiAunnmtQ\",\"inputStatic\":\"F6cnJPGpeoVZotYEbSRN\",\"inputRichStatic\":\"jpLIRDEIjZNu1ktnZ85x\",\"commentLabel\":\"ZgTeL90oXHGBMgvaY21R\",\"buttonsStatic\":\"Pl5_mosU0prDaG26TQJd\"};","import React, {\n  memo, useCallback, useEffect, useMemo, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport { ElectronEvent } from '../../electron/types';\nimport type { UserToken } from '../../global/types';\n\nimport { CARD_SECONDARY_VALUE_SYMBOL, DEFAULT_PRICE_CURRENCY, TON_TOKEN_SLUG } from '../../config';\nimport { getActions, withGlobal } from '../../global';\nimport { bigStrToHuman } from '../../global/helpers';\nimport { selectCurrentAccountState, selectCurrentAccountTokens } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport dns from '../../util/dns';\nimport { formatCurrency, formatCurrencyExtended } from '../../util/formatNumber';\nimport { getIsAddressValid } from '../../util/getIsAddressValid';\nimport { throttle } from '../../util/schedulers';\nimport { shortenAddress } from '../../util/shortenAddress';\nimport { IS_TOUCH_ENV } from '../../util/windowEnvironment';\nimport { ASSET_LOGO_PATHS } from '../ui/helpers/assetLogos';\n\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport DeleteSavedAddressModal from '../main/modals/DeleteSavedAddressModal';\nimport Button from '../ui/Button';\nimport type { DropdownItem } from '../ui/DropDown';\nimport DropDown from '../ui/DropDown';\nimport Input from '../ui/Input';\nimport Menu from '../ui/Menu';\nimport RichNumberInput from '../ui/RichNumberInput';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Transfer.module.scss';\n\ninterface OwnProps {\n  isStatic?: boolean;\n}\n\ninterface StateProps {\n  initialAddress?: string;\n  initialAmount?: number;\n  initialComment?: string;\n  initialShouldEncryptComment?: boolean;\n  fee?: string;\n  tokenSlug?: string;\n  tokens?: UserToken[];\n  savedAddresses?: Record<string, string>;\n  isLoading?: boolean;\n  onCommentChange?: NoneToVoidFunction;\n}\n\nconst COMMENT_MAX_SIZE_BYTES = 121; // Value derived empirically\nconst SHORT_ADDRESS_SHIFT = 14;\nconst MIN_ADDRESS_LENGTH_TO_SHORTEN = SHORT_ADDRESS_SHIFT * 2;\nconst COMMENT_DROPDOWN_ITEMS = [{ value: 'raw', name: 'Comment' }, { value: 'encrypted', name: 'Encrypted Message' }];\n\n// Fee may change, so we add 5% for more reliability. This is only safe for low-fee blockchains such as TON.\nconst RESERVED_FEE_FACTOR = 1.05;\n\nconst runThrottled = throttle((cb) => cb(), 1500, true);\n\nfunction TransferInitial({\n  isStatic,\n  tokenSlug = TON_TOKEN_SLUG,\n  initialAddress = '',\n  initialAmount,\n  initialComment = '',\n  initialShouldEncryptComment,\n  tokens,\n  fee,\n  savedAddresses,\n  isLoading,\n  onCommentChange,\n}: OwnProps & StateProps) {\n  const {\n    submitTransferInitial, showNotification, fetchFee, changeTransferToken,\n  } = getActions();\n\n  // eslint-disable-next-line no-null/no-null\n  const toAddressRef = useRef<HTMLInputElement>(null);\n\n  const lang = useLang();\n\n  const [shouldUseAllBalance, setShouldUseAllBalance] = useState<boolean>(false);\n  const [shouldRenderPasteButton, setShouldRenderPasteButton] = useState<boolean>(true);\n  const [isAddressFocused, markAddressFocused, unmarkAddressFocused] = useFlag();\n  const [isSavedAddressesOpen, openSavedAddresses, closeSavedAddresses] = useFlag();\n  const [savedAddressForDeletion, setSavedAddressForDeletion] = useState<string | undefined>();\n  const [toAddress, setToAddress] = useState<string>(initialAddress);\n  const [amount, setAmount] = useState<number | undefined>(initialAmount);\n  const [comment, setComment] = useState<string>(initialComment);\n  const [shouldEncryptComment, setShouldEncryptComment] = useState(initialShouldEncryptComment);\n  const [hasToAddressError, setHasToAddressError] = useState<boolean>(false);\n  const [hasAmountError, setHasAmountError] = useState<boolean>(false);\n  const [isInsufficientBalance, setIsInsufficientBalance] = useState<boolean>(false);\n  const toAddressShort = toAddress.length > MIN_ADDRESS_LENGTH_TO_SHORTEN\n    ? shortenAddress(toAddress, SHORT_ADDRESS_SHIFT) || ''\n    : toAddress;\n  const isAddressValid = getIsAddressValid(toAddress);\n  const hasSavedAddresses = useMemo(() => {\n    return savedAddresses && Object.keys(savedAddresses).length > 0;\n  }, [savedAddresses]);\n  const {\n    amount: balance,\n    decimals,\n    price,\n    symbol,\n  } = useMemo(() => tokens?.find((token) => token.slug === tokenSlug), [tokenSlug, tokens]) || {};\n  const amountInCurrency = price && amount && !Number.isNaN(amount) ? amount * price : undefined;\n  const renderingAmountInCurrency = useCurrentOrPrev(amountInCurrency, true);\n  const renderingFee = useCurrentOrPrev(fee, true);\n\n  const { shouldRender: shouldRenderCurrency, transitionClassNames: currencyClassNames } = useShowTransition(\n    Boolean(amountInCurrency),\n  );\n\n  const dropDownItems = useMemo(() => {\n    if (!tokens) {\n      return [];\n    }\n\n    return tokens.reduce<DropdownItem[]>((acc, token) => {\n      if (token.amount > 0) {\n        acc.push({\n          value: token.slug,\n          icon: token.image || ASSET_LOGO_PATHS[token.symbol.toLowerCase() as keyof typeof ASSET_LOGO_PATHS],\n          name: token.symbol,\n        });\n      }\n\n      return acc;\n    }, []);\n  }, [tokens]);\n\n  const validateAndSetAmount = useCallback(\n    (newAmount: number | undefined, noReset = false) => {\n      if (!noReset) {\n        setShouldUseAllBalance(false);\n        setHasAmountError(false);\n        setIsInsufficientBalance(false);\n      }\n\n      if (newAmount === undefined) {\n        setAmount(undefined);\n        return;\n      }\n\n      if (Number.isNaN(newAmount) || newAmount < 0) {\n        setHasAmountError(true);\n        return;\n      }\n\n      if (!balance || newAmount > balance) {\n        setHasAmountError(true);\n        setIsInsufficientBalance(true);\n      }\n\n      setAmount(newAmount);\n    },\n    [balance],\n  );\n\n  useEffect(() => {\n    if (shouldUseAllBalance && balance) {\n      const calculatedFee = fee ? bigStrToHuman(fee, decimals) : 0;\n      const reducedAmount = balance - calculatedFee * RESERVED_FEE_FACTOR;\n      const newAmount = tokenSlug === TON_TOKEN_SLUG ? reducedAmount : balance;\n      validateAndSetAmount(newAmount, true);\n    } else {\n      validateAndSetAmount(amount, true);\n    }\n  }, [\n    tokenSlug, amount, balance, fee,\n    decimals, shouldUseAllBalance, validateAndSetAmount,\n  ]);\n\n  useEffect(() => {\n    if (!toAddress || hasToAddressError || !amount || !isAddressValid) {\n      return;\n    }\n\n    runThrottled(() => {\n      fetchFee({\n        tokenSlug,\n        toAddress,\n        amount,\n        comment,\n      });\n    });\n  }, [amount, comment, fetchFee, hasToAddressError, isAddressValid, toAddress, tokenSlug]);\n\n  useEffect(() => {\n    return window.electron?.on(ElectronEvent.DEEPLINK, (params: any) => {\n      setToAddress(params.to);\n      setAmount(bigStrToHuman(params.amount));\n      setComment(params.text);\n    });\n  }, []);\n\n  const handleTokenChange = useCallback(\n    (slug: string) => {\n      changeTransferToken({ tokenSlug: slug });\n    },\n    [changeTransferToken],\n  );\n\n  const validateToAddress = useCallback(() => {\n    setHasToAddressError(Boolean(toAddress) && !isAddressValid);\n  }, [toAddress, isAddressValid]);\n\n  const handleAddressFocus = useCallback(() => {\n    const el = toAddressRef.current!;\n\n    // `selectionStart` is only updated in the next frame after `focus` event\n    requestAnimationFrame(() => {\n      const caretPosition = el.selectionStart!;\n      markAddressFocused();\n\n      // Restore caret position after input field value has been focused and expanded\n      requestAnimationFrame(() => {\n        const newCaretPosition = caretPosition <= SHORT_ADDRESS_SHIFT + 3\n          ? caretPosition\n          : Math.max(0, el.value.length - (toAddressShort.length - caretPosition));\n\n        el.setSelectionRange(newCaretPosition, newCaretPosition);\n        if (newCaretPosition > SHORT_ADDRESS_SHIFT * 2) {\n          el.scrollLeft = el.scrollWidth - el.clientWidth;\n        }\n      });\n    });\n\n    if (hasSavedAddresses) {\n      openSavedAddresses();\n    }\n  }, [hasSavedAddresses, markAddressFocused, openSavedAddresses, toAddressShort.length]);\n\n  const handleAddressBlur = useCallback(() => {\n    if (dns.isDnsDomain(toAddress) && toAddress !== toAddress.toLowerCase()) {\n      setToAddress(toAddress.toLowerCase());\n    }\n\n    validateToAddress();\n    unmarkAddressFocused();\n\n    if (hasSavedAddresses && isSavedAddressesOpen) {\n      closeSavedAddresses();\n    }\n  }, [\n    closeSavedAddresses,\n    hasSavedAddresses,\n    isSavedAddressesOpen,\n    unmarkAddressFocused,\n    validateToAddress,\n    toAddress,\n  ]);\n\n  const handlePasteClick = useCallback(() => {\n    navigator.clipboard\n      .readText()\n      .then((clipboardText) => {\n        if (getIsAddressValid(clipboardText)) {\n          setToAddress(clipboardText);\n          validateToAddress();\n        }\n      })\n      .catch(() => {\n        showNotification({\n          message: lang('Error reading clipboard') as string,\n        });\n        setShouldRenderPasteButton(false);\n      });\n  }, [lang, showNotification, validateToAddress]);\n\n  const handleSavedAddressClick = useCallback(\n    (address: string) => {\n      setToAddress(address);\n      closeSavedAddresses();\n    },\n    [closeSavedAddresses],\n  );\n\n  const handleDeleteSavedAddressClick = useCallback(\n    (address: string) => {\n      setSavedAddressForDeletion(address);\n      closeSavedAddresses();\n    },\n    [closeSavedAddresses],\n  );\n\n  const closeDeleteSavedAddressModal = useCallback(() => {\n    setSavedAddressForDeletion(undefined);\n  }, []);\n\n  const handleAmountChange = useCallback(validateAndSetAmount, [validateAndSetAmount]);\n\n  const handleMaxAmountClick = useCallback(\n    (e: React.MouseEvent<HTMLElement>) => {\n      e.preventDefault();\n\n      if (!balance) {\n        return;\n      }\n\n      setShouldUseAllBalance(true);\n    },\n    [balance],\n  );\n\n  const handleCommentChange = useCallback((value) => {\n    setComment(trimStringByMaxBytes(value, COMMENT_MAX_SIZE_BYTES));\n    onCommentChange?.();\n  }, [onCommentChange]);\n\n  const canSubmit = toAddress.length && amount && balance && amount > 0\n    && amount <= balance && !hasToAddressError && !hasAmountError;\n\n  const handleSubmit = useLastCallback((e) => {\n    e.preventDefault();\n\n    if (!canSubmit) {\n      return;\n    }\n\n    submitTransferInitial({\n      tokenSlug,\n      amount: amount!,\n      toAddress,\n      comment,\n      shouldEncrypt: shouldEncryptComment,\n    });\n  });\n\n  const handleCommentOptionsChange = useLastCallback((option: string) => {\n    setShouldEncryptComment(option === 'encrypted');\n  });\n\n  const renderedSavedAddresses = useMemo(() => {\n    if (!savedAddresses) {\n      return undefined;\n    }\n\n    return Object.keys(savedAddresses).map((address) => renderSavedAddress(\n      address,\n      savedAddresses[address],\n      lang('Delete') as string,\n      handleSavedAddressClick,\n      handleDeleteSavedAddressClick,\n    ));\n  }, [savedAddresses, lang, handleSavedAddressClick, handleDeleteSavedAddressClick]);\n\n  function renderSavedAddresses() {\n    return (\n      <Menu positionX=\"right\" type=\"suggestion\" noBackdrop isOpen={isSavedAddressesOpen} onClose={closeSavedAddresses}>\n        {renderedSavedAddresses}\n      </Menu>\n    );\n  }\n\n  function renderBottomRight() {\n    const withFee = fee && amount && amount > 0;\n\n    return (\n      <Transition\n        className={buildClassName(styles.amountBottomRight, isStatic && styles.amountBottomRight_static)}\n        slideClassName={styles.amountBottomRight_slide}\n        name=\"fade\"\n        activeKey={isInsufficientBalance ? 2 : withFee ? 1 : 0}\n      >\n        {isInsufficientBalance ? (\n          <span className={styles.balanceError}>{lang('Insufficient balance')}</span>\n        ) : withFee ? (\n          lang('$fee_value', {\n            fee: (\n              <span className={styles.feeValue}>\n                {formatCurrencyExtended(bigStrToHuman(renderingFee!), CARD_SECONDARY_VALUE_SYMBOL, true)}\n              </span>\n            ),\n          })\n        ) : (\n          ' '\n        )}\n      </Transition>\n    );\n  }\n\n  function renderBalance() {\n    if (!symbol) {\n      return undefined;\n    }\n\n    return (\n      <div className={styles.balanceContainer}>\n        <span className={styles.balance}>\n          {lang('$your_balance_is', {\n            balance: (\n              <a href=\"#\" onClick={handleMaxAmountClick} className={styles.balanceLink}>\n                {balance !== undefined ? formatCurrencyExtended(balance, symbol, true) : lang('Loading...')}\n              </a>\n            ),\n          })}\n        </span>\n      </div>\n    );\n  }\n\n  function renderTokens() {\n    return (\n      <DropDown\n        items={dropDownItems}\n        selectedValue={tokenSlug}\n        className={styles.tokenDropdown}\n        onChange={handleTokenChange}\n      />\n    );\n  }\n\n  function renderCurrencyValue() {\n    return (\n      <span className={buildClassName(styles.amountInCurrency, currencyClassNames)}>\n        ≈&thinsp;{formatCurrency(renderingAmountInCurrency || 0, DEFAULT_PRICE_CURRENCY)}\n      </span>\n    );\n  }\n\n  function renderCommentLabel() {\n    return (\n      <DropDown\n        items={COMMENT_DROPDOWN_ITEMS}\n        selectedValue={COMMENT_DROPDOWN_ITEMS[shouldEncryptComment ? 1 : 0].value}\n        theme=\"light\"\n        menuPositionHorizontal=\"left\"\n        shouldTranslateOptions\n        className={styles.commentLabel}\n        onChange={handleCommentOptionsChange}\n      />\n    );\n  }\n\n  return (\n    <>\n      <form className={isStatic ? undefined : modalStyles.transitionContent} onSubmit={handleSubmit}>\n        <Input\n          ref={toAddressRef}\n          className={isStatic ? styles.inputStatic : undefined}\n          isRequired\n          label={lang('Recipient Address')}\n          placeholder={lang('Wallet address or domain')}\n          value={isAddressFocused ? toAddress : toAddressShort}\n          error={hasToAddressError ? (lang('Incorrect address') as string) : undefined}\n          onInput={setToAddress}\n          onFocus={handleAddressFocus}\n          onBlur={handleAddressBlur}\n        >\n          {shouldRenderPasteButton && toAddress === '' && (\n            <Button isSimple className={styles.inputButton} onClick={handlePasteClick} ariaLabel={lang('Paste')}>\n              <i className=\"icon-paste\" />\n            </Button>\n          )}\n        </Input>\n\n        {hasSavedAddresses && renderSavedAddresses()}\n\n        {renderBalance()}\n        <RichNumberInput\n          key=\"amount\"\n          id=\"amount\"\n          hasError={hasAmountError}\n          value={amount}\n          labelText={lang('Amount')}\n          onChange={handleAmountChange}\n          onPressEnter={handleSubmit}\n          decimals={decimals}\n          className={styles.amountInput}\n          inputClassName={isStatic ? styles.inputRichStatic : undefined}\n        >\n          {renderTokens()}\n        </RichNumberInput>\n\n        <div className={styles.amountBottomWrapper}>\n          <div className={styles.amountBottom}>\n            {shouldRenderCurrency && renderCurrencyValue()}\n            {renderBottomRight()}\n          </div>\n        </div>\n\n        <Input\n          className={isStatic ? styles.inputStatic : undefined}\n          label={renderCommentLabel()}\n          placeholder={lang('Optional')}\n          value={comment}\n          onInput={handleCommentChange}\n          isControlled\n          isMultiline\n        />\n\n        <div className={buildClassName(modalStyles.buttons, isStatic && styles.buttonSubmit)}>\n          <Button isPrimary isSubmit isDisabled={!canSubmit} isLoading={isLoading}>\n            {lang('$send_token_symbol', symbol || 'TON')}\n          </Button>\n        </div>\n      </form>\n      <DeleteSavedAddressModal\n        isOpen={Boolean(savedAddressForDeletion)}\n        address={savedAddressForDeletion}\n        onClose={closeDeleteSavedAddressModal}\n      />\n    </>\n  );\n}\n\nexport default memo(\n  withGlobal((global): StateProps => {\n    const {\n      toAddress: initialAddress,\n      amount: initialAmount,\n      comment: initialComment,\n      shouldEncrypt: initialShouldEncryptComment,\n      fee,\n      tokenSlug,\n      isLoading,\n    } = global.currentTransfer;\n\n    return {\n      initialAddress,\n      initialAmount,\n      initialComment,\n      initialShouldEncryptComment,\n      fee,\n      tokenSlug,\n      tokens: selectCurrentAccountTokens(global),\n      isLoading,\n      savedAddresses: selectCurrentAccountState(global)?.savedAddresses,\n    };\n  })(TransferInitial),\n);\n\nfunction trimStringByMaxBytes(str: string, maxBytes: number) {\n  const decoder = new TextDecoder('utf-8');\n  const encoded = new TextEncoder().encode(str);\n\n  return decoder.decode(encoded.slice(0, maxBytes)).replace(/\\uFFFD/g, '');\n}\n\nfunction renderSavedAddress(\n  address: string,\n  name: string,\n  deleteLabel: string,\n  onClick: (address: string) => void,\n  onDeleteClick: (address: string) => void,\n) {\n  const handleDeleteClick = (e: React.MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    onDeleteClick(address);\n  };\n\n  return (\n    <div\n      key={address}\n      tabIndex={-1}\n      role=\"button\"\n      onMouseDown={IS_TOUCH_ENV ? undefined : () => onClick(address)}\n      onClick={IS_TOUCH_ENV ? () => onClick(address) : undefined}\n      className={styles.savedAddressItem}\n    >\n      <span className={styles.savedAddressName}>{name}</span>\n      <span className={styles.savedAddressDelete}>\n        <span tabIndex={-1} role=\"button\" className={styles.savedAddressDeleteInner} onMouseDown={handleDeleteClick}>\n          {deleteLabel}\n        </span>\n      </span>\n      <span className={styles.savedAddressAddress}>{shortenAddress(address)}</span>\n    </div>\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"e0qlnfxYeOXhXHjNoYD1\",\"tabs\":\"LU3U59D2YsR4Z8gTFrbQ\",\"tab\":\"IIPQlxNIi9xQiftG5tTj\",\"active\":\"oojsUyxncxsDRnQursqd\",\"tab_purple\":\"SNIYsgjl3BaffB3s1wFR\",\"tabPurple\":\"SNIYsgjl3BaffB3s1wFR\",\"tabDelimiter\":\"CfUxuAbScRujzEgaGvNj\",\"tabDecoration\":\"bGVc72ZhPv9KYjXo_Aqe\",\"tabIcon\":\"vukLOr5voLZFxsFhGCpY\",\"contentHeader\":\"DRyVG6f7Eg7NfD_XNfM4\",\"firstActive\":\"G3lSLCxSLp08K4TjWeYo\",\"contentHeaderInner\":\"iPMIoWjy3llXlGB0Ca5C\",\"lastActive\":\"c6v5BGkTeZj0ZKXhzfat\",\"contentBg\":\"CqElYhFimsIsxzLmkebg\",\"contentFooter\":\"GYXMF9yMkbPJ0VEricSw\",\"contentSlideStaked\":\"yl56ZVg3FAcNvyhV5Ip4\",\"tab-0\":\"us3PCcLtH7aHGprxaemz\",\"tab0\":\"us3PCcLtH7aHGprxaemz\",\"tab-1\":\"tuaIpRvcFX2qv1q4a2jl\",\"tab1\":\"tuaIpRvcFX2qv1q4a2jl\",\"slideContent\":\"LtJ6LH4kpke2DTPib0CW\",\"transitionContent\":\"UPfai1Mx_5o0dPW6FCzT\"};","import React, {\n  memo, useCallback, useEffect, useMemo, useRef,\n} from '../../../../lib/teact/teact';\n\nimport { ElectronEvent } from '../../../../electron/types';\n\nimport { getActions, withGlobal } from '../../../../global';\nimport { selectLandscapeActionsActiveTabIndex } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport getBoundingClientRectsAsync from '../../../../util/getBoundingClientReactAsync';\nimport { fastRaf } from '../../../../util/schedulers';\nimport { ReceiveStatic } from '../../../receive';\n\nimport useLang from '../../../../hooks/useLang';\n\nimport StakingInfoContent from '../../../staking/StakingInfoContent';\nimport StakingInitial from '../../../staking/StakingInitial';\nimport TransferInitial from '../../../transfer/TransferInitial';\nimport Transition, { ACTIVE_SLIDE_CLASS_NAME, TO_SLIDE_CLASS_NAME } from '../../../ui/Transition';\n\nimport styles from './LandscapeActions.module.scss';\n\nconst TABS = ['receive', 'send', 'earn'];\n\ninterface OwnProps {\n  hasStaking?: boolean;\n  isUnstakeRequested?: boolean;\n}\n\ninterface StateProps {\n  activeTabIndex: 0 | 1 | 2;\n}\n\nconst STAKING_TAB_INDEX = 2;\n\nfunction LandscapeActions({\n  hasStaking,\n  activeTabIndex,\n  isUnstakeRequested,\n}: OwnProps & StateProps) {\n  const { setLandscapeActionsActiveTabIndex: setActiveTabIndex } = getActions();\n\n  const lang = useLang();\n\n  const isStaking = activeTabIndex === STAKING_TAB_INDEX && (hasStaking || isUnstakeRequested);\n  const {\n    renderedBgHelpers,\n    transitionRef,\n    handleTransitionStart,\n  } = useTabHeightAnimation(\n    styles.slideContent,\n    isStaking ? styles.contentSlideStaked : undefined,\n    isStaking,\n  );\n\n  function renderCurrentTab(isActive: boolean) {\n    switch (TABS[activeTabIndex]) {\n      case 'receive':\n        return <ReceiveStatic className={styles.slideContent} />;\n\n      case 'send':\n        return (\n          <div className={styles.slideContent}>\n            <TransferInitial isStatic onCommentChange={handleTransitionStart} />\n          </div>\n        );\n\n      case 'earn':\n        if (hasStaking || isUnstakeRequested) {\n          return (\n            <div className={styles.slideContent}>\n              <StakingInfoContent isStatic isActive={isActive} />\n            </div>\n          );\n        }\n\n        return (\n          <div className={styles.slideContent}>\n            <StakingInitial isStatic isActive={isActive} />\n          </div>\n        );\n\n      default:\n        return undefined;\n    }\n  }\n\n  useEffect(() => {\n    return window.electron?.on(ElectronEvent.DEEPLINK, () => {\n      setActiveTabIndex({ index: 1 });\n    });\n  }, [setActiveTabIndex]);\n\n  useEffect(() => {\n    handleTransitionStart();\n  }, [activeTabIndex, handleTransitionStart]);\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.tabs}>\n        <div\n          className={buildClassName(styles.tab, activeTabIndex === 0 && styles.active)}\n          onClick={() => setActiveTabIndex({ index: 0 })}\n        >\n          <i className={buildClassName(styles.tabIcon, 'icon-receive')} aria-hidden />\n          <span>{lang('Receive')}</span>\n\n          <span className={styles.tabDecoration} aria-hidden />\n        </div>\n        <div\n          className={buildClassName(styles.tab, activeTabIndex === 1 && styles.active)}\n          onClick={() => setActiveTabIndex({ index: 1 })}\n        >\n          <i className={buildClassName(styles.tabIcon, 'icon-send')} aria-hidden />\n          <span>{lang('Send')}</span>\n          <span className={styles.tabDecoration} aria-hidden />\n          <span className={styles.tabDelimiter} aria-hidden />\n        </div>\n        <div\n          className={buildClassName(\n            styles.tab,\n            activeTabIndex === STAKING_TAB_INDEX && styles.active,\n            isStaking && styles.tab_purple,\n          )}\n          onClick={() => setActiveTabIndex({ index: STAKING_TAB_INDEX })}\n        >\n          <i className={buildClassName(styles.tabIcon, 'icon-earn')} aria-hidden />\n          <span>{lang(isUnstakeRequested ? 'Unstaking' : (hasStaking ? 'Earning' : 'Earn'))}</span>\n          <span className={styles.tabDecoration} aria-hidden />\n          <span className={styles.tabDelimiter} aria-hidden />\n        </div>\n      </div>\n\n      <div\n        className={buildClassName(\n          styles.contentHeader,\n          activeTabIndex === 0 && styles.firstActive,\n          activeTabIndex === TABS.length - 1 && styles.lastActive,\n        )}\n      >\n        <div className={buildClassName(styles.contentHeaderInner, isStaking && styles.contentSlideStaked)} />\n      </div>\n      {renderedBgHelpers}\n\n      <Transition\n        ref={transitionRef}\n        name=\"slideFade\"\n        activeKey={activeTabIndex}\n        renderCount={TABS.length}\n        className={styles.transitionContent}\n      >\n        {renderCurrentTab}\n      </Transition>\n    </div>\n  );\n}\n\nfunction useTabHeightAnimation(slideClassName: string, contentBackgroundClassName?: string, isUnstaking = false) {\n  // eslint-disable-next-line no-null/no-null\n  const transitionRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const contentBgRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const contentFooterRef = useRef<HTMLDivElement>(null);\n\n  const lastHeightRef = useRef<number>();\n\n  const adjustBg = useCallback((noTransition = false) => {\n    const suffix = isUnstaking ? ' .staking-info' : '';\n    const nextSlide = transitionRef.current!.querySelector<HTMLDivElement>(\n      // eslint-disable-next-line max-len\n      `.${slideClassName}.${TO_SLIDE_CLASS_NAME}${suffix}, .${slideClassName}.${TO_SLIDE_CLASS_NAME}${suffix}, .${slideClassName}.${ACTIVE_SLIDE_CLASS_NAME}${suffix}, .${slideClassName}.${ACTIVE_SLIDE_CLASS_NAME}${suffix}`,\n    )!;\n\n    getBoundingClientRectsAsync(nextSlide).then((rect) => {\n      if (lastHeightRef.current !== rect.height && contentBgRef.current) {\n        if (noTransition) {\n          contentBgRef.current.style.transition = 'none';\n          contentFooterRef.current!.style.transition = 'none';\n        }\n\n        contentBgRef.current.style.transform = `scaleY(calc(${rect.height} / 100))`;\n        contentFooterRef.current!.style.transform = `translateY(${Math.floor(rect.height)}px)`;\n\n        if (noTransition) {\n          // For some reason, single `fastRaf` was not enough\n          fastRaf(() => {\n            fastRaf(() => {\n              contentBgRef.current!.style.transition = '';\n              contentFooterRef.current!.style.transition = '';\n            });\n          });\n        }\n\n        lastHeightRef.current = rect.height;\n      }\n    });\n  }, [isUnstaking, slideClassName]);\n\n  const lang = useLang();\n\n  useEffect(() => {\n    adjustBg(true);\n  }, [adjustBg, lang]);\n\n  const renderedBgHelpers = useMemo(() => {\n    return (\n      <>\n        <div ref={contentBgRef} className={buildClassName(styles.contentBg, contentBackgroundClassName)} />\n        <div ref={contentFooterRef} className={buildClassName(styles.contentFooter, contentBackgroundClassName)} />\n      </>\n    );\n  }, [contentBackgroundClassName]);\n\n  return {\n    renderedBgHelpers,\n    transitionRef,\n    handleTransitionStart: adjustBg,\n  };\n}\n\nexport default memo(\n  withGlobal<OwnProps>((global): StateProps => {\n    const activeTabIndex = selectLandscapeActionsActiveTabIndex(global);\n\n    return { activeTabIndex };\n  })(LandscapeActions),\n);\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"ByPF3p3SYmB9EE1bHmBs\",\"buttons\":\"bnicM32fFVnwDINn30wx\",\"button\":\"tNC9bMYLy3MqyRt14eGF\",\"button_purple\":\"xqRKvSfc1Z1I6HOzUTIQ\",\"buttonPurple\":\"xqRKvSfc1Z1I6HOzUTIQ\",\"buttonIcon\":\"SArAaw5Ga1KwAygaYTHD\"};","import React, { memo, useEffect } from '../../../../lib/teact/teact';\n\nimport { ElectronEvent } from '../../../../electron/types';\n\nimport { TON_TOKEN_SLUG } from '../../../../config';\nimport { getActions } from '../../../../global';\nimport { bigStrToHuman } from '../../../../global/helpers';\nimport buildClassName from '../../../../util/buildClassName';\n\nimport useFlag from '../../../../hooks/useFlag';\nimport useLang from '../../../../hooks/useLang';\n\nimport ReceiveModal from '../../../receive/ReceiveModal';\nimport Button from '../../../ui/Button';\n\nimport styles from './PortraitActions.module.scss';\n\ninterface OwnProps {\n  hasStaking?: boolean;\n  isUnstakeRequested?: boolean;\n  onEarnClick: NoneToVoidFunction;\n}\n\nfunction PortraitActions({ hasStaking, isUnstakeRequested, onEarnClick }: OwnProps) {\n  const { startTransfer } = getActions();\n\n  const lang = useLang();\n  const [isReceiveTonOpened, openReceiveTon, closeReceiveTon] = useFlag(false);\n\n  useEffect(() => {\n    return window.electron?.on(ElectronEvent.DEEPLINK, (params: any) => {\n      startTransfer({\n        tokenSlug: TON_TOKEN_SLUG,\n        toAddress: params.to,\n        amount: bigStrToHuman(params.amount),\n        comment: params.text,\n      });\n    });\n  }, [startTransfer]);\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.buttons}>\n        <Button className={styles.button} onClick={openReceiveTon} isSimple>\n          <i className={buildClassName(styles.buttonIcon, 'icon-receive')} aria-hidden />\n          {lang('Receive')}\n        </Button>\n        <Button className={styles.button} onClick={startTransfer} isSimple>\n          <i className={buildClassName(styles.buttonIcon, 'icon-send')} aria-hidden />\n          {lang('Send')}\n        </Button>\n        <Button\n          className={buildClassName(styles.button, hasStaking && styles.button_purple)}\n          onClick={onEarnClick}\n          isSimple\n        >\n          <i className={buildClassName(styles.buttonIcon, 'icon-earn')} aria-hidden />\n          {lang(isUnstakeRequested ? 'Unstaking' : hasStaking ? 'Earning' : 'Earn')}\n        </Button>\n      </div>\n      <ReceiveModal isOpen={isReceiveTonOpened} onClose={closeReceiveTon} />\n    </div>\n  );\n}\n\nexport default memo(PortraitActions);\n","export function calcChangeValue(currentPrice: number, changeFactor: number) {\n  return currentPrice - currentPrice / (1 + changeFactor);\n}\n","const TOKEN_CARD_COLORS = [\n  'red',\n  'orange',\n  'green',\n  'sea',\n  'purple',\n  'pink',\n];\n\nconst INDIVIDUAL_COLORS: Record<string, string> = {\n  'ton-tgr': 'tegro',\n};\n\nexport function getTokenCardColor(slug: string) {\n  if (slug in INDIVIDUAL_COLORS) {\n    return INDIVIDUAL_COLORS[slug];\n  }\n\n  // https://www.30secondsofcode.org/js/s/sdbm\n  const tokenNumber = slug.split('').reduce(\n    // eslint-disable-next-line no-return-assign,no-bitwise\n    (acc, char) => (acc = char.charCodeAt(0) + (acc << 6) + (acc << 16) - acc),\n    0,\n  );\n\n  return TOKEN_CARD_COLORS[Math.abs(tokenNumber) % TOKEN_CARD_COLORS.length];\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"W5Csiq71oMTSj2ttRwgL\",\"modalText\":\"noNxlUDgu_iVmQGeNNAb\",\"button\":\"ipgCscA6uGGKWFxPKTCt\",\"button_single\":\"nIORoWLnyRgyiTiJJYCO\",\"buttonSingle\":\"nIORoWLnyRgyiTiJJYCO\",\"modalButtons\":\"PhxvRBAsiMApU2mRHfbA\",\"importText\":\"rVVZxLvd3FlM5HkSR4z5\",\"importButtons\":\"uZ7peY11lLFWggaU6Fpl\",\"sticker\":\"_7n4N6Ihxk4kBSu1qLM8G\"};","import React, { memo, useCallback, useState } from '../../../lib/teact/teact';\n\nimport type { Account, HardwareConnectState } from '../../../global/types';\nimport type { LedgerWalletInfo } from '../../../util/ledger/types';\n\nimport { ANIMATED_STICKER_BIG_SIZE_PX, MNEMONIC_COUNT } from '../../../config';\nimport { getActions, withGlobal } from '../../../global';\nimport renderText from '../../../global/helpers/renderText';\nimport { selectFirstNonHardwareAccount, selectNetworkAccounts } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { IS_LEDGER_SUPPORTED } from '../../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../hooks/useLang';\n\nimport LedgerConnect from '../../ledger/LedgerConnect';\nimport LedgerSelectWallets from '../../ledger/LedgerSelectWallets';\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\nimport ModalHeader from '../../ui/ModalHeader';\nimport PasswordForm from '../../ui/PasswordForm';\nimport Transition from '../../ui/Transition';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './AddAccountModal.module.scss';\n\ninterface StateProps {\n  isOpen?: boolean;\n  isLoading?: boolean;\n  error?: string;\n\n  firstNonHardwareAccount?: Account;\n  hardwareWallets?: LedgerWalletInfo[];\n  accounts?: Record<string, Account>;\n  hardwareState?: HardwareConnectState;\n  isLedgerConnected?: boolean;\n  isTonAppConnected?: boolean;\n}\n\nconst enum RenderingState {\n  Initial,\n  Password,\n\n  ConnectHardware,\n  SelectAccountsHardware,\n}\n\nfunction AddAccountModal({\n  isOpen,\n  isLoading,\n  error,\n  hardwareWallets,\n  firstNonHardwareAccount,\n  accounts,\n  hardwareState,\n  isLedgerConnected,\n  isTonAppConnected,\n}: StateProps & StateProps) {\n  const { addAccount, clearAccountError, closeAddAccountModal } = getActions();\n\n  const lang = useLang();\n  const [renderingKey, setRenderingKey] = useState<number>(RenderingState.Initial);\n\n  const [isNewAccountImporting, setIsNewAccountImporting] = useState<boolean>(false);\n\n  const handleBackClick = useCallback(() => {\n    setRenderingKey(RenderingState.Initial);\n    clearAccountError();\n  }, [clearAccountError]);\n\n  const handleModalClose = useCallback(() => {\n    setRenderingKey(RenderingState.Initial);\n    setIsNewAccountImporting(false);\n  }, []);\n\n  const handleNewAccountClick = useCallback(() => {\n    if (!firstNonHardwareAccount) {\n      addAccount({\n        method: 'createAccount',\n        password: '',\n      });\n      return;\n    }\n\n    setRenderingKey(RenderingState.Password);\n    setIsNewAccountImporting(false);\n  }, [firstNonHardwareAccount, addAccount]);\n\n  const handleImportAccountClick = useCallback(() => {\n    if (!firstNonHardwareAccount) {\n      addAccount({\n        method: 'importMnemonic',\n        password: '',\n      });\n      return;\n    }\n\n    setRenderingKey(RenderingState.Password);\n    setIsNewAccountImporting(true);\n  }, [firstNonHardwareAccount, addAccount]);\n\n  const handleImportHardwareWalletClick = useCallback(() => {\n    setRenderingKey(RenderingState.ConnectHardware);\n  }, []);\n\n  const handleHardwareWalletConnected = useCallback(() => {\n    setRenderingKey(RenderingState.SelectAccountsHardware);\n  }, []);\n\n  const handleSubmit = useCallback((password: string) => {\n    addAccount({ method: isNewAccountImporting ? 'importMnemonic' : 'createAccount', password });\n  }, [addAccount, isNewAccountImporting]);\n\n  function renderSelector(isActive?: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Add Wallet')} onClose={closeAddAccountModal} />\n        <AnimatedIconWithPreview\n          size={ANIMATED_STICKER_BIG_SIZE_PX}\n          play={isActive}\n          noLoop={false}\n          nonInteractive\n          className={styles.sticker}\n          tgsUrl={ANIMATED_STICKERS_PATHS.forge}\n          previewUrl={ANIMATED_STICKERS_PATHS.forgePreview}\n        />\n        <p className={styles.modalText}>\n          {renderText(lang('$add_account_description1'))}\n        </p>\n        <p className={styles.modalText}>\n          {renderText(lang('$add_account_description2'))}\n        </p>\n\n        <div className={styles.modalButtons}>\n          <Button\n            isPrimary\n            className={buildClassName(styles.button, styles.button_single)}\n            onClick={handleNewAccountClick}\n          >\n            {lang('Create Wallet')}\n          </Button>\n          <span className={styles.importText}>{lang('Or import from...')}</span>\n          <div className={styles.importButtons}>\n            <Button\n              className={styles.button}\n              onClick={handleImportAccountClick}\n            >\n              {lang('%1$d Secret Words', MNEMONIC_COUNT)}\n            </Button>\n            {IS_LEDGER_SUPPORTED && (\n              <Button\n                className={styles.button}\n                onClick={handleImportHardwareWalletClick}\n              >\n                {lang('Ledger')}\n              </Button>\n            )}\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderPassword(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Enter Password')} onClose={closeAddAccountModal} />\n        <PasswordForm\n          isActive={isActive}\n          isLoading={isLoading}\n          error={error}\n          placeholder={lang('Enter your password')}\n          onUpdate={clearAccountError}\n          onSubmit={handleSubmit}\n          submitLabel={lang('Send')}\n          onCancel={handleBackClick}\n          cancelLabel={lang('Back')}\n        />\n      </>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case RenderingState.Initial:\n        return renderSelector(isActive);\n      case RenderingState.Password:\n        return renderPassword(isActive);\n      case RenderingState.ConnectHardware:\n        return (\n          <LedgerConnect\n            state={hardwareState}\n            isLedgerConnected={isLedgerConnected}\n            isTonAppConnected={isTonAppConnected}\n            onConnected={handleHardwareWalletConnected}\n            onCancel={handleBackClick}\n            onClose={closeAddAccountModal}\n          />\n        );\n      case RenderingState.SelectAccountsHardware:\n        return (\n          <LedgerSelectWallets\n            accounts={accounts}\n            hardwareWallets={hardwareWallets}\n            onCancel={handleBackClick}\n            onClose={closeAddAccountModal}\n          />\n        );\n    }\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      isSlideUp\n      isOpen={isOpen}\n      onClose={closeAddAccountModal}\n      noBackdropClose\n      onCloseAnimationEnd={handleModalClose}\n      dialogClassName={styles.modalDialog}\n    >\n      <Transition\n        name=\"pushSlide\"\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={renderingKey === RenderingState.Initial ? RenderingState.Password : undefined}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accounts = selectNetworkAccounts(global);\n  const firstNonHardwareAccount = selectFirstNonHardwareAccount(global);\n\n  const {\n    hardwareWallets,\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n  } = global.hardware;\n\n  return {\n    isOpen: global.isAddAccountModalOpen,\n    isLoading: global.accounts?.isLoading,\n    error: global.accounts?.error,\n\n    accounts,\n    firstNonHardwareAccount,\n    hardwareState,\n    hardwareWallets,\n    isLedgerConnected,\n    isTonAppConnected,\n  };\n})(AddAccountModal));\n","import React, {\n  memo, useCallback, useEffect, useMemo, useRef, useState,\n} from '../../../../lib/teact/teact';\n\nimport type { Account } from '../../../../global/types';\n\nimport { getActions, withGlobal } from '../../../../global';\nimport { selectNetworkAccounts } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport captureEscKeyListener from '../../../../util/captureEscKeyListener';\nimport { shortenAddress } from '../../../../util/shortenAddress';\nimport trapFocus from '../../../../util/trapFocus';\n\nimport useFlag from '../../../../hooks/useFlag';\nimport useFocusAfterAnimation from '../../../../hooks/useFocusAfterAnimation';\nimport useLang from '../../../../hooks/useLang';\nimport useShowTransition from '../../../../hooks/useShowTransition';\n\nimport Button from '../../../ui/Button';\nimport AddAccountModal from '../../modals/AddAccountModal';\n\nimport styles from './AccountSelector.module.scss';\n\ninterface StateProps {\n  currentAccountId: string;\n  currentAccount?: Account;\n  accounts?: Record<string, Account>;\n}\n\nconst ACCOUNT_ADDRESS_SHIFT = 4;\nconst ACCOUNTS_AMOUNT_FOR_COMPACT_DIALOG = 3;\n\nfunction AccountSelector({\n  currentAccountId,\n  currentAccount,\n  accounts,\n}: StateProps) {\n  const {\n    switchAccount, renameAccount, openAddAccountModal, openSettings,\n  } = getActions();\n\n  // eslint-disable-next-line no-null/no-null\n  const modalRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  const lang = useLang();\n  const [isOpen, openAccountSelector, closeAccountSelector] = useFlag(false);\n  const [isEdit, openEdit, closeEdit] = useFlag(false);\n  const { shouldRender, transitionClassNames } = useShowTransition(isOpen && !isEdit);\n  const [inputValue, setInputValue] = useState<string>(currentAccount?.title || '');\n\n  const accountsAmount = useMemo(() => Object.keys(accounts || {}).length, [accounts]);\n\n  useEffect(\n    () => (shouldRender ? captureEscKeyListener(closeAccountSelector) : undefined),\n    [closeAccountSelector, isOpen, shouldRender],\n  );\n  useEffect(\n    () => (isEdit ? captureEscKeyListener(closeEdit) : undefined),\n    [closeEdit, isEdit],\n  );\n  useEffect(() => (shouldRender && modalRef.current ? trapFocus(modalRef.current) : undefined), [shouldRender]);\n  useFocusAfterAnimation(inputRef, !isEdit);\n  useEffect(() => {\n    if (isEdit) {\n      setInputValue(currentAccount?.title || '');\n    }\n  }, [currentAccount?.title, isEdit]);\n\n  const handleOpenAccountSelector = useCallback(() => {\n    openAccountSelector();\n  }, [openAccountSelector]);\n\n  const handleSwitchAccount = (value: string) => {\n    closeAccountSelector();\n    switchAccount({ accountId: value });\n  };\n\n  const handleEditClick = (e: React.MouseEvent) => {\n    e.stopPropagation();\n\n    openEdit();\n  };\n\n  const handleSaveClick = useCallback(() => {\n    renameAccount({ accountId: currentAccountId, title: inputValue.trim() });\n    closeAccountSelector();\n    closeEdit();\n  }, [closeAccountSelector, closeEdit, currentAccountId, inputValue, renameAccount]);\n\n  const handleAddWalletClick = useCallback(() => {\n    closeAccountSelector();\n    openAddAccountModal();\n  }, [closeAccountSelector, openAddAccountModal]);\n\n  const handleInputKeyDown = useCallback((e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.code === 'Enter') {\n      handleSaveClick();\n    } else {\n      setInputValue(e.currentTarget.value);\n    }\n  }, [handleSaveClick]);\n\n  function renderButton(accountId: string, address: string, isHardware?: boolean, title?: string) {\n    const isActive = accountId === currentAccountId;\n\n    return (\n      <div\n        className={buildClassName(styles.button, isActive && styles.button_current)}\n        aria-label={lang('Switch Account')}\n        onClick={isActive ? undefined : () => handleSwitchAccount(accountId)}\n      >\n        {title && <span className={styles.accountName}>{title}</span>}\n        <div className={styles.accountAddressBlock}>\n          {isHardware && <i className=\"icon-ledger\" />}\n          <span>\n            {shortenAddress(address, ACCOUNT_ADDRESS_SHIFT)}\n          </span>\n        </div>\n\n        {isActive && (\n          <div className={styles.edit} onClick={handleEditClick}>\n            <i className=\"icon-pen\" />\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  const fullClassName = buildClassName(\n    styles.container,\n    transitionClassNames,\n  );\n\n  function renderCurrentAccount() {\n    return (\n      <>\n        <div className={styles.addressTitle} onClick={handleOpenAccountSelector}>\n          {currentAccount?.title || shortenAddress(currentAccount?.address || '')}\n        </div>\n        <Button\n          className={styles.menuButton}\n          isText\n          isSimple\n          kind=\"transparent\"\n          ariaLabel={lang('Main menu')}\n          onClick={openSettings}\n        >\n          <i className=\"icon-cog\" aria-hidden />\n        </Button>\n      </>\n    );\n  }\n\n  function renderInput() {\n    return (\n      <div className={buildClassName(styles.inputContainer, 'account-edit-input')}>\n        <input\n          ref={inputRef}\n          className={styles.input}\n          value={inputValue}\n          onKeyDown={handleInputKeyDown}\n          onChange={(e) => setInputValue(e.target.value)}\n        />\n        <Button isSimple className={styles.saveButton} onClick={handleSaveClick}>{lang('Done')}</Button>\n      </div>\n    );\n  }\n\n  function renderAccountsChooser() {\n    const dialogFullClassName = buildClassName(\n      styles.dialog,\n      'custom-scroll',\n      accountsAmount <= ACCOUNTS_AMOUNT_FOR_COMPACT_DIALOG && styles.dialog_compact,\n    );\n\n    return (\n      <div\n        ref={modalRef}\n        className={fullClassName}\n        tabIndex={-1}\n        role=\"dialog\"\n      >\n        <div className={styles.backdrop} onClick={() => closeAccountSelector()} />\n        <div className={dialogFullClassName}>\n          {accounts && Object.entries(accounts).map(\n            ([accountId, { title, address, isHardware }]) => renderButton(accountId, address, isHardware, title),\n          )}\n          <Button className={styles.createAccountButton} onClick={handleAddWalletClick}>\n            {lang('Add Wallet')}\n            <i className={buildClassName(styles.createAccountIcon, 'icon-plus')} />\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      {!isEdit && renderCurrentAccount()}\n      {isEdit && renderInput()}\n\n      {shouldRender && renderAccountsChooser()}\n      <AddAccountModal />\n    </>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accounts = selectNetworkAccounts(global);\n\n  return {\n    currentAccountId: global.currentAccountId!,\n    currentAccount: accounts?.[global.currentAccountId!],\n    accounts,\n  };\n})(AccountSelector));\n","// extracted by mini-css-extract-plugin\nexport default {\"addressTitle\":\"OgwEDoZ45KwmCLCA5zpj\",\"menuButton\":\"USR586er2uUGAHZPx1Wk\",\"edit\":\"J7hjRhszkXO5p85adHAT\",\"inputContainer\":\"e5AePW4gS5PGIXHiyO7O\",\"input\":\"gyBxf1yqf55YBkbF2ZEo\",\"saveButton\":\"md7VCft6xPfyca1lZcDs\",\"container\":\"N2ycBm2xIZKdvdtOFb3u\",\"dialog\":\"trYu68gIXfuRgpfUr29d\",\"backdrop\":\"FJUdPjPIbA0M3pla92Ck\",\"dialog_compact\":\"YF_rZIX0toGTmxE3kPhQ\",\"dialogCompact\":\"YF_rZIX0toGTmxE3kPhQ\",\"actionIcon\":\"E1dTbxkwyIXMGeYZhYgA\",\"button\":\"SFqlekd4PdXLErExtIMt\",\"button_current\":\"JKaS2WTmWNa1JwNOe0Bi\",\"buttonCurrent\":\"JKaS2WTmWNa1JwNOe0Bi\",\"accountName\":\"YXQR6QKvQ0rHGV6rNDhq\",\"accountAddressBlock\":\"v3biV8NkHTEkePAvwNKu\",\"createAccountButton\":\"vYLqby8wJWKB8e2p9Z82\",\"createAccountIcon\":\"XgEoiRq_JlhNbm6m8d4w\"};","import React, { memo, useMemo } from '../../lib/teact/teact';\n\nimport type { ApiHistoryList } from '../../api/types';\n\nimport useLang from '../../hooks/useLang';\n\ninterface OwnProps {\n  width: number;\n  height: number;\n  prices: ApiHistoryList;\n  selectedIndex: number;\n  className?: string;\n  imgClassName?: string;\n  onSelectIndex: (index: number) => void;\n}\n\nconst IS_SMOOTH = true;\nconst PATH_SMOOTHING = 0.0001;\n\nfunction TokenPriceChart({\n  width,\n  height,\n  prices,\n  selectedIndex,\n  className,\n  imgClassName,\n  onSelectIndex,\n}: OwnProps) {\n  const lang = useLang();\n\n  const boundingPoints = useMemo(() => {\n    const priceValues = prices.map(([, price]) => price);\n    const min = Math.min(...priceValues);\n    const max = Math.max(...priceValues);\n\n    return {\n      width: prices.length - 1,\n      height: max - min,\n      min,\n    };\n  }, [prices]);\n\n  const points = useMemo(() => {\n    const scaleX = width / boundingPoints.width;\n    const scaleY = height / boundingPoints.height;\n\n    return prices.map(([, y], i) => ({ x: i * scaleX + 3, y: (y - boundingPoints.min) * scaleY + 3 }));\n  }, [boundingPoints.height, boundingPoints.min, boundingPoints.width, height, width, prices]);\n\n  function getBasisPoint(i: number) {\n    const indexesCount = points.length - 1;\n    const index = i < 0 ? 0 : i > indexesCount ? indexesCount : i;\n    const point = points[index];\n    const ratio = 1 - PATH_SMOOTHING;\n    const tangent = index / indexesCount;\n    const firstPoint = points[0];\n    const distance = {\n      x: points[indexesCount].x - firstPoint.x,\n      y: points[indexesCount].y - firstPoint.y,\n    };\n\n    return {\n      x: ratio * point.x + (1 - ratio) * (firstPoint.x + tangent * distance.x),\n      y: ratio * point.y + (1 - ratio) * (firstPoint.y + tangent * distance.y),\n    };\n  }\n\n  function getCurvePath(i: number) {\n    const pCurrent = getBasisPoint(i);\n    const pMinus1 = getBasisPoint(i - 1);\n    const pMinus2 = getBasisPoint(i - 2);\n\n    const x1 = (2 * pMinus2.x + pMinus1.x) / 3;\n    const y1 = (2 * pMinus2.y + pMinus1.y) / 3;\n    const x2 = (pMinus2.x + 2 * pMinus1.x) / 3;\n    const y2 = (pMinus2.y + 2 * pMinus1.y) / 3;\n    const x3 = (pMinus2.x + 4 * pMinus1.x + pCurrent.x) / 6;\n    const y3 = (pMinus2.y + 4 * pMinus1.y + pCurrent.y) / 6;\n\n    return `C ${x1} ${y1} ${x2} ${y2} ${x3} ${y3}`;\n  }\n\n  function getLinePath(point: { x: number; y: number }) {\n    return `L ${point.x} ${point.y}`;\n  }\n\n  function getPath() {\n    let d = points.reduce((acc, point, i) => {\n      const partialPath = IS_SMOOTH\n        ? getCurvePath(i)\n        : getLinePath(point);\n      return i === 0\n        ? `M ${point.x} ${point.y} `\n        : `${acc} ${partialPath} `;\n    }, '');\n\n    if (IS_SMOOTH) {\n      d += getCurvePath(points.length);\n      d += getLinePath(points[points.length - 1]);\n    }\n\n    return d;\n  }\n\n  function renderSvg() {\n    const activePoint = points[selectedIndex] || points[points.length - 1];\n\n    const svg = `<svg viewBox=\"0 0 ${width + 6} ${height + 6}\" height=\"${height + 6}\" width=\"${width + 6}\"\n        xmlns=\"http://www.w3.org/2000/svg\" style=\"transform: scale(1,-1)\">\n        <g fill=\"none\" stroke=\"white\">\n          <path stroke-linejoin=\"round\" stroke-width=\"1.5\" d=\"${getPath()}\" style=\"stroke-linecap: round\" />\n          <circle r=\"2.5\" fill=\"white\" cx=\"${activePoint.x}\" cy=\"${activePoint.y}\" />\n        </g>\n      </svg>`;\n\n    return `data:image/svg+xml;utf8,${(svg)}`;\n  }\n\n  function handleMouseMove(e: React.MouseEvent<HTMLDivElement> | React.TouchEvent<HTMLDivElement>) {\n    const { x: containerX, width: containerWidth } = e.currentTarget.getBoundingClientRect();\n    const { clientX } = 'touches' in e ? e.touches[0] : e;\n    const segmentHalfWidth = (containerWidth / points.length) / 2;\n    const x = clientX - containerX - segmentHalfWidth;\n    const nextIndex = Math.max(0, Math.min(Math.round(points.length * (x / containerWidth)), points.length - 1));\n\n    onSelectIndex(nextIndex);\n  }\n\n  function handleMouseLeave() {\n    onSelectIndex(-1);\n  }\n\n  return (\n    <div\n      className={className}\n      onMouseMove={handleMouseMove}\n      onMouseLeave={handleMouseLeave}\n      onTouchStart={handleMouseMove}\n      onTouchMove={handleMouseMove}\n      onTouchEnd={handleMouseLeave}\n      onTouchCancel={handleMouseLeave}\n    >\n      <img\n        src={renderSvg()}\n        className={imgClassName}\n        alt={lang('Currency History')}\n      />\n    </div>\n  );\n}\n\nexport default memo(TokenPriceChart);\n","// extracted by mini-css-extract-plugin\nexport default {\"is-ios\":\"ovN_0TtekuFGuV0QuMvi\",\"isIos\":\"ovN_0TtekuFGuV0QuMvi\",\"is-android\":\"EoXwQYAleoCw5NiDAfS5\",\"isAndroid\":\"EoXwQYAleoCw5NiDAfS5\",\"containerWrapper\":\"XP6GuSy8hLi4agJLGJld\",\"container\":\"GCkv4IVyO5GFRuzhMyc7\",\"backstage\":\"ADeTm4f366XRNTV2KqwX\",\"tokenCard\":\"GnhzfY6FaHts66bRjdCd\",\"isLoading\":\"bPYXNjMGySirt8YEdLzi\",\"primaryValue\":\"S2KIjSruZ81fx_VGPX3Q\",\"primaryFractionPart\":\"hU1WPLiXbKZWVNTCRVxo\",\"addressContainer\":\"UcNb1YdQr1NeR8qEKoBE\",\"address\":\"ZSrINUdp2LP6AFAicuFa\",\"icon\":\"H_nNVGOdQmrOeQ1mojrf\",\"tonscanButton\":\"acKRqFpdtGpZLLEfzQE8\",\"change\":\"CXYYdc41bJWlFTlJrl3L\",\"changeCourseUp\":\"y1oQClJT2P5Fz0hauIT0\",\"changeCourseDown\":\"_5pkkE1MTYz6u8RShCzmv\",\"tokenInfo\":\"iTC7wtoSIMd1G0qbWwsr\",\"tokenLogo\":\"W9ZyJKJwjUvDXT9VLRex\",\"tokenAmount\":\"P1nAfSmKMRLcTtk66JwX\",\"tokenName\":\"Ym6n5UYkqmr7EOgZ4t21\",\"tokenPrice\":\"ppb1huZ4lUgSKDERCUvW\",\"tokenHistoryPrice\":\"uF8X1U6HKy9qeFM9_BAH\",\"tokenCurrentPrice\":\"VPkCzF8b2p6SyWLDw9Z5\",\"tokenChange\":\"zyPEodnHdQeHqWVPdgUd\",\"tokenPriceDate\":\"TZkWTsOhLbpil2zdS2gH\",\"apy\":\"IWxtScDcWiJ5nns1ER1J\",\"cmcButton\":\"DoKyGaDnjTfvyhL1ltTw\",\"chart\":\"g1tpOCiAEkQ89rXxRJty\",\"chartImg\":\"XqD9upuxl_mIB2uj59zO\",\"backButton\":\"DaiPhTU0_fsxB5fWztcP\",\"periodChooser\":\"fhxQJTU7h6ARSzF3VtaT\",\"compact\":\"t5O6snHuBNFRnExebCKB\",\"periodItem\":\"qKQh9RZSx7T2P9PcnAtN\",\"periodItem_active\":\"_uGzXf8VOMyBoz_yo_1y\",\"periodItemActive\":\"_uGzXf8VOMyBoz_yo_1y\",\"periodInput\":\"fX041OP26ENj0B5lLVVx\",\"dapp\":\"VLdGaXza9SwucVf1IgMo\",\"dappIcon\":\"SVZga9H5Gg5TwGcLfPj2\"};","import React, { memo, useState } from '../../../../lib/teact/teact';\n\nimport type { UserToken } from '../../../../global/types';\n\nimport { DEFAULT_PRICE_CURRENCY, TON_TOKEN_SLUG } from '../../../../config';\nimport { getActions, withGlobal } from '../../../../global';\nimport { selectCurrentAccountState } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { calcChangeValue } from '../../../../util/calcChangeValue';\nimport { formatShortDay } from '../../../../util/dateFormat';\nimport { formatCurrency } from '../../../../util/formatNumber';\nimport { round } from '../../../../util/round';\nimport { ASSET_LOGO_PATHS } from '../../../ui/helpers/assetLogos';\n\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useLang from '../../../../hooks/useLang';\n\nimport TokenPriceChart from '../../../common/TokenPriceChart';\nimport Button from '../../../ui/Button';\nimport Transition from '../../../ui/Transition';\n\nimport styles from './Card.module.scss';\n\nimport tonUrl from '../../../../assets/coins/ton.svg';\n\ninterface OwnProps {\n  token: UserToken;\n  classNames: string;\n  color?: string;\n  onApyClick?: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  period?: keyof typeof HISTORY_PERIODS;\n  apyValue: number;\n}\n\nconst HISTORY_PERIODS = {\n  '24h': { historyKey: 'history24h', changeKey: 'change24h', title: '1d' },\n  '7d': { historyKey: 'history7d', changeKey: 'change7d', title: '7d' },\n  '30d': { historyKey: 'history30d', changeKey: 'change30d', title: '1m' },\n} as const;\n\nconst DEFAULT_PERIOD = '24h';\n\nconst COIN_MARKET_CAP_TOKENS: Record<string, string> = {\n  toncoin: 'toncoin',\n  'ton-tgr': 'tgr',\n};\n\nconst CHART_DIMENSIONS = { width: 300, height: 64 };\n\nfunction TokenCard({\n  token,\n  classNames,\n  color,\n  period = DEFAULT_PERIOD,\n  apyValue,\n  onApyClick,\n  onClose,\n}: OwnProps & StateProps) {\n  const { setCurrentTokenPeriod } = getActions();\n  const { isPortrait } = useDeviceScreen();\n\n  const lang = useLang();\n  const currentHistoryPeriod = HISTORY_PERIODS[period].historyKey;\n  const currentChangePeriod = HISTORY_PERIODS[period].changeKey;\n\n  const [selectedHistoryIndex, setSelectedHistoryIndex] = useState(-1);\n\n  const {\n    slug, symbol, amount, image, name, price: lastPrice,\n  } = token;\n\n  const logoPath = slug === TON_TOKEN_SLUG\n    ? tonUrl\n    : image || ASSET_LOGO_PATHS[symbol.toLowerCase() as keyof typeof ASSET_LOGO_PATHS];\n\n  const history = currentHistoryPeriod in token ? token[currentHistoryPeriod] : undefined;\n\n  const selectedHistoryPoint = history?.[selectedHistoryIndex];\n  const price = selectedHistoryPoint?.[1] || lastPrice;\n  const dateStr = selectedHistoryPoint\n    ? formatShortDay(lang.code!, selectedHistoryPoint[0] * 1000, true, true)\n    : lang('Now');\n\n  const initialPrice = history?.[0]?.[1];\n  const change = initialPrice\n    ? (price - initialPrice) / initialPrice\n    : currentChangePeriod in token\n      ? token[currentChangePeriod]\n      : undefined;\n\n  const value = amount * price;\n  const changePrefix = change === undefined ? change : change > 0 ? '↑' : change < 0 ? '↓' : 0;\n  const changeValue = change ? Math.abs(round(calcChangeValue(value, change), 4)) : 0;\n  const changePercent = change ? Math.abs(round(change * 100, 2)) : 0;\n\n  const withChange = Boolean(change !== undefined);\n  const withHistory = Boolean(history?.length);\n  const historyStartDay = withHistory ? new Date(history![0][0] * 1000) : undefined;\n  const withCmcButton = slug in COIN_MARKET_CAP_TOKENS;\n\n  function renderChart() {\n    return (\n      <TokenPriceChart\n        className={styles.chart}\n        imgClassName={styles.chartImg}\n        width={CHART_DIMENSIONS.width}\n        height={CHART_DIMENSIONS.height}\n        prices={history!}\n        selectedIndex={selectedHistoryIndex}\n        onSelectIndex={setSelectedHistoryIndex}\n      />\n    );\n  }\n\n  return (\n    <div className={buildClassName(styles.container, styles.tokenCard, classNames, color)}>\n      <div className={styles.tokenInfo}>\n        <Button className={styles.backButton} isSimple onClick={onClose} ariaLabel={lang('Back')}>\n          <i className=\"icon-chevron-left\" aria-hidden />\n        </Button>\n        <img className={styles.tokenLogo} src={logoPath} alt={token.name} />\n        <div>\n          <b className={styles.tokenAmount}>{formatCurrency(amount, symbol)}</b>\n          <span className={styles.tokenName}>\n            {name}\n            {token.slug === TON_TOKEN_SLUG && (\n              <span className={styles.apy} onClick={onApyClick}>\n                APY {apyValue}%\n              </span>\n            )}\n          </span>\n        </div>\n      </div>\n\n      {withChange && (\n        <div className={styles.tokenPrice}>\n          ≈&thinsp;{formatCurrency(value, DEFAULT_PRICE_CURRENCY)}\n          {Boolean(changeValue) && (\n            <div className={styles.tokenChange}>\n              {changePrefix}\n              &thinsp;\n              {Math.abs(changePercent)}% · {formatCurrency(Math.abs(changeValue), DEFAULT_PRICE_CURRENCY)}\n            </div>\n          )}\n        </div>\n      )}\n\n      {withHistory && (\n        <>\n          <Transition activeKey={Object.keys(HISTORY_PERIODS).indexOf(period)} name=\"fade\">\n            {renderChart}\n          </Transition>\n\n          <div className={styles.tokenHistoryPrice}>\n            {formatCurrency(history![0][1], DEFAULT_PRICE_CURRENCY)}\n            <div className={styles.tokenPriceDate}>{formatShortDay(lang.code!, historyStartDay!)}</div>\n          </div>\n\n          <div className={buildClassName(styles.periodChooser, isPortrait && styles.compact)}>\n            {Object.entries(HISTORY_PERIODS).map(([historyPeriod, { historyKey, title }]) => (\n              <label\n                key={historyKey}\n                className={buildClassName(\n                  styles.periodItem,\n                  currentHistoryPeriod === historyKey && styles.periodItem_active,\n                )}\n              >\n                <input\n                  teactExperimentControlled\n                  type=\"radio\"\n                  className={styles.periodInput}\n                  name=\"historyPeriod\"\n                  checked={currentHistoryPeriod === historyKey}\n                  onChange={() => setCurrentTokenPeriod({ period: historyPeriod as keyof typeof HISTORY_PERIODS })}\n                />\n                {title}\n              </label>\n            ))}\n          </div>\n        </>\n      )}\n\n      <div className={styles.tokenCurrentPrice}>\n        {formatCurrency(price, DEFAULT_PRICE_CURRENCY, selectedHistoryIndex === -1 ? undefined : 4)}\n        <div className={styles.tokenPriceDate}>\n          {dateStr}\n          {withCmcButton && (\n            <>\n              {' · '}\n              <a\n                href={`https://coinmarketcap.com/currencies/${COIN_MARKET_CAP_TOKENS[slug]}/`}\n                title={lang('Open on CoinMarketCap')}\n                target=\"_blank\"\n                rel=\"noreferrer\"\n                className={styles.cmcButton}\n              >\n                <i className=\"icon-coinmarket\" aria-hidden />\n              </a>\n            </>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>((global): StateProps => {\n    const accountState = selectCurrentAccountState(global);\n\n    return {\n      period: accountState?.currentTokenPeriod,\n      apyValue: accountState?.poolState?.lastApy || 0,\n    };\n  })(TokenCard),\n);\n","import React, {\n  memo, useCallback, useEffect, useMemo,\n} from '../../../../lib/teact/teact';\n\nimport type { UserToken } from '../../../../global/types';\n\nimport {\n  DEFAULT_PRICE_CURRENCY,\n  TON_TOKEN_SLUG,\n  TONSCAN_BASE_MAINNET_URL,\n  TONSCAN_BASE_TESTNET_URL,\n} from '../../../../config';\nimport { getActions, withGlobal } from '../../../../global';\nimport { selectAccount, selectCurrentAccountState, selectCurrentAccountTokens } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { calcChangeValue } from '../../../../util/calcChangeValue';\nimport captureEscKeyListener from '../../../../util/captureEscKeyListener';\nimport { copyTextToClipboard } from '../../../../util/clipboard';\nimport { formatCurrency, formatInteger } from '../../../../util/formatNumber';\nimport { round } from '../../../../util/round';\nimport { shortenAddress } from '../../../../util/shortenAddress';\nimport { getTokenCardColor } from '../../helpers/card_colors';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useShowTransition from '../../../../hooks/useShowTransition';\n\nimport Loading from '../../../ui/Loading';\nimport AccountSelector from './AccountSelector';\nimport TokenCard from './TokenCard';\n\nimport styles from './Card.module.scss';\n\ninterface OwnProps {\n  onTokenCardClose: NoneToVoidFunction;\n  onApyClick: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  address?: string;\n  tokens?: UserToken[];\n  activeDappOrigin?: string;\n  currentTokenSlug?: string;\n  isTestnet?: boolean;\n}\n\nfunction Card({\n  address,\n  tokens,\n  activeDappOrigin,\n  currentTokenSlug,\n  onTokenCardClose,\n  onApyClick,\n  isTestnet,\n}: OwnProps & StateProps) {\n  const { showNotification } = getActions();\n\n  const lang = useLang();\n  const tonscanBaseUrl = isTestnet ? TONSCAN_BASE_TESTNET_URL : TONSCAN_BASE_MAINNET_URL;\n  const tonscanAddressUrl = `${tonscanBaseUrl}address/${address}`;\n\n  const currentToken = useMemo(() => {\n    return tokens ? tokens.find((token) => token.slug === currentTokenSlug) : undefined;\n  }, [currentTokenSlug, tokens]);\n  const renderedToken = useCurrentOrPrev(currentToken, true);\n  const {\n    shouldRender: shouldRenderTokenCard,\n    transitionClassNames: tokenCardTransitionClassNames,\n  } = useShowTransition(Boolean(currentTokenSlug), undefined, true);\n  const tokenCardColor = useMemo(() => {\n    if (!renderedToken || renderedToken.slug === TON_TOKEN_SLUG) {\n      return undefined;\n    }\n\n    return getTokenCardColor(renderedToken.slug);\n  }, [renderedToken]);\n  const dappDomain = useMemo(() => {\n    if (!activeDappOrigin) {\n      return undefined;\n    }\n\n    let value: string | undefined;\n    try {\n      value = new URL(activeDappOrigin).hostname;\n    } catch (err) {\n      value = shortenAddress(activeDappOrigin);\n    }\n\n    return value;\n  }, [activeDappOrigin]);\n  const renderingDappDomain = useCurrentOrPrev(dappDomain, true);\n\n  const values = useMemo(() => {\n    return tokens ? buildValues(tokens) : undefined;\n  }, [tokens]);\n\n  const {\n    shouldRender: shouldRenderDapp,\n    transitionClassNames: dappClassNames,\n  } = useShowTransition(Boolean(dappDomain));\n\n  useEffect(\n    () => (shouldRenderTokenCard ? captureEscKeyListener(onTokenCardClose) : undefined),\n    [shouldRenderTokenCard, onTokenCardClose],\n  );\n\n  const handleCopyAddress = useCallback(() => {\n    if (!address) return;\n\n    showNotification({ message: lang('Address was copied!') as string, icon: 'icon-copy' });\n    copyTextToClipboard(address);\n  }, [address, lang, showNotification]);\n\n  if (!values) {\n    return (\n      <div className={styles.containerWrapper}>\n        <div className={buildClassName(styles.container, styles.isLoading)}>\n          <Loading color=\"white\" />\n        </div>\n      </div>\n    );\n  }\n\n  const {\n    primaryValue, primaryWholePart, primaryFractionPart, changeClassName, changePrefix, changePercent, changeValue,\n  } = values;\n\n  return (\n    <div className={styles.containerWrapper}>\n      <div className={buildClassName(styles.container, currentTokenSlug && styles.backstage)}>\n        <AccountSelector />\n        {shouldRenderDapp && (\n          <div className={buildClassName(styles.dapp, dappClassNames)}>\n            <i className={buildClassName(styles.dappIcon, 'icon-laptop')} aria-hidden />\n            {renderingDappDomain}\n          </div>\n        )}\n        <div className={styles.primaryValue}>\n          {DEFAULT_PRICE_CURRENCY}\n          {primaryWholePart}\n          {primaryFractionPart && <span className={styles.primaryFractionPart}>.{primaryFractionPart}</span>}\n        </div>\n        {primaryValue !== 0 && (\n          <div className={buildClassName(styles.change, changeClassName)}>\n            {changePrefix}\n            &thinsp;\n            {Math.abs(changePercent)}% · {formatCurrency(Math.abs(changeValue), DEFAULT_PRICE_CURRENCY)}\n          </div>\n        )}\n        <div className={styles.addressContainer}>\n          <button\n            type=\"button\"\n            className={styles.address}\n            aria-label={lang('Copy wallet address')}\n            onClick={handleCopyAddress}\n          >\n            {address && shortenAddress(address)}\n            <i className={buildClassName(styles.icon, 'icon-copy')} aria-hidden />\n          </button>\n          <a\n            href={tonscanAddressUrl}\n            className={styles.tonscanButton}\n            title={lang('View address on TON Explorer')}\n            target=\"_blank\"\n            rel=\"noreferrer noopener\"\n          >\n            <i className={buildClassName(styles.icon, 'icon-tonscan')} aria-hidden />\n          </a>\n        </div>\n      </div>\n      {shouldRenderTokenCard && (\n        <TokenCard\n          token={renderedToken!}\n          classNames={tokenCardTransitionClassNames}\n          color={tokenCardColor}\n          onApyClick={onApyClick}\n          onClose={onTokenCardClose}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global, ownProps, detachWhenChanged): StateProps => {\n  detachWhenChanged(global.currentAccountId);\n  const { address } = selectAccount(global, global.currentAccountId!) || {};\n  const accountState = selectCurrentAccountState(global);\n\n  return {\n    address,\n    tokens: selectCurrentAccountTokens(global),\n    activeDappOrigin: accountState?.activeDappOrigin,\n    currentTokenSlug: accountState?.currentTokenSlug,\n    isTestnet: global.settings.isTestnet,\n  };\n})(Card));\n\nfunction buildValues(tokens: UserToken[]) {\n  const primaryValue = tokens.reduce((acc, token) => acc + token.amount * token.price, 0);\n  const [primaryWholePart, primaryFractionPart] = formatInteger(primaryValue).split('.');\n  const changeValue = round(tokens.reduce((acc, token) => {\n    return acc + calcChangeValue(token.amount * token.price, token.change24h);\n  }, 0), 4);\n\n  const changePercent = round(primaryValue ? (changeValue / (primaryValue - changeValue)) * 100 : 0, 2);\n  const changeClassName = changePercent > 0\n    ? styles.changeCourseUp\n    : (changePercent < 0 ? styles.changeCourseDown : undefined);\n  const changePrefix = changeValue > 0 ? '↑' : changeValue < 0 ? '↓' : undefined;\n\n  return {\n    primaryValue,\n    primaryWholePart,\n    primaryFractionPart,\n    changeClassName,\n    changePrefix,\n    changePercent,\n    changeValue,\n  };\n}\n","import { requestMutation } from '../lib/fasterdom/fasterdom';\n\nimport { animate } from './animation';\n\nconst DEFAULT_DURATION = 300;\n\nconst stopById: Map<string, VoidFunction> = new Map();\n\nexport default function animateHorizontalScroll(container: HTMLElement, left: number, duration = DEFAULT_DURATION) {\n  const isRtl = container.getAttribute('dir') === 'rtl';\n  const {\n    scrollLeft, offsetWidth: containerWidth, scrollWidth, dataset: { scrollId },\n  } = container;\n\n  let path = left - scrollLeft;\n\n  if (path < 0) {\n    const remainingPath = -scrollLeft * (isRtl ? -1 : 1);\n    path = Math.max(path, remainingPath);\n  } else if (path > 0) {\n    const remainingPath = scrollWidth - (scrollLeft + containerWidth);\n    path = Math.min(path, remainingPath);\n  }\n\n  if (path === 0) {\n    return Promise.resolve();\n  }\n\n  if (scrollId && stopById.has(scrollId)) {\n    stopById.get(scrollId)!();\n  }\n\n  const target = scrollLeft + path;\n\n  return new Promise<void>((resolve) => {\n    requestMutation(() => {\n      if (duration === 0) {\n        container.scrollLeft = target;\n        resolve();\n        return;\n      }\n\n      let isStopped = false;\n      const id = Math.random().toString();\n      container.dataset.scrollId = id;\n      stopById.set(id, () => {\n        isStopped = true;\n      });\n\n      container.style.scrollSnapType = 'none';\n\n      const startAt = Date.now();\n\n      animate(() => {\n        if (isStopped) return false;\n\n        const t = Math.min((Date.now() - startAt) / duration, 1);\n\n        const currentPath = path * (1 - transition(t));\n        container.scrollLeft = Math.round(target - currentPath);\n\n        if (t >= 1) {\n          container.style.scrollSnapType = '';\n          delete container.dataset.scrollId;\n          stopById.delete(id);\n          resolve();\n        }\n\n        return t < 1;\n      }, requestMutation);\n    });\n  });\n}\n\nfunction transition(t: number) {\n  return 1 - ((1 - t) ** 3.5);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"Tab\":\"RHLXcKS6OiXWFEsm58oS\",\"tab\":\"RHLXcKS6OiXWFEsm58oS\",\"Tab_active\":\"yMGbsZGhDi49TS8i_qVz\",\"tabActive\":\"yMGbsZGhDi49TS8i_qVz\",\"content\":\"O7dAuUFIKeXsHU4ymsiy\",\"platform\":\"XS8bGDoWteKToJB2LQeS\",\"platform_animate\":\"PBLjlMRJ5KKJYSsu2ofZ\",\"platformAnimate\":\"PBLjlMRJ5KKJYSsu2ofZ\"};","import { requestForcedReflow, requestMutation } from '../../lib/fasterdom/fasterdom';\nimport React, { useEffect, useLayoutEffect, useRef } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport forceReflow from '../../util/forceReflow';\n\nimport styles from './Tab.module.scss';\n\ntype OwnProps = {\n  className?: string;\n  title: string;\n  isActive?: boolean;\n  previousActiveTab?: number;\n  onClick: (arg: number) => void;\n  clickArg: number;\n};\n\nfunction Tab({\n  className,\n  title,\n  isActive,\n  previousActiveTab,\n  onClick,\n  clickArg,\n}: OwnProps) {\n  // eslint-disable-next-line no-null/no-null\n  const tabRef = useRef<HTMLDivElement>(null);\n\n  useLayoutEffect(() => {\n    // Set initial active state\n    if (isActive && previousActiveTab === undefined && tabRef.current) {\n      tabRef.current!.classList.add(styles.Tab_active);\n    }\n  }, [isActive, previousActiveTab]);\n\n  useEffect(() => {\n    if (!isActive || previousActiveTab === undefined) {\n      return;\n    }\n\n    const tabEl = tabRef.current!;\n    const prevTabEl = tabEl.parentElement!.children[previousActiveTab];\n    if (!prevTabEl) {\n      // The number of tabs in the parent component has decreased. It is necessary to add the active tab class name.\n      if (isActive && !tabEl.classList.contains(styles.Tab_active)) {\n        requestMutation(() => {\n          tabEl.classList.add(styles.Tab_active);\n        });\n      }\n      return;\n    }\n\n    const platformEl = tabEl.querySelector<HTMLElement>(`.${styles.platform}`)!;\n    const prevPlatformEl = prevTabEl.querySelector<HTMLElement>(`.${styles.platform}`)!;\n\n    // We move and resize the platform, so it repeats the position and size of the previous one\n    const shiftLeft = prevPlatformEl.parentElement!.offsetLeft - platformEl.parentElement!.offsetLeft;\n    const scaleFactor = prevPlatformEl.clientWidth / platformEl.clientWidth;\n\n    requestMutation(() => {\n      prevPlatformEl.classList.remove(styles.platform_animate);\n      platformEl.classList.remove(styles.platform_animate);\n      platformEl.style.transform = `translate3d(${shiftLeft}px, 0, 0) scale3d(${scaleFactor}, 1, 1)`;\n\n      requestForcedReflow(() => {\n        forceReflow(platformEl);\n\n        return () => {\n          platformEl.classList.add(styles.platform_animate);\n          platformEl.style.transform = 'none';\n\n          prevTabEl.classList.remove(styles.Tab_active);\n          tabEl.classList.add(styles.Tab_active);\n        };\n      });\n    });\n  }, [isActive, previousActiveTab]);\n\n  return (\n    <div\n      className={buildClassName(styles.Tab, className)}\n      onClick={!isActive ? () => onClick(clickArg) : undefined}\n      ref={tabRef}\n    >\n      <span className={styles.content}>\n        {title}\n        <i className={styles.platform} />\n      </span>\n    </div>\n  );\n}\n\nexport default Tab;\n","import React, { memo, useEffect, useRef } from '../../lib/teact/teact';\n\nimport animateHorizontalScroll from '../../util/animateHorizontalScroll';\nimport buildClassName from '../../util/buildClassName';\nimport { IS_ANDROID, IS_IOS } from '../../util/windowEnvironment';\n\nimport useHorizontalScroll from '../../hooks/useHorizontalScroll';\nimport usePrevious from '../../hooks/usePrevious';\n\nimport Tab from './Tab';\n\nimport styles from './TabList.module.scss';\n\nexport type TabWithProperties = {\n  title: string;\n  className?: string;\n};\n\ntype OwnProps = {\n  tabs: readonly TabWithProperties[];\n  activeTab: number;\n  big?: boolean;\n  className?: string;\n  onSwitchTab: (index: number) => void;\n};\n\nconst TAB_SCROLL_THRESHOLD_PX = 16;\n// Should match duration from `--slide-transition` CSS variable\nconst SCROLL_DURATION = IS_IOS ? 450 : IS_ANDROID ? 400 : 300;\n\nfunction TabList({\n  tabs, activeTab, big, className, onSwitchTab,\n}: OwnProps) {\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n  const previousActiveTab = usePrevious(activeTab);\n\n  useHorizontalScroll(containerRef, undefined, true);\n\n  // Scroll container to place active tab in the center\n  useEffect(() => {\n    const container = containerRef.current!;\n    const { scrollWidth, offsetWidth, scrollLeft } = container;\n    if (scrollWidth <= offsetWidth) {\n      return;\n    }\n\n    const activeTabElement = container.childNodes[activeTab] as HTMLElement | null;\n    if (!activeTabElement) {\n      return;\n    }\n\n    const { offsetLeft: activeTabOffsetLeft, offsetWidth: activeTabOffsetWidth } = activeTabElement;\n    const newLeft = activeTabOffsetLeft - (offsetWidth / 2) + (activeTabOffsetWidth / 2);\n\n    // Prevent scrolling by only a couple of pixels, which doesn't look smooth\n    if (Math.abs(newLeft - scrollLeft) < TAB_SCROLL_THRESHOLD_PX) {\n      return;\n    }\n\n    animateHorizontalScroll(container, newLeft, SCROLL_DURATION);\n  }, [activeTab]);\n\n  return (\n    <div\n      className={buildClassName(styles.container, 'no-scrollbar', big && styles.big, className)}\n      ref={containerRef}\n    >\n      {tabs.map((tab, i) => (\n        <Tab\n          key={tab.title}\n          title={tab.title}\n          isActive={i === activeTab}\n          previousActiveTab={previousActiveTab}\n          className={tab?.className}\n          onClick={onSwitchTab}\n          clickArg={i}\n        />\n      ))}\n    </div>\n  );\n}\n\nexport default memo(TabList);\n","import { useEffect } from '../lib/teact/teact';\n\nconst useHorizontalScroll = (\n  containerRef: React.RefObject<HTMLDivElement>,\n  isDisabled?: boolean,\n  shouldPreventDefault = false,\n) => {\n  useEffect(() => {\n    if (isDisabled) {\n      return undefined;\n    }\n\n    const container = containerRef.current!;\n\n    function handleScroll(e: WheelEvent) {\n      // Ignore horizontal scroll and let it work natively (e.g. on touchpad)\n      if (!e.deltaX) {\n        container!.scrollLeft += e.deltaY / 4;\n        if (shouldPreventDefault) e.preventDefault();\n      }\n    }\n\n    container.addEventListener('wheel', handleScroll, { passive: !shouldPreventDefault });\n\n    return () => {\n      container.removeEventListener('wheel', handleScroll);\n    };\n  }, [containerRef, isDisabled, shouldPreventDefault]);\n};\n\nexport default useHorizontalScroll;\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"AO0MeDwArZ72o6pbIZvX\",\"big\":\"Qhg14qK5lqGs9Y5YNa0t\"};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"MYa9iRJL2pcwkZ8egbOz\",\"panel\":\"GUJX8WbMU3WPIyW3WfVT\",\"emptyList\":\"Td9C4PWZXJ4Z4MPNkucE\",\"text\":\"yROQGCQD22Oqj6al8iMD\",\"header\":\"U7tqZrIkvDsd8sWYj2sg\",\"description\":\"dzvNt6HJPNQ8lxS5VpQR\"};","import React, { memo } from '../../../../lib/teact/teact';\n\nimport { ANIMATED_STICKER_BIG_SIZE_PX, ANIMATED_STICKER_SMALL_SIZE_PX } from '../../../../config';\nimport buildClassName from '../../../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\n\nimport styles from './NewWalletGreeting.module.scss';\n\ninterface Props {\n  isActive?: boolean;\n  mode: 'panel' | 'emptyList';\n}\n\nfunction NewWalletGreeting({ isActive, mode }: Props) {\n  const lang = useLang();\n\n  return (\n    <div className={buildClassName(styles.container, styles[mode])}>\n      <AnimatedIconWithPreview\n        play={isActive}\n        tgsUrl={ANIMATED_STICKERS_PATHS.hello}\n        previewUrl={ANIMATED_STICKERS_PATHS.helloPreview}\n        nonInteractive\n        noLoop={false}\n        size={mode === 'panel' ? ANIMATED_STICKER_SMALL_SIZE_PX : ANIMATED_STICKER_BIG_SIZE_PX}\n      />\n\n      <div className={styles.text}>\n        <p className={styles.header}>{lang('You have just created a new wallet')}</p>\n        <p className={styles.description}>\n          {lang('You can now transfer your tokens from another wallet or exchange.')}\n        </p>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(NewWalletGreeting);\n","import type { Ref, RefObject } from 'react';\nimport React, { memo, useCallback } from '../../../../lib/teact/teact';\n\nimport type { ApiToken, ApiTransaction } from '../../../../api/types';\n\nimport { CARD_SECONDARY_VALUE_SYMBOL } from '../../../../config';\nimport { bigStrToHuman, getIsTxIdLocal } from '../../../../global/helpers';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatTime } from '../../../../util/dateFormat';\nimport { formatCurrencyExtended } from '../../../../util/formatNumber';\nimport { shortenAddress } from '../../../../util/shortenAddress';\n\nimport useLang from '../../../../hooks/useLang';\n\nimport Button from '../../../ui/Button';\n\nimport styles from './Transaction.module.scss';\n\nimport scamImg from '../../../../assets/scam.svg';\n\ntype OwnProps = {\n  ref?: Ref<HTMLElement>;\n  token?: ApiToken;\n  transaction: ApiTransaction;\n  apyValue: number;\n  savedAddresses?: Record<string, string>;\n  onClick: (txId: string) => void;\n};\n\nfunction Transaction({\n  ref,\n  token,\n  transaction,\n  apyValue,\n  savedAddresses,\n  onClick,\n}: OwnProps) {\n  const lang = useLang();\n\n  const {\n    txId,\n    amount,\n    fromAddress,\n    toAddress,\n    timestamp,\n    comment,\n    encryptedComment,\n    isIncoming,\n    type,\n    metadata,\n  } = transaction;\n\n  const isStaking = type === 'stake' || type === 'unstake' || type === 'unstakeRequest';\n  const amountHuman = bigStrToHuman(amount, token!.decimals);\n  const address = isIncoming ? fromAddress : toAddress;\n  const addressName = savedAddresses?.[address] || metadata?.name;\n  const isLocal = getIsTxIdLocal(txId);\n  const isScam = Boolean(metadata?.isScam);\n\n  const handleClick = useCallback(() => {\n    onClick(txId);\n  }, [onClick, txId]);\n\n  function getOperationName() {\n    if (type === 'stake') {\n      return 'Staked';\n    }\n\n    if (type === 'unstakeRequest') {\n      return 'Unstake Requested';\n    }\n\n    if (type === 'unstake') {\n      return 'Unstaked';\n    }\n\n    return isIncoming ? 'Received' : 'Sent';\n  }\n\n  function renderComment() {\n    return (\n      <div\n        className={buildClassName(\n          styles.comment,\n          isIncoming ? styles.comment_incoming : styles.comment_outgoing,\n        )}\n      >\n        {encryptedComment && <i className={buildClassName(styles.commentIcon, 'icon-lock')} aria-hidden />}\n        {encryptedComment ? <i>{lang('Encrypted Message')}</i> : comment}\n      </div>\n    );\n  }\n\n  const iconFullClass = buildClassName(\n    styles.icon,\n    isIncoming && styles.icon_operationPositive,\n    type === 'stake' && styles.icon_purple,\n    !isStaking && (isIncoming ? 'icon-receive-alt' : 'icon-send-alt'),\n    isStaking && 'icon-earn',\n    isStaking && styles.icon_staking,\n  );\n\n  const amountFullClass = buildClassName(\n    styles.amount,\n    isIncoming\n      ? styles.amount_operationPositive\n      : (type === 'stake' ? styles.amount_stake : styles.amount_operationNegative),\n  );\n\n  return (\n    <Button\n      ref={ref as RefObject<HTMLButtonElement>}\n      key={txId}\n      className={styles.item}\n      onClick={handleClick}\n      isSimple\n    >\n      <i className={iconFullClass} aria-hidden />\n      {isLocal && (\n        <i\n          className={buildClassName(styles.iconWaiting, 'icon-clock')}\n          title={lang('Transaction is not completed')}\n        />\n      )}\n      <div className={styles.leftBlock}>\n        <div className={styles.operationName}>\n          {lang(getOperationName())}\n          {isScam && <img src={scamImg} alt={lang('Scam')} className={styles.scamImage} />}\n        </div>\n        <div className={styles.date}>{formatTime(timestamp)}</div>\n      </div>\n      <div className={styles.amountWrapper}>\n        <div className={amountFullClass}>\n          {formatCurrencyExtended(\n            isStaking ? Math.abs(amountHuman) : amountHuman,\n            token?.symbol || CARD_SECONDARY_VALUE_SYMBOL,\n            isStaking,\n          )}\n        </div>\n        <div className={styles.address}>\n          {!isStaking && lang(isIncoming ? '$transaction_from' : '$transaction_to', {\n            address: <span className={styles.addressValue}>{addressName || shortenAddress(address)}</span>,\n          })}\n          {type === 'stake' && lang('at APY %1$s%', apyValue)}\n          {(type === 'unstake' || type === 'unstakeRequest') && '\\u00A0'}\n        </div>\n      </div>\n      {!isStaking && !isScam && (comment || encryptedComment) && renderComment()}\n      <i className={buildClassName(styles.iconArrow, 'icon-chevron-right')} aria-hidden />\n    </Button>\n  );\n}\n\nexport default memo(Transaction);\n","// extracted by mini-css-extract-plugin\nexport default {\"is-ios\":\"vlOM35mGiq7TmCz0EjsO\",\"isIos\":\"vlOM35mGiq7TmCz0EjsO\",\"is-android\":\"GwtCHffZwL3Dbl_0jgqb\",\"isAndroid\":\"GwtCHffZwL3Dbl_0jgqb\",\"item\":\"ttkJnw4K_arjhRhTJ68e\",\"iconArrow\":\"wHNou227hlVjyh2ZMyIV\",\"icon\":\"ExzApxjNtmyOnPLH2HdT\",\"icon_staking\":\"bK8OmVGRRVoEOIkKcv3b\",\"iconStaking\":\"bK8OmVGRRVoEOIkKcv3b\",\"icon_operationPositive\":\"rc9LPpRvDjd3xUoq3miN\",\"iconOperationPositive\":\"rc9LPpRvDjd3xUoq3miN\",\"icon_purple\":\"PdH3kcrhC67guWmIIILB\",\"iconPurple\":\"PdH3kcrhC67guWmIIILB\",\"iconWaiting\":\"EhGw24b8GvT_aDzCOtZt\",\"leftBlock\":\"RzokRmD1q5uyCTxUdIYq\",\"amount\":\"_7dkLX2IeVTJr5mVOTlIs\",\"operationName\":\"QnNAz6yxhannAxwREaxc\",\"address\":\"LM1f9zeD8j0qfYmfUoCp\",\"date\":\"GaQbGpsXapN24JKkRZ0G\",\"addressValue\":\"B9ATd3wl0s3xVHZ7VlNj\",\"amountWrapper\":\"YFGTTjmvXQlkOLIgnQ5P\",\"amount_operationPositive\":\"skJ2Z_h3bKhLGQhZOXkM\",\"amountOperationPositive\":\"skJ2Z_h3bKhLGQhZOXkM\",\"amount_operationNegative\":\"Hk59A96IQwYr0vadgsv1\",\"amountOperationNegative\":\"Hk59A96IQwYr0vadgsv1\",\"amount_stake\":\"mECX7Yzg22UaSle5tYxd\",\"amountStake\":\"mECX7Yzg22UaSle5tYxd\",\"commentIcon\":\"bII1W7omu5IgHuXV31D6\",\"comment\":\"xM4HyNwcIOZXe5PjKdTn\",\"comment_incoming\":\"kyGckuvAjuFhUOpeilDg\",\"commentIncoming\":\"kyGckuvAjuFhUOpeilDg\",\"comment_outgoing\":\"qgWLMKUuqj2fiBNMd68E\",\"commentOutgoing\":\"qgWLMKUuqj2fiBNMd68E\",\"scamImage\":\"EtUngM5RDLjrVxgNZusR\"};","// extracted by mini-css-extract-plugin\nexport default {\"emptyList\":\"bPIOHQZdj8xJEzeorSUi\",\"emptyListTitle\":\"A2xFHRqwLbdzeROYJ0Us\",\"emptyListLoading\":\"oq2s5267VtoXz3SCirC7\",\"greeting\":\"zB2AMRTRMujx_CiIwRBW\",\"sticker\":\"YwRabwZyTf1CmbrLqixb\",\"loaderThreshold\":\"P5WGaKXmOwFs6aWw5HKI\",\"itemLoading\":\"fM26y7DknpMdQQVQU0QW\",\"group\":\"z0no3W0MDh0xqU5zWGSM\",\"date\":\"KBpFhRxChXb9O9Vp0UNL\"};","import React, {\n  memo, useEffect, useMemo,\n} from '../../../../lib/teact/teact';\n\nimport type { ApiToken, ApiTransaction } from '../../../../api/types';\n\nimport { ANIMATED_STICKER_BIG_SIZE_PX, TINY_TRANSFER_MAX_AMOUNT, TON_TOKEN_SLUG } from '../../../../config';\nimport { getActions, withGlobal } from '../../../../global';\nimport { bigStrToHuman, getIsTxIdLocal } from '../../../../global/helpers';\nimport { selectCurrentAccountState, selectIsNewWallet } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { compareTransactions } from '../../../../util/compareTransactions';\nimport { formatHumanDay, getDayStartAt } from '../../../../util/dateFormat';\nimport { findLast } from '../../../../util/iteratees';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\n\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useInfiniteLoader from '../../../../hooks/useInfiniteLoader';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\nimport Loading from '../../../ui/Loading';\nimport NewWalletGreeting from './NewWalletGreeting';\nimport Transaction from './Transaction';\n\nimport styles from './Activity.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\ntype StateProps = {\n  currentAccountId: string;\n  slug?: string;\n  isLoading?: boolean;\n  isNewWallet: boolean;\n  areTinyTransfersHidden?: boolean;\n  byTxId?: Record<string, ApiTransaction>;\n  txIdsBySlug?: Record<string, string[]>;\n  tokensBySlug?: Record<string, ApiToken>;\n  apyValue: number;\n  savedAddresses?: Record<string, string>;\n};\n\ninterface TransactionDateGroup {\n  datetime: number;\n  transactions: ApiTransaction[];\n}\n\nconst FURTHER_SLICE = 50;\n\nfunction Activity({\n  isActive,\n  currentAccountId,\n  isLoading,\n  isNewWallet,\n  slug,\n  txIdsBySlug,\n  byTxId,\n  tokensBySlug,\n  areTinyTransfersHidden,\n  apyValue,\n  savedAddresses,\n}: OwnProps & StateProps) {\n  const { fetchTokenTransactions, fetchAllTransactions, showTransactionInfo } = getActions();\n\n  const lang = useLang();\n  const { isLandscape } = useDeviceScreen();\n\n  const txIds = useMemo(() => {\n    let idList: string[] | undefined;\n\n    const bySlug = txIdsBySlug ?? {};\n\n    if (byTxId) {\n      if (slug) {\n        idList = bySlug[slug] ?? [];\n      } else {\n        const lastTonTxId = findLast(bySlug[TON_TOKEN_SLUG] ?? [], (txId) => !getIsTxIdLocal(txId));\n        idList = Object.values(bySlug).flat();\n        if (lastTonTxId) {\n          idList = idList.filter((txId) => byTxId[txId].timestamp >= byTxId[lastTonTxId].timestamp);\n        }\n\n        idList.sort((a, b) => compareTransactions(byTxId[a], byTxId[b], false));\n      }\n    }\n\n    if (!idList) {\n      return undefined;\n    }\n\n    return idList;\n  }, [byTxId, slug, txIdsBySlug]);\n\n  const transactions = useMemo(() => {\n    if (!txIds) {\n      return undefined;\n    }\n\n    const allTransactions = txIds\n      .map((txId) => byTxId?.[txId])\n      .filter((transaction) => {\n        return Boolean(\n          transaction?.slug\n            && (!slug || transaction.slug === slug)\n            && (!areTinyTransfersHidden\n              || Math.abs(bigStrToHuman(transaction.amount, tokensBySlug![transaction.slug!].decimals))\n                >= TINY_TRANSFER_MAX_AMOUNT),\n        );\n      }) as ApiTransaction[];\n\n    if (!allTransactions.length) {\n      return [];\n    }\n\n    let currentDateGroup: TransactionDateGroup = {\n      datetime: getDayStartAt(allTransactions[0].timestamp),\n      transactions: [],\n    };\n    const groupedTransactions: TransactionDateGroup[] = [currentDateGroup];\n\n    allTransactions.forEach((transaction, index) => {\n      currentDateGroup.transactions.push(transaction);\n      const nextTransaction = allTransactions[index + 1];\n\n      if (nextTransaction) {\n        const nextTransactionDayStartsAt = getDayStartAt(nextTransaction.timestamp);\n        if (currentDateGroup.datetime !== nextTransactionDayStartsAt) {\n          currentDateGroup = {\n            datetime: nextTransactionDayStartsAt,\n            transactions: [],\n          };\n\n          groupedTransactions.push(currentDateGroup);\n        }\n      }\n    });\n\n    return groupedTransactions;\n  }, [txIds, byTxId, slug, areTinyTransfersHidden, tokensBySlug]);\n\n  const loadMore = useLastCallback(() => {\n    if (slug) {\n      fetchTokenTransactions({ slug, limit: FURTHER_SLICE });\n    } else {\n      fetchAllTransactions({ limit: FURTHER_SLICE });\n    }\n  });\n\n  const { handleIntersection } = useInfiniteLoader({ isLoading, loadMore });\n\n  useEffect(() => {\n    if (!transactions?.length && txIds?.length) {\n      loadMore();\n    }\n  }, [loadMore, txIds, transactions]);\n\n  const handleTransactionClick = useLastCallback((txId: string) => {\n    showTransactionInfo({ txId });\n  });\n\n  if (!currentAccountId) {\n    return undefined;\n  }\n\n  function renderTransactionGroups(transactionGroups: TransactionDateGroup[]) {\n    return transactionGroups.map((group, groupIdx) => (\n      <div className={styles.group}>\n        <div className={styles.date}>{formatHumanDay(lang, group.datetime)}</div>\n        {group.transactions.map((transaction) => {\n          return (\n            <Transaction\n              key={transaction?.txId}\n              transaction={transaction}\n              token={transaction.slug ? tokensBySlug?.[transaction.slug] : undefined}\n              apyValue={apyValue}\n              savedAddresses={savedAddresses}\n              onClick={handleTransactionClick}\n            />\n          );\n        })}\n        {\n          groupIdx + 1 === transactionGroups.length && (\n            <div ref={handleIntersection} className={styles.loaderThreshold} />\n          )\n        }\n      </div>\n    ));\n  }\n\n  if (transactions === undefined || (!transactions?.length && txIds?.length)) {\n    return (\n      <div className={buildClassName(styles.emptyList, styles.emptyListLoading)}>\n        <Loading />\n      </div>\n    );\n  }\n\n  if (isLandscape && isNewWallet) {\n    return (\n      <div className={styles.greeting}>\n        <NewWalletGreeting isActive mode=\"emptyList\" />\n      </div>\n    );\n  }\n\n  if (!transactions?.length) {\n    return (\n      <div className={styles.emptyList}>\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.noData}\n          previewUrl={ANIMATED_STICKERS_PATHS.noDataPreview}\n          size={ANIMATED_STICKER_BIG_SIZE_PX}\n          className={styles.sticker}\n          noLoop={false}\n          nonInteractive\n        />\n        <p className={styles.emptyListTitle}>{lang('No Activity')}</p>\n      </div>\n    );\n  }\n\n  return <div>{renderTransactionGroups(transactions)}</div>;\n}\n\nexport default memo(\n  withGlobal<OwnProps>((global, ownProps, detachWhenChanged): StateProps => {\n    const { currentAccountId } = global;\n    detachWhenChanged(currentAccountId);\n\n    const accountState = selectCurrentAccountState(global);\n    const isNewWallet = selectIsNewWallet(global);\n    const slug = accountState?.currentTokenSlug;\n    const { txIdsBySlug, byTxId, isLoading } = accountState?.transactions || {};\n    return {\n      currentAccountId: currentAccountId!,\n      slug,\n      isLoading,\n      byTxId,\n      isNewWallet,\n      txIdsBySlug,\n      tokensBySlug: global.tokenInfo?.bySlug,\n      areTinyTransfersHidden: global.settings.areTinyTransfersHidden,\n      apyValue: accountState?.poolState?.lastApy || 0,\n      savedAddresses: accountState?.savedAddresses,\n    };\n  })(Activity),\n);\n","import { useRef, useState } from '../lib/teact/teact';\n\nimport useLastCallback from './useLastCallback';\n\ninterface OwnProps {\n  loadMore: NoneToVoidFunction;\n  isLoading?: boolean;\n  isDisabled?: boolean;\n}\n\nexport default function useInfiniteLoader({ isDisabled, isLoading, loadMore }: OwnProps) {\n  // eslint-disable-next-line no-null/no-null\n  const loadingObserver = useRef<IntersectionObserver>(null);\n  const [hasIntersection, setHasIntersection] = useState(false);\n\n  const handleIntersection = useLastCallback((node: HTMLElement | null) => {\n    if (isLoading) {\n      return;\n    }\n\n    if (loadingObserver.current) {\n      setHasIntersection(false);\n      loadingObserver.current.disconnect();\n    }\n\n    if (isDisabled || !node) {\n      return;\n    }\n\n    loadingObserver.current = new IntersectionObserver((entries) => {\n      const isIntersecting = entries.some((entry) => entry.isIntersecting);\n      setHasIntersection(isIntersecting);\n      if (isIntersecting) {\n        loadMore();\n      }\n    });\n\n    loadingObserver.current.observe(node);\n  });\n\n  return { handleIntersection, hasIntersection };\n}\n","import type { FC } from '../../lib/teact/teact';\nimport React, { memo, useEffect, useMemo } from '../../lib/teact/teact';\n\nimport { ANIMATION_LEVEL_MAX } from '../../config';\nimport { getGlobal } from '../../global';\n\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport useLang from '../../hooks/useLang';\nimport usePrevious from '../../hooks/usePrevious';\n\nimport styles from './AnimatedCounter.module.scss';\n\ntype OwnProps = {\n  text: string;\n};\n\nconst ANIMATION_TIME = 200;\n\nconst AnimatedCounter: FC<OwnProps> = ({\n  text,\n}) => {\n  const animationLevel = getGlobal().settings.animationLevel;\n  const { isRtl } = useLang();\n\n  const prevText = usePrevious(text);\n  const forceUpdate = useForceUpdate();\n\n  const shouldAnimate = (animationLevel === ANIMATION_LEVEL_MAX) && prevText && prevText !== text;\n\n  const characters = useMemo(() => generateCharacters(text, prevText), [prevText, text]);\n\n  useEffect(() => {\n    if (!shouldAnimate) return undefined;\n\n    const timeoutId = window.setTimeout(() => {\n      forceUpdate();\n    }, ANIMATION_TIME);\n\n    return () => {\n      window.clearTimeout(timeoutId);\n    };\n  }, [shouldAnimate, text]);\n\n  return (\n    <span className={styles.root} dir={isRtl ? 'rtl' : undefined}>\n      {characters}\n    </span>\n  );\n};\n\nexport default memo(AnimatedCounter);\n\n// Function to generate characters\nfunction generateCharacters(text: string, prevText?: string) {\n  const elements: React.ReactNode[] = [];\n  const textLength = text.length;\n  const prevTextLength = prevText?.length ?? 0;\n\n  for (let i = 0; i <= textLength; i++) {\n    const charIndex = textLength - i;\n    const prevTextCharIndex = prevTextLength - i;\n\n    if (prevText && prevTextCharIndex >= 0 && text[charIndex] !== prevText[prevTextCharIndex]) {\n      elements.unshift(\n        <div className={styles.characterContainer}>\n          <div className={styles.character}>{text[charIndex] ?? ''}</div>\n          <div className={styles.characterOld}>{prevText[prevTextCharIndex]}</div>\n          <div className={styles.characterNew}>{text[charIndex] ?? ''}</div>\n        </div>,\n      );\n    } else {\n      elements.unshift(<span>{text[charIndex] ?? ''}</span>);\n    }\n  }\n\n  return elements;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"PuhxFKYSdYcQ2ce2mcLi\",\"character-container\":\"utoJVZWpQbsMUdXCWjER\",\"characterContainer\":\"utoJVZWpQbsMUdXCWjER\",\"character\":\"nDhG_K_aa9Q6f_iFfnfz\",\"character-old\":\"hbPstTYoQUTntM_2prC0\",\"characterOld\":\"hbPstTYoQUTntM_2prC0\",\"character-disappear\":\"xkJamdfUYSypze2A7YFp\",\"characterDisappear\":\"xkJamdfUYSypze2A7YFp\",\"character-new\":\"G_vJ6W43_yOcCBx6Mrrr\",\"characterNew\":\"G_vJ6W43_yOcCBx6Mrrr\",\"character-appear\":\"QH1yfcr7UKrbbNP7aYOU\",\"characterAppear\":\"QH1yfcr7UKrbbNP7aYOU\"};","// extracted by mini-css-extract-plugin\nexport default {\"is-ios\":\"vFId5rejXWBFBZRsdAWM\",\"isIos\":\"vFId5rejXWBFBZRsdAWM\",\"is-android\":\"xOiI_xEsZIm6rUUN47tg\",\"isAndroid\":\"xOiI_xEsZIm6rUUN47tg\",\"container\":\"GoZYG5DxjDXeFsEaCYr9\",\"iconArrow\":\"yYshuM7DP7R1YmyeA3A7\",\"iconChevron\":\"LS1URZ9lXmUAsug_621I\",\"icon\":\"WXwFa5c2zHNtvekVpjOr\",\"primaryCell\":\"fngBxpuzq7b2WLrIfboK\",\"secondaryCell\":\"wmFNDKzz1k2ESt0Ek8fs\",\"subtitle\":\"q1jRcay77JbuL19B_RUE\",\"amountChange\":\"i7jPlFsclWRONG3rovlb\",\"name\":\"BsUYDu33cCTgKR7KjRC4\",\"name_withApy\":\"EHuq2B5sDC71WmHFhK2d\",\"nameWithApy\":\"EHuq2B5sDC71WmHFhK2d\",\"secondaryValue\":\"vcWolQZvhPD6kAaEe1DG\",\"secondaryValue_staked\":\"rbZ_grB8nTj0JzZqxmIR\",\"secondaryValueStaked\":\"rbZ_grB8nTj0JzZqxmIR\",\"change\":\"h4lmRgYRKVFA4MyieJFy\",\"change_up\":\"Jj8sXviI1_LrE7hVEJla\",\"changeUp\":\"Jj8sXviI1_LrE7hVEJla\",\"change_down\":\"sMjWAPE69h2eDvRfBq_u\",\"changeDown\":\"sMjWAPE69h2eDvRfBq_u\",\"dot\":\"MCDqdp3nUc5zpy9o2Lod\",\"apy\":\"W8B0QAJIVM87DMggR5xr\",\"apy_staked\":\"NwVCu3UBpSZc8jsv8JZS\",\"apyStaked\":\"NwVCu3UBpSZc8jsv8JZS\",\"percent\":\"vAzkK4S0xNud0CQsHnF1\"};","import React, { memo, useCallback } from '../../../../lib/teact/teact';\n\nimport type { UserToken } from '../../../../global/types';\n\nimport { DEFAULT_PRICE_CURRENCY, TON_TOKEN_SLUG } from '../../../../config';\nimport buildClassName from '../../../../util/buildClassName';\nimport { calcChangeValue } from '../../../../util/calcChangeValue';\nimport { formatCurrency } from '../../../../util/formatNumber';\nimport { round } from '../../../../util/round';\nimport { ASSET_LOGO_PATHS } from '../../../ui/helpers/assetLogos';\n\nimport useShowTransition from '../../../../hooks/useShowTransition';\n\nimport AnimatedCounter from '../../../ui/AnimatedCounter';\nimport Button from '../../../ui/Button';\n\nimport styles from './Token.module.scss';\n\ninterface OwnProps {\n  token: UserToken;\n  stakingStatus?: 'active' | 'unstakeRequested';\n  amount?: number;\n  isInvestorView?: boolean;\n  classNames?: string;\n  apyValue?: number;\n  onClick: (slug: string) => void;\n}\n\nfunction Token({\n  token,\n  amount,\n  stakingStatus,\n  apyValue,\n  isInvestorView,\n  classNames,\n  onClick,\n}: OwnProps) {\n  const {\n    name,\n    symbol,\n    slug,\n    amount: tokenAmount,\n    price,\n    change24h: change,\n    image,\n  } = token;\n\n  const renderedAmount = amount ?? tokenAmount;\n  const logoPath = image || ASSET_LOGO_PATHS[symbol.toLowerCase() as keyof typeof ASSET_LOGO_PATHS];\n  const value = renderedAmount * price;\n  const changeClassName = change > 0 ? styles.change_up : change < 0 ? styles.change_down : undefined;\n  const changeValue = Math.abs(round(calcChangeValue(value, change), 4));\n  const changePercent = Math.abs(round(change * 100, 2));\n  const withApy = Boolean(apyValue) && slug === TON_TOKEN_SLUG;\n\n  const {\n    shouldRender: shouldRenderApy,\n    transitionClassNames: renderApyClassNames,\n  } = useShowTransition(withApy);\n\n  const handleClick = useCallback(() => {\n    onClick(slug);\n  }, [onClick, slug]);\n\n  function renderApy() {\n    return (\n      <span className={buildClassName(styles.apy, stakingStatus && styles.apy_staked, renderApyClassNames)}>\n        APY {apyValue}%\n      </span>\n    );\n  }\n\n  function renderChangeIcon() {\n    if (change === 0) {\n      return undefined;\n    }\n\n    return <i className={buildClassName(styles.iconArrow, change > 0 ? 'icon-arrow-up' : 'icon-arrow-down')} />;\n  }\n\n  function renderInvestorView() {\n    return (\n      <Button className={buildClassName(styles.container, classNames)} onClick={handleClick} isSimple>\n        <img src={logoPath} alt={symbol} className={styles.icon} />\n        {stakingStatus && (\n          <i className={buildClassName(stakingStatus === 'active' ? 'icon-percent' : 'icon-clock', styles.percent)} />\n        )}\n        <div className={styles.primaryCell}>\n          <div className={buildClassName(styles.name, withApy && styles.name_withApy)}>\n            {name}\n            {shouldRenderApy && renderApy()}\n          </div>\n          <div className={styles.subtitle}>\n            <AnimatedCounter\n              text={formatCurrency(renderedAmount, symbol)}\n              key={isInvestorView ? 'investor' : 'default'}\n            />\n            <i className={styles.dot} />\n            <AnimatedCounter text={formatCurrency(price, DEFAULT_PRICE_CURRENCY)} />\n          </div>\n        </div>\n        <div className={styles.secondaryCell}>\n          <div className={buildClassName(styles.secondaryValue, stakingStatus && styles.secondaryValue_staked)}>\n            <AnimatedCounter text={formatCurrency(value, DEFAULT_PRICE_CURRENCY)} />\n          </div>\n          <div className={buildClassName(styles.change, changeClassName)}>\n            {renderChangeIcon()}<AnimatedCounter text={String(changePercent)} />%\n            <i className={styles.dot} />\n            <AnimatedCounter text={formatCurrency(changeValue, DEFAULT_PRICE_CURRENCY)} />\n          </div>\n        </div>\n        <i className={buildClassName(styles.iconChevron, 'icon-chevron-right')} aria-hidden />\n      </Button>\n    );\n  }\n\n  function renderDefaultView() {\n    const totalAmount = renderedAmount * price;\n    const canRenderApy = Boolean(apyValue) && slug === TON_TOKEN_SLUG;\n\n    return (\n      <Button className={buildClassName(styles.container, classNames)} onClick={handleClick} isSimple>\n        <img src={logoPath} alt={symbol} className={styles.icon} />\n        {stakingStatus && (\n          <i className={buildClassName(stakingStatus === 'active' ? 'icon-percent' : 'icon-clock', styles.percent)} />\n        )}\n        <div className={styles.primaryCell}>\n          <div className={buildClassName(styles.name, canRenderApy && styles.name_withApy)}>\n            {name}\n            {canRenderApy && renderApy()}\n          </div>\n          <div className={styles.subtitle}>\n            <AnimatedCounter text={formatCurrency(price, DEFAULT_PRICE_CURRENCY)} />\n            {!stakingStatus && (\n              <>\n                <i className={styles.dot} />\n                <span className={changeClassName}>\n                  {renderChangeIcon()}<AnimatedCounter text={String(changePercent)} />%\n                </span>\n              </>\n            )}\n          </div>\n        </div>\n        <div className={styles.secondaryCell}>\n          <div className={buildClassName(styles.secondaryValue, stakingStatus && styles.secondaryValue_staked)}>\n            <AnimatedCounter\n              text={formatCurrency(renderedAmount, symbol)}\n              key={isInvestorView ? 'investor' : 'default'}\n            />\n          </div>\n          <div className={styles.subtitle}>\n            {totalAmount > 0 ? '≈' : ''}&thinsp;\n            <AnimatedCounter text={formatCurrency(totalAmount, DEFAULT_PRICE_CURRENCY)} />\n          </div>\n        </div>\n        <i className={buildClassName(styles.iconChevron, 'icon-chevron-right')} aria-hidden />\n      </Button>\n    );\n  }\n\n  return isInvestorView ? renderInvestorView() : renderDefaultView();\n}\n\nexport default memo(Token);\n","import React, { memo, useMemo } from '../../../../lib/teact/teact';\n\nimport type { UserToken } from '../../../../global/types';\n\nimport { TON_TOKEN_SLUG } from '../../../../config';\nimport { withGlobal } from '../../../../global';\nimport { selectCurrentAccountState, selectCurrentAccountTokens, selectIsNewWallet } from '../../../../global/selectors';\n\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useShowTransition from '../../../../hooks/useShowTransition';\n\nimport Loading from '../../../ui/Loading';\nimport NewWalletGreeting from './NewWalletGreeting';\nimport Token from './Token';\n\nimport styles from './Assets.module.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  onTokenClick: (slug: string) => void;\n  onStakedTokenClick: NoneToVoidFunction;\n};\n\ninterface StateProps {\n  tokens?: UserToken[];\n  isNewWallet: boolean;\n  stakingStatus?: 'active' | 'unstakeRequested';\n  stakingBalance?: number;\n  isInvestorViewEnabled?: boolean;\n  apyValue: number;\n}\n\nfunction Assets({\n  isActive,\n  tokens,\n  isNewWallet,\n  stakingStatus,\n  stakingBalance,\n  isInvestorViewEnabled,\n  apyValue,\n  onTokenClick,\n  onStakedTokenClick,\n}: OwnProps & StateProps) {\n  const { isPortrait } = useDeviceScreen();\n\n  const shouldShowGreeting = isNewWallet && isPortrait;\n  const tonToken = useMemo(() => tokens?.find(({ slug }) => slug === TON_TOKEN_SLUG), [tokens])!;\n  const { shouldRender: shouldRenderStakedToken, transitionClassNames: stakedTokenClassNames } = useShowTransition(\n    Boolean(stakingStatus),\n  );\n\n  function renderStakedToken() {\n    return (\n      <Token\n        key=\"staking\"\n        token={tonToken!}\n        stakingStatus={stakingStatus}\n        apyValue={apyValue}\n        amount={stakingBalance}\n        isInvestorView={isInvestorViewEnabled}\n        classNames={stakedTokenClassNames}\n        onClick={onStakedTokenClick}\n      />\n    );\n  }\n\n  function renderToken(token: UserToken) {\n    if (token.isDisabled) return undefined;\n\n    return (\n      <Token\n        key={token.slug}\n        token={token}\n        apyValue={!stakingBalance && token.slug === TON_TOKEN_SLUG ? apyValue : undefined}\n        isInvestorView={isInvestorViewEnabled}\n        onClick={onTokenClick}\n      />\n    );\n  }\n\n  return (\n    <div className={styles.wrapper}>\n      {!tokens && (\n        <div className={styles.emptyList}>\n          <Loading />\n        </div>\n      )}\n      {shouldShowGreeting && <NewWalletGreeting isActive={isActive} mode=\"panel\" />}\n      {shouldRenderStakedToken && renderStakedToken()}\n      {tokens && tokens.map(renderToken)}\n    </div>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>((global, ownProps, detachWhenChanged): StateProps => {\n    detachWhenChanged(global.currentAccountId);\n\n    const tokens = selectCurrentAccountTokens(global);\n    const isNewWallet = selectIsNewWallet(global);\n    const accountState = selectCurrentAccountState(global);\n    const { isInvestorViewEnabled } = global.settings;\n    const stakingStatus = accountState?.stakingBalance\n      ? accountState.isUnstakeRequested\n        ? 'unstakeRequested'\n        : 'active'\n      : undefined;\n\n    return {\n      tokens,\n      isNewWallet,\n      stakingStatus,\n      stakingBalance: accountState?.stakingBalance,\n      isInvestorViewEnabled,\n      apyValue: accountState?.poolState?.lastApy || 0,\n    };\n  })(Assets),\n);\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"sLc8dGmedysxRZTBxwO4\",\"emptyList\":\"Wm4dMVkosOgNu9gLTSIF\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useFlag from '../../hooks/useFlag';\nimport useMediaTransition from '../../hooks/useMediaTransition';\n\ninterface OwnProps {\n  url: string;\n  alt?: string;\n  className?: string;\n  imageClassName?: string;\n}\n\nconst loadedUrls = new Set();\n\nfunction Image({\n  url,\n  alt,\n  className,\n  imageClassName,\n}: OwnProps) {\n  const [isLoaded, markIsLoaded] = useFlag(loadedUrls.has(url));\n\n  const handleLoad = () => {\n    markIsLoaded();\n    loadedUrls.add(url);\n  };\n  const transitionClassNames = useMediaTransition(isLoaded);\n\n  return (\n    <div className={buildClassName(transitionClassNames, className)}>\n      <img\n        src={url}\n        alt={alt}\n        className={imageClassName}\n        referrerPolicy=\"same-origin\"\n        onLoad={!isLoaded ? handleLoad : undefined}\n      />\n    </div>\n  );\n}\n\nexport default memo(Image);\n","// extracted by mini-css-extract-plugin\nexport default {\"emptyList\":\"HxpUK7NGgbfnFwgSQyfb\",\"emptyListTitle\":\"ApeHA8Gpty5Ysy5kf0Sl\",\"emptyListText\":\"JrABmExJOWIWQ9_ogpjv\",\"emptyListLoading\":\"uR1nEgkAvB_FI2FO1wag\",\"emptyListButton\":\"_HgZC9oBYdV3CW3w4V2P\",\"sticker\":\"HIPW5RJLxQuE0a1vJnWU\",\"list\":\"HsOlqpthGTOriiFRzVXj\",\"landscapeList\":\"XjhHYVQ4PJG_m8AwVnIZ\",\"item\":\"tAPPshvRahppdwPHOJas\",\"image\":\"d5EK6QIOtuW9UwehSCM0\",\"item_onSale\":\"xIgXpU3iCL5hIX9kTa4r\",\"itemOnSale\":\"xIgXpU3iCL5hIX9kTa4r\",\"imageWrapper\":\"YwUkrg0avRa2eAcT145T\",\"infoWrapper\":\"Hz6LU2EWzX50uVMPkuzk\",\"title\":\"UHIa3zHP73tezOcjSNyQ\",\"collection\":\"JNpgerYQpbDuhmLxhJDg\"};","import React, { memo, useMemo } from '../../../../lib/teact/teact';\n\nimport type { ApiNft } from '../../../../api/types';\n\nimport { ANIMATED_STICKER_BIG_SIZE_PX, GETGEMS_BASE_MAINNET_URL, GETGEMS_BASE_TESTNET_URL } from '../../../../config';\nimport { withGlobal } from '../../../../global';\nimport renderText from '../../../../global/helpers/renderText';\nimport { selectCurrentAccountState } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { shortenAddress } from '../../../../util/shortenAddress';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\n\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useLang from '../../../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\nimport Image from '../../../ui/Image';\nimport Loading from '../../../ui/Loading';\n\nimport styles from './Nft.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\ninterface StateProps {\n  orderedAddresses?: string[];\n  byAddress?: Record<string, ApiNft>;\n  isTestnet?: boolean;\n}\n\nfunction Nfts({\n  isActive, orderedAddresses, byAddress, isTestnet,\n}: OwnProps & StateProps) {\n  const { isLandscape } = useDeviceScreen();\n  const lang = useLang();\n\n  const getgemsBaseUrl = isTestnet ? GETGEMS_BASE_TESTNET_URL : GETGEMS_BASE_MAINNET_URL;\n\n  const nfts = useMemo(() => {\n    if (!orderedAddresses || !byAddress) {\n      return undefined;\n    }\n\n    return orderedAddresses.map((address) => byAddress[address]).filter(Boolean);\n  }, [byAddress, orderedAddresses]);\n\n  if (nfts === undefined) {\n    return (\n      <div className={buildClassName(styles.emptyList, styles.emptyListLoading)}>\n        <Loading />\n      </div>\n    );\n  }\n\n  if (nfts.length === 0) {\n    return (\n      <div className={styles.emptyList}>\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.happy}\n          previewUrl={ANIMATED_STICKERS_PATHS.happyPreview}\n          size={ANIMATED_STICKER_BIG_SIZE_PX}\n          className={styles.sticker}\n          noLoop={false}\n          nonInteractive\n        />\n        <p className={styles.emptyListTitle}>{lang('No NFTs yet')}</p>\n        <p className={styles.emptyListText}>{renderText(lang('$nft_explore_offer'))}</p>\n        <a className={styles.emptyListButton} href={getgemsBaseUrl} rel=\"noreferrer noopener\" target=\"_blank\">\n          {lang('Open Getgems')}\n        </a>\n      </div>\n    );\n  }\n\n  return (\n    <div className={buildClassName(styles.list, isLandscape && styles.landscapeList)}>\n      {nfts.map((nft) => (\n        <a\n          href={`${getgemsBaseUrl}collection/${nft.collectionAddress}/${nft.address}`}\n          className={buildClassName(styles.item, nft.isOnSale && styles.item_onSale)}\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          <Image url={nft.thumbnail} className={styles.imageWrapper} imageClassName={styles.image} />\n          <div className={styles.infoWrapper}>\n            <b className={styles.title}>{nft.name || shortenAddress(nft.address, 4)}</b>\n          </div>\n          <div className={styles.collection}>{nft.collectionName}</div>\n        </a>\n      ))}\n    </div>\n  );\n}\nexport default memo(\n  withGlobal<OwnProps>((global, ownProps, detachWhenChanged): StateProps => {\n    detachWhenChanged(global.currentAccountId);\n\n    const { orderedAddresses, byAddress } = selectCurrentAccountState(global)?.nfts || {};\n\n    return {\n      orderedAddresses,\n      byAddress,\n      isTestnet: global.settings.isTestnet,\n    };\n  })(Nfts),\n);\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"Mztw3EKsAaK7gMitEU95\",\"portraitContainer\":\"Cwr8AbWXuCjCsWK3UiZz\",\"landscapeContainer\":\"HFuaji6NwggXjAoEtIjy\",\"assetsPanel\":\"Mqumy0q6wq75xH_OAL5K\",\"tabs\":\"NuLOgXWTZKjE4hFVSkt7\",\"tab\":\"ExUhosF3ynY23gkTw6h_\",\"slides\":\"Qa5TKhdUL836NsLAQub7\",\"slide\":\"LJ7g5QU7Y1abQ9MlArQg\"};","import React, { memo, useCallback, useMemo } from '../../../../lib/teact/teact';\n\nimport { getActions, withGlobal } from '../../../../global';\nimport { selectCurrentAccountTokens } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\n\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useLang from '../../../../hooks/useLang';\n\nimport TabList from '../../../ui/TabList';\nimport Transition from '../../../ui/Transition';\nimport Activity from './Activity';\nimport Assets from './Assets';\nimport Nfts from './Nfts';\n\nimport styles from './Content.module.scss';\n\ninterface OwnProps {\n  activeTabIndex: number;\n  setActiveTabIndex: (index: number) => void;\n  onStakedTokenClick: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  tokenCount: number;\n}\n\nconst MIN_ASSETS_FOR_DESKTOP_TAB_VIEW = 5;\n\nfunction Content({\n  activeTabIndex, tokenCount, setActiveTabIndex, onStakedTokenClick,\n}: OwnProps & StateProps) {\n  const { selectToken } = getActions();\n  const { isLandscape } = useDeviceScreen();\n\n  const lang = useLang();\n\n  const shouldShowSeparateAssetsPanel = isLandscape && tokenCount < MIN_ASSETS_FOR_DESKTOP_TAB_VIEW;\n  const TABS = useMemo(\n    () => [\n      ...(!shouldShowSeparateAssetsPanel\n        ? [{ id: 'assets', title: lang('Assets') as string, className: styles.tab }]\n        : []),\n      { id: 'activity', title: lang('Activity') as string, className: styles.tab },\n      { id: 'nft', title: lang('NFT') as string, className: styles.tab },\n    ],\n    [lang, shouldShowSeparateAssetsPanel],\n  );\n  activeTabIndex = Math.min(activeTabIndex, TABS.length - 1);\n\n  const handleSwitchTab = useCallback(\n    (index: number) => {\n      selectToken({ slug: undefined });\n      setActiveTabIndex(index);\n    },\n    [selectToken, setActiveTabIndex],\n  );\n\n  const handleClickAssets = useCallback(\n    (slug: string) => {\n      selectToken({ slug });\n      setActiveTabIndex(TABS.findIndex((tab) => tab.id === 'activity'));\n    },\n    [TABS, selectToken, setActiveTabIndex],\n  );\n\n  function renderCurrentTab(isActive: boolean) {\n    // When assets are shown separately, there is effectively no tab with index 0,\n    // so we fall back to next tab to not break parent's component logic.\n    if (activeTabIndex === 0 && shouldShowSeparateAssetsPanel) {\n      return <Activity isActive={isActive} />;\n    }\n\n    const currentTabId = activeTabIndex > TABS.length - 1 ? TABS[TABS.length - 1].id : TABS[activeTabIndex].id;\n\n    switch (currentTabId) {\n      case 'assets':\n        return <Assets isActive={isActive} onTokenClick={handleClickAssets} onStakedTokenClick={onStakedTokenClick} />;\n\n      case 'activity':\n        return <Activity isActive={isActive} />;\n\n      case 'nft':\n        return <Nfts isActive={isActive} />;\n\n      default:\n        return undefined;\n    }\n  }\n\n  return (\n    <div\n      className={buildClassName(styles.container, isLandscape ? styles.landscapeContainer : styles.portraitContainer)}\n    >\n      {shouldShowSeparateAssetsPanel && (\n        <div className={styles.assetsPanel}>\n          <Assets isActive onStakedTokenClick={onStakedTokenClick} onTokenClick={handleClickAssets} />\n        </div>\n      )}\n      <TabList tabs={TABS} activeTab={activeTabIndex} onSwitchTab={handleSwitchTab} className={styles.tabs} />\n      <Transition\n        name={isLandscape ? 'slideFade' : 'slide'}\n        activeKey={activeTabIndex}\n        renderCount={TABS.length}\n        className={styles.slides}\n        slideClassName={buildClassName(styles.slide, 'custom-scroll')}\n      >\n        {renderCurrentTab}\n      </Transition>\n    </div>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>((global, ownProps, detachWhenChanged): StateProps => {\n    detachWhenChanged(global.currentAccountId);\n\n    const tokens = selectCurrentAccountTokens(global);\n\n    return {\n      tokenCount: tokens?.length ?? 0,\n    };\n  })(Content),\n);\n","import { useEffect } from '../lib/teact/teact';\n\nimport type { Theme } from '../global/types';\n\ninterface Props {\n  isActive: boolean;\n  currentTheme: Theme;\n  lightColor: string;\n  darkColor: string;\n}\n\nexport default function useBrowserUiColor({\n  isActive,\n  currentTheme,\n  lightColor,\n  darkColor,\n}: Props) {\n  useEffect(() => {\n    const metaElementLight = getThemeColorMetaElement(true);\n    const metaElementDark = getThemeColorMetaElement();\n    const lightContent = currentTheme === 'dark' ? darkColor : lightColor;\n    const darkContent = currentTheme === 'light' ? lightColor : darkColor;\n\n    if (isActive) {\n      metaElementLight.setAttribute('content', lightContent);\n      metaElementDark.setAttribute('content', darkContent);\n    }\n\n    return () => {\n      metaElementLight.remove();\n      metaElementDark.remove();\n    };\n  }, [lightColor, isActive, darkColor, currentTheme]);\n}\n\nfunction getThemeColorMetaElement(isLight?: boolean) {\n  let metaThemeColor = document.querySelector(\n    `meta[name=\"theme-color\"][media=\"(prefers-color-scheme: ${isLight ? 'light' : 'dark'})\"]`,\n  );\n\n  if (!metaThemeColor) {\n    metaThemeColor = document.createElement('meta');\n    metaThemeColor.setAttribute('name', 'theme-color');\n    metaThemeColor.setAttribute('media', `(prefers-color-scheme: ${isLight ? 'light' : 'dark'})`);\n    document.getElementsByTagName('head')[0].appendChild(metaThemeColor);\n  }\n\n  return metaThemeColor;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"portraitContainer\":\"inc2ecW4vQrVkVt376LR\",\"container\":\"rxTHTPiCO8Jia8sOlDvK\",\"testnetWarning\":\"cc4QQJGCEAlI8i2Oa_1F\",\"wrapper\":\"LLnVCQ6n1zYkVYjJkCgv\",\"wrapper_landscape\":\"rNDRPCbFNWhalkIeeHhS\",\"wrapperLandscape\":\"rNDRPCbFNWhalkIeeHhS\",\"icon\":\"t6Ku0F38N3TAWbzC3q3P\",\"text\":\"KotaoYR_I_ovrzo_VXs1\",\"closeButton\":\"mWs0oZ4uvkjgTHqrfL5o\"};","import React, { memo } from '../../../../lib/teact/teact';\n\nimport type { Theme } from '../../../../global/types';\n\nimport { withGlobal } from '../../../../global';\nimport buildClassName from '../../../../util/buildClassName';\n\nimport useBrowserUiColor from '../../../../hooks/useBrowserUiColor';\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useLang from '../../../../hooks/useLang';\nimport useShowTransition from '../../../../hooks/useShowTransition';\n\nimport styles from './Warnings.module.scss';\n\ntype OwnProps = {\n  isRequired: boolean;\n  onOpenBackupWallet: () => void;\n};\n\ntype StateProps = {\n  theme: Theme;\n};\n\nconst UI_BG_RED_LIGHT = '#F36A6B';\nconst UI_BG_RED_DARK = '#C44646';\n\nfunction BackupWarning({ isRequired, theme, onOpenBackupWallet }: OwnProps & StateProps) {\n  const { shouldRender, transitionClassNames } = useShowTransition(isRequired, undefined, true);\n  const { isLandscape } = useDeviceScreen();\n\n  const lang = useLang();\n\n  useBrowserUiColor({\n    isActive: isRequired,\n    currentTheme: theme,\n    lightColor: UI_BG_RED_LIGHT,\n    darkColor: UI_BG_RED_DARK,\n  });\n\n  const handleClick = () => {\n    onOpenBackupWallet();\n  };\n\n  if (!shouldRender) {\n    return undefined;\n  }\n\n  return (\n    <div\n      className={buildClassName(styles.wrapper, isLandscape && styles.wrapper_landscape, transitionClassNames)}\n      onClick={handleClick}\n    >\n      {lang('Wallet is not backed up')}\n      <i className={buildClassName(styles.icon, 'icon-chevron-right')} />\n      <p className={styles.text}>\n        {lang('Back up wallet to have full access to it')}\n      </p>\n    </div>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>((global, ownProps, detachWhenChanged): StateProps => {\n    detachWhenChanged(global.currentAccountId);\n\n    return {\n      theme: global.settings.theme,\n    };\n  })(BackupWarning),\n);\n","import React, { memo, useCallback } from '../../../../lib/teact/teact';\n\nimport { MY_TON_WALLET_PROMO_URL } from '../../../../config';\nimport { getActions, withGlobal } from '../../../../global';\nimport buildClassName from '../../../../util/buildClassName';\n\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useLang from '../../../../hooks/useLang';\nimport useShowTransition from '../../../../hooks/useShowTransition';\n\nimport styles from './Warnings.module.scss';\n\ntype StateProps = {\n  isSecurityWarningHidden?: boolean;\n};\n\nfunction SecurityWarning({ isSecurityWarningHidden }: StateProps) {\n  const { closeSecurityWarning } = getActions();\n\n  const { shouldRender, transitionClassNames } = useShowTransition(!isSecurityWarningHidden, undefined, true);\n  const { isLandscape } = useDeviceScreen();\n\n  const lang = useLang();\n\n  function handleClick() {\n    window.open(MY_TON_WALLET_PROMO_URL, '_blank', 'noopener');\n  }\n\n  const handleClose = useCallback(\n    (e: React.MouseEvent<HTMLButtonElement>) => {\n      e.stopPropagation();\n\n      closeSecurityWarning();\n    },\n    [closeSecurityWarning],\n  );\n\n  if (!shouldRender) {\n    return undefined;\n  }\n\n  return (\n    <div\n      className={buildClassName(styles.wrapper, isLandscape && styles.wrapper_landscape, transitionClassNames)}\n      onClick={handleClick}\n    >\n      {lang('Improve wallet security')}\n      <i className={buildClassName(styles.icon, 'icon-chevron-right')} />\n      <p className={styles.text}>{lang('by installing browser extension or native app')}</p>\n\n      <button type=\"button\" className={styles.closeButton} aria-label={lang('Close')} onClick={handleClose}>\n        <i className=\"icon-close\" aria-hidden />\n      </button>\n    </div>\n  );\n}\n\nexport default memo(\n  withGlobal((global): StateProps => {\n    return {\n      isSecurityWarningHidden: global.settings.isSecurityWarningHidden,\n    };\n  })(SecurityWarning),\n);\n","import React, { memo } from '../../../../lib/teact/teact';\n\nimport { IS_ELECTRON } from '../../../../config';\nimport { withGlobal } from '../../../../global';\nimport { selectCurrentAccountState } from '../../../../global/selectors';\nimport { IS_EXTENSION } from '../../../../util/windowEnvironment';\n\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useLang from '../../../../hooks/useLang';\n\nimport BackupWarning from './BackupWarning';\nimport SecurityWarning from './SecurityWarning';\n\nimport styles from './Warnings.module.scss';\n\ntype OwnProps = {\n  onOpenBackupWallet: () => void;\n};\n\ntype StateProps = {\n  isTestnet?: boolean;\n  isBackupRequired: boolean;\n};\n\nconst SECURITY_WARNING_TEMPORARILY_DISABLED = true;\n\nfunction Warnings({ isBackupRequired, isTestnet, onOpenBackupWallet }: OwnProps & StateProps) {\n  const { isPortrait } = useDeviceScreen();\n  const lang = useLang();\n\n  return (\n    <>\n      {isTestnet && (\n        <div className={isPortrait ? styles.portraitContainer : styles.container}>\n          <div className={styles.testnetWarning}>{lang('Testnet Version')}</div>\n        </div>\n      )}\n\n      <BackupWarning isRequired={isBackupRequired} onOpenBackupWallet={onOpenBackupWallet} />\n      {!(IS_ELECTRON || IS_EXTENSION || SECURITY_WARNING_TEMPORARILY_DISABLED) && <SecurityWarning />}\n    </>\n  );\n}\n\nexport default memo(withGlobal((global, ownProps, detachWhenChanged): StateProps => {\n  detachWhenChanged(global.currentAccountId);\n\n  return {\n    isBackupRequired: Boolean(selectCurrentAccountState(global)?.isBackupRequired),\n    isTestnet: global.settings.isTestnet,\n  };\n})(Warnings));\n","import React, {\n  memo, useCallback, useEffect, useState,\n} from '../../lib/teact/teact';\n\nimport { getActions, withGlobal } from '../../global';\nimport { selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useFlag from '../../hooks/useFlag';\n\nimport StakeModal from '../staking/StakeModal';\nimport StakingInfoModal from '../staking/StakingInfoModal';\nimport UnstakingModal from '../staking/UnstakeModal';\nimport { LandscapeActions, PortraitActions } from './sections/Actions';\nimport Card from './sections/Card';\nimport Content from './sections/Content';\nimport Warnings from './sections/Warnings';\n\nimport styles from './Main.module.scss';\n\ntype StateProps = {\n  currentTokenSlug?: string;\n  currentAccountId?: string;\n  isStakingActive: boolean;\n  isUnstakeRequested?: boolean;\n};\n\nfunction Main({\n  currentTokenSlug, currentAccountId, isStakingActive, isUnstakeRequested,\n}: StateProps) {\n  const {\n    selectToken,\n    startStaking,\n    fetchBackendStakingState,\n    openBackupWalletModal,\n  } = getActions();\n\n  const [activeTabIndex, setActiveTabIndex] = useState<number>(currentTokenSlug ? 1 : 0);\n  const [isStakingInfoOpened, openStakingInfo, closeStakingInfo] = useFlag(false);\n  const { isPortrait } = useDeviceScreen();\n\n  useEffect(() => {\n    if (currentAccountId && (isStakingActive || isUnstakeRequested)) {\n      fetchBackendStakingState();\n    }\n  }, [fetchBackendStakingState, currentAccountId, isStakingActive, isUnstakeRequested]);\n\n  const handleTokenCardClose = useCallback(() => {\n    selectToken({ slug: undefined });\n    setActiveTabIndex(0);\n  }, [selectToken]);\n\n  const handleEarnClick = useCallback(() => {\n    if (isStakingActive || isUnstakeRequested) {\n      openStakingInfo();\n    } else {\n      startStaking();\n    }\n  }, [isStakingActive, isUnstakeRequested, openStakingInfo, startStaking]);\n\n  function renderPortraitLayout() {\n    return (\n      <div className={styles.portraitContainer}>\n        <div className={styles.head}>\n          <Warnings onOpenBackupWallet={openBackupWalletModal} />\n          <Card onTokenCardClose={handleTokenCardClose} onApyClick={handleEarnClick} />\n          <PortraitActions\n            hasStaking={isStakingActive}\n            isUnstakeRequested={isUnstakeRequested}\n            onEarnClick={handleEarnClick}\n          />\n        </div>\n\n        <Content\n          activeTabIndex={activeTabIndex}\n          setActiveTabIndex={setActiveTabIndex}\n          onStakedTokenClick={handleEarnClick}\n        />\n      </div>\n    );\n  }\n\n  function renderLandscapeLayout() {\n    return (\n      <div className={styles.landscapeContainer}>\n        <div className={buildClassName(styles.sidebar, 'custom-scroll')}>\n          <Warnings onOpenBackupWallet={openBackupWalletModal} />\n          <Card onTokenCardClose={handleTokenCardClose} onApyClick={handleEarnClick} />\n          <LandscapeActions\n            hasStaking={isStakingActive}\n            isUnstakeRequested={isUnstakeRequested}\n          />\n        </div>\n        <div className={styles.main}>\n          <Content\n            activeTabIndex={activeTabIndex}\n            setActiveTabIndex={setActiveTabIndex}\n            onStakedTokenClick={handleEarnClick}\n          />\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      {isPortrait ? renderPortraitLayout() : renderLandscapeLayout()}\n\n      <StakeModal onViewStakingInfo={openStakingInfo} />\n      <StakingInfoModal isOpen={isStakingInfoOpened} onClose={closeStakingInfo} />\n      <UnstakingModal />\n    </>\n  );\n}\n\nexport default memo(\n  withGlobal((global, ownProps, detachWhenChanged): StateProps => {\n    detachWhenChanged(global.currentAccountId);\n    const accountState = selectCurrentAccountState(global);\n\n    return {\n      isStakingActive: Boolean(accountState?.stakingBalance) && !accountState?.isUnstakeRequested,\n      isUnstakeRequested: accountState?.isUnstakeRequested,\n      currentTokenSlug: accountState?.currentTokenSlug,\n      currentAccountId: global.currentAccountId,\n    };\n  })(Main),\n);\n","// extracted by mini-css-extract-plugin\nexport default {\"is-ios\":\"Rt1BA50zF7EL_UNyG9Ox\",\"isIos\":\"Rt1BA50zF7EL_UNyG9Ox\",\"is-android\":\"DmOF8a7CruuBhxc2XmAe\",\"isAndroid\":\"DmOF8a7CruuBhxc2XmAe\",\"portraitContainer\":\"H9aB3mQ0hkW2yrqbKo_C\",\"head\":\"KmXvIaqCYwiuwpESUoWx\",\"landscapeContainer\":\"GlXKHIWYDd0ciWr14q7w\",\"main\":\"MyT3Xr1V5p5hKeT3gV_D\",\"sidebar\":\"LNHAl31ZExodWFB9FYM6\"};","import type TonWeb from 'tonweb';\n\nimport type { ApiParsedPayload } from './payload';\n\nexport type ApiWalletVersion = keyof typeof TonWeb.Wallets['all'];\n\nexport type ApiBlockchainKey = 'ton';\nexport type ApiNetwork = 'mainnet' | 'testnet';\nexport type ApiLedgerDriver = 'HID' | 'USB';\n\nexport interface AccountIdParsed {\n  id: number;\n  blockchain: ApiBlockchainKey;\n  network: ApiNetwork;\n}\n\nexport interface ApiInitArgs {\n  origin: string;\n  newestTxId?: string;\n}\n\nexport interface ApiBaseToken {\n  name: string;\n  symbol: string;\n  slug: string;\n  decimals: number;\n  minterAddress?: string;\n  image?: string;\n  isPopular?: boolean;\n  keywords?: string[];\n}\n\nexport interface ApiToken extends ApiBaseToken {\n  quote: ApiTokenPrice;\n}\n\nexport interface ApiTokenPrice {\n  price: number;\n  percentChange1h: number;\n  percentChange24h: number;\n  percentChange7d: number;\n  percentChange30d: number;\n  history24h?: ApiHistoryList;\n  history7d?: ApiHistoryList;\n  history30d?: ApiHistoryList;\n}\n\nexport type ApiKnownAddresses = Record<string, ApiAddressInfo>;\n\nexport interface ApiAddressInfo {\n  name?: string;\n  isScam?: boolean;\n}\n\nexport type ApiTxIdBySlug = Record<string, string | undefined>;\nexport type ApiTransactionType = 'stake' | 'unstake' | 'unstakeRequest' | undefined;\n\nexport interface ApiTransaction {\n  txId: string;\n  timestamp: number;\n  amount: string;\n  fromAddress: string;\n  toAddress: string;\n  comment?: string;\n  encryptedComment?: string;\n  fee: string;\n  slug: string;\n  isIncoming: boolean;\n  type?: ApiTransactionType;\n  metadata?: ApiTransactionMetadata;\n}\n\nexport interface ApiTransactionMetadata extends ApiAddressInfo {\n}\n\nexport interface ApiNft {\n  index: number;\n  name?: string;\n  address: string;\n  thumbnail: string;\n  image: string;\n  collectionName?: string;\n  collectionAddress?: string;\n  isOnSale: boolean;\n}\n\nexport type ApiHistoryList = Array<[number, number]>;\nexport type ApiTokenSimple = Omit<ApiToken, 'quote'>;\n\nexport interface ApiPoolState {\n  startOfCycle: number;\n  endOfCycle: number;\n  lastApy: number;\n  minStake: number;\n}\n\nexport interface ApiStakingState {\n  amount: number;\n  pendingDepositAmount: number;\n  isUnstakeRequested: boolean;\n}\n\nexport interface ApiBackendStakingState {\n  poolAddress: string;\n  balance: number;\n  totalProfit: number;\n  poolState: ApiPoolState;\n  profitHistory: {\n    timestamp: number;\n    profit: number;\n  }[];\n}\n\nexport interface ApiDappPermissions {\n  isAddressRequired?: boolean;\n  isPasswordRequired?: boolean;\n}\n\nexport type ApiDappRequest = {\n  origin?: string;\n  accountId?: string;\n} | {\n  origin: string;\n  accountId: string;\n};\n\nexport interface ApiDappTransaction {\n  toAddress: string;\n  amount: string;\n  rawPayload?: string;\n  payload?: ApiParsedPayload;\n  stateInit?: string;\n}\n\nexport interface ApiSubmitTransferOptions {\n  accountId: string;\n  password: string;\n  slug: string;\n  toAddress: string;\n  amount: string;\n  comment?: string;\n  fee?: string;\n  shouldEncrypt?: boolean;\n}\n\nexport enum Workchain {\n  MasterChain = -1,\n  BaseChain = 0,\n}\n\nexport const WORKCHAIN = Workchain.BaseChain;\nexport const TRANSFER_TIMEOUT_SEC = 60; // 1 min.\n\nexport interface ApiSignedTransfer {\n  base64: string;\n  seqno: number;\n  params: ApiLocalTransactionParams;\n}\n\nexport interface ApiLocalTransactionParams {\n  amount: string;\n  fromAddress: string;\n  toAddress: string;\n  comment?: string;\n  fee: string;\n  slug: string;\n  type?: ApiTransactionType;\n  encryptedComment?: string;\n}\n","import type { MethodArgs, MethodResponse, Methods } from '../../methods/types';\nimport type { ApiInitArgs, OnApiUpdate } from '../../types';\n\nimport { logDebugError } from '../../../util/logs';\nimport type { Connector } from '../../../util/PostMessageConnector';\nimport { createConnector } from '../../../util/PostMessageConnector';\n\nlet connector: Connector;\n\nexport function initApi(onUpdate: OnApiUpdate, initArgs: ApiInitArgs | (() => ApiInitArgs)) {\n  if (!connector) {\n    connector = createConnector(new Worker(new URL('./provider.ts', import.meta.url)), onUpdate);\n  }\n\n  const args = typeof initArgs === 'function' ? initArgs() : initArgs;\n  return connector.init(args);\n}\n\nexport async function callApi<T extends keyof Methods>(fnName: T, ...args: MethodArgs<T>) {\n  if (!connector) {\n    logDebugError('API is not initialized');\n    return undefined;\n  }\n\n  try {\n    return await (connector.request({\n      name: fnName,\n      args,\n    }) as MethodResponse<T>);\n  } catch (err) {\n    logDebugError('callApi', err);\n    return undefined;\n  }\n}\n","import type { StorageKey } from '../storages/types';\nimport type { ApiAccountInfo, ApiNetwork } from '../types';\n\nimport { buildAccountId, parseAccountId } from '../../util/account';\nimport { buildCollectionByKey } from '../../util/iteratees';\nimport { storage } from '../storages';\nimport { toInternalAccountId } from './helpers';\n\nconst MIN_ACCOUNT_NUMBER = 0;\n\n// eslint-disable-next-line import/no-mutable-exports\nexport let loginResolve: AnyFunction;\nconst loginPromise = new Promise<void>((resolve) => {\n  loginResolve = resolve;\n});\n\nexport async function getAccountIds(): Promise<string[]> {\n  return Object.keys(await storage.getItem('addresses') || {});\n}\n\nexport async function getMainAccountId() {\n  const accountIds = await getAccountIds();\n\n  const accounts = await Promise.all(\n    accountIds.map(async (accountId) => {\n      const info = await fetchStoredAccount(accountId);\n      return {\n        ...parseAccountId(accountId),\n        accountId,\n        hasLedger: !!info?.ledger,\n      };\n    }),\n  );\n\n  const nonHardwareAccounts = accounts.filter((account) => !account.hasLedger);\n\n  if (!nonHardwareAccounts.length) {\n    return undefined;\n  }\n\n  const accountById = buildCollectionByKey(\n    nonHardwareAccounts,\n    'id',\n  );\n\n  const keys = Object.keys(accountById);\n  if (!keys.length) {\n    return undefined;\n  }\n\n  const id = Math.min(...keys.map(Number));\n\n  return accountById[id].accountId;\n}\n\nexport async function getNewAccountId(network: ApiNetwork) {\n  const ids = (await getAccountIds()).map((accountId) => parseAccountId(accountId).id);\n  const id = ids.length === 0 ? MIN_ACCOUNT_NUMBER : Math.max(...ids) + 1;\n  return buildAccountId({\n    id,\n    network,\n    blockchain: 'ton',\n  });\n}\n\nexport function fetchStoredAccount(accountId: string): Promise<ApiAccountInfo | undefined> {\n  return getAccountValue(accountId, 'accounts');\n}\n\nexport function fetchStoredPublicKey(accountId: string): Promise<string> {\n  return getAccountValue(accountId, 'publicKeys');\n}\n\nexport function fetchStoredAddress(accountId: string): Promise<string> {\n  return getAccountValue(accountId, 'addresses');\n}\n\nexport async function getAccountValue(accountId: string, key: StorageKey) {\n  const internalId = toInternalAccountId(accountId);\n  return (await storage.getItem(key))?.[internalId];\n}\n\nexport async function removeAccountValue(accountId: string, key: StorageKey) {\n  const internalId = toInternalAccountId(accountId);\n  const data = await storage.getItem(key);\n  if (!data) return;\n\n  const { [internalId]: removedValue, ...restData } = data;\n  await storage.setItem(key, restData);\n}\n\nexport async function setAccountValue(accountId: string, key: StorageKey, value: any) {\n  const internalId = toInternalAccountId(accountId);\n  const data = await storage.getItem(key);\n  await storage.setItem(key, { ...data, [internalId]: value });\n}\n\nexport function getCurrentAccountId(): Promise<string | undefined> {\n  return storage.getItem('currentAccountId');\n}\n\nexport function waitLogin() {\n  return loginPromise;\n}\n","import { StorageType } from './types';\n\nimport { IS_EXTENSION } from '../environment';\nimport extensionStorage from './extension';\nimport idb from './idb';\nimport localStorage from './localStorage';\n\nexport const storage = IS_EXTENSION ? extensionStorage : idb;\n\nexport default {\n  [StorageType.IndexedDb]: idb,\n  [StorageType.LocalStorage]: localStorage,\n  [StorageType.ExtensionLocal]: extensionStorage,\n};\n","import type { ApiTransaction } from '../types';\n\nimport { createCallbackManager } from '../../util/callbacks';\n\nexport const txCallbacks = createCallbackManager();\n\nexport function whenTxComplete(toAddress: string, amount: string) {\n  return new Promise<{ result: boolean; txId: string }>((resolve) => {\n    txCallbacks.addCallback(function callback(transaction: ApiTransaction) {\n      if (transaction.toAddress === toAddress && transaction.amount === `-${amount}`) {\n        txCallbacks.removeCallback(callback);\n        resolve({ result: true, txId: transaction.txId });\n      }\n    });\n  });\n}\n","import {\n  AccountsApi,\n  BlockchainApi,\n  Configuration,\n  NFTApi,\n  ResponseError,\n} from 'tonapi-sdk-js';\n\nimport type { ApiNetwork } from '../../../types';\n\nimport { logDebugError } from '../../../../util/logs';\n\nconst TONAPIIO_MAINNET_URL = process.env.TONAPIIO_MAINNET_URL || 'https://tonapi.io';\nconst TONAPIIO_TESTNET_URL = process.env.TONAPIIO_TESTNET_URL || 'https://testnet.tonapi.io';\nconst MAX_LIMIT = 1000;\n\nconst configurationMainnet = new Configuration({\n  basePath: TONAPIIO_MAINNET_URL,\n});\nconst configurationTestnet = new Configuration({\n  basePath: TONAPIIO_TESTNET_URL,\n});\n\nexport const tonapiioByNetwork = {\n  mainnet: {\n    configuration: configurationMainnet,\n    blockchainApi: new BlockchainApi(configurationMainnet),\n    nftApi: new NFTApi(configurationMainnet),\n    accountsApi: new AccountsApi(configurationMainnet),\n  },\n  testnet: {\n    configuration: configurationTestnet,\n    blockchainApi: new BlockchainApi(configurationTestnet),\n    nftApi: new NFTApi(configurationTestnet),\n    accountsApi: new AccountsApi(configurationTestnet),\n  },\n};\n\nexport function fetchJettonBalances(network: ApiNetwork, account: string) {\n  const api = tonapiioByNetwork[network].accountsApi;\n  return tonapiioErrorHandler(async () => {\n    return (await api.getJettonsBalances({ accountId: account })).balances;\n  }, []);\n}\n\nexport function fetchNftItems(network: ApiNetwork, addresses: string[]) {\n  const api = tonapiioByNetwork[network].nftApi;\n  return tonapiioErrorHandler(async () => (await api.getNftItemsByAddresses({\n    getAccountsRequest: { accountIds: addresses },\n  })).nftItems, []);\n}\n\nexport function fetchAccountNfts(network: ApiNetwork, address: string, offset?: number, limit?: number) {\n  const api = tonapiioByNetwork[network].accountsApi;\n  return tonapiioErrorHandler(async () => (await api.getNftItemsByOwner({\n    accountId: address,\n    offset: offset ?? 0,\n    limit: limit ?? MAX_LIMIT,\n    indirectOwnership: true,\n  })).nftItems, []);\n}\n\nexport function fetchAccountEvents(network: ApiNetwork, address: string, fromSec: number, limit?: number) {\n  const api = tonapiioByNetwork[network].accountsApi;\n  return tonapiioErrorHandler(async () => (await api.getEventsByAccount({\n    accountId: address,\n    limit: limit ?? MAX_LIMIT,\n    startDate: fromSec,\n  })).events, []);\n}\n\nasync function tonapiioErrorHandler<T>(fn: () => Promise<T>, defaultValue: T): Promise<T> {\n  try {\n    return (await fn()) || defaultValue;\n  } catch (err: any) {\n    if (err instanceof ResponseError) {\n      const data = await err.response.json().catch();\n      if (data?.error === 'entity not found') {\n        return defaultValue;\n      }\n    }\n    logDebugError('tonapiioErrorHandler', err);\n    throw err;\n  }\n}\n","import type { ApiParsedPayload } from '../../types';\n\nexport const TOKEN_TRANSFER_TON_AMOUNT = 50000000n; // 0.05 TON\nexport const TOKEN_TRANSFER_TON_FORWARD_AMOUNT = 1n; // 0.000000001 TON\n\nexport const STAKE_COMMENT = 'd';\nexport const UNSTAKE_COMMENT = 'w';\n\nexport const ATTEMPTS = 5;\n\nexport const DEFAULT_DECIMALS = 9;\n\nexport const LEDGER_SUPPORTED_PAYLOADS: ApiParsedPayload['type'][] = [\n  'transfer-nft',\n  'transfer-tokens',\n  'comment',\n];\n\nexport enum OpCode {\n  Comment = 0,\n  Encrypted = 0x2167da4b,\n}\n\nexport enum JettonOpCode {\n  Transfer = 0xf8a7ea5,\n  TransferNotification = 0x7362d09c,\n  InternalTransfer = 0x178d4519,\n  Excesses = 0xd53276db,\n  Burn = 0x595f07bc,\n  BurnNotification = 0x7bdd97de,\n}\n\nexport enum NftOpCode {\n  TransferOwnership = 0x5fcc3d14,\n}\n","import type { AddressType } from 'tonweb';\nimport TonWeb from 'tonweb';\nimport type { Cell as CellType } from 'tonweb/dist/types/boc/cell';\nimport type { JettonData } from 'tonweb/dist/types/contract/token/ft/jetton-minter';\nimport BN from 'bn.js';\n\nimport type { ApiNetwork } from '../../../types';\nimport type { ApiTransactionExtra, MyTonWeb, TokenTransferBodyParams } from '../types';\n\nimport {\n  TON_TOKEN_SLUG,\n  TONHTTPAPI_MAINNET_API_KEY,\n  TONHTTPAPI_MAINNET_URL,\n  TONHTTPAPI_TESTNET_API_KEY,\n  TONHTTPAPI_TESTNET_URL,\n} from '../../../../config';\nimport withCacheAsync from '../../../../util/withCacheAsync';\nimport { hexToBytes } from '../../../common/utils';\nimport { JettonOpCode } from '../constants';\nimport { parseTxId, stringifyTxId } from './index';\n\nimport CustomHttpProvider from './CustomHttpProvider';\n\nconst { Cell } = TonWeb.boc;\nconst { Address } = TonWeb.utils;\nconst { JettonMinter, JettonWallet } = TonWeb.token.jetton;\n\nconst tonwebByNetwork = {\n  mainnet: new TonWeb(new CustomHttpProvider(TONHTTPAPI_MAINNET_URL, {\n    apiKey: TONHTTPAPI_MAINNET_API_KEY,\n  })) as MyTonWeb,\n  testnet: new TonWeb(new CustomHttpProvider(TONHTTPAPI_TESTNET_URL, {\n    apiKey: TONHTTPAPI_TESTNET_API_KEY,\n  })) as MyTonWeb,\n};\n\nexport const resolveTokenWalletAddress = withCacheAsync(\n  async (network: ApiNetwork, address: string, minterAddress: string) => {\n    const minter = new JettonMinter(getTonWeb(network).provider, { address: minterAddress } as any);\n    return toBase64Address(await minter.getJettonWalletAddress(new Address(address)));\n  },\n);\n\nexport const resolveTokenMinterAddress = withCacheAsync(async (network: ApiNetwork, tokenWalletAddress: string) => {\n  const tokenWallet = new JettonWallet(getTonWeb(network).provider, { address: tokenWalletAddress } as any);\n  return toBase64Address((await tokenWallet.getData()).jettonMinterAddress);\n});\n\nexport const getWalletPublicKey = withCacheAsync(async (network: ApiNetwork, address: string) => {\n  try {\n    const publicKeyBN = await getTonWeb(network).provider.call2(address, 'get_public_key');\n    let publicKeyHex = publicKeyBN.toString(16);\n    if (publicKeyHex.length % 2 !== 0) {\n      publicKeyHex = `0${publicKeyHex}`;\n    }\n\n    return hexToBytes(publicKeyHex);\n  } catch (err) {\n    return undefined;\n  }\n});\n\nexport async function getJettonMinterData(network: ApiNetwork, address: string) {\n  const contract = new JettonMinter(getTonWeb(network).provider, { address } as any);\n  const data = await contract.getJettonData() as JettonData & {\n    jettonContentCell: CellType;\n  };\n  return {\n    ...data,\n    totalSupply: data.totalSupply.toString(),\n    adminAddress: data.adminAddress ? toBase64Address(data.adminAddress) : undefined,\n  };\n}\n\nexport async function fetchNewestTxId(network: ApiNetwork, address: string) {\n  const tonWeb = getTonWeb(network);\n\n  const result: any[] = await tonWeb.provider.getTransactions(\n    address,\n    1,\n    undefined,\n    undefined,\n    undefined,\n    true,\n  );\n  if (!result?.length) {\n    return undefined;\n  }\n\n  return stringifyTxId(result[0].transaction_id);\n}\n\nexport async function fetchTransactions(\n  network: ApiNetwork, address: string, limit: number, fromTxId?: string, toTxId?: string,\n): Promise<ApiTransactionExtra[]> {\n  const tonWeb = getTonWeb(network);\n\n  const fromLt = fromTxId ? parseTxId(fromTxId).lt : undefined;\n  const fromHash = fromTxId ? parseTxId(fromTxId).hash : undefined;\n  const toLt = toTxId ? parseTxId(toTxId).lt : undefined;\n\n  const rawTransactions = await tonWeb.provider.getTransactions(\n    address, limit, fromLt, fromHash, toLt, true,\n  );\n\n  return rawTransactions.map(parseRawTransaction).flat();\n}\n\nfunction parseRawTransaction(rawTx: any): ApiTransactionExtra[] {\n  const {\n    utime,\n    transaction_id: {\n      lt,\n      hash,\n    },\n    fee,\n  } = rawTx;\n  const txId = stringifyTxId({ lt, hash });\n  const timestamp = utime as number * 1000;\n  const isIncoming = !!rawTx.in_msg.source;\n  const msgs: any[] = isIncoming ? [rawTx.in_msg] : rawTx.out_msgs;\n\n  if (!msgs.length) return [];\n\n  return msgs.map((msg, i) => {\n    const { source, destination, value } = msg;\n    return {\n      txId: msgs.length > 1 ? `${txId}:${i + 1}` : txId,\n      timestamp,\n      isIncoming,\n      fromAddress: source,\n      toAddress: destination,\n      amount: isIncoming ? value : `-${value}`,\n      comment: getComment(msg),\n      encryptedComment: getEncryptedComment(msg),\n      slug: TON_TOKEN_SLUG,\n      fee,\n      extraData: {\n        body: getRawBody(msg),\n      },\n    };\n  });\n}\n\nfunction getComment(msg: any): string | undefined {\n  if (!msg.msg_data) return undefined;\n  if (msg.msg_data['@type'] !== 'msg.dataText') return undefined;\n  const base64 = msg.msg_data.text;\n  return new TextDecoder().decode(TonWeb.utils.base64ToBytes(base64));\n}\n\nfunction getEncryptedComment(msg: any): string | undefined {\n  if (!msg.msg_data) return undefined;\n  if (msg.msg_data['@type'] !== 'msg.dataEncryptedText') return undefined;\n  return msg.msg_data.text;\n}\n\nfunction getRawBody(msg: any) {\n  if (!msg.msg_data) return undefined;\n  if (msg.msg_data['@type'] !== 'msg.dataRaw') return undefined;\n  return msg.msg_data.body;\n}\n\nexport function getTonWeb(network: ApiNetwork = 'mainnet') {\n  return tonwebByNetwork[network];\n}\n\nexport function oneCellFromBoc(boc: Uint8Array) {\n  return TonWeb.boc.Cell.oneFromBoc(boc);\n}\n\nexport function toBase64Address(address: AddressType, isBounceable = true) {\n  return new TonWeb.utils.Address(address).toString(true, true, isBounceable);\n}\n\nexport function toRawAddress(address: string) {\n  return new TonWeb.utils.Address(address).toString(false);\n}\n\nexport function buildTokenTransferBody(params: TokenTransferBodyParams) {\n  const {\n    queryId, tokenAmount, toAddress, responseAddress, forwardAmount,\n  } = params;\n  let forwardPayload = params.forwardPayload;\n\n  const cell = new Cell();\n  cell.bits.writeUint(JettonOpCode.Transfer, 32);\n  cell.bits.writeUint(queryId || 0, 64);\n  cell.bits.writeCoins(new BN(tokenAmount));\n  cell.bits.writeAddress(new Address(toAddress));\n  cell.bits.writeAddress(new Address(responseAddress));\n  cell.bits.writeBit(false); // null custom_payload\n  cell.bits.writeCoins(new BN(forwardAmount || '0'));\n\n  // A large comment must be placed in a separate cell\n  if (typeof forwardPayload === 'string') {\n    const buffer = Buffer.from(forwardPayload);\n    if (cell.bits.getFreeBits() < (buffer.length * 8) + 32 + 1) {\n      forwardPayload = new Cell();\n      forwardPayload.bits.writeUint(0, 32);\n      forwardPayload.bits.writeBytes(buffer);\n    }\n  }\n\n  if (!forwardPayload) {\n    cell.bits.writeBit(false);\n  } else if (typeof forwardPayload === 'string') {\n    cell.bits.writeBit(false);\n    cell.bits.writeUint(0, 32);\n    cell.bits.writeBytes(Buffer.from(forwardPayload));\n  } else {\n    cell.bits.writeBit(true);\n    cell.refs.push(forwardPayload);\n  }\n\n  return cell;\n}\n\nexport function bnToAddress(value: BN) {\n  return new Address(`0:${value.toString('hex', 64)}`).toString(true, true, true);\n}\n","import type { WalletContract } from 'tonweb/dist/types/contract/wallet/wallet-contract';\n\nimport type { ApiNetwork, ApiWalletVersion } from '../../types';\n\nimport { parseAccountId } from '../../../util/account';\nimport { compact } from '../../../util/iteratees';\nimport withCacheAsync from '../../../util/withCacheAsync';\nimport { getTonWeb, toBase64Address } from './util/tonweb';\nimport { fetchStoredAccount, fetchStoredAddress, fetchStoredPublicKey } from '../../common/accounts';\nimport { bytesToBase64, hexToBytes } from '../../common/utils';\n\nconst DEFAULT_WALLET_VERSION: ApiWalletVersion = 'v4R2';\n\nexport const isWalletInitialized = withCacheAsync(\n  async (network: ApiNetwork, walletOrAddress: WalletContract | string) => {\n    return (await getWalletInfo(network, walletOrAddress)).isInitialized;\n  },\n);\n\nexport const isActiveSmartContract = withCacheAsync(async (network: ApiNetwork, address: string) => {\n  const { isInitialized, isWallet } = await getWalletInfo(network, address);\n  return isInitialized && !isWallet;\n});\n\nexport async function publicKeyToAddress(\n  network: ApiNetwork,\n  publicKey: Uint8Array,\n  walletVersion: ApiWalletVersion = DEFAULT_WALLET_VERSION,\n) {\n  const wallet = buildWallet(network, publicKey, walletVersion);\n  const address = await wallet.getAddress();\n\n  return address.toString(true, true, true);\n}\n\nexport function buildWallet(network: ApiNetwork, publicKey: Uint8Array, walletVersion: ApiWalletVersion) {\n  const tonWeb = getTonWeb(network);\n  const WalletClass = tonWeb.wallet.all[walletVersion];\n  return new WalletClass(tonWeb.provider, { publicKey, wc: 0 });\n}\n\nexport async function getWalletInfo(network: ApiNetwork, walletOrAddress: WalletContract | string): Promise<{\n  isInitialized: boolean;\n  isWallet: boolean;\n  seqno: number;\n  balance: string;\n}> {\n  const address = typeof walletOrAddress === 'string'\n    ? walletOrAddress\n    : (await walletOrAddress.getAddress()).toString(true, true, true);\n\n  const {\n    account_state: accountState,\n    wallet: isWallet,\n    seqno,\n    balance = '0',\n  } = await getTonWeb(network).provider.getWalletInfo(address);\n  const isInitialized = accountState === 'active';\n\n  return {\n    isInitialized,\n    isWallet,\n    seqno,\n    balance,\n  };\n}\n\nexport async function getAccountBalance(accountId: string) {\n  const { network } = parseAccountId(accountId);\n  const address = await fetchStoredAddress(accountId);\n\n  return getWalletBalance(network, address);\n}\n\nexport async function getWalletBalance(\n  network: ApiNetwork, walletOrAddress: WalletContract | string,\n): Promise<string> {\n  const { balance } = await getWalletInfo(network, walletOrAddress);\n\n  return balance || '0';\n}\n\nexport async function getWalletSeqno(network: ApiNetwork, walletOrAddress: WalletContract | string): Promise<number> {\n  const { seqno } = await getWalletInfo(network, walletOrAddress);\n  return seqno || 0;\n}\n\nexport async function pickBestWallet(network: ApiNetwork, publicKey: Uint8Array) {\n  const tonWeb = getTonWeb(network);\n  const walletClasses = Object.values(tonWeb.wallet.all);\n  const allWallets = await Promise.all(walletClasses.map(async (WalletClass) => {\n    const wallet = new WalletClass(tonWeb.provider, { publicKey, wc: 0 });\n    const balance = await getWalletBalance(network, wallet);\n    if (balance === '0') {\n      return undefined;\n    }\n\n    return {\n      wallet,\n      balance: BigInt(balance),\n    };\n  }));\n  const walletsWithBalances = compact(allWallets);\n  const withBiggestBalance = walletsWithBalances.reduce<typeof walletsWithBalances[0] | undefined>((best, current) => {\n    return best && best?.balance > current.balance ? best : current;\n  }, undefined);\n\n  return withBiggestBalance?.wallet || buildWallet(network, publicKey, DEFAULT_WALLET_VERSION);\n}\n\nexport async function getWalletStateInit(accountId: string) {\n  const wallet = await pickAccountWallet(accountId);\n  const { stateInit } = await wallet!.createStateInit();\n  return bytesToBase64(await stateInit.toBoc());\n}\n\nexport async function pickWalletByAddress(network: ApiNetwork, publicKey: Uint8Array, address: string) {\n  address = toBase64Address(address);\n\n  const tonWeb = getTonWeb(network);\n  const walletClasses = tonWeb.wallet.list;\n  const allWallets = await Promise.all(walletClasses.map(async (WalletClass) => {\n    const wallet = new WalletClass(tonWeb.provider, { publicKey, wc: 0 });\n    const walletAddress = (await wallet.getAddress()).toString(true, true, true);\n\n    return {\n      wallet,\n      address: walletAddress,\n    };\n  }));\n\n  return allWallets.find((w) => w.address === address)?.wallet;\n}\n\n// TODO Cache\nexport async function pickAccountWallet(accountId: string) {\n  const { network } = parseAccountId(accountId);\n\n  const [publicKeyHex, address, account] = await Promise.all([\n    fetchStoredPublicKey(accountId),\n    fetchStoredAddress(accountId),\n    fetchStoredAccount(accountId),\n  ]);\n\n  const publicKey = hexToBytes(publicKeyHex);\n\n  if (account?.version) {\n    return buildWallet(network, publicKey, account.version);\n  }\n\n  return pickWalletByAddress(network, publicKey, address);\n}\n\nexport function resolveWalletVersion(wallet: WalletContract) {\n  const tonWeb = getTonWeb(); // The network doesn't matter\n  return Object.keys(tonWeb.wallet.all)\n    .find((version) => wallet instanceof tonWeb.wallet.all[version as keyof typeof tonWeb.wallet.all]);\n}\n","import TonWeb from 'tonweb';\n\nimport { STAKING_POOLS } from '../../config';\n\nexport function bytesToHex(bytes: Uint8Array) {\n  return TonWeb.utils.bytesToHex(bytes);\n}\n\nexport function hexToBytes(hex: string) {\n  return TonWeb.utils.hexToBytes(hex);\n}\n\nexport function bytesToBase64(bytes: Uint8Array) {\n  return TonWeb.utils.bytesToBase64(bytes);\n}\n\nexport function base64ToBytes(hex: string) {\n  return TonWeb.utils.base64ToBytes(hex);\n}\n\nexport function hexToBase64(hex: string) {\n  return bytesToBase64(hexToBytes(hex));\n}\n\nexport function base64ToString(base64: string) {\n  return TonWeb.utils.base64toString(base64);\n}\n\nexport function sha256(bytes: Uint8Array) {\n  return TonWeb.utils.sha256(bytes);\n}\n\nexport function handleFetchErrors(response: Response) {\n  if (!response.ok) {\n    throw new Error(response.statusText);\n  }\n  return response;\n}\n\nexport function sumBigString(a: string, b: string) {\n  return (BigInt(a) + BigInt(b)).toString();\n}\n\nexport function isKnownStakingPool(address: string) {\n  return STAKING_POOLS.some((poolPart) => address.endsWith(poolPart));\n}\n","// This JS library implements TON message comment encryption and decryption for Web\n// Reference C++ code - SimpleEncryptionV2 - https://github.com/ton-blockchain/ton/blob/cc0eb453cb3bf69f92693160103d33112856c056/tonlib/tonlib/keys/SimpleEncryption.cpp#L110\n// Dependencies:\n// - TonWeb 0.0.60\n// - aes-js - 3.1.2 - https://github.com/ricmoo/aes-js/releases/tag/v3.1.2 - for aes-cbc without padding\n// - noble-ed25519 - 1.7.3 - // https://github.com/paulmillr/noble-ed25519/releases/tag/1.7.3 - for getSharedKey\n\nimport type { AddressType } from 'tonweb';\nimport TonWeb from 'tonweb';\n\nimport { OpCode } from '../constants';\n\nconst ed25519 = require('../../../../lib/noble-ed25519');\nconst aesjs = require('../../../../lib/aes-js');\n\nconst { Address } = TonWeb.utils;\n\nasync function hmacSha512(key: Uint8Array, data: Uint8Array): Promise<Uint8Array> {\n  const hmacAlgo = { name: 'HMAC', hash: 'SHA-512' };\n  const hmacKey = await crypto.subtle.importKey('raw', key, hmacAlgo, false, ['sign']);\n  const signature = await crypto.subtle.sign(hmacAlgo, hmacKey, data);\n  const result = new Uint8Array(signature);\n  if (result.length !== 512 / 8) throw new Error();\n  return result;\n}\n\nfunction getAesCbcState(hash: Uint8Array): Promise<any> {\n  if (hash.length < 48) throw new Error();\n  const key = hash.slice(0, 32);\n  const iv = hash.slice(32, 32 + 16);\n\n  // Note that native crypto.subtle AES-CBC not suitable here because\n  // even if the data IS a multiple of 16 bytes, padding will still be added\n  // So we use aes-js\n\n  // eslint-disable-next-line new-cap\n  return new aesjs.ModeOfOperation.cbc(key, iv);\n}\n\nfunction getRandomPrefix(dataLength: number, minPadding: number): Uint8Array {\n  // eslint-disable-next-line no-bitwise\n  const prefixLength = ((minPadding + 15 + dataLength) & -16) - dataLength;\n  const prefix = crypto.getRandomValues(new Uint8Array(prefixLength));\n  prefix[0] = prefixLength;\n  if ((prefixLength + dataLength) % 16 !== 0) throw new Error();\n  return prefix;\n}\n\nfunction combineSecrets(a: Uint8Array, b: Uint8Array) {\n  return hmacSha512(a, b);\n}\n\nasync function encryptDataWithPrefix(data: Uint8Array, sharedSecret: Uint8Array, salt: Uint8Array) {\n  if (data.length % 16 !== 0) throw new Error();\n  const dataHash = await combineSecrets(salt, data);\n  const msgKey = dataHash.slice(0, 16);\n\n  const res = new Uint8Array(data.length + 16);\n  res.set(msgKey, 0);\n\n  const cbcStateSecret = await combineSecrets(sharedSecret, msgKey);\n  const encrypted = (await getAesCbcState(cbcStateSecret)).encrypt(data);\n  res.set(encrypted, 16);\n\n  return res;\n}\n\nasync function encryptDataImpl(data: Uint8Array, sharedSecret: Uint8Array, salt: Uint8Array) {\n  const prefix = await getRandomPrefix(data.length, 16);\n  const combined = new Uint8Array(prefix.length + data.length);\n  combined.set(prefix, 0);\n  combined.set(data, prefix.length);\n  return encryptDataWithPrefix(combined, sharedSecret, salt);\n}\n\nexport async function encryptData(\n  data: Uint8Array, myPublicKey: Uint8Array, theirPublicKey: Uint8Array, privateKey: Uint8Array, salt: Uint8Array,\n) {\n  const sharedSecret = await ed25519.getSharedSecret(privateKey, theirPublicKey);\n\n  const encrypted = await encryptDataImpl(data, sharedSecret, salt);\n  const prefixedEncrypted = new Uint8Array(myPublicKey.length + encrypted.length);\n  for (let i = 0; i < myPublicKey.length; i++) {\n    // eslint-disable-next-line no-bitwise\n    prefixedEncrypted[i] = theirPublicKey[i] ^ myPublicKey[i];\n  }\n  prefixedEncrypted.set(encrypted, myPublicKey.length);\n  return prefixedEncrypted;\n}\n\nexport async function encryptMessageComment(\n  comment: string,\n  myPublicKey: Uint8Array,\n  theirPublicKey: Uint8Array,\n  myPrivateKey: Uint8Array,\n  senderAddress: AddressType,\n) {\n  if (!comment || !comment.length) throw new Error('empty comment');\n\n  if (myPrivateKey.length === 64) {\n    myPrivateKey = myPrivateKey.slice(0, 32); // convert nacl private key\n  }\n\n  const commentBytes = new TextEncoder().encode(comment);\n\n  const salt = new TextEncoder().encode(new Address(senderAddress).toString(true, true, true, false));\n\n  const encryptedBytes = await encryptData(commentBytes, myPublicKey, theirPublicKey, myPrivateKey, salt);\n\n  const payload = new Uint8Array(encryptedBytes.length + 4);\n\n  const buffer = Buffer.alloc(4);\n  buffer.writeUInt32BE(OpCode.Encrypted);\n\n  payload.set(buffer, 0);\n  payload.set(encryptedBytes, 4);\n\n  return payload;\n}\n\nasync function doDecrypt(\n  cbcStateSecret: Uint8Array, msgKey: Uint8Array, encryptedData: Uint8Array, salt: Uint8Array,\n): Promise<Uint8Array> {\n  const decryptedData = (await getAesCbcState(cbcStateSecret)).decrypt(encryptedData);\n  const dataHash = await combineSecrets(salt, decryptedData);\n  const gotMsgKey = dataHash.slice(0, 16);\n  if (msgKey.join(',') !== gotMsgKey.join(',')) {\n    throw new Error('Failed to decrypt: hash mismatch');\n  }\n  const prefixLength = decryptedData[0];\n  if (prefixLength > decryptedData.length || prefixLength < 16) {\n    throw new Error('Failed to decrypt: invalid prefix size');\n  }\n  return decryptedData.slice(prefixLength);\n}\n\nasync function decryptDataImpl(\n  encryptedData: Uint8Array, sharedSecret: Uint8Array, salt: Uint8Array,\n): Promise<Uint8Array> {\n  if (encryptedData.length < 16) throw new Error('Failed to decrypt: data is too small');\n  if (encryptedData.length % 16 !== 0) throw new Error('Failed to decrypt: data size is not divisible by 16');\n  const msgKey = encryptedData.slice(0, 16);\n  const data = encryptedData.slice(16);\n  const cbcStateSecret = await combineSecrets(sharedSecret, msgKey);\n  const res = await doDecrypt(cbcStateSecret, msgKey, data, salt);\n  return res;\n}\n\nexport async function decryptData(data: Uint8Array, publicKey: Uint8Array, privateKey: Uint8Array, salt: Uint8Array) {\n  if (data.length < publicKey.length) {\n    throw new Error('Failed to decrypt: data is too small');\n  }\n  const theirPublicKey = new Uint8Array(publicKey.length);\n  for (let i = 0; i < publicKey.length; i++) {\n    // eslint-disable-next-line no-bitwise\n    theirPublicKey[i] = data[i] ^ publicKey[i];\n  }\n  const sharedSecret = await ed25519.getSharedSecret(privateKey, theirPublicKey);\n\n  const decrypted = await decryptDataImpl(data.slice(publicKey.length), sharedSecret, salt);\n  return decrypted;\n}\n\nexport async function decryptMessageComment(\n  encryptedData: Uint8Array, myPublicKey: Uint8Array, myPrivateKey: Uint8Array, senderAddress: AddressType,\n) {\n  if (myPrivateKey.length === 64) {\n    myPrivateKey = myPrivateKey.slice(0, 32); // convert nacl private key\n  }\n\n  const salt = new TextEncoder().encode(new Address(senderAddress).toString(true, true, true, false));\n\n  const decryptedBytes = await decryptData(encryptedData, myPublicKey, myPrivateKey, salt);\n  return new TextDecoder().decode(decryptedBytes);\n}\n","import {\n  TonClient,\n  WalletContractV1R1,\n  WalletContractV1R2,\n  WalletContractV1R3,\n  WalletContractV2R1,\n  WalletContractV2R2,\n  WalletContractV3R1,\n  WalletContractV3R2,\n  WalletContractV4,\n} from 'ton';\nimport axios from 'axios';\n\nimport { WORKCHAIN } from '../../../types';\nimport type { ApiNetwork, ApiWalletVersion } from '../../../types';\n\nimport { TONHTTPAPI_MAINNET_URL, TONHTTPAPI_TESTNET_URL } from '../../../../config';\nimport { hexToBytes } from '../../../common/utils';\n\ntype TonWallet = typeof WalletContractV1R1\n| typeof WalletContractV1R2\n| typeof WalletContractV1R3\n| typeof WalletContractV2R1\n| typeof WalletContractV2R2\n| typeof WalletContractV3R1\n| typeof WalletContractV3R2\n| typeof WalletContractV4;\n\naxios.defaults.adapter = require('../../../../lib/axios-fetch-adapter').default;\n\nconst clientByNetwork: Record<ApiNetwork, TonClient> = {\n  mainnet: new TonClient({ endpoint: TONHTTPAPI_MAINNET_URL }),\n  testnet: new TonClient({ endpoint: TONHTTPAPI_TESTNET_URL }),\n};\n\nconst walletClassMap: Record<ApiWalletVersion, TonWallet | undefined> = {\n  simpleR1: WalletContractV1R1,\n  simpleR2: WalletContractV1R2,\n  simpleR3: WalletContractV1R3,\n  v2R1: WalletContractV2R1,\n  v2R2: WalletContractV2R2,\n  v3R1: WalletContractV3R1,\n  v3R2: WalletContractV3R2,\n  v4R1: undefined, // Not relevant\n  v4R2: WalletContractV4,\n};\n\nexport function getTonWalletContract(publicKeyHex: string, version: ApiWalletVersion) {\n  const walletClass = walletClassMap[version];\n  if (!walletClass) {\n    throw new Error('Unsupported wallet contract version');\n  }\n\n  const publicKey = Buffer.from(hexToBytes(publicKeyHex));\n  return walletClass.create({ workchain: WORKCHAIN, publicKey });\n}\n\nexport function getTonClient(network: ApiNetwork) {\n  return clientByNetwork[network];\n}\n","import type { ApiNetwork } from '../../types';\n\nimport dns from '../../../util/dns';\nimport { getTonWeb } from './util/tonweb';\n\nconst { DnsCollection } = require('tonweb/src/contract/dns/DnsCollection');\n\nconst VIP_DNS_COLLECTION = 'EQBWG4EBbPDv4Xj7xlPwzxd7hSyHMzwwLB5O6rY-0BBeaixS';\n\nexport async function resolveAddress(network: ApiNetwork, address: string) {\n  if (!dns.isDnsDomain(address)) {\n    return address;\n  }\n\n  const domain = address;\n  const tonweb = await getTonWeb(network);\n\n  try {\n    if (dns.isVipDnsDomain(domain)) {\n      const base = dns.removeZone(domain);\n      return (await new DnsCollection(tonweb.provider, {\n        address: VIP_DNS_COLLECTION,\n      }).resolve(base, 'wallet'))?.toString(true, true, true);\n    }\n\n    return (await tonweb.dns.getWalletAddress(domain))?.toString(true, true, true);\n  } catch (err: any) {\n    if (err.message !== 'http provider parse response error') {\n      throw err;\n    }\n    return undefined;\n  }\n}\n","import type { JettonBalance } from 'tonapi-sdk-js';\nimport TonWeb from 'tonweb';\n\nimport type {\n  ApiBaseToken, ApiNetwork, ApiToken, ApiTokenSimple,\n} from '../../types';\nimport type { ApiTransactionExtra, JettonMetadata } from './types';\n\nimport { parseAccountId } from '../../../util/account';\nimport { logDebugError } from '../../../util/logs';\nimport { buildTokenSlug } from './util';\nimport {\n  fixBase64ImageData,\n  fixIpfsUrl,\n  getJettonMetadata,\n  parseJettonWalletMsgBody,\n} from './util/metadata';\nimport { fetchJettonBalances } from './util/tonapiio';\nimport {\n  buildTokenTransferBody,\n  getTonWeb,\n  resolveTokenMinterAddress,\n  resolveTokenWalletAddress,\n  toBase64Address,\n} from './util/tonweb';\nimport { fetchStoredAddress } from '../../common/accounts';\nimport {\n  DEFAULT_DECIMALS,\n  TOKEN_TRANSFER_TON_AMOUNT,\n  TOKEN_TRANSFER_TON_FORWARD_AMOUNT,\n} from './constants';\n\nconst { JettonWallet } = TonWeb.token.jetton;\n\nexport type JettonWalletType = InstanceType<typeof JettonWallet>;\nexport type TokenBalanceParsed = {\n  slug: string;\n  balance: string;\n  token: ApiTokenSimple;\n} | undefined;\n\nconst KNOWN_TOKENS: ApiBaseToken[] = [\n  {\n    slug: 'toncoin',\n    name: 'Toncoin',\n    symbol: 'TON',\n    decimals: 9,\n  },\n];\n\nconst knownTokens = {} as Record<string, ApiToken>;\naddKnownTokens(KNOWN_TOKENS);\n\nexport async function getAccountTokenBalances(accountId: string) {\n  const { network } = parseAccountId(accountId);\n  const address = await fetchStoredAddress(accountId);\n\n  const balancesRaw: Array<JettonBalance> = await fetchJettonBalances(network, address);\n  return balancesRaw.map(parseTokenBalance).filter(Boolean);\n}\n\nfunction parseTokenBalance(balanceRaw: JettonBalance): TokenBalanceParsed {\n  if (!balanceRaw.jetton) {\n    return undefined;\n  }\n\n  try {\n    const { balance, jetton } = balanceRaw;\n    const minterAddress = toBase64Address(jetton.address);\n    const token = buildTokenByMetadata(minterAddress, jetton);\n\n    return { slug: token.slug, balance, token };\n  } catch (err) {\n    logDebugError('parseTokenBalance', err);\n    return undefined;\n  }\n}\n\nexport function parseTokenTransaction(\n  tx: ApiTransactionExtra,\n  slug: string,\n  walletAddress: string,\n): ApiTransactionExtra | undefined {\n  const { extraData } = tx;\n  if (!extraData?.body) {\n    return undefined;\n  }\n\n  const parsedData = parseJettonWalletMsgBody(extraData.body);\n  if (!parsedData) {\n    return undefined;\n  }\n\n  const {\n    operation, jettonAmount, address, forwardComment,\n  } = parsedData;\n  const isIncoming = operation === 'InternalTransfer';\n\n  return {\n    ...tx,\n    slug,\n    fromAddress: isIncoming ? (address ?? tx.fromAddress) : walletAddress,\n    toAddress: isIncoming ? walletAddress : address!,\n    amount: isIncoming ? jettonAmount.toString() : `-${jettonAmount}`,\n    comment: forwardComment,\n    isIncoming,\n  };\n}\n\nexport async function buildTokenTransfer(\n  network: ApiNetwork,\n  slug: string,\n  fromAddress: string,\n  toAddress: string,\n  amount: string,\n  comment?: string,\n) {\n  const minterAddress = resolveTokenBySlug(slug).minterAddress!;\n  const tokenWalletAddress = await resolveTokenWalletAddress(network, fromAddress, minterAddress);\n  const realMinterAddress = await resolveTokenMinterAddress(network, tokenWalletAddress);\n  if (minterAddress !== realMinterAddress) {\n    throw new Error('Invalid contract');\n  }\n\n  const tokenWallet = getTokenWallet(network, tokenWalletAddress);\n\n  const payload = buildTokenTransferBody({\n    tokenAmount: amount,\n    toAddress,\n    forwardAmount: TOKEN_TRANSFER_TON_FORWARD_AMOUNT.toString(),\n    forwardPayload: comment,\n    responseAddress: fromAddress,\n  });\n\n  return {\n    tokenWallet,\n    amount: TOKEN_TRANSFER_TON_AMOUNT.toString(),\n    toAddress: tokenWalletAddress,\n    payload,\n  };\n}\n\nexport function resolveTokenBySlug(slug: string) {\n  return knownTokens[slug]!;\n}\n\nexport function getTokenWallet(network: ApiNetwork, tokenAddress: string) {\n  return new JettonWallet(getTonWeb(network).provider, { address: tokenAddress });\n}\n\nexport async function getTokenWalletBalance(tokenWallet: JettonWalletType) {\n  return (await tokenWallet.getData()).balance.toString();\n}\n\nexport function getKnownTokens() {\n  return knownTokens;\n}\n\nexport function addKnownTokens(tokens: ApiBaseToken[]) {\n  for (const token of tokens) {\n    if (token.slug in knownTokens) continue;\n\n    knownTokens[token.slug] = {\n      ...token,\n      quote: {\n        price: 0,\n        percentChange1h: 0,\n        percentChange24h: 0,\n        percentChange7d: 0,\n        percentChange30d: 0,\n      },\n    };\n  }\n}\n\nexport async function importToken(network: ApiNetwork, address: string) {\n  const metadata = await getJettonMetadata(network, address);\n\n  return buildTokenByMetadata(address, metadata);\n}\n\nfunction buildTokenByMetadata(address: string, metadata: JettonMetadata): ApiBaseToken {\n  const {\n    name,\n    symbol,\n    image,\n    image_data: imageData,\n    decimals,\n  } = metadata;\n\n  return {\n    slug: buildTokenSlug(address),\n    name,\n    symbol,\n    decimals: decimals === undefined ? DEFAULT_DECIMALS : Number(decimals),\n    minterAddress: address,\n    image: (image && fixIpfsUrl(image)) || (imageData && fixBase64ImageData(imageData)) || undefined,\n  };\n}\n","import { Cell as TonCell } from 'ton-core';\nimport type { Method } from 'tonweb';\nimport TonWeb from 'tonweb';\nimport type { Cell } from 'tonweb/dist/types/boc/cell';\nimport type { WalletContract } from 'tonweb/dist/types/contract/wallet/wallet-contract';\n\nimport { ApiTransactionDraftError, ApiTransactionError } from '../../types';\nimport type {\n  ApiNetwork, ApiSignedTransfer, ApiTransaction, ApiTxIdBySlug,\n} from '../../types';\nimport type { ApiTransactionExtra, TonTransferParams } from './types';\n\nimport { TON_TOKEN_SLUG } from '../../../config';\nimport { parseAccountId } from '../../../util/account';\nimport { compareTransactions } from '../../../util/compareTransactions';\nimport { omit } from '../../../util/iteratees';\nimport { isValidLedgerComment } from '../../../util/ledger/utils';\nimport { logDebugError } from '../../../util/logs';\nimport { pause } from '../../../util/schedulers';\nimport { parseTxId } from './util';\nimport { decryptMessageComment, encryptMessageComment } from './util/encryption';\nimport { parseWalletTransactionBody } from './util/metadata';\nimport { getTonClient, getTonWalletContract } from './util/tonCore';\nimport {\n  fetchNewestTxId,\n  fetchTransactions,\n  getWalletPublicKey,\n  resolveTokenWalletAddress,\n  toBase64Address,\n} from './util/tonweb';\nimport { fetchStoredAccount, fetchStoredAddress, fetchStoredPublicKey } from '../../common/accounts';\nimport { getAddressInfo } from '../../common/addresses';\nimport { updateTransactionMetadata } from '../../common/helpers';\nimport { isKnownStakingPool } from '../../common/utils';\nimport { resolveAddress } from './address';\nimport { fetchKeyPair, fetchPrivateKey } from './auth';\nimport { ATTEMPTS, STAKE_COMMENT, UNSTAKE_COMMENT } from './constants';\nimport type { JettonWalletType } from './tokens';\nimport {\n  buildTokenTransfer, getTokenWalletBalance, parseTokenTransaction, resolveTokenBySlug,\n} from './tokens';\nimport {\n  getWalletBalance, getWalletInfo, isWalletInitialized, pickAccountWallet,\n} from './wallet';\n\ntype SubmitTransferResult = {\n  resolvedAddress: string;\n  amount: string;\n  seqno: number;\n  encryptedComment?: string;\n} | {\n  error: string;\n};\n\ntype SubmitMultiTransferResult = {\n  messages: (TonTransferParams & {\n    resolvedAddress: string;\n  })[];\n  amount: string;\n  seqno: number;\n} | {\n  error: string;\n};\n\nconst { Address, fromNano } = TonWeb.utils;\n\nconst DEFAULT_FEE = '10966001';\nconst DEFAULT_EXPIRE_AT_TIMEOUT_SEC = 60; // 60 sec.\nconst GET_TRANSACTIONS_LIMIT = 50;\nconst GET_TRANSACTIONS_MAX_LIMIT = 100;\nconst WAIT_SEQNO_TIMEOUT = 40000; // 40 sec.\nconst WAIT_SEQNO_PAUSE = 5000; // 5 sec.\n\nconst lastTransfers: Record<ApiNetwork, Record<string, {\n  timestamp: number;\n  seqno: number;\n}>> = {\n  mainnet: {},\n  testnet: {},\n};\n\nexport async function checkTransactionDraft(\n  accountId: string,\n  tokenSlug: string,\n  toAddress: string,\n  amount: string,\n  data?: string | Uint8Array | Cell,\n  stateInit?: Cell,\n  shouldEncrypt?: boolean,\n) {\n  const { network } = parseAccountId(accountId);\n\n  const result: {\n    error?: ApiTransactionDraftError;\n    fee?: string;\n    addressName?: string;\n    isScam?: boolean;\n  } = {};\n\n  const resolvedAddress = await resolveAddress(network, toAddress);\n  if (!resolvedAddress) {\n    result.error = ApiTransactionDraftError.DomainNotResolved;\n    return result;\n  }\n\n  toAddress = resolvedAddress;\n  if (!Address.isValid(toAddress)) {\n    result.error = ApiTransactionDraftError.InvalidToAddress;\n    return result;\n  }\n\n  const addressInfo = await getAddressInfo(toAddress);\n  result.addressName = addressInfo?.name;\n  result.isScam = addressInfo?.isScam;\n\n  if (BigInt(amount) < BigInt(0)) {\n    result.error = ApiTransactionDraftError.InvalidAmount;\n    return result;\n  }\n\n  const wallet = await pickAccountWallet(accountId);\n  if (!wallet) {\n    result.error = ApiTransactionDraftError.Unexpected;\n    return result;\n  }\n\n  if (data && typeof data === 'string' && shouldEncrypt) {\n    const toPublicKey = await getWalletPublicKey(network, toAddress);\n    if (!toPublicKey) {\n      result.error = ApiTransactionDraftError.WalletNotInitialized;\n      return result;\n    }\n  }\n\n  if (tokenSlug === TON_TOKEN_SLUG) {\n    const account = await fetchStoredAccount(accountId);\n    if (data && account?.ledger) {\n      if (typeof data !== 'string' || shouldEncrypt || !isValidLedgerComment(data)) {\n        result.error = ApiTransactionDraftError.UnsupportedHardwarePayload;\n        return result;\n      }\n    }\n  } else {\n    if (data && typeof data !== 'string') {\n      result.error = ApiTransactionDraftError.Unexpected;\n      return result;\n    }\n\n    const address = await fetchStoredAddress(accountId);\n    const tokenAmount: string = amount;\n    let tokenWallet: JettonWalletType;\n    ({\n      tokenWallet,\n      amount,\n      toAddress,\n      payload: data,\n    } = await buildTokenTransfer(network, tokenSlug, address, toAddress, amount, data));\n\n    const tokenBalance = await getTokenWalletBalance(tokenWallet!);\n    if (BigInt(tokenBalance) < BigInt(tokenAmount!)) {\n      result.error = ApiTransactionDraftError.InsufficientBalance;\n      return result;\n    }\n  }\n\n  const isInitialized = await isWalletInitialized(network, wallet);\n  result.fee = await calculateFee(isInitialized, async () => (await signTransaction(\n    network, wallet, toAddress, amount, data, stateInit,\n  )).query);\n\n  const balance = await getWalletBalance(network, wallet);\n  if (BigInt(balance) < BigInt(amount) + BigInt(result.fee)) {\n    result.error = ApiTransactionDraftError.InsufficientBalance;\n    return result;\n  }\n\n  return result;\n}\n\nexport async function submitTransfer(\n  accountId: string,\n  password: string,\n  tokenSlug: string,\n  toAddress: string,\n  amount: string,\n  data?: string | Uint8Array | Cell,\n  stateInit?: Cell,\n  shouldEncrypt?: boolean,\n): Promise<SubmitTransferResult> {\n  const { network } = parseAccountId(accountId);\n\n  try {\n    const [wallet, fromAddress, keyPair] = await Promise.all([\n      pickAccountWallet(accountId),\n      fetchStoredAddress(accountId),\n      fetchKeyPair(accountId, password),\n    ]);\n    const { publicKey, secretKey } = keyPair!;\n\n    let encryptedComment: string | undefined;\n    let resolvedAddress = await resolveAddress(network, toAddress);\n\n    if (data && typeof data === 'string' && shouldEncrypt) {\n      const toPublicKey = (await getWalletPublicKey(network, toAddress))!;\n      data = await encryptMessageComment(data, publicKey, toPublicKey, secretKey, fromAddress);\n      encryptedComment = Buffer.from(data.slice(4)).toString('base64');\n    }\n\n    if (tokenSlug !== TON_TOKEN_SLUG) {\n      if (data && typeof data !== 'string') {\n        throw new Error('Unknown error');\n      }\n\n      ({\n        amount,\n        toAddress: resolvedAddress,\n        payload: data,\n      } = await buildTokenTransfer(network, tokenSlug, fromAddress, resolvedAddress, amount, data));\n    }\n\n    // Force default bounceable address for `waitTxComplete` to work properly\n    resolvedAddress = toBase64Address(resolvedAddress);\n\n    await waitLastTransfer(network, fromAddress);\n\n    const [{ isInitialized, balance }, toWalletInfo] = await Promise.all([\n      getWalletInfo(network, wallet!),\n      getWalletInfo(network, resolvedAddress),\n    ]);\n\n    // Force non-bounceable for non-initialized recipients\n    toAddress = toWalletInfo.isInitialized\n      ? resolvedAddress\n      : toBase64Address(resolvedAddress, false);\n\n    const { seqno, query } = await signTransaction(network, wallet!, toAddress, amount, data, stateInit, secretKey);\n\n    const fee = await calculateFee(isInitialized, query);\n    if (BigInt(balance) < BigInt(amount) + BigInt(fee)) {\n      return { error: ApiTransactionError.InsufficientBalance };\n    }\n\n    await query.send();\n\n    updateLastTransfer(network, fromAddress, seqno);\n\n    return {\n      resolvedAddress, amount, seqno, encryptedComment,\n    };\n  } catch (err: any) {\n    logDebugError('submitTransfer', err);\n\n    return { error: resolveTransactionError(err) };\n  }\n}\n\nfunction resolveTransactionError(error: any): ApiTransactionError {\n  const message = typeof error === 'string' ? error : error?.message;\n  if (message?.includes('exitcode=35,')) {\n    return ApiTransactionError.IncorrectDeviceTime;\n  }\n  return ApiTransactionError.UnsuccesfulTransfer;\n}\n\nasync function signTransaction(\n  network: ApiNetwork,\n  wallet: WalletContract,\n  toAddress: string,\n  amount: string,\n  payload?: string | Uint8Array | Cell,\n  stateInit?: Cell,\n  privateKey?: Uint8Array,\n) {\n  const { seqno } = await getWalletInfo(network, wallet);\n\n  const query = wallet.methods.transfer({\n    secretKey: privateKey as any, // Workaround for wrong typing\n    toAddress,\n    amount,\n    payload,\n    seqno: seqno || 0,\n    sendMode: 3,\n    stateInit,\n  });\n\n  return { seqno, query };\n}\n\nexport async function getAccountNewestTxId(accountId: string) {\n  const { network } = parseAccountId(accountId);\n  const address = await fetchStoredAddress(accountId);\n\n  return fetchNewestTxId(network, address);\n}\n\nexport async function getAccountTransactionSlice(\n  accountId: string,\n  fromTxId?: string,\n  toTxId?: string,\n  limit?: number,\n) {\n  const { network } = parseAccountId(accountId);\n  const address = await fetchStoredAddress(accountId);\n\n  let transactions = await fetchTransactions(\n    network, address, limit ?? GET_TRANSACTIONS_LIMIT, fromTxId, toTxId,\n  );\n\n  transactions = await Promise.all(\n    transactions.map((transaction) => parseWalletTransactionBody(network, transaction)),\n  );\n\n  return transactions\n    .map(updateTransactionType)\n    .map(updateTransactionMetadata)\n    .map(omitExtraData);\n}\n\nexport async function getMergedTransactionSlice(accountId: string, lastTxIds: ApiTxIdBySlug, limit: number) {\n  // eslint-disable-next-line prefer-const\n  let { toncoin: lastTonTxId, ...tokenLastTxIds } = lastTxIds;\n  const tonTxs = await getAccountTransactionSlice(accountId, lastTonTxId, undefined, limit);\n\n  if (!tonTxs.length) {\n    return [];\n  }\n\n  lastTonTxId = tonTxs[tonTxs.length - 1].txId;\n  const lastTonTxLt = parseTxId(lastTonTxId).lt;\n\n  const results = await Promise.all(Object.entries(tokenLastTxIds).map(([slug, lastTxId]) => {\n    if (lastTxId && parseTxId(lastTxId).lt < lastTonTxLt) {\n      return [];\n    }\n\n    return getTokenTransactionSlice(accountId, slug, lastTxId, lastTonTxId, GET_TRANSACTIONS_MAX_LIMIT);\n  }));\n\n  const allTxs = [...tonTxs, ...results.flat()];\n  allTxs.sort((a, b) => compareTransactions(a, b, false));\n\n  return allTxs;\n}\n\nexport async function getTokenTransactionSlice(\n  accountId: string,\n  tokenSlug: string,\n  fromTxId?: string,\n  toTxId?: string,\n  limit?: number,\n) {\n  if (tokenSlug === TON_TOKEN_SLUG) {\n    return getAccountTransactionSlice(accountId, fromTxId, toTxId, limit);\n  }\n\n  const { network } = parseAccountId(accountId);\n  const address = await fetchStoredAddress(accountId);\n\n  const minterAddress = resolveTokenBySlug(tokenSlug).minterAddress!;\n  const tokenWalletAddress = await resolveTokenWalletAddress(network, address, minterAddress);\n\n  const transactions = await fetchTransactions(\n    network, tokenWalletAddress, limit ?? GET_TRANSACTIONS_LIMIT, fromTxId, toTxId,\n  );\n\n  const parsedTxs = transactions\n    .map((tx) => parseTokenTransaction(tx, tokenSlug, address))\n    .filter(Boolean)\n    .map(updateTransactionMetadata)\n    .map(omitExtraData);\n\n  return parsedTxs.filter(Boolean);\n}\n\nfunction omitExtraData(tx: ApiTransactionExtra): ApiTransaction {\n  return omit(tx, ['extraData']);\n}\n\nfunction updateTransactionType(transaction: ApiTransactionExtra) {\n  const {\n    fromAddress, toAddress, comment, amount,\n  } = transaction;\n\n  if (fromAddress && toAddress) {\n    const amountNumber = Math.abs(Number(fromNano(amount)));\n\n    if (isKnownStakingPool(fromAddress) && amountNumber > 1) {\n      transaction.type = 'unstake';\n    } else if (isKnownStakingPool(toAddress)) {\n      if (comment === STAKE_COMMENT) {\n        transaction.type = 'stake';\n      } else if (comment === UNSTAKE_COMMENT) {\n        transaction.type = 'unstakeRequest';\n      }\n    }\n  }\n\n  return transaction;\n}\n\nexport async function checkMultiTransactionDraft(accountId: string, messages: TonTransferParams[]) {\n  const { network } = parseAccountId(accountId);\n\n  const result: {\n    error?: ApiTransactionDraftError;\n    fee?: string;\n    totalAmount?: string;\n  } = {};\n\n  let totalAmount: bigint = 0n;\n\n  for (const { toAddress, amount } of messages) {\n    if (BigInt(amount) < BigInt(0)) {\n      result.error = ApiTransactionDraftError.InvalidAmount;\n      return result;\n    }\n    if (!Address.isValid(toAddress)) {\n      result.error = ApiTransactionDraftError.InvalidToAddress;\n      return result;\n    }\n    totalAmount += BigInt(amount);\n  }\n\n  const wallet = await pickAccountWallet(accountId);\n\n  if (!wallet) {\n    result.error = ApiTransactionDraftError.Unexpected;\n    return result;\n  }\n\n  const { isInitialized, balance } = await getWalletInfo(network, wallet);\n\n  result.fee = await calculateFee(isInitialized, async () => (await signMultiTransaction(\n    network, wallet, messages,\n  )).query);\n  result.totalAmount = totalAmount.toString();\n\n  if (BigInt(balance) < totalAmount + BigInt(result.fee)) {\n    result.error = ApiTransactionDraftError.InsufficientBalance;\n    return result;\n  }\n\n  return result;\n}\n\nexport async function submitMultiTransfer(\n  accountId: string,\n  password: string,\n  messages: TonTransferParams[],\n  expireAt?: number,\n): Promise<SubmitMultiTransferResult> {\n  const { network } = parseAccountId(accountId);\n\n  try {\n    const [wallet, fromAddress, privateKey] = await Promise.all([\n      pickAccountWallet(accountId),\n      fetchStoredAddress(accountId),\n      fetchPrivateKey(accountId, password),\n    ]);\n\n    let totalAmount = 0n;\n    const preparedMessages = await Promise.all(messages.map(async (message) => {\n      let { toAddress } = message;\n\n      // Force default bounceable address for `waitTxComplete` to work properly\n      const resolvedAddress = toBase64Address(toAddress);\n      toAddress = await isWalletInitialized(network, toAddress)\n        ? resolvedAddress\n        : toBase64Address(toAddress, false);\n\n      totalAmount += BigInt(message.amount);\n\n      return {\n        ...message,\n        toAddress,\n        resolvedAddress,\n      };\n    }));\n\n    await waitLastTransfer(network, fromAddress);\n\n    const { isInitialized, balance } = await getWalletInfo(network, wallet!);\n\n    const { seqno, query } = await signMultiTransaction(network, wallet!, preparedMessages, privateKey, expireAt);\n\n    const fee = await calculateFee(isInitialized, query);\n    if (BigInt(balance) < BigInt(totalAmount) + BigInt(fee)) {\n      return { error: ApiTransactionError.InsufficientBalance };\n    }\n\n    await query.send();\n\n    updateLastTransfer(network, fromAddress, seqno);\n\n    return {\n      seqno,\n      amount: totalAmount.toString(),\n      messages: preparedMessages,\n    };\n  } catch (err) {\n    logDebugError('submitMultiTransfer', err);\n    return { error: resolveTransactionError(err) };\n  }\n}\n\nasync function signMultiTransaction(\n  network: ApiNetwork,\n  wallet: WalletContract,\n  messages: TonTransferParams[],\n  privateKey?: Uint8Array,\n  expireAt?: number,\n) {\n  const { seqno } = await getWalletInfo(network, wallet);\n  if (!expireAt) {\n    expireAt = Math.round(Date.now() / 1000) + DEFAULT_EXPIRE_AT_TIMEOUT_SEC;\n  }\n\n  // TODO Uncomment after fixing types in tonweb\n  // @ts-ignore\n  const query = wallet.methods.transfers({\n    secretKey: privateKey as any,\n    seqno: seqno || 0,\n    messages,\n    sendMode: 3,\n    expireAt,\n  });\n\n  return { query, seqno };\n}\n\nfunction updateLastTransfer(network: ApiNetwork, address: string, seqno: number) {\n  lastTransfers[network][address] = {\n    timestamp: Date.now(),\n    seqno,\n  };\n}\n\nexport async function waitLastTransfer(network: ApiNetwork, address: string) {\n  const lastTransfer = lastTransfers[network][address];\n  if (!lastTransfer) return;\n\n  const { seqno, timestamp } = lastTransfer;\n  const waitUntil = timestamp + WAIT_SEQNO_TIMEOUT;\n\n  const result = await waitIncrementSeqno(network, address, seqno, waitUntil);\n  if (result) {\n    delete lastTransfers[network][address];\n  }\n}\n\nasync function waitIncrementSeqno(network: ApiNetwork, address: string, seqno: number, waitUntil?: number) {\n  if (!waitUntil) {\n    waitUntil = Date.now() + WAIT_SEQNO_TIMEOUT;\n  }\n\n  while (Date.now() < waitUntil) {\n    try {\n      const { seqno: currentSeqno } = await getWalletInfo(network, address);\n      if (currentSeqno > seqno) {\n        return true;\n      }\n\n      await pause(WAIT_SEQNO_PAUSE);\n    } catch (err) {\n      logDebugError('waitIncrementSeqno', err);\n    }\n  }\n\n  return false;\n}\n\nasync function calculateFee(isInitialized: boolean, query: Method | (() => Promise<Method>)) {\n  if (typeof query === 'function') {\n    query = await query();\n  }\n  if (isInitialized) {\n    const allFees = await query.estimateFee();\n    const fees = allFees.source_fees;\n    return String(fees.in_fwd_fee + fees.storage_fee + fees.gas_fee + fees.fwd_fee);\n  } else {\n    return DEFAULT_FEE;\n  }\n}\n\nexport async function sendSignedMessage(accountId: string, message: ApiSignedTransfer) {\n  const { network } = parseAccountId(accountId);\n  const [fromAddress, publicKey, account] = await Promise.all([\n    fetchStoredAddress(accountId),\n    fetchStoredPublicKey(accountId),\n    fetchStoredAccount(accountId),\n  ]);\n  const wallet = getTonWalletContract(publicKey!, account!.version!);\n  const client = getTonClient(network);\n  const contract = client.open(wallet);\n\n  const { base64, seqno } = message;\n  await contract.send(TonCell.fromBase64(base64));\n\n  updateLastTransfer(network, fromAddress, seqno);\n}\n\nexport async function sendSignedMessages(accountId: string, messages: ApiSignedTransfer[]) {\n  const { network } = parseAccountId(accountId);\n  const [fromAddress, publicKey, account] = await Promise.all([\n    fetchStoredAddress(accountId),\n    fetchStoredPublicKey(accountId),\n    fetchStoredAccount(accountId),\n  ]);\n  const wallet = getTonWalletContract(publicKey!, account!.version!);\n  const client = getTonClient(network);\n  const contract = client.open(wallet);\n\n  const attempts = ATTEMPTS + messages.length;\n  let index = 0;\n  let attempt = 0;\n\n  while (index < messages.length && attempt < attempts) {\n    const { base64, seqno } = messages[index];\n    try {\n      await waitLastTransfer(network, fromAddress);\n\n      await contract.send(TonCell.fromBase64(base64));\n\n      updateLastTransfer(network, fromAddress, seqno);\n\n      index++;\n    } catch (err) {\n      logDebugError('sendSignedMessages', err);\n    }\n    attempt++;\n  }\n\n  return { successNumber: index };\n}\n\nexport async function decryptComment(\n  accountId: string, encryptedComment: string, fromAddress: string, password: string,\n) {\n  const keyPair = await fetchKeyPair(accountId, password);\n  if (!keyPair) {\n    return undefined;\n  }\n\n  const { secretKey, publicKey } = keyPair;\n\n  const buffer = Buffer.from(encryptedComment, 'base64');\n\n  return decryptMessageComment(buffer, publicKey, secretKey, fromAddress);\n}\n","import TonWeb from 'tonweb';\nimport type { ContractMethods, ContractOptions } from 'tonweb/dist/types/contract/contract';\nimport type { HttpProvider } from 'tonweb/dist/types/providers/http-provider';\n\nimport { bnToAddress } from '../util/tonweb';\n\n// const { parseAddress } = require('tonweb/src/contract/token/nft/NftUtils');\n\nconst { fromNano } = TonWeb.utils;\n\ninterface NominatorPoolOptions {}\n\ninterface NominatorPoolMethods extends ContractMethods {\n  getListNominators: () => Promise<any>;\n  getPoolData: () => Promise<any>;\n  getMaxPunishment: (a: number) => Promise<number>;\n}\n\nexport class NominatorPool extends TonWeb.Contract<NominatorPoolOptions, NominatorPoolMethods> {\n  constructor(provider: HttpProvider, options: ContractOptions) {\n    options.wc = 0;\n    super(provider, options);\n\n    if (!options.address) throw new Error('required address');\n\n    this.methods.getListNominators = this.getListNominators.bind(this);\n    this.methods.getPoolData = this.getPoolData.bind(this);\n    this.methods.getMaxPunishment = this.getMaxPunishment.bind(this);\n  }\n\n  async getListNominators(): Promise<{\n    address: string;\n    amount: string;\n    pendingDepositAmount: string;\n    withdrawRequested: boolean;\n  }[]> {\n    const myAddress = await this.getAddress();\n    const result = await this.provider.call2(myAddress.toString(), 'list_nominators');\n    return (result as any[]).map((item) => {\n      return {\n        address: bnToAddress(item[0]),\n        amount: fromNano(item[1]),\n        pendingDepositAmount: fromNano(item[2]),\n        withdrawRequested: item[3].toNumber()!!,\n      };\n    });\n  }\n\n  async getPoolData() {\n    const myAddress = await this.getAddress();\n    const result = await this.provider.call2(myAddress.toString(), 'get_pool_data');\n\n    return {\n      state: result[0].toString(), // ds~load_uint(8), ;; state\n      nominatorsCount: result[1].toNumber(), // ds~load_uint(16), ;; nominators_count\n      stakeAmountSent: fromNano(result[2]), // ds~load_coins(), ;; stake_amount_sent\n      validatorAmount: fromNano(result[3]), // ds~load_coins(), ;; validator_amount\n      validatorAddress: bnToAddress(result[4]), // ds~load_uint(ADDR_SIZE()), ;; validator_address\n      validatorRewardShare: Math.round(result[5].toNumber() / 100), // ds~load_uint(16), ;; validator_reward_share\n      maxNominatorsCount: result[6].toNumber(), // ds~load_uint(16), ;; max_nominators_count\n      minValidatorStake: fromNano(result[7]), // ds~load_coins(), ;; min_validator_stake\n      minNominatorStake: fromNano(result[8]), // ds~load_coins() ;; min_nominator_stake\n      nominators: result[9].toString(), // ds~load_dict(), ;; nominators\n      withdrawRequests: result[10].toString(), // ds~load_dict(), ;; withdraw_requests\n      stakeAt: result[11].toNumber(), // ds~load_uint(32), ;; stake_at\n      // savedValidatorSetHash: result[12].toString(), // ds~load_uint(256), ;; saved_validator_set_hash\n      validatorSetChangesCount: result[13].toNumber(), // ds~load_uint(8), ;; validator_set_changes_count\n      validatorSetChangeTime: result[14].toNumber(), // ds~load_uint(32), ;; validator_set_change_time\n      stakeHeldFor: result[15].toString(), // ds~load_uint(32), ;; stake_held_for\n      configProposalVotings: result[16].toString(), // ds~load_dict() ;; config_proposal_votings\n    };\n  }\n\n  async getMaxPunishment(stake: number) {\n    const myAddress = await this.getAddress();\n    return this.provider.call2(myAddress.toString(), 'get_max_punishment', [['num', stake.toString()]]);\n  }\n}\n","import TonWeb from 'tonweb';\nimport BN from 'bn.js';\n\nimport {\n  ApiTransactionDraftError,\n} from '../../types';\nimport type {\n  ApiBackendStakingState,\n  ApiNetwork,\n  ApiStakingState,\n} from '../../types';\n\nimport { TON_TOKEN_SLUG } from '../../../config';\nimport { parseAccountId } from '../../../util/account';\nimport memoized from '../../../util/memoized';\nimport { getTonWeb } from './util/tonweb';\nimport { NominatorPool } from './contracts/NominatorPool';\nimport { fetchStoredAddress } from '../../common/accounts';\nimport { callBackendGet } from '../../common/backend';\nimport { isKnownStakingPool } from '../../common/utils';\nimport { STAKE_COMMENT, UNSTAKE_COMMENT } from './constants';\nimport { checkTransactionDraft, submitTransfer } from './transactions';\n\nconst { toNano } = TonWeb.utils;\n\nconst ONE_TON = '1000000000';\nconst UNSTAKE_AMOUNT = ONE_TON;\nconst MIN_STAKE_AMOUNT = 10001;\nconst CACHE_TTL = 60; // 1 m.\nconst DISABLE_CACHE_PERIOD = 30; // 30 s.\n\nexport const fetchStakingStateMemo = memoized(fetchBackendStakingState, CACHE_TTL);\n\nexport async function checkStakeDraft(accountId: string, amount: string) {\n  const address = await fetchStoredAddress(accountId);\n  const { poolAddress } = await fetchStakingStateMemo(address);\n\n  const result: {\n    error?: ApiTransactionDraftError;\n    fee?: string;\n  } = {};\n\n  const staked = await getStakingState(accountId);\n  if (!staked) {\n    if (new BN(amount).lt(toNano(MIN_STAKE_AMOUNT.toString()))) {\n      result.error = ApiTransactionDraftError.InvalidAmount;\n      return result;\n    }\n  }\n\n  return checkTransactionDraft(\n    accountId,\n    TON_TOKEN_SLUG,\n    poolAddress,\n    amount,\n    STAKE_COMMENT,\n  );\n}\n\nexport async function checkUnstakeDraft(accountId: string) {\n  const address = await fetchStoredAddress(accountId);\n  const { poolAddress } = await fetchStakingStateMemo(address);\n  return checkTransactionDraft(\n    accountId,\n    TON_TOKEN_SLUG,\n    poolAddress,\n    UNSTAKE_AMOUNT,\n    UNSTAKE_COMMENT,\n  );\n}\n\nexport async function submitStake(accountId: string, password: string, amount: string) {\n  const address = await fetchStoredAddress(accountId);\n  const { poolAddress } = await fetchStakingStateMemo(address);\n  const result = await submitTransfer(\n    accountId,\n    password,\n    TON_TOKEN_SLUG,\n    poolAddress,\n    amount,\n    STAKE_COMMENT,\n  );\n  onStakingChangeExpected();\n  return result;\n}\n\nexport async function submitUnstake(accountId: string, password: string) {\n  const address = await fetchStoredAddress(accountId);\n  const { poolAddress } = await fetchStakingStateMemo(address);\n  const result = await submitTransfer(\n    accountId,\n    password,\n    TON_TOKEN_SLUG,\n    poolAddress,\n    UNSTAKE_AMOUNT,\n    UNSTAKE_COMMENT,\n  );\n  onStakingChangeExpected();\n  return result;\n}\n\nfunction onStakingChangeExpected() {\n  fetchStakingStateMemo.disableCache(DISABLE_CACHE_PERIOD);\n}\n\nexport async function getStakingState(accountId: string): Promise<ApiStakingState> {\n  const { network } = parseAccountId(accountId);\n  const address = await fetchStoredAddress(accountId);\n  const contract = await getPoolContract(network, address);\n  if (network !== 'mainnet' || !contract) {\n    return {\n      amount: 0,\n      pendingDepositAmount: 0,\n      isUnstakeRequested: false,\n    };\n  }\n\n  const nominators = await contract.getListNominators();\n  const currentNominator = nominators.find((n) => n.address === address);\n  if (!currentNominator) {\n    return {\n      amount: 0,\n      pendingDepositAmount: 0,\n      isUnstakeRequested: false,\n    };\n  }\n\n  return {\n    amount: parseFloat(currentNominator.amount),\n    pendingDepositAmount: parseFloat(currentNominator.pendingDepositAmount),\n    isUnstakeRequested: currentNominator.withdrawRequested,\n  };\n}\n\nasync function getPoolContract(network: ApiNetwork, address: string) {\n  const { poolAddress } = await fetchStakingStateMemo(address);\n  return new NominatorPool(getTonWeb(network).provider, { address: poolAddress });\n}\n\nexport async function getBackendStakingState(accountId: string): Promise<ApiBackendStakingState | undefined> {\n  const { network } = parseAccountId(accountId);\n  if (network !== 'mainnet') {\n    return undefined;\n  }\n\n  const address = await fetchStoredAddress(accountId);\n  return fetchStakingStateMemo(address);\n}\n\nexport async function fetchBackendStakingState(address: string) {\n  const stakingState = await callBackendGet(`/staking-state?account=${address}`) as ApiBackendStakingState;\n\n  if (!isKnownStakingPool(stakingState.poolAddress)) {\n    throw Error('Unexpected pool address, likely a malicious activity');\n  }\n\n  return stakingState;\n}\n","import { BRILLIANT_API_BASE_URL } from '../../config';\nimport { handleFetchErrors } from './utils';\n\nexport async function callBackendPost(path: string, data: AnyLiteral) {\n  const response = await fetch(`${BRILLIANT_API_BASE_URL}${path}`, {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify(data),\n  });\n  handleFetchErrors(response);\n  return response.json();\n}\n\nexport async function callBackendGet(path: string, data?: AnyLiteral, headers?: AnyLiteral) {\n  const url = new URL(`${BRILLIANT_API_BASE_URL}${path}`);\n  if (data) {\n    Object.entries(data).forEach(([key, value]) => {\n      url.searchParams.set(key, value.toString());\n    });\n  }\n\n  const response = await fetch(url, { headers });\n  handleFetchErrors(response);\n  return response.json();\n}\n","import TonWeb from 'tonweb';\nimport type { Cell as CellType } from 'tonweb/dist/types/boc/cell';\n\nimport { bytesToBase64 } from '../../common/utils';\n\nconst { Cell } = TonWeb.boc;\n\nexport async function packPayloadToBoc(payload: string | Uint8Array | CellType) {\n  let payloadCell = new Cell();\n  if (payload) {\n    if (payload instanceof Cell) {\n      payloadCell = payload;\n    } else if (typeof payload === 'string') {\n      if (payload.length > 0) {\n        payloadCell.bits.writeUint(0, 32);\n        payloadCell.bits.writeString(payload);\n      }\n    } else {\n      payloadCell.bits.writeBytes(payload);\n    }\n  }\n  return bytesToBase64(await payloadCell.toBoc());\n}\n","// eslint-disable-next-line max-classes-per-file\nimport type { ApiAnyDisplayError } from './types';\n\nexport class ApiBaseError extends Error {\n  constructor(message?: string, public displayError?: ApiAnyDisplayError) {\n    super(message);\n    Error.captureStackTrace(this);\n    this.name = this.constructor.name;\n  }\n}\n\nexport class ApiUserRejectsError extends ApiBaseError {\n  constructor(message: string = 'Canceled by the user') {\n    super(message);\n  }\n}\n","import {\n  Address, Builder, Cell, SendMode,\n} from 'ton-core';\nimport { StatusCodes } from '@ledgerhq/errors';\nimport TransportWebHID from '@ledgerhq/hw-transport-webhid';\nimport type { TonPayloadFormat } from '@ton-community/ton-ledger';\nimport { TonTransport } from '@ton-community/ton-ledger';\n\nimport {\n  TRANSFER_TIMEOUT_SEC,\n  WORKCHAIN,\n} from '../../api/types';\nimport type { ApiTonConnectProof } from '../../api/tonConnect/types';\nimport type {\n  ApiDappTransaction,\n  ApiNetwork,\n  ApiSignedTransfer,\n  ApiSubmitTransferOptions,\n  Workchain,\n} from '../../api/types';\nimport type { LedgerWalletInfo } from './types';\n\nimport { TON_TOKEN_SLUG } from '../../config';\nimport { callApi } from '../../api';\nimport { getWalletBalance } from '../../api/blockchains/ton';\nimport { TOKEN_TRANSFER_TON_AMOUNT, TOKEN_TRANSFER_TON_FORWARD_AMOUNT } from '../../api/blockchains/ton/constants';\nimport { ApiUserRejectsError } from '../../api/errors';\nimport { parseAccountId } from '../account';\nimport { range } from '../iteratees';\nimport { logDebugError } from '../logs';\nimport { pause } from '../schedulers';\nimport { isValidLedgerComment } from './utils';\n\nconst CHAIN = 0; // workchain === -1 ? 255 : 0;\nconst VERSION = 'v4R2';\nconst ACCOUNTS_PAGE = 9;\nconst ATTEMPTS = 10;\nconst PAUSE = 125;\nconst IS_BOUNCEABLE = false;\n\nlet transport: TransportWebHID | undefined;\nlet tonTransport: TonTransport | undefined;\n\nexport async function importLedgerWallet(network: ApiNetwork, accountIndex: number) {\n  const walletInfo = await getLedgerWalletInfo(network, accountIndex, IS_BOUNCEABLE);\n  return callApi('importLedgerWallet', network, walletInfo);\n}\n\nexport async function connectLedger() {\n  try {\n    transport = await connectHID();\n    tonTransport = new TonTransport(transport);\n    return true;\n  } catch (err) {\n    logDebugError('connectLedger', err);\n    return false;\n  }\n}\n\nfunction waitLedgerTonAppDeadline(): Promise<boolean> {\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      resolve(false);\n    }, PAUSE * ATTEMPTS);\n  });\n}\n\nexport async function checkTonApp() {\n  for (let i = 0; i < ATTEMPTS; i++) {\n    try {\n      const isTonOpen = await tonTransport!.isAppOpen();\n\n      if (isTonOpen) {\n        // Workaround for Ledger S, this is a way to check if it is unlocked.\n        // There will be an error with code 0x530c\n        await tonTransport?.getAddress(getLedgerAccountPathByIndex(0));\n\n        return true;\n      }\n    } catch (err: any) {\n      if (!err?.message.includes('0x530c')) {\n        logDebugError('waitLedgerTonApp', err);\n      }\n    }\n\n    await pause(PAUSE);\n  }\n\n  return false;\n}\n\nexport function waitLedgerTonApp() {\n  return Promise.race([\n    checkTonApp(),\n    waitLedgerTonAppDeadline(),\n  ]);\n}\n\nasync function connectHID() {\n  for (let i = 0; i < ATTEMPTS; i++) {\n    const [device] = await TransportWebHID.list();\n\n    if (!device) {\n      await TransportWebHID.create();\n      await pause(PAUSE);\n      continue;\n    }\n\n    if (device.opened) {\n      return new TransportWebHID(device);\n    } else {\n      return TransportWebHID.open(device);\n    }\n  }\n\n  throw new Error('Failed to connect');\n}\n\nexport async function submitLedgerTransfer(options: ApiSubmitTransferOptions) {\n  const {\n    accountId, slug, comment, fee,\n  } = options;\n  let { toAddress, amount } = options;\n  const { network } = parseAccountId(accountId);\n\n  await callApi('waitLastTransfer', accountId);\n\n  const [path, fromAddress, seqno] = await Promise.all([\n    getLedgerAccountPath(accountId),\n    callApi('fetchAddress', accountId),\n    callApi('getWalletSeqno', accountId),\n  ]);\n\n  let payload: TonPayloadFormat | undefined;\n\n  if (slug !== TON_TOKEN_SLUG) {\n    ({ toAddress, amount, payload } = await buildLedgerTokenTransfer(\n      network, slug, fromAddress!, toAddress, amount, comment,\n    ));\n  } else if (comment) {\n    if (isValidLedgerComment(comment)) {\n      payload = { type: 'comment', text: comment };\n    } else {\n      throw Error('Unsupported format');\n    }\n  }\n\n  try {\n    const signedCell = await tonTransport!.signTransaction(path, {\n      to: Address.parse(toAddress),\n      sendMode: SendMode.PAY_GAS_SEPARATELY + SendMode.IGNORE_ERRORS,\n      seqno: seqno!,\n      timeout: getTransferExpirationTime(),\n      bounce: IS_BOUNCEABLE,\n      amount: BigInt(amount),\n      payload,\n    });\n\n    const message: ApiSignedTransfer = {\n      base64: signedCell.toBoc().toString('base64'),\n      seqno: seqno!,\n      params: {\n        amount: options.amount,\n        fromAddress: fromAddress!,\n        toAddress: options.toAddress,\n        comment,\n        fee: fee!,\n        slug,\n      },\n    };\n\n    return await callApi('sendSignedTransferMessage', accountId, message);\n  } catch (error) {\n    logDebugError('submitLedgerTransfer', error);\n    return undefined;\n  }\n}\n\nexport async function buildLedgerTokenTransfer(\n  network: ApiNetwork,\n  slug: string,\n  fromAddress: string,\n  toAddress: string,\n  amount: string,\n  comment?: string,\n) {\n  const { minterAddress } = (await callApi('resolveTokenBySlug', slug))!;\n  const tokenWalletAddress = await callApi('resolveTokenWalletAddress', network, fromAddress, minterAddress!);\n  const realMinterAddress = await callApi('resolveTokenMinterAddress', network, tokenWalletAddress!);\n  if (minterAddress !== realMinterAddress) {\n    throw new Error('Invalid contract');\n  }\n\n  // eslint-disable-next-line no-null/no-null\n  let forwardPayload: Cell | null = null;\n  if (comment) {\n    forwardPayload = new Builder()\n      .storeUint(0, 32)\n      .storeStringTail(comment)\n      .endCell();\n  }\n\n  const payload: TonPayloadFormat = {\n    type: 'jetton-transfer',\n    queryId: 0n,\n    amount: BigInt(amount),\n    destination: Address.parse(toAddress),\n    responseDestination: Address.parse(fromAddress),\n    // eslint-disable-next-line no-null/no-null\n    customPayload: null,\n    forwardAmount: TOKEN_TRANSFER_TON_FORWARD_AMOUNT,\n    forwardPayload,\n  };\n\n  return {\n    amount: TOKEN_TRANSFER_TON_AMOUNT.toString(),\n    toAddress: tokenWalletAddress!,\n    payload,\n  };\n}\n\nexport async function signLedgerTransactions(\n  accountId: string, messages: ApiDappTransaction[], seqno?: number,\n): Promise<ApiSignedTransfer[]> {\n  await callApi('waitLastTransfer', accountId);\n\n  const [path, fromAddress] = await Promise.all([\n    getLedgerAccountPath(accountId),\n    callApi('fetchAddress', accountId),\n  ]);\n\n  if (!seqno) {\n    seqno = await callApi('getWalletSeqno', accountId);\n  }\n\n  const preparedOptions = messages.map((message, index) => {\n    const {\n      toAddress, amount, payload,\n    } = message;\n\n    let ledgerPayload: TonPayloadFormat | undefined;\n\n    switch (payload?.type) {\n      case 'comment': {\n        const { comment } = payload;\n        if (isValidLedgerComment(comment)) {\n          ledgerPayload = { type: 'comment', text: payload.comment };\n        } else {\n          throw Error('Unsupported format');\n        }\n        break;\n      }\n      case undefined: {\n        ledgerPayload = undefined;\n        break;\n      }\n      case 'transfer-nft': {\n        const {\n          queryId,\n          newOwner,\n          responseDestination,\n          customPayload,\n          forwardAmount,\n          forwardPayload,\n        } = payload;\n\n        ledgerPayload = {\n          type: 'nft-transfer',\n          queryId: BigInt(queryId),\n          newOwner: Address.parse(newOwner),\n          responseDestination: Address.parse(responseDestination),\n          // eslint-disable-next-line no-null/no-null\n          customPayload: customPayload ? Cell.fromBase64(customPayload) : null,\n          forwardAmount: BigInt(forwardAmount),\n          // eslint-disable-next-line no-null/no-null\n          forwardPayload: forwardPayload ? Cell.fromBase64(forwardPayload) : null,\n        };\n        break;\n      }\n      case 'transfer-tokens': {\n        const {\n          queryId,\n          amount: jettonAmount,\n          destination,\n          responseDestination,\n          customPayload,\n          forwardAmount,\n          forwardPayload,\n        } = payload;\n\n        ledgerPayload = {\n          type: 'jetton-transfer',\n          queryId: BigInt(queryId),\n          amount: BigInt(jettonAmount),\n          destination: Address.parse(destination),\n          responseDestination: Address.parse(responseDestination),\n          // eslint-disable-next-line no-null/no-null\n          customPayload: customPayload ? Cell.fromBase64(customPayload) : null,\n          forwardAmount: BigInt(forwardAmount),\n          // eslint-disable-next-line no-null/no-null\n          forwardPayload: forwardPayload ? Cell.fromBase64(forwardPayload) : null,\n        };\n        break;\n      }\n      case 'unknown':\n      default: {\n        throw Error('Unsupported format');\n      }\n    }\n\n    return {\n      to: Address.parse(toAddress),\n      sendMode: SendMode.PAY_GAS_SEPARATELY + SendMode.IGNORE_ERRORS,\n      seqno: seqno! + index,\n      timeout: getTransferExpirationTime(),\n      bounce: IS_BOUNCEABLE,\n      amount: BigInt(amount),\n      payload: ledgerPayload,\n    };\n  });\n\n  const signedMessages: ApiSignedTransfer[] = [];\n\n  const attempts = ATTEMPTS + preparedOptions.length;\n  let index = 0;\n  let attempt = 0;\n\n  while (index < preparedOptions.length && attempt < attempts) {\n    const options = preparedOptions[index];\n    const message = messages[index];\n\n    try {\n      const base64 = (await tonTransport!.signTransaction(path, options)).toBoc().toString('base64');\n      signedMessages.push({\n        base64,\n        seqno: options.seqno,\n        params: {\n          amount: message.amount,\n          fromAddress: fromAddress!,\n          toAddress: message.toAddress,\n          comment: message.payload?.type === 'comment' ? message.payload.comment : undefined,\n          fee: '0',\n          slug: TON_TOKEN_SLUG,\n        },\n      });\n      index++;\n    } catch (err: any) {\n      if (err?.statusCode === StatusCodes.CONDITIONS_OF_USE_NOT_SATISFIED) {\n        throw new ApiUserRejectsError();\n      }\n      logDebugError('signLedgerTransactions', err);\n    }\n    attempt++;\n  }\n\n  return signedMessages;\n}\n\nexport async function signLedgerProof(accountId: string, proof: ApiTonConnectProof): Promise<string> {\n  const path = await getLedgerAccountPath(accountId);\n\n  const { timestamp, domain, payload } = proof;\n\n  const result = await tonTransport!.getAddressProof(path, {\n    domain,\n    timestamp,\n    payload: Buffer.from(payload),\n  });\n  return result.signature.toString('base64');\n}\n\nexport function getFirstLedgerWallets(network: ApiNetwork) {\n  const accountIndexes = range(0, ACCOUNTS_PAGE);\n\n  return Promise.all(accountIndexes.map((index) => {\n    return getLedgerWalletInfo(network, index, IS_BOUNCEABLE);\n  }));\n}\n\nexport async function getLedgerWalletInfo(\n  network: ApiNetwork,\n  accountIndex: number,\n  isBounceable: boolean,\n): Promise<LedgerWalletInfo> {\n  const { address, publicKey } = await getLedgerWalletAddress(accountIndex, isBounceable);\n  const balance = await getWalletBalance(network, address);\n\n  return {\n    index: accountIndex,\n    address,\n    publicKey: publicKey!.toString('hex'),\n    balance,\n    version: VERSION,\n    driver: 'HID',\n    deviceId: transport!.deviceModel?.id,\n    deviceName: transport!.deviceModel?.productName,\n  };\n}\n\nexport function getLedgerWalletAddress(index: number, isBounceable: boolean, isTestnet?: boolean) {\n  const path = getLedgerAccountPathByIndex(index, isTestnet);\n\n  return tonTransport!.getAddress(path, {\n    chain: CHAIN,\n    bounceable: isBounceable,\n  });\n}\n\nasync function getLedgerAccountPath(accountId: string) {\n  const accountInfo = await callApi('fetchAccount', accountId);\n  const index = accountInfo!.ledger!.index;\n\n  return getLedgerAccountPathByIndex(index);\n}\n\nfunction getLedgerAccountPathByIndex(index: number, isTestnet?: boolean, workchain: Workchain = WORKCHAIN) {\n  const network = isTestnet ? 1 : 0;\n  const chain = workchain === -1 ? 255 : 0;\n  return [44, 607, network, chain, index, 0];\n}\n\nfunction getTransferExpirationTime() {\n  return Math.floor(Date.now() / 1000 + TRANSFER_TIMEOUT_SEC);\n}\n","import {\n  AppState,\n  AuthState, StakingState, TransferState,\n} from './types';\nimport type { GlobalState } from './types';\n\nimport {\n  ANIMATION_LEVEL_DEFAULT,\n  THEME_DEFAULT,\n  TOKEN_INFO,\n} from '../config';\nimport { USER_AGENT_LANG_CODE } from '../util/windowEnvironment';\n\nexport const STATE_VERSION = 8;\n\nexport const INITIAL_STATE: GlobalState = {\n  appState: AppState.Auth,\n\n  auth: {\n    state: AuthState.none,\n  },\n\n  hardware: {},\n\n  currentTransfer: {\n    state: TransferState.None,\n  },\n\n  currentDappTransfer: {\n    state: TransferState.None,\n  },\n\n  staking: {\n    state: StakingState.None,\n  },\n\n  tokenInfo: {\n    bySlug: TOKEN_INFO,\n  },\n\n  settings: {\n    theme: THEME_DEFAULT,\n    animationLevel: ANIMATION_LEVEL_DEFAULT,\n    areTinyTransfersHidden: true,\n    canPlaySounds: true,\n    langCode: USER_AGENT_LANG_CODE,\n    dapps: [],\n    byAccountId: {},\n    areTokensWithNoPriceHidden: true,\n  },\n\n  byAccountId: {},\n\n  dialogs: [],\n  notifications: [],\n\n  stateVersion: STATE_VERSION,\n};\n","export function areDeepEqual<T extends any>(value1: T, value2: T): boolean {\n  const type1 = typeof value1;\n  const type2 = typeof value2;\n  if (type1 !== type2) {\n    return false;\n  }\n\n  if (type1 !== 'object') {\n    return value1 === value2;\n  }\n\n  const isArray1 = Array.isArray(value1);\n  const isArray2 = Array.isArray(value2);\n\n  if (isArray1 !== isArray2) {\n    return false;\n  }\n\n  if (isArray1) {\n    const array1 = value1 as any[];\n    const array2 = value2 as any[];\n\n    if (array1.length !== array2.length) {\n      return false;\n    }\n\n    return array1.every((member1, i) => areDeepEqual(member1, array2[i]));\n  }\n\n  const object1 = value1 as AnyLiteral;\n  const object2 = value2 as AnyLiteral;\n  const keys1 = Object.keys(object1);\n\n  return keys1.every((key1) => areDeepEqual(object1[key1], object2[key1]));\n}\n","import { areDeepEqual } from './areDeepEqual';\nimport { pick } from './iteratees';\n\nexport default function isPartialDeepEqual<T extends AnyLiteral>(node: T, newPartial: Partial<T>) {\n  const currentPartial = pick(node, Object.keys(newPartial) as (keyof typeof newPartial)[]);\n\n  return areDeepEqual(currentPartial, newPartial);\n}\n","import type { ApiToken } from '../../api/types';\nimport type { Account, AccountState, GlobalState } from '../types';\n\nimport { TON_TOKEN_SLUG } from '../../config';\nimport { genRelatedAccountIds } from '../../util/account';\nimport isPartialDeepEqual from '../../util/isPartialDeepEqual';\nimport { fromKeyValueArrays } from '../../util/iteratees';\nimport {\n  selectAccount,\n  selectAccountState,\n  selectNetworkAccounts,\n} from '../selectors';\n\nexport function updateAuth(global: GlobalState, authUpdate: Partial<GlobalState['auth']>) {\n  return {\n    ...global,\n    auth: {\n      ...global.auth,\n      ...authUpdate,\n    },\n  } as GlobalState;\n}\n\nexport function updateAccounts(\n  global: GlobalState,\n  state: Partial<GlobalState['accounts']>,\n) {\n  return {\n    ...global,\n    accounts: {\n      ...(global.accounts || { byId: {} }),\n      ...state,\n    },\n  };\n}\n\nexport function createAccount(global: GlobalState, accountId: string, address: string, partial?: Partial<Account>) {\n  if (!partial?.title) {\n    const accounts = selectNetworkAccounts(global) || {};\n    partial = { ...partial, title: `Wallet ${Object.keys(accounts).length + 1}` };\n  }\n\n  return updateAccount(global, accountId, { ...partial, address });\n}\n\nexport function updateAccount(\n  global: GlobalState,\n  accountId: string,\n  partial: Partial<Account>,\n) {\n  let account = selectAccount(global, accountId);\n  account = { ...account, ...partial } as Account;\n\n  const newAccountsById = fromKeyValueArrays(genRelatedAccountIds(accountId), account);\n  return {\n    ...global,\n    accounts: {\n      ...global.accounts,\n      byId: {\n        ...global.accounts?.byId,\n        ...newAccountsById,\n      },\n    },\n  };\n}\n\nexport function renameAccount(global: GlobalState, accountId: string, title: string) {\n  return updateAccount(global, accountId, { title });\n}\n\nexport function updateBalance(\n  global: GlobalState, accountId: string, slug: string, balance: string,\n): GlobalState {\n  const { balances } = selectAccountState(global, accountId) || {};\n  if (balances?.bySlug[slug] === balance) {\n    return global;\n  }\n\n  return updateAccountState(global, accountId, {\n    balances: {\n      ...balances,\n      bySlug: {\n        ...balances?.bySlug,\n        [slug]: balance,\n      },\n    },\n  });\n}\n\nexport function updateSendingLoading(global: GlobalState, isLoading: boolean): GlobalState {\n  return {\n    ...global,\n    currentTransfer: {\n      ...global.currentTransfer,\n      isLoading,\n    },\n  };\n}\n\nexport function updateTokens(\n  global: GlobalState,\n  partial: Record<string, ApiToken>,\n  withDeepCompare = false,\n): GlobalState {\n  const currentTokens = global.tokenInfo?.bySlug;\n\n  if (currentTokens?.[TON_TOKEN_SLUG] && !partial[TON_TOKEN_SLUG].quote.price) {\n    return global;\n  }\n\n  if (withDeepCompare && currentTokens && isPartialDeepEqual(currentTokens, partial)) {\n    return global;\n  }\n\n  return {\n    ...global,\n    tokenInfo: {\n      ...global.tokenInfo,\n      bySlug: {\n        ...currentTokens,\n        ...partial,\n      },\n    },\n  };\n}\n\nexport function updateCurrentAccountState(global: GlobalState, partial: Partial<AccountState>): GlobalState {\n  return updateAccountState(global, global.currentAccountId!, partial);\n}\n\nexport function updateCurrentAccountsState(global: GlobalState, partial: Partial<AccountState>): GlobalState {\n  for (const accountId of genRelatedAccountIds(global.currentAccountId!)) {\n    global = updateAccountState(global, accountId, partial);\n  }\n  return global;\n}\n\nexport function updateAccountState(\n  global: GlobalState, accountId: string, partial: Partial<AccountState>, withDeepCompare = false,\n): GlobalState {\n  const accountState = selectAccountState(global, accountId);\n\n  if (withDeepCompare && accountState && isPartialDeepEqual(accountState, partial)) {\n    return global;\n  }\n\n  return {\n    ...global,\n    byAccountId: {\n      ...global.byAccountId,\n      [accountId]: {\n        ...accountState,\n        ...partial,\n      },\n    },\n  };\n}\n\nexport function updateHardware(global: GlobalState, hardwareUpdate: Partial<GlobalState['hardware']>) {\n  return {\n    ...global,\n    hardware: {\n      ...global.hardware,\n      ...hardwareUpdate,\n    },\n  } as GlobalState;\n}\n\nexport function updateSettings(global: GlobalState, settingsUpdate: Partial<GlobalState['settings']>) {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      ...settingsUpdate,\n    },\n  } as GlobalState;\n}\n","import { TransferState } from '../types';\nimport type { GlobalState } from '../types';\n\nimport { selectAccountState, selectCurrentAccountState } from '../selectors';\nimport { updateAccountState, updateCurrentAccountState } from './misc';\n\nexport function updateCurrentTransfer(global: GlobalState, update: Partial<GlobalState['currentTransfer']>) {\n  return {\n    ...global,\n    currentTransfer: {\n      ...global.currentTransfer,\n      ...update,\n    },\n  };\n}\n\nexport function clearCurrentTransfer(global: GlobalState) {\n  return {\n    ...global,\n    currentTransfer: {\n      state: TransferState.None,\n    },\n  };\n}\n\nexport function updateCurrentSignature(global: GlobalState, update: Partial<GlobalState['currentSignature']>) {\n  return {\n    ...global,\n    currentSignature: {\n      ...global.currentSignature,\n      ...update,\n    },\n  } as GlobalState;\n}\n\nexport function clearCurrentSignature(global: GlobalState) {\n  return {\n    ...global,\n    currentSignature: undefined,\n  };\n}\n\nexport function updateTransactionsIsLoading(global: GlobalState, isLoading: boolean) {\n  const { transactions } = selectCurrentAccountState(global) || {};\n\n  return updateCurrentAccountState(global, {\n    transactions: {\n      ...transactions || { byTxId: {} },\n      isLoading,\n    },\n  });\n}\n\nexport function updateTransactionsIsLoadingByAccount(global: GlobalState, accountId: string, isLoading: boolean) {\n  const { transactions } = selectAccountState(global, accountId) || {};\n\n  return updateAccountState(global, accountId, {\n    transactions: {\n      ...transactions || { byTxId: {} },\n      isLoading,\n    },\n  });\n}\n","import { StakingState } from '../types';\nimport type { ApiPoolState } from '../../api/types';\nimport type { GlobalState } from '../types';\n\nimport isPartialDeepEqual from '../../util/isPartialDeepEqual';\nimport { selectCurrentAccountState } from '../selectors';\nimport { updateCurrentAccountsState } from './misc';\n\nexport function updateStaking(global: GlobalState, update: Partial<GlobalState['staking']>): GlobalState {\n  return {\n    ...global,\n    staking: {\n      ...global.staking,\n      ...update,\n    },\n  };\n}\n\nexport function clearStaking(global: GlobalState) {\n  return {\n    ...global,\n    staking: {\n      state: StakingState.None,\n    },\n  };\n}\n\nexport function updatePoolState(global: GlobalState, partial: ApiPoolState, withDeepCompare = false): GlobalState {\n  const currentPoolState = selectCurrentAccountState(global)?.poolState;\n\n  if (\n    !global.currentAccountId\n    || (withDeepCompare && currentPoolState && isPartialDeepEqual(currentPoolState, partial))\n  ) {\n    return global;\n  }\n\n  return updateCurrentAccountsState(global, {\n    poolState: {\n      ...currentPoolState,\n      ...partial,\n    },\n  });\n}\n","import { TransferState } from '../types';\nimport type { GlobalState } from '../types';\n\nexport function updateDappConnectRequest(global: GlobalState, update: Partial<GlobalState['dappConnectRequest']>) {\n  return {\n    ...global,\n    dappConnectRequest: {\n      ...global.dappConnectRequest,\n      ...update,\n    },\n  } as GlobalState;\n}\n\nexport function clearDappConnectRequestError(global: GlobalState) {\n  return {\n    ...global,\n    dappConnectRequest: {\n      ...global.dappConnectRequest,\n      error: undefined,\n    },\n  } as GlobalState;\n}\n\nexport function clearDappConnectRequest(global: GlobalState) {\n  return {\n    ...global,\n    dappConnectRequest: undefined,\n  } as GlobalState;\n}\n\nexport function updateCurrentDappTransfer(global: GlobalState, update: Partial<GlobalState['currentDappTransfer']>) {\n  return {\n    ...global,\n    currentDappTransfer: {\n      ...global.currentDappTransfer,\n      ...update,\n    },\n  };\n}\n\nexport function clearCurrentDappTransfer(global: GlobalState) {\n  return {\n    ...global,\n    currentDappTransfer: {\n      state: TransferState.None,\n    },\n  };\n}\n\nexport function updateConnectedDapps(global: GlobalState, update: Partial<GlobalState['settings']>) {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      dapps: update.dapps ?? [],\n    },\n  } as GlobalState;\n}\n\nexport function clearConnectedDapps(global: GlobalState) {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      dapps: [],\n    },\n  } as GlobalState;\n}\n\nexport function removeConnectedDapp(global: GlobalState, origin: string) {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      dapps: global.settings.dapps.filter((dapp) => dapp.origin !== origin),\n    },\n  } as GlobalState;\n}\n","import type { ApiTransaction } from '../../api/types';\nimport type { GlobalState } from '../types';\n\nimport { getIsTxIdLocal } from '../helpers';\nimport { selectAccountState } from '../selectors';\nimport { updateAccountState } from './misc';\n\nexport function updateTransaction(global: GlobalState, accountId: string, transaction: ApiTransaction): GlobalState {\n  const { transactions } = selectAccountState(global, accountId) || {};\n\n  const { txId, timestamp, slug } = transaction;\n  const isLocal = getIsTxIdLocal(txId);\n  let newestTransactionsBySlug = transactions?.newestTransactionsBySlug || {};\n\n  if (!isLocal) {\n    const newestTx = newestTransactionsBySlug[slug];\n    if (!newestTx || newestTx.timestamp < timestamp) {\n      newestTransactionsBySlug = { ...newestTransactionsBySlug, [slug]: transaction };\n    }\n  }\n\n  const txIdsBySlug = transactions?.txIdsBySlug || {};\n  let tokenTxIds = txIdsBySlug[slug] || [];\n\n  if (!tokenTxIds.includes(txId)) {\n    tokenTxIds = [txId].concat(tokenTxIds);\n  }\n\n  return updateAccountState(global, accountId, {\n    transactions: {\n      ...transactions,\n      byTxId: { ...transactions?.byTxId, [txId]: transaction },\n      txIdsBySlug: { ...txIdsBySlug, [slug]: tokenTxIds },\n      newestTransactionsBySlug,\n    },\n  });\n}\n\nexport function removeTransaction(global: GlobalState, accountId: string, txId: string) {\n  const { transactions } = selectAccountState(global, accountId) || {};\n  let { txIdsBySlug } = transactions || {};\n  const { [txId]: removedTransaction, ...byTxId } = transactions?.byTxId || {};\n  const slug = removedTransaction?.slug;\n\n  if (slug && txIdsBySlug && txIdsBySlug[slug]) {\n    txIdsBySlug = { ...txIdsBySlug, [slug]: txIdsBySlug[slug].filter((x) => x !== txId) };\n  }\n\n  return updateAccountState(global, accountId, {\n    transactions: {\n      ...transactions,\n      byTxId,\n      txIdsBySlug,\n    },\n  });\n}\n","import { AppState, AuthState, HardwareConnectState } from '../../types';\n\nimport { MNEMONIC_CHECK_COUNT, MNEMONIC_COUNT } from '../../../config';\nimport { buildAccountId, parseAccountId } from '../../../util/account';\nimport { cloneDeep } from '../../../util/iteratees';\nimport {\n  connectLedger, getFirstLedgerWallets, importLedgerWallet, waitLedgerTonApp,\n} from '../../../util/ledger';\nimport { pause } from '../../../util/schedulers';\nimport { callApi } from '../../../api';\nimport { addActionHandler, getGlobal, setGlobal } from '../..';\nimport { INITIAL_STATE } from '../../initialState';\nimport {\n  createAccount, updateAuth, updateCurrentAccountsState, updateHardware,\n} from '../../reducers';\nimport { selectCurrentNetwork, selectFirstNonHardwareAccount, selectNewestTxIds } from '../../selectors';\n\nconst CREATING_DURATION = 3300;\n\naddActionHandler('restartAuth', (global) => {\n  if (global.currentAccountId) {\n    global = { ...global, appState: AppState.Main };\n  }\n\n  global = { ...global, auth: cloneDeep(INITIAL_STATE.auth) };\n\n  setGlobal(global);\n});\n\naddActionHandler('startCreatingWallet', async (global, actions) => {\n  setGlobal(\n    updateAuth(global, {\n      state: AuthState.creatingWallet,\n      method: 'createAccount',\n      error: undefined,\n    }),\n  );\n\n  const [mnemonic] = await Promise.all([callApi('generateMnemonic'), pause(CREATING_DURATION)]);\n\n  global = updateAuth(getGlobal(), {\n    mnemonic,\n    mnemonicCheckIndexes: selectMnemonicForCheck(),\n  });\n\n  const firstNonHardwareAccount = selectFirstNonHardwareAccount(global);\n\n  if (firstNonHardwareAccount) {\n    setGlobal(global);\n    actions.afterCreatePassword({ password: global.auth.password! });\n\n    return;\n  }\n\n  setGlobal(updateAuth(global, { state: AuthState.createPassword }));\n});\n\naddActionHandler('afterCreatePassword', (global, actions, { password }) => {\n  setGlobal(updateAuth(global, { isLoading: true }));\n\n  const { method } = getGlobal().auth;\n\n  const isImporting = method !== 'createAccount';\n  const isHardware = method === 'importHardwareWallet';\n\n  if (isHardware) {\n    actions.createHardwareAccounts();\n    return;\n  }\n\n  actions.createAccount({ password, isImporting });\n});\n\naddActionHandler('createAccount', async (global, actions, { password, isImporting }) => {\n  setGlobal(updateAuth(global, { isLoading: true }));\n\n  const network = selectCurrentNetwork(getGlobal());\n\n  const result = await callApi(\n    isImporting ? 'importMnemonic' : 'createWallet',\n    network,\n    global.auth.mnemonic!,\n    password,\n  );\n\n  global = getGlobal();\n\n  if (!result) {\n    setGlobal(updateAuth(global, { isLoading: undefined }));\n    return;\n  }\n\n  global = updateAuth(global, {\n    isLoading: undefined,\n    password: undefined,\n  });\n  const { accountId, address } = result;\n\n  if (isImporting) {\n    global = { ...global, currentAccountId: accountId };\n    global = updateAuth(global, {\n      state: AuthState.ready,\n    });\n    global = createAccount(global, accountId, address);\n    setGlobal(global);\n\n    actions.afterSignIn();\n  } else {\n    global = updateAuth(global, {\n      state: AuthState.createBackup,\n      accountId,\n      address,\n    });\n\n    setGlobal(global);\n  }\n});\n\naddActionHandler('createHardwareAccounts', async (global, actions) => {\n  const isFirstAccount = !global.currentAccountId;\n  setGlobal(updateAuth(global, { isLoading: true }));\n\n  const { hardwareSelectedIndices = [] } = getGlobal().hardware;\n  const network = selectCurrentNetwork(getGlobal());\n\n  const wallets = await Promise.all(hardwareSelectedIndices.map((wallet) => importLedgerWallet(network, wallet)));\n\n  const updatedGlobal = wallets.reduce((currentGlobal, wallet) => {\n    if (!wallet) {\n      return currentGlobal;\n    }\n    const { accountId, address, walletInfo } = wallet;\n\n    currentGlobal = { ...currentGlobal, currentAccountId: accountId };\n    currentGlobal = createAccount(currentGlobal, accountId, address, {\n      isHardware: true,\n      ...(walletInfo && {\n        ledger: {\n          driver: walletInfo.driver,\n          index: walletInfo.index,\n        },\n      }),\n    });\n\n    return currentGlobal;\n  }, getGlobal());\n\n  setGlobal(updateAuth(updatedGlobal, { isLoading: false }));\n\n  if (getGlobal().areSettingsOpen) {\n    actions.closeSettings();\n  }\n\n  if (isFirstAccount) {\n    actions.afterSignIn();\n  }\n});\n\naddActionHandler('afterCheckMnemonic', (global, actions) => {\n  global = { ...global, currentAccountId: global.auth.accountId! };\n  global = updateCurrentAccountsState(global, {});\n  global = createAccount(global, global.auth.accountId!, global.auth.address!);\n  setGlobal(global);\n\n  actions.afterSignIn();\n});\n\naddActionHandler('restartCheckMnemonicIndexes', (global) => {\n  setGlobal(\n    updateAuth(global, {\n      mnemonicCheckIndexes: selectMnemonicForCheck(),\n    }),\n  );\n});\n\naddActionHandler('skipCheckMnemonic', (global, actions) => {\n  global = { ...global, currentAccountId: global.auth.accountId! };\n  global = updateCurrentAccountsState(global, {\n    isBackupRequired: true,\n  });\n  global = createAccount(global, global.auth.accountId!, global.auth.address!);\n  setGlobal(global);\n\n  actions.afterSignIn();\n});\n\naddActionHandler('startImportingWallet', (global) => {\n  setGlobal(\n    updateAuth(global, {\n      state: AuthState.importWallet,\n      error: undefined,\n      method: 'importMnemonic',\n    }),\n  );\n});\n\naddActionHandler('openAbout', (global) => {\n  setGlobal(updateAuth(global, { state: AuthState.about, error: undefined }));\n});\n\naddActionHandler('closeAbout', (global) => {\n  setGlobal(updateAuth(global, { state: AuthState.none, error: undefined }));\n});\n\naddActionHandler('afterImportMnemonic', async (global, actions, { mnemonic }) => {\n  const isValid = await callApi('validateMnemonic', mnemonic);\n  if (!isValid) {\n    setGlobal(\n      updateAuth(getGlobal(), {\n        error: 'Your mnemonic words are invalid.',\n      }),\n    );\n\n    return;\n  }\n\n  global = updateAuth(getGlobal(), {\n    mnemonic,\n    error: undefined,\n  });\n\n  const firstNonHardwareAccount = selectFirstNonHardwareAccount(global);\n\n  if (firstNonHardwareAccount) {\n    setGlobal(global);\n    actions.afterCreatePassword({ password: global.auth.password! });\n\n    return;\n  }\n\n  setGlobal(updateAuth(global, { state: AuthState.importWalletCreatePassword }));\n});\n\naddActionHandler('cleanAuthError', (global) => {\n  setGlobal(updateAuth(global, { error: undefined }));\n});\n\nexport function selectMnemonicForCheck() {\n  return Array(MNEMONIC_COUNT)\n    .fill(0)\n    .map((_, i) => ({ i, rnd: Math.random() }))\n    .sort((a, b) => a.rnd - b.rnd)\n    .map((i) => i.i)\n    .slice(0, MNEMONIC_CHECK_COUNT)\n    .sort((a, b) => a - b);\n}\n\naddActionHandler('startChangingNetwork', (global, actions, { network }) => {\n  const accountId = buildAccountId({\n    ...parseAccountId(global.currentAccountId!),\n    network,\n  });\n\n  actions.switchAccount({ accountId, newNetwork: network });\n});\n\naddActionHandler('switchAccount', async (global, actions, { accountId, newNetwork }) => {\n  const newestTxIds = selectNewestTxIds(global, accountId);\n  await callApi('activateAccount', accountId, newestTxIds);\n\n  setGlobal({\n    ...getGlobal(),\n    currentAccountId: accountId,\n  });\n\n  if (newNetwork) {\n    actions.changeNetwork({ network: newNetwork });\n  }\n});\n\naddActionHandler('connectHardwareWallet', async (global) => {\n  setGlobal(\n    updateHardware(global, {\n      hardwareState: HardwareConnectState.Connecting,\n      hardwareWallets: undefined,\n      hardwareSelectedIndices: undefined,\n      isLedgerConnected: undefined,\n      isTonAppConnected: undefined,\n    }),\n  );\n\n  const isLedgerConnected = await connectLedger();\n  if (!isLedgerConnected) {\n    setGlobal(\n      updateHardware(getGlobal(), {\n        isLedgerConnected: false,\n        hardwareState: HardwareConnectState.Failed,\n      }),\n    );\n    return;\n  }\n\n  setGlobal(\n    updateHardware(getGlobal(), {\n      isLedgerConnected: true,\n    }),\n  );\n\n  const isTonAppConnected = await waitLedgerTonApp();\n\n  if (!isTonAppConnected) {\n    setGlobal(\n      updateHardware(getGlobal(), {\n        isTonAppConnected: false,\n        hardwareState: HardwareConnectState.Failed,\n      }),\n    );\n    return;\n  }\n\n  setGlobal(\n    updateHardware(getGlobal(), {\n      isTonAppConnected: true,\n    }),\n  );\n\n  try {\n    const network = selectCurrentNetwork(getGlobal());\n    const hardwareWallets = await getFirstLedgerWallets(network);\n\n    setGlobal(\n      updateHardware(getGlobal(), {\n        hardwareWallets,\n        hardwareState: HardwareConnectState.Connected,\n      }),\n    );\n  } catch (err) {\n    setGlobal(\n      updateHardware(getGlobal(), {\n        hardwareState: HardwareConnectState.Failed,\n      }),\n    );\n  }\n});\n\naddActionHandler('afterSelectHardwareWallets', (global, actions, { hardwareSelectedIndices }) => {\n  global = updateAuth(getGlobal(), {\n    method: 'importHardwareWallet',\n    error: undefined,\n  });\n\n  global = updateHardware(global, {\n    hardwareSelectedIndices,\n  });\n\n  setGlobal(global);\n  actions.afterCreatePassword({ password: '' });\n});\n\naddActionHandler('resetHardwareWalletConnect', (global) => {\n  setGlobal(\n    updateHardware(global, {\n      hardwareState: HardwareConnectState.Connect,\n      isLedgerConnected: undefined,\n      isTonAppConnected: undefined,\n    }),\n  );\n});\n","import React, {\n  memo, useCallback, useEffect, useRef, useState,\n} from '../../../lib/teact/teact';\n\nimport { getActions, withGlobal } from '../../../global';\nimport { selectMnemonicForCheck } from '../../../global/actions/api/auth';\nimport buildClassName from '../../../util/buildClassName';\nimport { callApi } from '../../../api';\n\nimport useLang from '../../../hooks/useLang';\n\nimport MnemonicCheck from '../../auth/MnemonicCheck';\nimport MnemonicList from '../../auth/MnemonicList';\nimport SafetyRules from '../../auth/SafetyRules';\nimport Modal from '../../ui/Modal';\nimport ModalHeader from '../../ui/ModalHeader';\nimport PasswordForm from '../../ui/PasswordForm';\nimport Transition from '../../ui/Transition';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './BackupModal.module.scss';\n\ntype OwnProps = {\n  isOpen?: boolean;\n  onClose: () => void;\n};\n\ntype StateProps = {\n  currentAccountId?: string;\n};\n\nenum SLIDES {\n  confirm,\n  password,\n  mnemonic,\n  check,\n}\n\nfunction BackupModal({\n  isOpen, currentAccountId, onClose,\n}: OwnProps & StateProps) {\n  const { setIsBackupRequired } = getActions();\n\n  const lang = useLang();\n  const [currentSlide, setCurrentSlide] = useState<number>(SLIDES.confirm);\n  const [nextKey, setNextKey] = useState<number | undefined>(SLIDES.password);\n  const [checkIndexes, setCheckIndexes] = useState<number[]>([]);\n\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | undefined>();\n\n  const mnemonicRef = useRef<string[] | undefined>(undefined);\n\n  useEffect(() => {\n    mnemonicRef.current = undefined;\n  }, [isOpen]);\n\n  const handleSafetyConfirm = useCallback(() => {\n    setCurrentSlide(SLIDES.password);\n    setNextKey(SLIDES.mnemonic);\n  }, []);\n\n  const handlePasswordSubmit = useCallback(async (password: string) => {\n    setIsLoading(true);\n    mnemonicRef.current = await callApi('getMnemonic', currentAccountId!, password);\n    setIsLoading(false);\n\n    if (!mnemonicRef.current) {\n      setError('Wrong password, please try again');\n      return;\n    }\n\n    setNextKey(SLIDES.check);\n    setCurrentSlide(SLIDES.mnemonic);\n  }, [currentAccountId]);\n\n  const handleBackupErrorUpdate = useCallback(() => {\n    setError(undefined);\n  }, []);\n\n  const handleCheckMnemonic = useCallback(() => {\n    setCheckIndexes(selectMnemonicForCheck());\n    setCurrentSlide(SLIDES.check);\n    setNextKey(undefined);\n  }, []);\n\n  const handleRestartCheckMnemonic = useCallback(() => {\n    setCurrentSlide(SLIDES.mnemonic);\n    setNextKey(SLIDES.check);\n  }, []);\n\n  const handleModalClose = useCallback(() => {\n    setIsLoading(false);\n    setError(undefined);\n    setCurrentSlide(SLIDES.confirm);\n    setNextKey(SLIDES.password);\n  }, []);\n\n  const handleCheckMnemonicSubmit = useCallback(() => {\n    setIsBackupRequired({ isMnemonicChecked: true });\n    onClose();\n  }, [setIsBackupRequired, onClose]);\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case SLIDES.confirm:\n        return (\n          <SafetyRules\n            isActive={isActive}\n            onSubmit={handleSafetyConfirm}\n            onClose={onClose}\n          />\n        );\n\n      case SLIDES.password:\n        return (\n          <>\n            <ModalHeader title={lang('Enter Password')} onClose={onClose} />\n            <PasswordForm\n              isActive={isActive}\n              isLoading={isLoading}\n              error={error}\n              placeholder={lang('Enter your password')}\n              submitLabel={lang('Back Up')}\n              onUpdate={handleBackupErrorUpdate}\n              onSubmit={handlePasswordSubmit}\n              cancelLabel={lang('Cancel')}\n              onCancel={onClose}\n            />\n          </>\n        );\n\n      case SLIDES.mnemonic:\n        return (\n          <MnemonicList\n            mnemonic={mnemonicRef.current}\n            onNext={handleCheckMnemonic}\n            onClose={onClose}\n          />\n        );\n\n      case SLIDES.check:\n        return (\n          <MnemonicCheck\n            isActive={isActive}\n            isInModal\n            mnemonic={mnemonicRef.current}\n            checkIndexes={checkIndexes}\n            buttonLabel={lang('Done')}\n            onSubmit={handleCheckMnemonicSubmit}\n            onCancel={handleRestartCheckMnemonic}\n            onClose={onClose}\n          />\n        );\n    }\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      isSlideUp\n      isOpen={isOpen}\n      onClose={onClose}\n      onCloseAnimationEnd={handleModalClose}\n      dialogClassName={styles.modalDialog}\n    >\n      <Transition\n        name=\"pushSlide\"\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={currentSlide}\n        nextKey={nextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return { currentAccountId: global.currentAccountId };\n})(BackupModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"slKib4j4SyWP1xxZsh_h\"};","import React, {\n  memo, useCallback, useEffect, useLayoutEffect, useState,\n} from '../../../lib/teact/teact';\n\nimport { getActions, withGlobal } from '../../../global';\nimport renderText from '../../../global/helpers/renderText';\nimport buildClassName from '../../../util/buildClassName';\nimport captureKeyboardListeners from '../../../util/captureKeyboardListeners';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\nimport ModalHeader from '../../ui/ModalHeader';\nimport PasswordForm from '../../ui/PasswordForm';\nimport Transition from '../../ui/Transition';\n\nimport transferStyles from '../../transfer/Transfer.module.scss';\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './SignatureModal.module.scss';\n\ntype StateProps = {\n  dataHex?: string;\n  error?: string;\n  isSigned?: boolean;\n};\n\nconst enum SLIDES {\n  confirm,\n  password,\n  complete,\n}\n\nfunction SignatureModal({\n  dataHex, error, isSigned,\n}: StateProps) {\n  const { submitSignature, clearSignatureError, cancelSignature } = getActions();\n\n  const lang = useLang();\n  const [isModalOpen, openModal, closeModal] = useFlag(false);\n  const [currentSlide, setCurrentSlide] = useState<number>(SLIDES.confirm);\n  const [nextKey, setNextKey] = useState<number | undefined>(SLIDES.password);\n\n  useLayoutEffect(() => {\n    if (dataHex) {\n      setCurrentSlide(SLIDES.confirm);\n      setNextKey(SLIDES.password);\n      openModal();\n    }\n  }, [dataHex, openModal]);\n\n  useLayoutEffect(() => {\n    if (isSigned) {\n      setCurrentSlide(SLIDES.complete);\n      setNextKey(undefined);\n    }\n  }, [isSigned]);\n\n  useEffect(() => (\n    currentSlide === SLIDES.complete\n      ? captureKeyboardListeners({\n        onEnter: () => {\n          closeModal();\n        },\n      })\n      : undefined\n  ), [closeModal, currentSlide]);\n\n  const handleConfirm = useCallback(() => {\n    setCurrentSlide(SLIDES.password);\n    setNextKey(SLIDES.complete);\n  }, []);\n\n  const handlePasswordSubmit = useCallback((password: string) => {\n    submitSignature({ password });\n  }, [submitSignature]);\n\n  function renderConfirm() {\n    return (\n      <>\n        <ModalHeader title={lang('Confirmation')} onClose={closeModal} />\n        <div className={modalStyles.transitionContent}>\n          <div className={transferStyles.label}>{lang('Data to sign')}</div>\n          <div className={transferStyles.inputReadOnly}>\n            {dataHex}\n          </div>\n\n          <div className={styles.error}>\n            {renderText(lang('$signature_warning'))}\n          </div>\n          <div className={modalStyles.buttons}>\n            <Button onClick={closeModal}>{lang('Cancel')}</Button>\n            <Button isPrimary onClick={handleConfirm}>{lang('Sign')}</Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderPasswordForm(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Enter Password')} onClose={closeModal} />\n        <PasswordForm\n          isActive={isActive}\n          error={error}\n          placeholder={lang('Enter your password')}\n          submitLabel={lang('Sign')}\n          onUpdate={clearSignatureError}\n          onSubmit={handlePasswordSubmit}\n          cancelLabel={lang('Cancel')}\n          onCancel={closeModal}\n        />\n      </>\n    );\n  }\n\n  function renderComplete(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Done!')} onClose={closeModal} />\n\n        <div className={buildClassName(modalStyles.transitionContent, modalStyles.transitionContent_simple)}>\n          <AnimatedIconWithPreview\n            play={isActive}\n            noLoop={false}\n            nonInteractive\n            className={styles.sticker}\n            tgsUrl={ANIMATED_STICKERS_PATHS.thumbUp}\n            previewUrl={ANIMATED_STICKERS_PATHS.thumbUpPreview}\n          />\n          <div className={styles.description}>\n            {lang('Signing was confirmed!')}\n          </div>\n\n          <div className={modalStyles.buttons}>\n            <Button isPrimary onClick={closeModal}>{lang('Close')}</Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case SLIDES.confirm:\n        return renderConfirm();\n\n      case SLIDES.password:\n        return renderPasswordForm(isActive);\n\n      case SLIDES.complete:\n        return renderComplete(isActive);\n    }\n  }\n\n  return (\n    <Modal\n      isSlideUp\n      hasCloseButton\n      isOpen={isModalOpen}\n      onClose={closeModal}\n      onCloseAnimationEnd={cancelSignature}\n      dialogClassName={styles.modalDialog}\n    >\n      <Transition\n        name=\"pushSlide\"\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={currentSlide}\n        nextKey={nextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal(\n  (global): StateProps => {\n    const {\n      dataHex, error, isSigned,\n    } = global.currentSignature || {};\n\n    return {\n      dataHex, error, isSigned,\n    };\n  },\n)(SignatureModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"uBveGrDHTBsjRdTlxZxM\",\"error\":\"HH5TS1f_iXEFR_ORMDbE\",\"sticker\":\"klxWNfYKjV1ly4beZZqm\",\"description\":\"EokSsqQaT7r2SQMOE28U\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport { CARD_SECONDARY_VALUE_SYMBOL } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { formatCurrency, formatCurrencyExtended } from '../../util/formatNumber';\n\nimport styles from './TransactionAmount.module.scss';\n\ninterface OwnProps {\n  amount: number;\n  isIncoming?: boolean;\n  isScam?: boolean;\n  tokenSymbol?: string;\n  from?: number;\n  to?: number;\n}\n\nconst AMOUNT_PRECISION = 4;\n\nfunction TransactionAmount({\n  isIncoming,\n  isScam,\n  amount,\n  tokenSymbol,\n  from,\n  to,\n}: OwnProps) {\n  const [wholePart, fractionPart] = formatCurrencyExtended(amount, '').split('.');\n\n  const withBalanceChange = from !== undefined && to !== undefined;\n\n  return (\n    <div className={buildClassName(\n      styles.amount,\n      isIncoming && !isScam && styles.amount_operationPositive,\n      isScam && styles.amount_operationScam,\n    )}\n    >\n      {wholePart.trim().replace('\\u202F', '')}\n      {fractionPart && <span className={styles.amountFraction}>.{fractionPart.trim()}</span>}\n      <span className={styles.amountSymbol}>{tokenSymbol || CARD_SECONDARY_VALUE_SYMBOL}</span>\n\n      {withBalanceChange && (\n        <div className={styles.balanceChange}>\n          {formatCurrency(from, '', AMOUNT_PRECISION)}\n          &nbsp;&rarr;&nbsp;\n          {formatCurrency(to, '', AMOUNT_PRECISION)}\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default memo(TransactionAmount);\n","// extracted by mini-css-extract-plugin\nexport default {\"amount\":\"ji9d3Dz7lytlVd24iHs8\",\"amount_operationPositive\":\"SAbdRs_n5qQOO0XOhQqC\",\"amountOperationPositive\":\"SAbdRs_n5qQOO0XOhQqC\",\"amount_operationScam\":\"C5TufoVUBm2DfqLzKU1v\",\"amountOperationScam\":\"C5TufoVUBm2DfqLzKU1v\",\"amountSymbol\":\"v58LJXQ7x8BHrDHTW82f\",\"amountFraction\":\"l1BfhBxevsuwxEtX1a2Q\",\"balanceChange\":\"KMZa230uYhVgmcxN35ju\"};","// extracted by mini-css-extract-plugin\nexport default {\"passwordModal\":\"RdFgUt0W_1lY3PKB7a5H\",\"sticker\":\"FI6RmV4r7oehJufFCy4q\",\"footer\":\"nY9Tux6CJggqQTtqVO_a\",\"copyButtonWrapper\":\"WZoCHPeyLixkD2LAmuUv\",\"comment\":\"I0xYbxiq_JrhtZMqBAq6\",\"button\":\"bhs1iwfEorw2KJPeXVAV\",\"clockIcon\":\"Mpwr0ULbdlae9GdREKIA\",\"tonscan\":\"MZngIMG8VkWmqmHD58Ad\",\"unstakeNotice\":\"vb3BzCMpbrj8f0HOKQLS\",\"unstakeTime\":\"FMGTu1d8wyaIkhQMPoSW\",\"unstakeTimeIcon\":\"wwBNT9sYYn9BE8TwJNtj\",\"scamImage\":\"moDtIzzsTf9ZqsAOeLOX\",\"scamAddress\":\"s_m2kxOlKufOTGfoYp9k\"};","import React, { memo, useCallback, useState } from '../../../lib/teact/teact';\n\nimport type { ApiToken, ApiTransaction } from '../../../api/types';\n\nimport {\n  CARD_SECONDARY_VALUE_SYMBOL,\n  STAKING_CYCLE_DURATION_MS,\n  TON_TOKEN_SLUG,\n  TONSCAN_BASE_MAINNET_URL,\n  TONSCAN_BASE_TESTNET_URL,\n} from '../../../config';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\nimport { bigStrToHuman, getIsTxIdLocal } from '../../../global/helpers';\nimport { selectCurrentAccountState } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatFullDay, formatRelativeHumanDateTime, formatTime } from '../../../util/dateFormat';\nimport { callApi } from '../../../api';\n\nimport useCurrentOrPrev from '../../../hooks/useCurrentOrPrev';\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useShowTransition from '../../../hooks/useShowTransition';\nimport useSyncEffect from '../../../hooks/useSyncEffect';\n\nimport TransactionAmount from '../../common/TransactionAmount';\nimport AmountWithFeeTextField from '../../ui/AmountWithFeeTextField';\nimport Button from '../../ui/Button';\nimport InteractiveTextField from '../../ui/InteractiveTextField';\nimport Modal from '../../ui/Modal';\nimport PasswordForm from '../../ui/PasswordForm';\n\nimport transferStyles from '../../transfer/Transfer.module.scss';\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './TransactionModal.module.scss';\n\nimport scamImg from '../../../assets/scam.svg';\n\ntype StateProps = {\n  transaction?: ApiTransaction;\n  token?: ApiToken;\n  savedAddresses?: Record<string, string>;\n  isTestnet?: boolean;\n  startOfStakingCycle?: number;\n  endOfStakingCycle?: number;\n};\n\nconst EMPTY_HASH_VALUE = 'NOHASH';\n\nfunction TransactionModal({\n  transaction,\n  token,\n  savedAddresses,\n  isTestnet,\n  startOfStakingCycle,\n  endOfStakingCycle,\n}: StateProps) {\n  const {\n    startTransfer,\n    startStaking,\n    closeTransactionInfo,\n  } = getActions();\n\n  const lang = useLang();\n  const renderedTransaction = useCurrentOrPrev(transaction, true);\n  const [isModalOpen, setIsModalOpen] = useState<boolean>(false);\n  const [unstakeDate, setUnstakeDate] = useState<number>(Date.now() + STAKING_CYCLE_DURATION_MS);\n\n  const {\n    fromAddress,\n    toAddress,\n    amount,\n    comment,\n    encryptedComment,\n    fee,\n    txId,\n    isIncoming,\n    slug,\n    timestamp,\n  } = renderedTransaction || {};\n  const [, transactionHash] = (txId || '').split(':');\n  const isStaking = Boolean(transaction?.type);\n\n  const amountHuman = amount ? bigStrToHuman(amount, token?.decimals) : 0;\n  const address = isIncoming ? fromAddress : toAddress;\n  const addressName = (address && savedAddresses?.[address]) || transaction?.metadata?.name;\n  const isScam = Boolean(transaction?.metadata?.isScam);\n\n  const [decryptedComment, setDecryptedComment] = useState<string>();\n  const [isPasswordModalOpen, openPasswordModal, closePasswordModal] = useFlag();\n  const [passwordError, setPasswordError] = useState<string>();\n\n  const tonscanBaseUrl = isTestnet ? TONSCAN_BASE_TESTNET_URL : TONSCAN_BASE_MAINNET_URL;\n  const tonscanTransactionUrl = transactionHash && transactionHash !== EMPTY_HASH_VALUE\n    ? `${tonscanBaseUrl}tx/${transactionHash}`\n    : undefined;\n\n  const withUnstakeTimer = Boolean(\n    transaction?.type === 'unstakeRequest' && startOfStakingCycle && transaction.timestamp >= startOfStakingCycle,\n  );\n  const {\n    shouldRender: shouldRenderUnstakeTimer,\n    transitionClassNames: unstakeTimerClassNames,\n  } = useShowTransition(withUnstakeTimer);\n\n  useSyncEffect(() => {\n    if (transaction) {\n      setIsModalOpen(true);\n      setDecryptedComment(undefined);\n    }\n  }, [transaction]);\n\n  useSyncEffect(() => {\n    if (endOfStakingCycle) {\n      setUnstakeDate(endOfStakingCycle);\n    }\n  }, [endOfStakingCycle]);\n\n  const handleCloseModal = useCallback(() => {\n    setIsModalOpen(false);\n  }, []);\n\n  const handleSendClick = useCallback(() => {\n    handleCloseModal();\n    startTransfer({\n      tokenSlug: slug || TON_TOKEN_SLUG,\n      toAddress: address,\n      amount: Math.abs(amountHuman),\n      comment: !isIncoming ? comment : undefined,\n    });\n  }, [handleCloseModal, startTransfer, slug, address, amountHuman, isIncoming, comment]);\n\n  const handleStartStakingClick = useCallback(() => {\n    handleCloseModal();\n    startStaking();\n  }, [handleCloseModal, startStaking]);\n\n  function renderHeader() {\n    const isLocal = txId && getIsTxIdLocal(txId);\n\n    return (\n      <>\n        {timestamp ? `${formatFullDay(lang.code!, timestamp)}, ${formatTime(timestamp)}` : lang('Transaction Info')}\n        {isLocal && (\n          <i className={buildClassName(styles.clockIcon, 'icon-clock')} title={lang('Transaction in progress')} />\n        )}\n        {isScam && <img src={scamImg} alt={lang('Scam')} className={styles.scamImage} />}\n      </>\n    );\n  }\n\n  function renderFee() {\n    if (isIncoming || !fee) {\n      return undefined;\n    }\n\n    return (\n      <AmountWithFeeTextField\n        label={lang('Fee')}\n        amount={bigStrToHuman(fee)}\n        currency={CARD_SECONDARY_VALUE_SYMBOL}\n      />\n    );\n  }\n\n  const spoilerCallback = useLastCallback(() => {\n    openPasswordModal();\n  });\n\n  const handlePasswordSubmit = useLastCallback(async (password: string) => {\n    const result = await callApi(\n      'decryptComment',\n      getGlobal().currentAccountId!,\n      encryptedComment!,\n      fromAddress!,\n      password,\n    );\n\n    if (!result) {\n      setPasswordError('Wrong password, please try again');\n      return;\n    }\n\n    closePasswordModal();\n    setDecryptedComment(result);\n  });\n\n  const handlePasswordUpdate = useLastCallback(() => {\n    setPasswordError(undefined);\n  });\n\n  function renderComment() {\n    if ((!comment && !encryptedComment) || transaction?.type) {\n      return undefined;\n    }\n\n    const spoiler = encryptedComment\n      ? lang('Message is encrypted.')\n      : isScam\n        ? lang('Scam comment is hidden.')\n        : undefined;\n\n    return (\n      <>\n        <div className={transferStyles.label}>{lang('Comment')}</div>\n        <InteractiveTextField\n          text={encryptedComment ? decryptedComment : comment}\n          spoiler={spoiler}\n          spoilerRevealText={encryptedComment ? lang('Decrypt') : lang('Display')}\n          spoilerCallback={spoilerCallback}\n          copyNotification={lang('Comment was copied!')}\n          className={styles.copyButtonWrapper}\n          textClassName={styles.comment}\n        />\n        {encryptedComment && (\n          <Modal\n            isCompact\n            isOpen={isPasswordModalOpen}\n            onClose={closePasswordModal}\n            title={lang('Enter Password')}\n            contentClassName={styles.passwordModal}\n          >\n            <PasswordForm\n              isActive={isPasswordModalOpen}\n              submitLabel={lang('Send')}\n              placeholder={lang('Enter your password')}\n              error={passwordError}\n              onSubmit={handlePasswordSubmit}\n              onCancel={closePasswordModal}\n              onUpdate={handlePasswordUpdate}\n            />\n          </Modal>\n        )}\n      </>\n    );\n  }\n\n  function renderUnstakeTimer() {\n    return (\n      <div className={buildClassName(styles.unstakeTime, unstakeTimerClassNames)}>\n        <i className={buildClassName(styles.unstakeTimeIcon, 'icon-clock')} />\n        {lang('$unstaking_when_receive', {\n          time: <strong>{formatRelativeHumanDateTime(lang.code, unstakeDate)}</strong>,\n        })}\n      </div>\n    );\n  }\n\n  return (\n    <Modal\n      isSlideUp\n      hasCloseButton\n      title={renderHeader()}\n      isOpen={isModalOpen}\n      onClose={handleCloseModal}\n      onCloseAnimationEnd={closeTransactionInfo}\n    >\n      <div className={modalStyles.transitionContent}>\n        {tonscanTransactionUrl && (\n          <a\n            href={tonscanTransactionUrl}\n            target=\"_blank\"\n            rel=\"noreferrer noopener\"\n            className={styles.tonscan}\n            title={lang('View Transaction on TON Explorer')}\n          >\n            <i className=\"icon-tonscan\" aria-hidden />\n          </a>\n        )}\n        <TransactionAmount\n          isIncoming={isIncoming}\n          isScam={isScam}\n          amount={amountHuman}\n          tokenSymbol={token?.symbol}\n        />\n\n        <div className={transferStyles.label}>{lang(isIncoming ? 'Sender' : 'Recipient')}</div>\n        <InteractiveTextField\n          addressName={addressName}\n          address={address!}\n          copyNotification={lang('Address was copied!')}\n          className={styles.copyButtonWrapper}\n          textClassName={isScam ? styles.scamAddress : undefined}\n        />\n\n        {renderFee()}\n        {renderComment()}\n        {isStaking && isIncoming && !shouldRenderUnstakeTimer && (\n          <div className={styles.unstakeNotice}>{lang('Unstaked successfully')}</div>\n        )}\n        {shouldRenderUnstakeTimer && renderUnstakeTimer()}\n\n        <div className={styles.footer}>\n          {!isStaking && (\n            <Button onClick={handleSendClick} className={styles.button}>\n              {lang(isIncoming ? 'Send Back' : 'Repeat')}\n            </Button>\n          )}\n          {isStaking && (\n            <Button onClick={handleStartStakingClick} className={styles.button}>\n              {lang('Stake Again')}\n            </Button>\n          )}\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(\n  withGlobal((global): StateProps => {\n    const accountState = selectCurrentAccountState(global);\n\n    const txId = accountState?.currentTransactionId;\n    const transaction = txId ? accountState?.transactions?.byTxId[txId] : undefined;\n    const token = transaction?.slug ? global.tokenInfo?.bySlug[transaction.slug] : undefined;\n    const { startOfCycle: startOfStakingCycle, endOfCycle: endOfStakingCycle } = accountState?.poolState || {};\n    const savedAddresses = accountState?.savedAddresses;\n\n    return {\n      transaction,\n      token,\n      savedAddresses,\n      isTestnet: global.settings.isTestnet,\n      startOfStakingCycle,\n      endOfStakingCycle,\n    };\n  })(TransactionModal),\n);\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  useCallback, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport { IS_ELECTRON } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport captureEscKeyListener from '../../util/captureEscKeyListener';\n\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport Portal from './Portal';\n\nimport styles from './Notification.module.scss';\n\ntype OwnProps = {\n  containerId?: string;\n  message: string;\n  icon?: string;\n  onDismiss: () => void;\n};\n\nconst DURATION_MS = 5000;\nconst ANIMATION_DURATION = 250;\n\nconst Notification: FC<OwnProps> = ({\n  icon, message, containerId, onDismiss,\n}) => {\n  const [isOpen, setIsOpen] = useState(true);\n  // eslint-disable-next-line no-null/no-null\n  const timerRef = useRef<number | undefined>(null);\n\n  const { transitionClassNames } = useShowTransition(isOpen);\n\n  const closeAndDismiss = useCallback(() => {\n    setIsOpen(false);\n    setTimeout(onDismiss, ANIMATION_DURATION);\n  }, [onDismiss]);\n\n  useEffect(() => (isOpen ? captureEscKeyListener(closeAndDismiss) : undefined), [isOpen, closeAndDismiss]);\n\n  useEffect(() => {\n    timerRef.current = window.setTimeout(closeAndDismiss, DURATION_MS);\n\n    return () => {\n      if (timerRef.current) {\n        clearTimeout(timerRef.current);\n        timerRef.current = undefined;\n      }\n    };\n  }, [closeAndDismiss]);\n\n  const handleMouseEnter = useCallback(() => {\n    if (timerRef.current) {\n      clearTimeout(timerRef.current);\n      timerRef.current = undefined;\n    }\n  }, []);\n\n  const handleMouseLeave = useCallback(() => {\n    timerRef.current = window.setTimeout(closeAndDismiss, DURATION_MS);\n  }, [closeAndDismiss]);\n\n  return (\n    <Portal\n      className={buildClassName(styles.container, IS_ELECTRON && styles.container_electron)}\n      containerId={containerId}\n    >\n      <div\n        className={buildClassName(styles.notification, transitionClassNames)}\n        onClick={closeAndDismiss}\n        onMouseEnter={handleMouseEnter}\n        onMouseLeave={handleMouseLeave}\n      >\n        <div className={styles.content}>\n          {icon && <i className={buildClassName(styles.icon, icon)} aria-hidden />}\n          {message}\n        </div>\n      </div>\n    </Portal>\n  );\n};\n\nexport default Notification;\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"HbA7Chmk_bmSgSZbbCBJ\",\"container_electron\":\"UJ6HDRloumH46a38jtmC\",\"containerElectron\":\"UJ6HDRloumH46a38jtmC\",\"notification\":\"yCy42ozuTWBu8qXhV0sQ\",\"content\":\"kWudRGFVTnaju1xbAkwK\",\"icon\":\"fRPrvD0Mj4vyP5OhYeki\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport type { NotificationType } from '../../global/types';\n\nimport { getActions, withGlobal } from '../../global';\nimport { pick } from '../../util/iteratees';\n\nimport Notification from '../ui/Notification';\n\ntype StateProps = {\n  notifications: NotificationType[];\n};\n\nfunction Notifications({ notifications }: StateProps) {\n  const { dismissNotification } = getActions();\n\n  if (!notifications.length) {\n    return undefined;\n  }\n\n  return (\n    <div id=\"Notifications\">\n      {notifications.map(({ message, icon }) => (\n        <Notification\n          icon={icon}\n          message={message}\n          // eslint-disable-next-line react/jsx-no-bind\n          onDismiss={dismissNotification}\n        />\n      ))}\n    </div>\n  );\n}\n\nexport default memo(withGlobal(\n  (global): StateProps => pick(global, ['notifications']),\n)(Notifications));\n","// extracted by mini-css-extract-plugin\nexport default {\"checkbox\":\"Yxm2RKZcXzjRRt9m35xF\",\"warning\":\"Yq1uIFTURed5FL3IrYsu\",\"accountLink\":\"vMHfkYapdQ4XjjGpeK_w\",\"accountLink_inner\":\"u93wALcslIt1NqU9Nc07\",\"accountLinkInner\":\"u93wALcslIt1NqU9Nc07\",\"penultimate\":\"ldmIZmU2F47C_xXNEo7d\"};","import React, {\n  memo, useCallback, useEffect, useMemo, useState,\n} from '../../../lib/teact/teact';\n\nimport type { Account, AccountState } from '../../../global/types';\n\nimport { MNEMONIC_COUNT } from '../../../config';\nimport { getActions, withGlobal } from '../../../global';\nimport renderText from '../../../global/helpers/renderText';\nimport { selectCurrentAccountState, selectNetworkAccounts } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { shortenAddress } from '../../../util/shortenAddress';\n\nimport useLang from '../../../hooks/useLang';\n\nimport Button from '../../ui/Button';\nimport Checkbox from '../../ui/Checkbox';\nimport Modal from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './LogOutModal.module.scss';\n\ninterface OwnProps {\n  isOpen?: boolean;\n  onLogOut: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  currentAccountId: string;\n  hasManyAccounts: boolean;\n  accounts: Record<string, Account>;\n  accountStates: Record<string, AccountState>;\n  isBackupRequired?: boolean;\n}\n\ninterface LinkAccount {\n  id: string;\n  title: string;\n}\n\nfunction LogOutModal({\n  isOpen,\n  currentAccountId,\n  hasManyAccounts,\n  accounts,\n  accountStates,\n  isBackupRequired,\n  onLogOut,\n  onClose,\n}: OwnProps & StateProps) {\n  const { signOut, switchAccount } = getActions();\n\n  const lang = useLang();\n  const [isLogOutFromAllAccounts, setIsLogOutFromAllAccounts] = useState<boolean>(false);\n\n  const accountsWithoutBackups = useMemo(() => {\n    if (!hasManyAccounts) {\n      return [];\n    }\n\n    return Object.entries(accounts).reduce<LinkAccount[]>((acc, [id, { title, address }]) => {\n      if (id !== currentAccountId && accountStates[id]?.isBackupRequired) {\n        acc.push({\n          id,\n          title: title || shortenAddress(address)!,\n        });\n      }\n\n      return acc;\n    }, []);\n  }, [accounts, accountStates, currentAccountId, hasManyAccounts]);\n\n  useEffect(() => {\n    if (isOpen) {\n      setIsLogOutFromAllAccounts(false);\n    }\n  }, [isOpen]);\n\n  const handleSwitchAccount = (accountId: string) => {\n    onClose();\n    switchAccount({ accountId });\n  };\n\n  const handleLogOut = useCallback(() => {\n    onLogOut();\n    signOut({ isFromAllAccounts: isLogOutFromAllAccounts });\n  }, [onLogOut, isLogOutFromAllAccounts, signOut]);\n\n  function renderAccountLink(account: LinkAccount, idx: number) {\n    const { id, title } = account;\n    const fullClassName = buildClassName(\n      styles.accountLink,\n      idx + 2 === accountsWithoutBackups.length && styles.penultimate,\n    );\n\n    return (\n      <span className={fullClassName}>\n        <a\n          key={id}\n          href=\"#\"\n          className={styles.accountLink_inner}\n          onClick={(e: React.MouseEvent) => {\n            e.preventDefault();\n            handleSwitchAccount(id);\n          }}\n        >\n          {title}\n        </a>\n      </span>\n    );\n  }\n\n  function renderBackupWarning() {\n    return (\n      <p className={modalStyles.text}>\n        <b className={styles.warning}>{lang('Warning!')}</b> {lang('$logout_without_backup_warning')}\n      </p>\n    );\n  }\n\n  function renderBackupForAccountsWarning() {\n    return (\n      <p className={modalStyles.text}>\n        <b className={styles.warning}>{lang('Warning!')}</b>{' '}\n        {lang('$logout_accounts_without_backup_warning', {\n          links: <>{accountsWithoutBackups.map(renderAccountLink)}</>,\n        })}\n      </p>\n    );\n  }\n\n  const shouldRenderWarningForAnotherAccounts = isLogOutFromAllAccounts && accountsWithoutBackups.length > 0;\n  const shouldRenderWarningForCurrentAccount = isBackupRequired && !shouldRenderWarningForAnotherAccounts;\n\n  return (\n    <Modal isOpen={isOpen} isCompact onClose={onClose} onCloseAnimationEnd={onClose} title={lang('Log Out')}>\n      <p className={buildClassName(modalStyles.text, modalStyles.text_noExtraMargin)}>\n        {renderText(lang('$logout_warning', MNEMONIC_COUNT))}\n      </p>\n      {hasManyAccounts && (\n        <Checkbox\n          id=\"logount_all_accounts\"\n          className={styles.checkbox}\n          checked={isLogOutFromAllAccounts}\n          onChange={setIsLogOutFromAllAccounts}\n        >\n          {renderText(lang('$logout_confirm'))}\n        </Checkbox>\n      )}\n\n      {shouldRenderWarningForCurrentAccount && renderBackupWarning()}\n      {shouldRenderWarningForAnotherAccounts && renderBackupForAccountsWarning()}\n\n      <div className={modalStyles.buttons}>\n        <Button onClick={onClose} className={modalStyles.button}>\n          {lang('Cancel')}\n        </Button>\n        <Button isDestructive onClick={handleLogOut} className={modalStyles.button}>\n          {lang('Exit')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>((global): StateProps => {\n    const accounts = selectNetworkAccounts(global) || {};\n    const currentAccountState = selectCurrentAccountState(global);\n    const accountIds = Object.keys(accounts);\n    const hasManyAccounts = accountIds.length > 1;\n\n    return {\n      currentAccountId: global.currentAccountId!,\n      hasManyAccounts,\n      accounts,\n      accountStates: global.byAccountId,\n      isBackupRequired: currentAccountState?.isBackupRequired,\n    };\n  })(LogOutModal),\n);\n","import type { ChangeEvent } from 'react';\nimport React, { memo, useCallback } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport styles from './Switcher.module.scss';\n\ntype OwnProps = {\n  id?: string;\n  name?: string;\n  value?: string;\n  label: string;\n  checked?: boolean;\n  className?: string;\n  onChange?: (e: ChangeEvent<HTMLInputElement>) => void;\n  onCheck?: (isChecked: boolean) => void;\n};\n\nfunction Switcher({\n  id,\n  name,\n  value,\n  label,\n  checked = false,\n  className,\n  onChange,\n  onCheck,\n}: OwnProps) {\n  const handleChange = useCallback((e: ChangeEvent<HTMLInputElement>) => {\n    if (onChange) {\n      onChange(e);\n    }\n\n    if (onCheck) {\n      onCheck(e.currentTarget.checked);\n    }\n  }, [onChange, onCheck]);\n\n  return (\n    <label className={buildClassName(styles.container, className)} title={label}>\n      <input\n        type=\"checkbox\"\n        id={id}\n        name={name}\n        value={value}\n        checked={checked}\n        className={styles.input}\n        onChange={handleChange}\n      />\n      <span className={styles.widget} />\n    </label>\n  );\n}\n\nexport default memo(Switcher);\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"qCSUKKJ0bMjF1MqIUEMM\",\"input\":\"dGA8bleTnfBrTH4xCLkA\",\"widget\":\"IZxCIQCiTPf175PMlaXh\"};","import type { AnimationLevel } from '../global/types';\n\nimport { ANIMATION_LEVEL_MAX, ANIMATION_LEVEL_MED, ANIMATION_LEVEL_MIN } from '../config';\n\nconst ANIMATION_LEVEL_OPTIONS = [\n  ANIMATION_LEVEL_MIN,\n  ANIMATION_LEVEL_MED,\n  ANIMATION_LEVEL_MAX,\n];\n\nexport default function switchAnimationLevel(level: AnimationLevel) {\n  const levelClassName = `animation-level-${level}`;\n  if (document.documentElement.classList.contains(levelClassName)) {\n    return;\n  }\n\n  ANIMATION_LEVEL_OPTIONS.forEach((currentLevel) => {\n    document.documentElement.classList.toggle(`animation-level-${currentLevel}`, currentLevel === level);\n  });\n}\n","import type { Theme } from '../global/types';\n\nconst prefersDark = window.matchMedia('(prefers-color-scheme: dark)');\nlet currentTheme: Theme;\n\nexport default function switchTheme(theme: Theme) {\n  currentTheme = theme;\n  setThemeValue();\n  setThemeColor();\n}\n\nfunction setThemeValue() {\n  document.documentElement.classList.toggle(\n    'theme-dark',\n    currentTheme === 'dark' || (currentTheme === 'system' && prefersDark.matches),\n  );\n}\n\nfunction setThemeColor() {\n  const color = getComputedStyle(document.documentElement)\n    .getPropertyValue('--color-background-second');\n\n  document\n    .querySelector('meta[name=\"theme-color\"]')\n    ?.setAttribute('content', color);\n}\n\nprefersDark.addEventListener('change', setThemeValue);\n","import React, { memo } from '../../lib/teact/teact';\n\nimport type { AnimationLevel, Theme } from '../../global/types';\n\nimport { ANIMATION_LEVEL_MAX, ANIMATION_LEVEL_MIN } from '../../config';\nimport { getActions } from '../../global';\nimport buildClassName from '../../util/buildClassName';\nimport switchAnimationLevel from '../../util/switchAnimationLevel';\nimport switchTheme from '../../util/switchTheme';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport Switcher from '../ui/Switcher';\n\nimport styles from './Settings.module.scss';\n\nimport darkThemeImg from '../../assets/theme/theme_dark.png';\nimport lightThemeImg from '../../assets/theme/theme_light.png';\nimport systemThemeImg from '../../assets/theme/theme_system.png';\n\ninterface OwnProps {\n  theme: Theme;\n  handleBackClick: () => void;\n  animationLevel: AnimationLevel;\n  canPlaySounds?: boolean;\n  isInsideModal?: boolean;\n}\n\nconst SWITCH_THEME_DURATION_MS = 300;\n\nfunction SettingsAppearance({\n  theme,\n  handleBackClick,\n  animationLevel,\n  canPlaySounds,\n  isInsideModal,\n}: OwnProps) {\n  const {\n    setTheme,\n    setAnimationLevel,\n    toggleCanPlaySounds,\n  } = getActions();\n  const lang = useLang();\n\n  const THEME_OPTIONS = [{\n    value: 'light',\n    name: lang('Light'),\n    icon: lightThemeImg,\n  }, {\n    value: 'system',\n    name: lang('System'),\n    icon: systemThemeImg,\n  }, {\n    value: 'dark',\n    name: lang('Dark'),\n    icon: darkThemeImg,\n  }];\n\n  const handleThemeChange = useLastCallback((newTheme: string) => {\n    document.documentElement.classList.add('no-transitions');\n    setTheme({ theme: newTheme as Theme });\n    switchTheme(newTheme as Theme);\n    setTimeout(() => {\n      document.documentElement.classList.remove('no-transitions');\n    }, SWITCH_THEME_DURATION_MS);\n  });\n\n  const handleAnimationLevelToggle = useLastCallback(() => {\n    const level = animationLevel === ANIMATION_LEVEL_MIN ? ANIMATION_LEVEL_MAX : ANIMATION_LEVEL_MIN;\n    setAnimationLevel({ level });\n    switchAnimationLevel(level);\n  });\n\n  const handleCanPlaySoundToggle = useLastCallback(() => {\n    toggleCanPlaySounds({ isEnabled: !canPlaySounds });\n  });\n\n  function renderThemes() {\n    return THEME_OPTIONS.map(({ name, value, icon }) => {\n      return (\n        <div\n          key={value}\n          className={buildClassName(styles.theme, value === theme && styles.theme_active)}\n          onClick={() => handleThemeChange(value)}\n        >\n          <div className={buildClassName(styles.themeIcon, value === theme && styles.themeIcon_active)}>\n            <img src={icon} alt={name} className={styles.themeImg} />\n          </div>\n          <span>{name}</span>\n        </div>\n      );\n    });\n  }\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader title={lang('Appearance')} onBackButtonClick={handleBackClick} />\n      ) : (\n        <div className={styles.header}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Appearance')}</span>\n        </div>\n      )}\n      <div className={buildClassName(styles.content, 'custom-scroll')}>\n        <p className={styles.blockTitle}>{lang('Theme')}</p>\n        <div className={styles.settingsBlock}>\n          <div className={styles.themeWrapper}>\n            {renderThemes()}\n          </div>\n        </div>\n        <p className={styles.blockTitle}>{lang('Other')}</p>\n        <div className={styles.settingsBlock}>\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleAnimationLevelToggle}>\n            {lang('Enable Animations')}\n\n            <Switcher\n              className={styles.menuSwitcher}\n              label={lang('Enable Animations')}\n              checked={animationLevel !== ANIMATION_LEVEL_MIN}\n            />\n          </div>\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleCanPlaySoundToggle}>\n            {lang('Play Sounds')}\n\n            <Switcher\n              className={styles.menuSwitcher}\n              label={lang('Play Sounds')}\n              checked={canPlaySounds}\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(SettingsAppearance);\n","import type { FC } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport stopEvent from '../../util/stopEvent';\n\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport styles from './Tooltip.module.scss';\n\ntype OwnProps = {\n  isOpen?: boolean;\n  message: string;\n  className?: string;\n};\n\nconst Tooltip: FC<OwnProps> = ({\n  isOpen,\n  message,\n  className,\n}) => {\n  const { transitionClassNames, shouldRender } = useShowTransition(isOpen);\n\n  if (!shouldRender) {\n    return undefined;\n  }\n\n  return (\n    <div className={buildClassName(styles.container, transitionClassNames)} onClick={stopEvent}>\n      <div className={buildClassName(styles.tooltip, className)}>\n        {message}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(Tooltip);\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"MYAEJnfiCLuI4Q4K34LH\",\"tooltip\":\"o5DPjh6JgrPhC5ODnda7\"};","import React, {\n  memo, useState,\n} from '../../../lib/teact/teact';\n\nimport type { UserToken } from '../../../global/types';\n\nimport { getActions } from '../../../global';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useSyncEffect from '../../../hooks/useSyncEffect';\n\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './DeleteTokenModal.module.scss';\n\ninterface OwnProps {\n  token?: UserToken;\n}\n\nfunction DeleteTokenModal({ token }: OwnProps) {\n  const {\n    deleteToken,\n  } = getActions();\n\n  const [isOpen, setIsOpen] = useState(false);\n  const lang = useLang();\n\n  useSyncEffect(() => {\n    if (token) {\n      setIsOpen(true);\n    }\n  }, [token]);\n\n  const handleClose = useLastCallback(() => {\n    setIsOpen(false);\n  });\n\n  const handleDeleteToken = useLastCallback(() => {\n    handleClose();\n    deleteToken({ slug: token!.slug });\n  });\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      isCompact\n      onClose={handleClose}\n      title={lang('Delete Token')}\n      contentClassName={styles.content}\n    >\n      <p className={styles.description}>\n        {lang('Are you sure you want to delete?', { token: <strong>{token?.name}</strong> })}\n      </p>\n      <div className={modalStyles.buttons}>\n        <Button onClick={handleClose} className={modalStyles.button}>{lang('Cancel')}</Button>\n        <Button isDestructive onClick={handleDeleteToken} className={modalStyles.button}>\n          {lang('Delete')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(DeleteTokenModal);\n","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"_7kTrqvKosWJiGI4pLjP\",\"description\":\"Ejk4Foxy9_R65MQIHuCz\"};","import type { RefObject } from 'react';\nimport React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport buildStyle from '../../util/buildStyle';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport styles from './Draggable.module.scss';\n\ntype TPoint = {\n  x: number;\n  y: number;\n};\n\ntype Offset = {\n  top?: number;\n  bottom?: number;\n  left?: number;\n  right?: number;\n};\n\ntype DraggableState = {\n  isDragging: boolean;\n  origin: TPoint;\n  translation: TPoint;\n  width?: number;\n  height?: number;\n};\n\ntype OwnProps = {\n  children: React.ReactNode;\n  onDrag: (translation: TPoint, id: number | string) => void;\n  onDragEnd: NoneToVoidFunction;\n  id: number | string;\n  style?: string;\n  knobStyle?: string;\n  isDisabled?: boolean;\n  offset?: Offset;\n  parentRef?: RefObject<HTMLDivElement>;\n  className?: string;\n  onClick: NoneToVoidFunction;\n};\n\nconst ZERO_POINT: TPoint = { x: 0, y: 0 };\n\nconst DEFAULT_OFFSET: Offset = {\n  top: 0,\n  bottom: 0,\n  left: 0,\n  right: 0,\n};\n\nfunction Draggable({\n  children,\n  id,\n  onDrag,\n  onDragEnd,\n  style: externalStyle,\n  knobStyle,\n  isDisabled,\n  offset = DEFAULT_OFFSET,\n  parentRef,\n  className,\n  onClick,\n}: OwnProps) {\n  const lang = useLang();\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const buttonRef = useRef<HTMLDivElement>(null);\n\n  const [state, setState] = useState<DraggableState>({\n    isDragging: false,\n    origin: ZERO_POINT,\n    translation: ZERO_POINT,\n  });\n\n  const handleMouseDown = (e: React.MouseEvent) => {\n    const { x, y } = getClientCoordinate(e);\n\n    setState({\n      ...state,\n      isDragging: true,\n      origin: { x, y },\n      width: ref.current?.offsetWidth,\n      height: ref.current?.offsetHeight,\n    });\n  };\n\n  const handleTouchStart = useLastCallback((e: TouchEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n    const { x, y } = getClientCoordinate(e);\n\n    setState({\n      ...state,\n      isDragging: true,\n      origin: { x, y },\n      width: ref.current?.offsetWidth,\n      height: ref.current?.offsetHeight,\n    });\n  });\n\n  const handleMouseMove = useLastCallback((e: MouseEvent | TouchEvent) => {\n    const { x, y } = getClientCoordinate(e);\n\n    const translation = {\n      x: x - state.origin.x,\n      y: y - state.origin.y,\n    };\n\n    if (parentRef && parentRef?.current && ref.current) {\n      const {\n        top = 0, right = 0, bottom = 0, left = 0,\n      } = offset;\n      const parentRect = parentRef.current.getBoundingClientRect();\n      const draggableRect = ref.current.getBoundingClientRect();\n\n      const minX = -ref.current.offsetLeft + left;\n      const maxX = parentRect.width - draggableRect.width - ref.current.offsetLeft + right;\n\n      const minY = -ref.current.offsetTop + top;\n      const maxY = parentRect.height - draggableRect.height - ref.current.offsetTop + bottom;\n\n      translation.x = Math.max(minX, Math.min(translation.x, maxX));\n      translation.y = Math.max(minY, Math.min(translation.y, maxY));\n    }\n\n    setState((current) => ({\n      ...current,\n      translation,\n    }));\n\n    onDrag(translation, id);\n  });\n\n  const handleMouseUp = useLastCallback(() => {\n    setState((current) => ({\n      ...current,\n      isDragging: false,\n      width: undefined,\n      height: undefined,\n    }));\n\n    onDragEnd();\n  });\n\n  useEffect(() => {\n    if (state.isDragging && isDisabled) {\n      setState((current) => ({\n        ...current,\n        isDragging: false,\n        width: undefined,\n        height: undefined,\n      }));\n    }\n  }, [isDisabled, state.isDragging]);\n\n  const handleClick = useLastCallback(() => {\n    if (state.isDragging) {\n      return;\n    }\n\n    onClick();\n  });\n\n  useEffect(() => {\n    const dragButtonRef = buttonRef.current;\n\n    if (dragButtonRef) {\n      dragButtonRef.addEventListener('touchstart', handleTouchStart, { passive: false });\n    }\n\n    if (state.isDragging) {\n      window.addEventListener('touchmove', handleMouseMove);\n      window.addEventListener('mousemove', handleMouseMove);\n      window.addEventListener('touchend', handleMouseUp);\n      window.addEventListener('touchcancel', handleMouseUp);\n      window.addEventListener('mouseup', handleMouseUp);\n    } else {\n      window.removeEventListener('touchmove', handleMouseMove);\n      window.removeEventListener('mousemove', handleMouseMove);\n      window.removeEventListener('touchend', handleMouseUp);\n      window.removeEventListener('touchcancel', handleMouseUp);\n      window.removeEventListener('mouseup', handleMouseUp);\n\n      setState((current) => ({\n        ...current,\n        translation: ZERO_POINT,\n      }));\n    }\n\n    return () => {\n      if (state.isDragging) {\n        window.removeEventListener('touchmove', handleMouseMove);\n        window.removeEventListener('mousemove', handleMouseMove);\n        window.removeEventListener('touchend', handleMouseUp);\n        window.removeEventListener('touchcancel', handleMouseUp);\n        window.removeEventListener('mouseup', handleMouseUp);\n\n        if (dragButtonRef) {\n          dragButtonRef.removeEventListener('touchstart', handleTouchStart);\n        }\n      }\n    };\n  }, [handleMouseMove, handleMouseUp, handleTouchStart, state.isDragging, buttonRef]);\n\n  const fullClassName = buildClassName(styles.container, className, state.isDragging && styles.isDragging);\n\n  const cssStyles = useMemo(() => {\n    return buildStyle(\n      state.isDragging && `transform: translate(${state.translation.x}px, ${state.translation.y}px)`,\n      state.width ? `width: ${state.width}px` : undefined,\n      state.height ? `height: ${state.height}px` : undefined,\n      externalStyle,\n    );\n  }, [externalStyle, state.height, state.isDragging, state.translation.x, state.translation.y, state.width]);\n\n  return (\n    <div style={cssStyles} className={fullClassName} ref={ref} onClick={handleClick}>\n      {children}\n\n      {!isDisabled && (\n        <div\n          ref={buttonRef}\n          aria-label={lang('i18n_dragToSort')}\n          tabIndex={0}\n          role=\"button\"\n          className={buildClassName(styles.knob, 'div-button', 'draggable-knob')}\n          onMouseDown={handleMouseDown}\n          style={knobStyle}\n        >\n          <i className=\"icon icon-sort\" aria-hidden />\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default memo(Draggable);\n\nfunction getClientCoordinate(e: MouseEvent | TouchEvent | React.MouseEvent | React.TouchEvent) {\n  let x;\n  let y;\n\n  if ('touches' in e) {\n    x = e.touches[0].clientX;\n    y = e.touches[0].clientY;\n  } else {\n    x = e.clientX;\n    y = e.clientY;\n  }\n\n  return { x, y };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"C9QYXaRLeCEFngOBl4S3\",\"isDragging\":\"vhGsRt79lQzzuXny9KG8\",\"knob\":\"oGgH1RraeCPayQnxA8C_\"};","import React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport type { UserToken } from '../../global/types';\n\nimport { getActions, withGlobal } from '../../global';\nimport buildClassName from '../../util/buildClassName';\nimport captureEscKeyListener from '../../util/captureEscKeyListener';\nimport { formatCurrencyForBigValue } from '../../util/formatNumber';\nimport { getIsAddressValid } from '../../util/getIsAddressValid';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useScrolledState from '../../hooks/useScrolledState';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport Portal from '../ui/Portal';\nimport Transition from '../ui/Transition';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  tokens?: UserToken[];\n  position?: {\n    top: number;\n    right: number;\n    left: number;\n    width: number;\n  };\n  onClose: NoneToVoidFunction;\n  onSelect: (token: UserToken) => void;\n}\n\ninterface StateProps {\n  token?: UserToken;\n  isLoading?: boolean;\n}\n\nenum SearchState {\n  Popular,\n  Loading,\n  Token,\n  Empty,\n}\n\nconst SLIDE_ANIMATION_DURATION_MS = 250;\n\nconst OFFSET_TOP = 4;\nconst OFFSET_RIGHT = 8;\nconst OFFSET_BOTTOM = 16;\n\nfunction SelectTokens({\n  token,\n  tokens,\n  isOpen,\n  isLoading,\n  position,\n  onClose,\n  onSelect,\n}: OwnProps & StateProps) {\n  const {\n    importToken,\n    resetImportToken,\n  } = getActions();\n  const lang = useLang();\n\n  const { shouldRender, transitionClassNames } = useShowTransition(isOpen);\n  const [searchValue, setSearchValue] = useState('');\n  const [style, setStyle] = useState<string | undefined>();\n  const [renderingKey, setRenderingKey] = useState(SearchState.Popular);\n\n  // eslint-disable-next-line no-null/no-null\n  const elementRef = useRef<HTMLDivElement | null>(null);\n  const isImportingRef = useRef(false);\n\n  const {\n    handleScroll: handleContentScroll,\n    isAtBeginning: isContentNotScrolled,\n  } = useScrolledState();\n\n  useEffect(() => {\n    if (!elementRef.current) return;\n\n    if (position) {\n      const {\n        top, right,\n      } = position;\n\n      const { width: componentWidth, height: componentHeight } = elementRef.current.getBoundingClientRect();\n      const isTop = window.innerHeight > top + componentWidth;\n      const verticalStyle = isTop\n        ? `top: ${top + OFFSET_TOP}px;`\n        : `top: calc(100% - ${componentHeight + OFFSET_BOTTOM}px);`;\n\n      setStyle(`${verticalStyle} left: ${(right - componentWidth) - OFFSET_RIGHT}px;`);\n    }\n  }, [position]);\n\n  useEffect(\n    () => (shouldRender ? captureEscKeyListener(onClose) : undefined),\n    [onClose, shouldRender],\n  );\n\n  useEffect(() => {\n    setSearchValue('');\n    resetImportToken();\n  }, [shouldRender]);\n\n  useEffect(() => {\n    if (getIsAddressValid(searchValue)) {\n      isImportingRef.current = true;\n      importToken({ address: searchValue });\n    } else {\n      resetImportToken();\n    }\n  }, [importToken, searchValue]);\n\n  const filteredTokenList = useMemo(() => tokens?.filter(\n    ({ name, symbol, keywords }) => {\n      const isName = name.toLowerCase().includes(searchValue.toLowerCase());\n      const isSymbol = symbol.toLowerCase().includes(searchValue.toLowerCase());\n      const isKeyword = keywords?.find((key) => key.toLowerCase().includes(searchValue.toLowerCase()));\n      return isName || isSymbol || isKeyword;\n    },\n  ) ?? [], [tokens, searchValue]);\n\n  useEffect(() => {\n    const isImporting = isLoading || isImportingRef.current;\n\n    if (isImporting && getIsAddressValid(searchValue)) {\n      isImportingRef.current = false;\n      setRenderingKey(SearchState.Loading);\n    } else if (token && getIsAddressValid(searchValue)) {\n      setRenderingKey(SearchState.Token);\n    } else if (filteredTokenList.length === 0) {\n      setRenderingKey(SearchState.Empty);\n    } else {\n      setRenderingKey(SearchState.Popular);\n    }\n  }, [token, isLoading, filteredTokenList, searchValue]);\n\n  const handleTokenClick = useLastCallback((selectedToken: UserToken) => {\n    onClose();\n    setTimeout(() => {\n      onSelect(selectedToken);\n    }, SLIDE_ANIMATION_DURATION_MS);\n  });\n\n  const popularTokenList = useMemo(() => filteredTokenList.map((t) => (\n    <div className={styles.addTokenItem} key={t.slug} onClick={() => handleTokenClick(t)}>\n      <img src={t.image} alt={t.symbol} className={styles.addTokenIcon} />\n      <div className={styles.addTokenText}>\n        <span className={styles.addTokenSymbol}>{t.symbol}</span>\n        <span className={styles.addTokenPrice}>{formatCurrencyForBigValue(t.price)}</span>\n      </div>\n    </div>\n  )), [filteredTokenList, handleTokenClick]);\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    const { image, symbol } = token ?? {};\n\n    let content;\n\n    switch (currentKey) {\n      case SearchState.Popular:\n        content = popularTokenList;\n        break;\n      case SearchState.Loading:\n        content = (\n          <div className={styles.addTokenItem}>\n            <div className={buildClassName(styles.addTokenIcon, styles.addTokenIcon_loading)} />\n            <div className={styles.addTokenText}>\n              <span className={buildClassName(styles.addTokenSymbol, styles.addTokenSymbol_loading)} />\n              <span className={buildClassName(styles.addTokenPrice, styles.addTokenPrice_loading)} />\n            </div>\n          </div>\n        );\n        break;\n      case SearchState.Token:\n        content = (\n          <div className={styles.addTokenItem} onClick={() => handleTokenClick(token!)}>\n            <img src={image} alt={symbol} className={styles.addTokenIcon} />\n            <div className={styles.addTokenText}>\n              <span className={styles.addTokenSymbol}>{symbol}</span>\n              <span className={styles.addTokenPrice}>{formatCurrencyForBigValue(0)}</span>\n            </div>\n          </div>\n        );\n        break;\n      case SearchState.Empty:\n        content = (\n          <div className={styles.addTokenItem}>\n            <div className={buildClassName(styles.addTokenIcon, styles.addTokenIcon_empty)}>\n              <i className={buildClassName('icon-ton', styles.emptyIcon)} />\n            </div>\n            <div className={styles.addTokenText}>\n              <span className={buildClassName(styles.addTokenSymbol, styles.addTokenSymbol_gray)}>\n                {lang('Token Not Found')}\n              </span>\n              <span className={buildClassName(styles.addTokenPrice, styles.addTokenPrice_gray)}>\n                {lang('Try another keyword or address.')}\n              </span>\n            </div>\n          </div>\n        );\n        break;\n    }\n\n    const isSingle = currentKey !== SearchState.Popular || popularTokenList.length === 1;\n\n    return (\n      <div className={styles.addTokenContentWrapper}>\n        <div\n          className={buildClassName(\n            styles.addTokenContent,\n            isSingle && styles.addTokenContent_single,\n            'custom-scroll',\n          )}\n          onScroll={handleContentScroll}\n        >\n          {content}\n        </div>\n      </div>\n    );\n  }\n\n  const fullClassName = buildClassName(\n    styles.addTokenDialog,\n    transitionClassNames,\n  );\n\n  return shouldRender && (\n    <Portal>\n      <div\n        ref={elementRef}\n        className={fullClassName}\n        style={style}\n      >\n        <div className={styles.backdrop} onClick={onClose} />\n        <div className={styles.addTokenBlock}>\n          <div className={buildClassName(\n            styles.addTokenSearch,\n            !isContentNotScrolled && styles.addTokenSearch_bordered,\n          )}\n          >\n            <div className={styles.addTokenInputWrapper}>\n              <i className={buildClassName(styles.icon, 'icon-search')} aria-hidden />\n              <input\n                placeholder={lang('Name or Address...')}\n                className={styles.addTokenInput}\n                onChange={(e) => setSearchValue(e.target.value)}\n                value={searchValue}\n              />\n            </div>\n          </div>\n          <Transition\n            name=\"fade\"\n            activeKey={renderingKey}\n            className={styles.addTokenTransition}\n          >\n            {renderContent}\n          </Transition>\n        </div>\n      </div>\n    </Portal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { isLoading, token } = global.settings.importToken ?? {};\n\n  return {\n    isLoading,\n    token,\n  };\n})(SelectTokens));\n","import React, {\n  memo, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport type { UserToken } from '../../global/types';\n\nimport { DEFAULT_PRICE_CURRENCY, TON_TOKEN_SLUG } from '../../config';\nimport { getActions } from '../../global';\nimport buildClassName from '../../util/buildClassName';\nimport { formatCurrency } from '../../util/formatNumber';\nimport { isBetween } from '../../util/math';\nimport { ASSET_LOGO_PATHS } from '../ui/helpers/assetLogos';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport DeleteTokenModal from '../main/modals/DeleteTokenModal';\nimport AnimatedCounter from '../ui/AnimatedCounter';\nimport Draggable from '../ui/Draggable';\nimport Switcher from '../ui/Switcher';\nimport SelectTokens from './SelectTokens';\n\nimport styles from './Settings.module.scss';\n\ninterface SortState {\n  orderedTokenSlugs?: string[];\n  dragOrderTokenSlugs?: string[];\n  draggedIndex?: number;\n}\n\ninterface Position {\n  top: number;\n  right: number;\n}\n\ninterface OwnProps {\n  tokens?: UserToken[];\n  popularTokens?: UserToken[];\n  orderedSlugs?: string[];\n  isSortByValueEnabled?: boolean;\n}\n\nconst TOKEN_HEIGHT_PX = 64;\nconst TOP_OFFSET = 48;\n\nfunction SettingsTokens({\n  tokens, popularTokens, orderedSlugs, isSortByValueEnabled,\n}: OwnProps) {\n  const {\n    sortTokens,\n    toggleDisabledToken,\n    addToken,\n  } = getActions();\n  const lang = useLang();\n\n  // eslint-disable-next-line no-null/no-null\n  const tokensRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const sortableContainerRef = useRef<HTMLDivElement>(null);\n\n  const [isAddTokenModalOpen, openAddTokenModal, closeAddTokenModal] = useFlag();\n  const [tokenToDelete, setTokenToDelete] = useState<UserToken | undefined>();\n  const [state, setState] = useState<SortState>({\n    orderedTokenSlugs: orderedSlugs,\n    dragOrderTokenSlugs: orderedSlugs,\n    draggedIndex: undefined,\n  });\n  const [sortableContainerPosition, setSortableContainerPosition] = useState<Position | undefined>();\n\n  useEffect(() => {\n    if (!arraysAreEqual(orderedSlugs, state.orderedTokenSlugs)) {\n      setState({\n        orderedTokenSlugs: orderedSlugs,\n        dragOrderTokenSlugs: orderedSlugs,\n        draggedIndex: undefined,\n      });\n    }\n  }, [orderedSlugs, state.orderedTokenSlugs]);\n\n  const handleOpenAddTokenModal = useLastCallback(() => {\n    if (sortableContainerRef.current) {\n      const { top, right } = sortableContainerRef.current.getBoundingClientRect();\n      setSortableContainerPosition({\n        top, right,\n      });\n    }\n\n    openAddTokenModal();\n  });\n\n  const handleDrag = useLastCallback((translation: { x: number; y: number }, id: string | number) => {\n    const delta = Math.round(translation.y / TOKEN_HEIGHT_PX);\n    const index = state.orderedTokenSlugs?.indexOf(id as string) ?? 0;\n    const dragOrderTokens = state.orderedTokenSlugs?.filter((tokenSlug) => tokenSlug !== id);\n\n    if (!dragOrderTokens || !isBetween(index + delta, 0, orderedSlugs?.length ?? 0)) {\n      return;\n    }\n\n    dragOrderTokens.splice(index + delta, 0, id as string);\n    setState((current) => ({\n      ...current,\n      draggedIndex: index,\n      dragOrderTokenSlugs: dragOrderTokens,\n    }));\n  });\n\n  const handleDragEnd = useLastCallback(() => {\n    setState((current) => {\n      sortTokens({\n        orderedSlugs: current.dragOrderTokenSlugs!,\n      });\n\n      return {\n        ...current,\n        orderedTokenSlugs: current.dragOrderTokenSlugs,\n        draggedIndex: undefined,\n      };\n    });\n  });\n\n  const handleDisabledToken = useLastCallback((slug: string) => {\n    if (slug === TON_TOKEN_SLUG) return;\n\n    toggleDisabledToken({ slug });\n  });\n\n  const handleDeleteToken = useLastCallback((token: UserToken, e: React.MouseEvent<HTMLSpanElement>) => {\n    e.stopPropagation();\n    setTokenToDelete(token);\n  });\n\n  const handleTokenSelect = useLastCallback((token: UserToken) => {\n    addToken({ token });\n  });\n\n  function renderToken(token: UserToken, index: number) {\n    const {\n      symbol, image, name, amount, price, slug, isDisabled,\n    } = token;\n\n    const isTON = slug === TON_TOKEN_SLUG;\n    const logoPath = image || ASSET_LOGO_PATHS[symbol.toLowerCase() as keyof typeof ASSET_LOGO_PATHS];\n    const totalAmount = amount * price;\n    const isDragged = state.draggedIndex === index;\n\n    const draggedTop = getOrderIndex(slug, state.orderedTokenSlugs);\n    const top = getOrderIndex(slug, state.dragOrderTokenSlugs);\n\n    const style = `top: ${isDragged ? draggedTop : top}px;`;\n    const knobStyle = 'left: 1rem;';\n\n    const isDeleteButtonVisible = amount === 0 && !isTON;\n\n    const isDragDisabled = isSortByValueEnabled || tokens!.length <= 1;\n\n    return (\n      <Draggable\n        key={slug}\n        id={slug}\n        onDrag={handleDrag}\n        onDragEnd={handleDragEnd}\n        style={style}\n        knobStyle={knobStyle}\n        isDisabled={isDragDisabled}\n        className={buildClassName(styles.item, styles.item_token)}\n        offset={{ top: TOP_OFFSET }}\n        parentRef={tokensRef}\n        // eslint-disable-next-line react/jsx-no-bind\n        onClick={() => handleDisabledToken(slug)}\n      >\n        <img src={logoPath} alt={symbol} className={styles.tokenIcon} />\n        <div className={styles.tokenInfo}>\n          <div className={styles.tokenTitle}>\n            {name}\n          </div>\n          <div className={styles.tokenDescription}>\n            <AnimatedCounter text={formatCurrency(totalAmount, DEFAULT_PRICE_CURRENCY)} />\n            <i className={styles.dot} />\n            <AnimatedCounter text={formatCurrency(amount, symbol)} />\n            {isDeleteButtonVisible && (\n              <>\n                <i className={styles.dot} />\n                <span className={styles.deleteText} onClick={(e) => handleDeleteToken(token, e)}>Delete</span>\n              </>\n            )}\n          </div>\n        </div>\n        {!isTON && (\n          <Switcher\n            className={styles.menuSwitcher}\n            label={lang('Investor View')}\n            checked={!isDisabled}\n            // eslint-disable-next-line react/jsx-no-bind\n            onCheck={() => handleDisabledToken(slug)}\n          />\n        )}\n      </Draggable>\n    );\n  }\n\n  return (\n    <>\n      <p className={styles.blockTitle}>{lang('Your Tokens')}</p>\n      <div className={styles.contentRelative} ref={sortableContainerRef}>\n        <div\n          className={buildClassName(styles.settingsBlock, styles.sortableContainer)}\n          style={`height: ${(tokens?.length ?? 0) * TOKEN_HEIGHT_PX + TOP_OFFSET}px`}\n          ref={tokensRef}\n        >\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleOpenAddTokenModal}>\n            {lang('Add Token')}\n            <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-down')} />\n          </div>\n\n          {tokens?.map(renderToken)}\n        </div>\n\n        <SelectTokens\n          position={sortableContainerPosition}\n          isOpen={isAddTokenModalOpen}\n          onClose={closeAddTokenModal}\n          tokens={popularTokens}\n          onSelect={handleTokenSelect}\n        />\n      </div>\n\n      <DeleteTokenModal token={tokenToDelete} />\n    </>\n  );\n}\n\nfunction arraysAreEqual<T>(arr1: T[] = [], arr2: T[] = []) {\n  return arr1.length === arr2.length && arr1.every((value, index) => value === arr2[index]);\n}\n\nfunction getOrderIndex(slug: string, list: string[] = []) {\n  const realIndex = list.indexOf(slug);\n  const index = realIndex === -1 ? list.length : realIndex;\n  return index * TOKEN_HEIGHT_PX + TOP_OFFSET;\n}\n\nexport default memo(SettingsTokens);\n","export const isBetween = (num: number, min: number, max: number) => (num >= min && num <= max);\n","import React, { memo } from '../../lib/teact/teact';\n\nimport type { UserToken } from '../../global/types';\n\nimport { CARD_SECONDARY_VALUE_SYMBOL, TINY_TRANSFER_MAX_AMOUNT } from '../../config';\nimport { getActions } from '../../global';\nimport buildClassName from '../../util/buildClassName';\nimport stopEvent from '../../util/stopEvent';\nimport { IS_TOUCH_ENV } from '../../util/windowEnvironment';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport Button from '../ui/Button';\nimport DropDown from '../ui/DropDown';\nimport ModalHeader from '../ui/ModalHeader';\nimport Switcher from '../ui/Switcher';\nimport Tooltip from '../ui/Tooltip';\nimport SettingsTokens from './SettingsTokens';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  tokens?: UserToken[];\n  popularTokens?: UserToken[];\n  orderedSlugs?: string[];\n  areTinyTransfersHidden?: boolean;\n  isInvestorViewEnabled?: boolean;\n  areTokensWithNoBalanceHidden?: boolean;\n  areTokensWithNoPriceHidden?: boolean;\n  isSortByValueEnabled?: boolean;\n  isInsideModal?: boolean;\n  handleBackClick: () => void;\n}\n\nconst CURRENCY_OPTIONS = [{\n  value: 'usd',\n  name: 'US Dollar',\n}];\n\nfunction SettingsAssets({\n  tokens,\n  popularTokens,\n  orderedSlugs,\n  areTinyTransfersHidden,\n  isInvestorViewEnabled,\n  areTokensWithNoBalanceHidden,\n  areTokensWithNoPriceHidden,\n  isSortByValueEnabled,\n  handleBackClick,\n  isInsideModal,\n}: OwnProps) {\n  const {\n    toggleTinyTransfersHidden,\n    toggleInvestorView,\n    toggleTokensWithNoBalance,\n    toggleTokensWithNoPrice,\n    toggleSortByValue,\n  } = getActions();\n  const lang = useLang();\n\n  const [isInvestorHelpTooltipOpen, openInvestorHelpTooltip, closeInvestorHelpTooltip] = useFlag();\n  const [isTinyTransfersHelpTooltipOpen, openTinyTransfersHelpTooltip, closeTinyTransfersHelpTooltip] = useFlag();\n\n  const {\n    handleScroll: handleContentScroll,\n    isAtBeginning: isContentNotScrolled,\n  } = useScrolledState();\n\n  const handleTinyTransfersHiddenToggle = useLastCallback(() => {\n    toggleTinyTransfersHidden({ isEnabled: !areTinyTransfersHidden });\n  });\n\n  const handleInvestorViewToggle = useLastCallback(() => {\n    toggleInvestorView({ isEnabled: !isInvestorViewEnabled });\n  });\n\n  const handleTokensWithNoBalanceToggle = useLastCallback(() => {\n    toggleTokensWithNoBalance({ isEnabled: !areTokensWithNoBalanceHidden });\n  });\n\n  const handleTokensWithNoPriceToggle = useLastCallback(() => {\n    toggleTokensWithNoPrice({ isEnabled: !areTokensWithNoPriceHidden });\n  });\n\n  const handleSortByValueToggle = useLastCallback(() => {\n    toggleSortByValue({ isEnabled: !isSortByValueEnabled });\n  });\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Assets & Activity')}\n          withBorder={!isContentNotScrolled}\n          onBackButtonClick={handleBackClick}\n        />\n      ) : (\n        <div className={styles.header}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Assets & Activity')}</span>\n        </div>\n      )}\n      <div className={buildClassName(styles.content, 'custom-scroll')} onScroll={handleContentScroll}>\n        <div className={styles.settingsBlock}>\n          <DropDown\n            label={lang('Fiat Currency')}\n            items={CURRENCY_OPTIONS}\n            selectedValue={CURRENCY_OPTIONS[0].value}\n            theme=\"light\"\n            disabled\n            shouldTranslateOptions\n            className={buildClassName(styles.item, styles.item_small)}\n          />\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleInvestorViewToggle}>\n            <div className={styles.blockWithTooltip}>\n              {lang('Investor View')}\n\n              <Tooltip\n                isOpen={isInvestorHelpTooltipOpen}\n                message={lang('Focus on asset value rather than current balance')}\n                className={styles.tooltip}\n              />\n              <i\n                className={buildClassName(styles.iconQuestion, 'icon-question')}\n                onClick={IS_TOUCH_ENV ? stopEvent : undefined}\n                onMouseEnter={openInvestorHelpTooltip}\n                onMouseLeave={closeInvestorHelpTooltip}\n              />\n\n            </div>\n\n            <Switcher\n              className={styles.menuSwitcher}\n              label={lang('Investor View')}\n              checked={isInvestorViewEnabled}\n            />\n          </div>\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleTinyTransfersHiddenToggle}>\n            <div className={styles.blockWithTooltip}>\n              {lang('Hide Tiny Transfers')}\n\n              <Tooltip\n                isOpen={isTinyTransfersHelpTooltipOpen}\n                message={\n                  lang(\n                    '$tiny_transfers_help',\n                    [TINY_TRANSFER_MAX_AMOUNT, CARD_SECONDARY_VALUE_SYMBOL],\n                  ) as string\n                }\n                className={buildClassName(styles.tooltip, styles.tooltip_wide)}\n              />\n              <i\n                className={buildClassName(styles.iconQuestion, 'icon-question')}\n                onClick={IS_TOUCH_ENV ? stopEvent : undefined}\n                onMouseEnter={openTinyTransfersHelpTooltip}\n                onMouseLeave={closeTinyTransfersHelpTooltip}\n              />\n            </div>\n\n            <Switcher\n              className={styles.menuSwitcher}\n              label={lang('Hide Tiny Transfers')}\n              checked={areTinyTransfersHidden}\n            />\n          </div>\n        </div>\n        <p className={styles.blockTitle}>{lang('Tokens Settings')}</p>\n        <div className={styles.settingsBlock}>\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleTokensWithNoBalanceToggle}>\n            {lang('Hide Tokens With No Balance')}\n\n            <Switcher\n              className={styles.menuSwitcher}\n              label={lang('Hide Tokens With No Balance')}\n              checked={areTokensWithNoBalanceHidden}\n            />\n          </div>\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleTokensWithNoPriceToggle}>\n            {lang('Hide Tokens With No Price')}\n\n            <Switcher\n              className={styles.menuSwitcher}\n              label={lang('Hide Tokens With No Price')}\n              checked={areTokensWithNoPriceHidden}\n            />\n          </div>\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleSortByValueToggle}>\n            {lang('Sort By Value')}\n\n            <Switcher\n              className={styles.menuSwitcher}\n              label={lang('Sort By Value')}\n              checked={isSortByValueEnabled}\n            />\n          </div>\n        </div>\n\n        <SettingsTokens\n          tokens={tokens}\n          popularTokens={popularTokens}\n          orderedSlugs={orderedSlugs}\n          isSortByValueEnabled={isSortByValueEnabled}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(SettingsAssets);\n","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"RE_ES3CYh0IpfKif3CC5\",\"description\":\"BlqLl2ssC2GOHCcRYcAS\",\"buttons\":\"JO6PDQAlLAs1OQS63LOT\",\"button\":\"umfMXBxSCr9EtkUgGZSO\"};","import React, { memo, useCallback } from '../../../lib/teact/teact';\n\nimport type { ApiDapp } from '../../../api/types';\n\nimport { getActions } from '../../../global';\n\nimport useLang from '../../../hooks/useLang';\n\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\n\nimport styles from './DisconnectDappModal.module.scss';\n\ninterface OwnProps {\n  isOpen?: boolean;\n  dapp?: ApiDapp;\n  onClose: NoneToVoidFunction;\n}\n\nfunction DisconnectDappModal({ isOpen, dapp, onClose }: OwnProps) {\n  const {\n    deleteAllDapps,\n    deleteDapp,\n  } = getActions();\n\n  const lang = useLang();\n\n  const handleDeleteAllDapps = useCallback(() => {\n    void deleteAllDapps();\n    onClose();\n  }, [deleteAllDapps, onClose]);\n\n  const handleDeleteDapp = useCallback(() => {\n    void deleteDapp({ origin: dapp!.origin });\n    onClose();\n  }, [deleteDapp, dapp, onClose]);\n\n  const title = dapp ? lang('Disconnect Dapp') : lang('Disconnect Dapps');\n  const description = dapp\n    ? lang('Are you sure you want to disconnect?', { dappname: <strong>{dapp.name}</strong> })\n    : lang('Are you sure you want to disconnect all websites?');\n  const onDisconnect = dapp ? handleDeleteDapp : handleDeleteAllDapps;\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      isCompact\n      onClose={onClose}\n      title={title}\n      contentClassName={styles.content}\n    >\n      <p className={styles.description}>{description}</p>\n      <div className={styles.buttons}>\n        <Button onClick={onClose} className={styles.button}>{lang('Cancel')}</Button>\n        <Button isDestructive onClick={onDisconnect} className={styles.button}>\n          {lang('Disconnect')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(DisconnectDappModal);\n","import React, { memo, useState } from '../../lib/teact/teact';\n\nimport type { ApiDapp } from '../../api/types';\n\nimport { ANIMATED_STICKER_BIG_SIZE_PX } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport DappInfo from '../dapps/DappInfo';\nimport DisconnectDappModal from '../main/modals/DisconnectDappModal';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  dapps: ApiDapp[];\n  handleBackClick: () => void;\n  isInsideModal?: boolean;\n}\n\nfunction SettingsDapps({\n  isActive,\n  dapps,\n  handleBackClick,\n  isInsideModal,\n}: OwnProps) {\n  const lang = useLang();\n\n  const [isDisconnectModalOpen, openDisconnectModal, closeDisconnectModal] = useFlag();\n  const [dappToDelete, setDappToDelete] = useState<ApiDapp | undefined>();\n\n  const {\n    handleScroll: handleContentScroll,\n    isAtBeginning: isContentNotScrolled,\n  } = useScrolledState();\n\n  const handleDisconnectDapp = useLastCallback((origin: string) => {\n    const dapp = dapps.find((d) => d.origin === origin);\n    setDappToDelete(dapp);\n    openDisconnectModal();\n  });\n\n  const handleDisconnectAll = useLastCallback(() => {\n    setDappToDelete(undefined);\n    openDisconnectModal();\n  });\n\n  function renderDapp(dapp: ApiDapp) {\n    const {\n      iconUrl, name, url, origin,\n    } = dapp;\n\n    return (\n      <DappInfo\n        key={origin}\n        iconUrl={iconUrl}\n        name={name}\n        url={url}\n        origin={origin}\n        className={styles.dapp}\n        onDisconnect={handleDisconnectDapp}\n      />\n    );\n  }\n\n  function renderDapps() {\n    const dappList = dapps.map(renderDapp);\n\n    return (\n      <div className={styles.slide}>\n        <div className={styles.disconnectAllBlock}>\n          <Button\n            className={styles.disconnectButton}\n            isSimple\n            onClick={handleDisconnectAll}\n          >\n            {lang('Disconnect All Dapps')}\n          </Button>\n          <p className={styles.blockDescription}>{lang('$dapps-description')}</p>\n        </div>\n\n        <p className={styles.blockTitle}>{lang('Logged in with MyTonWallet')}</p>\n\n        <div className={styles.block}>\n          {dappList}\n        </div>\n      </div>\n    );\n  }\n\n  function renderEmptyDappsMessage(isPlaying: boolean) {\n    return (\n      <div className={styles.emptyList}>\n        <AnimatedIconWithPreview\n          play={isPlaying}\n          tgsUrl={ANIMATED_STICKERS_PATHS.noData}\n          previewUrl={ANIMATED_STICKERS_PATHS.noDataPreview}\n          size={ANIMATED_STICKER_BIG_SIZE_PX}\n          className={styles.sticker}\n          noLoop={false}\n          nonInteractive\n        />\n        <p className={styles.emptyListTitle}>{lang('No active connections')}</p>\n      </div>\n    );\n  }\n\n  const content = dapps.length === 0\n    ? renderEmptyDappsMessage(isActive)\n    : renderDapps();\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader title={lang('Dapps')} withBorder={!isContentNotScrolled} onBackButtonClick={handleBackClick} />\n      ) : (\n        <div className={styles.header}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Dapps')}</span>\n        </div>\n      )}\n      <div className={buildClassName(styles.content, 'custom-scroll')} onScroll={handleContentScroll}>\n        {content}\n      </div>\n      <DisconnectDappModal isOpen={isDisconnectModalOpen} onClose={closeDisconnectModal} dapp={dappToDelete} />\n    </div>\n  );\n}\n\nexport default memo(SettingsDapps);\n","import React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiNetwork } from '../../api/types';\n\nimport { getActions } from '../../global';\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport DropDown from '../ui/DropDown';\nimport Modal from '../ui/Modal';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  onClose: () => void;\n  isTestnet?: boolean;\n}\n\nconst NETWORK_OPTIONS = [{\n  value: 'mainnet',\n  name: 'Mainnet',\n}, {\n  value: 'testnet',\n  name: 'Testnet',\n}];\n\nfunction SettingsDeveloperOptions({ isOpen, onClose, isTestnet }: OwnProps) {\n  const {\n    startChangingNetwork,\n  } = getActions();\n  const lang = useLang();\n\n  const handleNetworkChange = useLastCallback((newNetwork: string) => {\n    startChangingNetwork({ network: newNetwork as ApiNetwork });\n  });\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={onClose}\n      noBackdropClose\n      isCompact\n    >\n      <div className={styles.developerTitle}>\n        {lang('Developer Options')}\n      </div>\n      <div className={styles.settingsBlock}>\n        <DropDown\n          label={lang('Network')}\n          items={NETWORK_OPTIONS}\n          selectedValue={NETWORK_OPTIONS[isTestnet ? 1 : 0].value}\n          theme=\"light\"\n          arrow=\"chevron\"\n          className={buildClassName(styles.item, styles.item_small)}\n          onChange={handleNetworkChange}\n        />\n      </div>\n      <Button\n        className={styles.developerCloseButton}\n        onClick={onClose}\n      >\n        {lang('Close')}\n      </Button>\n    </Modal>\n  );\n}\n\nexport default memo(SettingsDeveloperOptions);\n","import React, { memo } from '../../lib/teact/teact';\n\nimport type { LangCode } from '../../global/types';\n\nimport { LANG_LIST } from '../../config';\nimport { getActions } from '../../global';\nimport buildClassName from '../../util/buildClassName';\nimport { setLanguage } from '../../util/langProvider';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport styles from './Settings.module.scss';\n\nimport checkmarkImg from '../../assets/settings/settings_checkmark.svg';\n\ninterface OwnProps {\n  langCode: LangCode;\n  handleBackClick: () => void;\n  isInsideModal?: boolean;\n}\n\nfunction SettingsLanguage({\n  langCode,\n  handleBackClick,\n  isInsideModal,\n}: OwnProps) {\n  const {\n    changeLanguage,\n  } = getActions();\n  const lang = useLang();\n\n  const handleLanguageChange = useLastCallback((newLangCode: LangCode) => {\n    void setLanguage(newLangCode, () => {\n      changeLanguage({ langCode: newLangCode });\n    });\n  });\n\n  function renderLanguages() {\n    return LANG_LIST.map(({ name, nativeName, langCode: lc }) => (\n      <div\n        key={lc}\n        className={buildClassName(styles.item, styles.item_lang)}\n        onClick={() => handleLanguageChange(lc)}\n      >\n        <div className={styles.languageInfo}>\n          <span className={styles.languageMain}>{name}</span>\n          <span className={styles.languageNative}>{nativeName}</span>\n        </div>\n\n        {langCode === lc && <img src={checkmarkImg} alt={name} />}\n      </div>\n    ));\n  }\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Language')}\n          onBackButtonClick={handleBackClick}\n          className={styles.languageHeader}\n        />\n      ) : (\n        <div className={styles.header}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Language')}</span>\n        </div>\n      )}\n      <div className={buildClassName(styles.content, 'custom-scroll')}>\n        <div className={styles.block}>\n          {renderLanguages()}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(SettingsLanguage);\n","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\n\nimport type { ApiDapp } from '../../api/types';\nimport type {\n  AnimationLevel, LangCode, Theme, UserToken,\n} from '../../global/types';\n\nimport {\n  APP_NAME,\n  APP_VERSION,\n  LANG_LIST,\n  PROXY_HOSTS,\n  TELEGRAM_WEB_URL,\n} from '../../config';\nimport { getActions, withGlobal } from '../../global';\nimport {\n  selectAccountSettings, selectCurrentAccountTokens, selectPopularTokensWithoutAccountTokens,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport captureEscKeyListener from '../../util/captureEscKeyListener';\nimport { IS_DAPP_SUPPORTED, IS_EXTENSION, IS_LEDGER_SUPPORTED } from '../../util/windowEnvironment';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useScrolledState from '../../hooks/useScrolledState';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport LogOutModal from '../main/modals/LogOutModal';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport Switcher from '../ui/Switcher';\nimport Transition from '../ui/Transition';\nimport SettingsAbout from './SettingsAbout';\nimport SettingsAppearance from './SettingsAppearance';\nimport SettingsAssets from './SettingsAssets';\nimport SettingsDapps from './SettingsDapps';\nimport SettingsDeveloperOptions from './SettingsDeveloperOptions';\nimport SettingsLanguage from './SettingsLanguage';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Settings.module.scss';\n\nimport aboutImg from '../../assets/settings/settings_about.svg';\nimport appearanceImg from '../../assets/settings/settings_appearance.svg';\nimport assetsActivityImg from '../../assets/settings/settings_assets-activity.svg';\nimport backupSecretImg from '../../assets/settings/settings_backup-secret.svg';\nimport connectedDappsImg from '../../assets/settings/settings_connected-dapps.svg';\nimport exitImg from '../../assets/settings/settings_exit.svg';\nimport languageImg from '../../assets/settings/settings_language.svg';\nimport ledgerImg from '../../assets/settings/settings_ledger.svg';\nimport telegramImg from '../../assets/settings/settings_telegram-menu.svg';\nimport tonLinksImg from '../../assets/settings/settings_ton-links.svg';\nimport tonMagicImg from '../../assets/settings/settings_ton-magic.svg';\nimport tonProxyImg from '../../assets/settings/settings_ton-proxy.svg';\n\nconst enum RenderingState {\n  Initial,\n  Appearance,\n  Assets,\n  Dapps,\n  Language,\n  About,\n}\n\ntype OwnProps = {\n  isInsideModal?: boolean;\n};\n\ntype StateProps = {\n  theme: Theme;\n  animationLevel: AnimationLevel;\n  areTinyTransfersHidden?: boolean;\n  isInvestorViewEnabled?: boolean;\n  isTestnet?: boolean;\n  canPlaySounds?: boolean;\n  langCode: LangCode;\n  isTonProxyEnabled?: boolean;\n  isTonMagicEnabled?: boolean;\n  isDeeplinkHookEnabled?: boolean;\n  areTokensWithNoBalanceHidden?: boolean;\n  areTokensWithNoPriceHidden?: boolean;\n  isSortByValueEnabled?: boolean;\n  dapps: ApiDapp[];\n  tokens?: UserToken[];\n  popularTokens?: UserToken[];\n  orderedSlugs?: string[];\n};\n\nconst AMOUNT_OF_CLICKS_FOR_DEVELOPERS_MODE = 5;\n\nfunction Settings({\n  theme,\n  animationLevel,\n  areTinyTransfersHidden,\n  isTestnet,\n  isInvestorViewEnabled,\n  canPlaySounds,\n  langCode,\n  isTonProxyEnabled,\n  isTonMagicEnabled,\n  isDeeplinkHookEnabled,\n  areTokensWithNoBalanceHidden,\n  areTokensWithNoPriceHidden,\n  isSortByValueEnabled,\n  dapps,\n  tokens,\n  popularTokens,\n  orderedSlugs,\n  isInsideModal,\n}: OwnProps & StateProps) {\n  const {\n    openBackupWalletModal,\n    openHardwareWalletModal,\n    closeSettings,\n    toggleDeeplinkHook,\n    toggleTonProxy,\n    toggleTonMagic,\n    getDapps,\n    initTokensOrder,\n  } = getActions();\n\n  const lang = useLang();\n  const [clicksAmount, setClicksAmount] = useState<number>(isTestnet ? AMOUNT_OF_CLICKS_FOR_DEVELOPERS_MODE : 0);\n  const [renderingKey, setRenderingKey] = useState<number>(RenderingState.Initial);\n\n  const [isDeveloperModalOpen, openDeveloperModal, closeDeveloperModal] = useFlag();\n  const [isLogOutModalOpened, openLogOutModal, closeLogOutModal] = useFlag();\n\n  const activeLang = useMemo(() => LANG_LIST.find((l) => l.langCode === langCode), [langCode]);\n\n  const {\n    transitionClassNames: telegramLinkClassNames,\n    shouldRender: isTelegramLinkRendered,\n  } = useShowTransition(isTonMagicEnabled);\n\n  useEffect(() => {\n    initTokensOrder();\n  }, []);\n\n  const {\n    handleScroll: handleContentScroll,\n    isAtBeginning: isContentNotScrolled,\n  } = useScrolledState();\n\n  const handleConnectedDappsOpen = useLastCallback(() => {\n    getDapps();\n    setRenderingKey(RenderingState.Dapps);\n  });\n\n  function handleAppearanceOpen() {\n    setRenderingKey(RenderingState.Appearance);\n  }\n\n  function handleAssetsOpen() {\n    setRenderingKey(RenderingState.Assets);\n  }\n\n  function handleLanguageOpen() {\n    setRenderingKey(RenderingState.Language);\n  }\n\n  function handleAboutOpen() {\n    setRenderingKey(RenderingState.About);\n  }\n\n  const handleBackClick = useLastCallback(() => {\n    setRenderingKey(RenderingState.Initial);\n  });\n\n  const handleDeeplinkHookToggle = useLastCallback(() => {\n    toggleDeeplinkHook({ isEnabled: !isDeeplinkHookEnabled });\n  });\n\n  const handleTonProxyToggle = useLastCallback(() => {\n    toggleTonProxy({ isEnabled: !isTonProxyEnabled });\n  });\n\n  const handleTonMagicToggle = useLastCallback(() => {\n    toggleTonMagic({ isEnabled: !isTonMagicEnabled });\n  });\n\n  function handleOpenBackupWallet() {\n    openBackupWalletModal();\n  }\n\n  const handleLogOut = useLastCallback(() => {\n    closeLogOutModal();\n    closeSettings();\n  });\n\n  const handleCloseLogOutModal = useLastCallback(() => {\n    closeLogOutModal();\n  });\n\n  function handleOpenHardwareModal() {\n    openHardwareWalletModal();\n  }\n\n  const handleMultipleClick = () => {\n    if (clicksAmount + 1 >= AMOUNT_OF_CLICKS_FOR_DEVELOPERS_MODE) {\n      openDeveloperModal();\n    } else {\n      setClicksAmount(clicksAmount + 1);\n    }\n  };\n\n  useEffect(\n    () => captureEscKeyListener(() => {\n      if (renderingKey === RenderingState.Initial) {\n        closeSettings();\n      } else {\n        handleBackClick();\n      }\n    }),\n    [handleBackClick, renderingKey],\n  );\n\n  function renderSettings() {\n    return (\n      <div className={styles.slide}>\n        {isInsideModal ? (\n          <ModalHeader\n            title={lang('Settings')}\n            withBorder={!isContentNotScrolled}\n            onClose={closeSettings}\n          />\n        ) : (\n          <div className={styles.header}>\n            <Button isSimple isText onClick={closeSettings} className={styles.headerBack}>\n              <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n              <span>{lang('Back')}</span>\n            </Button>\n            <span className={styles.headerTitle}>{lang('Settings')}</span>\n          </div>\n        )}\n\n        <div className={buildClassName(styles.content, 'custom-scroll')} onScroll={handleContentScroll}>\n          {IS_EXTENSION && (\n            <div className={styles.block}>\n              {PROXY_HOSTS && (\n                <div className={styles.item} onClick={handleTonProxyToggle}>\n                  <img className={styles.menuIcon} src={tonProxyImg} alt={lang('TON Proxy')} />\n                  {lang('TON Proxy')}\n\n                  <Switcher\n                    className={styles.menuSwitcher}\n                    label={lang('Toggle TON Proxy')}\n                    checked={isTonProxyEnabled}\n                  />\n                </div>\n              )}\n              <div className={styles.item} onClick={handleTonMagicToggle}>\n                <img className={styles.menuIcon} src={tonMagicImg} alt={lang('TON Magic')} />\n                {lang('TON Magic')}\n\n                <Switcher\n                  className={styles.menuSwitcher}\n                  label={lang('Toggle TON Magic')}\n                  checked={isTonMagicEnabled}\n                />\n              </div>\n              {isTelegramLinkRendered && (\n                <div className={buildClassName(styles.item, telegramLinkClassNames)} onClick={handleOpenTelegramWeb}>\n                  <img className={styles.menuIcon} src={telegramImg} alt={lang('Open Telegram Web')} />\n                  {lang('Open Telegram Web')}\n\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} />\n                </div>\n              )}\n              <div className={styles.item} onClick={handleDeeplinkHookToggle}>\n                <img className={styles.menuIcon} src={tonLinksImg} alt={lang('Handle ton:// links')} />\n                {lang('Handle ton:// links')}\n\n                <Switcher\n                  className={styles.menuSwitcher}\n                  label={lang('Handle ton:// links')}\n                  checked={isDeeplinkHookEnabled}\n                />\n              </div>\n            </div>\n          )}\n\n          <div className={styles.block}>\n            <div className={styles.item} onClick={handleAppearanceOpen}>\n              <img className={styles.menuIcon} src={appearanceImg} alt={lang('Appearance')} />\n              {lang('Appearance')}\n\n              <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} />\n            </div>\n            <div className={styles.item} onClick={handleAssetsOpen}>\n              <img className={styles.menuIcon} src={assetsActivityImg} alt={lang('Assets & Activity')} />\n              {lang('Assets & Activity')}\n\n              <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} />\n            </div>\n            {(IS_DAPP_SUPPORTED) && (\n              <div className={styles.item} onClick={handleConnectedDappsOpen}>\n                <img className={styles.menuIcon} src={connectedDappsImg} alt={lang('Connected Dapps')} />\n                {lang('Connected Dapps')}\n\n                <div className={styles.itemInfo}>\n                  {dapps.length ? dapps.length : ''}\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} />\n                </div>\n              </div>\n            )}\n            <div className={styles.item} onClick={handleLanguageOpen}>\n              <img className={styles.menuIcon} src={languageImg} alt={lang('Language')} />\n              {lang('Language')}\n              <div className={styles.itemInfo}>\n                {activeLang?.name}\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} />\n              </div>\n            </div>\n          </div>\n\n          <div className={styles.block}>\n            <div className={styles.item} onClick={handleOpenBackupWallet}>\n              <img className={styles.menuIcon} src={backupSecretImg} alt={lang('Back Up Secret Words')} />\n              {lang('Back Up Secret Words')}\n\n              <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} />\n            </div>\n            {IS_LEDGER_SUPPORTED && (\n              <div className={styles.item} onClick={handleOpenHardwareModal}>\n                <img className={styles.menuIcon} src={ledgerImg} alt={lang('Connect Ledger')} />\n                {lang('Connect Ledger')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} />\n              </div>\n            )}\n          </div>\n\n          <div className={styles.block}>\n            <div className={styles.item} onClick={handleAboutOpen}>\n              <img className={styles.menuIcon} src={aboutImg} alt={lang('About')} />\n              {lang('About')}\n\n              <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} />\n            </div>\n            <div className={buildClassName(styles.item, styles.item_red)} onClick={openLogOutModal}>\n              <img className={styles.menuIcon} src={exitImg} alt={lang('Exit')} />\n              {lang('Exit')}\n\n              <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} />\n            </div>\n          </div>\n\n          <div className={styles.version} onClick={handleMultipleClick}>\n            {APP_NAME} {APP_VERSION}\n          </div>\n        </div>\n        <SettingsDeveloperOptions isOpen={isDeveloperModalOpen} onClose={closeDeveloperModal} isTestnet={isTestnet} />\n      </div>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case RenderingState.Initial:\n        return renderSettings();\n      case RenderingState.Appearance:\n        return (\n          <SettingsAppearance\n            theme={theme}\n            animationLevel={animationLevel}\n            canPlaySounds={canPlaySounds}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n          />\n        );\n      case RenderingState.Assets:\n        return (\n          <SettingsAssets\n            tokens={tokens}\n            popularTokens={popularTokens}\n            orderedSlugs={orderedSlugs}\n            isInvestorViewEnabled={isInvestorViewEnabled}\n            areTinyTransfersHidden={areTinyTransfersHidden}\n            areTokensWithNoBalanceHidden={areTokensWithNoBalanceHidden}\n            areTokensWithNoPriceHidden={areTokensWithNoPriceHidden}\n            isSortByValueEnabled={isSortByValueEnabled}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n          />\n        );\n      case RenderingState.Dapps:\n        return (\n          <SettingsDapps\n            isActive={isActive}\n            dapps={dapps}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n          />\n        );\n      case RenderingState.Language:\n        return <SettingsLanguage langCode={langCode} handleBackClick={handleBackClick} isInsideModal={isInsideModal} />;\n      case RenderingState.About:\n        return <SettingsAbout handleBackClick={handleBackClick} isInsideModal={isInsideModal} />;\n    }\n  }\n\n  return (\n    <div className={styles.wrapper}>\n      <Transition\n        name=\"pushSlide\"\n        className={buildClassName(isInsideModal ? modalStyles.transition : styles.transitionContainer, 'custom-scroll')}\n        activeKey={renderingKey}\n      >\n        {renderContent}\n      </Transition>\n      <LogOutModal isOpen={isLogOutModalOpened} onClose={handleCloseLogOutModal} onLogOut={handleLogOut} />\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const {\n    theme,\n    animationLevel,\n    areTinyTransfersHidden,\n    isTestnet,\n    isInvestorViewEnabled,\n    canPlaySounds,\n    langCode,\n    isTonMagicEnabled,\n    isTonProxyEnabled,\n    isDeeplinkHookEnabled,\n    areTokensWithNoBalanceHidden,\n    areTokensWithNoPriceHidden,\n    isSortByValueEnabled,\n    dapps,\n  } = global.settings;\n\n  const { orderedSlugs } = selectAccountSettings(global, global.currentAccountId!) ?? {};\n\n  return {\n    theme,\n    animationLevel,\n    areTinyTransfersHidden,\n    isTestnet,\n    isInvestorViewEnabled,\n    canPlaySounds,\n    langCode,\n    isTonMagicEnabled,\n    isTonProxyEnabled,\n    isDeeplinkHookEnabled,\n    areTokensWithNoBalanceHidden,\n    areTokensWithNoPriceHidden,\n    isSortByValueEnabled,\n    dapps,\n    tokens: selectCurrentAccountTokens(global),\n    popularTokens: selectPopularTokensWithoutAccountTokens(global),\n    orderedSlugs,\n  };\n})(Settings));\n\nfunction handleOpenTelegramWeb() {\n  window.open(TELEGRAM_WEB_URL, '_blank', 'noopener');\n}\n","import React, { memo } from '../../lib/teact/teact';\n\nimport Modal from '../ui/Modal';\n\nimport styles from './Settings.module.scss';\n\ntype OwnProps = {\n  children: React.ReactNode;\n  isOpen?: boolean;\n  onClose: () => void;\n};\n\nfunction SettingsModal({ children, isOpen, onClose }: OwnProps) {\n  return (\n    <Modal\n      hasCloseButton\n      isSlideUp\n      isOpen={isOpen}\n      onClose={onClose}\n      dialogClassName={styles.modalDialog}\n      contentClassName={styles.modalContent}\n    >\n      {children}\n    </Modal>\n  );\n}\n\nexport default memo(SettingsModal);\n","import React, {\n  memo, useCallback, useEffect, useMemo,\n} from '../../lib/teact/teact';\n\nimport { TransferState } from '../../global/types';\nimport type { GlobalState, HardwareConnectState, UserToken } from '../../global/types';\n\nimport { ANIMATED_STICKER_SMALL_SIZE_PX, TON_TOKEN_SLUG } from '../../config';\nimport { getActions, withGlobal } from '../../global';\nimport { bigStrToHuman } from '../../global/helpers';\nimport { selectCurrentAccountState, selectCurrentAccountTokens } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useLang from '../../hooks/useLang';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\nimport usePrevious from '../../hooks/usePrevious';\n\nimport TransferResult from '../common/TransferResult';\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport AmountWithFeeTextField from '../ui/AmountWithFeeTextField';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport InteractiveTextField from '../ui/InteractiveTextField';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\nimport Transition from '../ui/Transition';\nimport TransferInitial from './TransferInitial';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Transfer.module.scss';\n\ninterface StateProps {\n  currentTransfer: GlobalState['currentTransfer'];\n  tokens?: UserToken[];\n  savedAddresses?: Record<string, string>;\n  hardwareState?: HardwareConnectState;\n  isLedgerConnected?: boolean;\n  isTonAppConnected?: boolean;\n}\n\nconst AMOUNT_PRECISION = 4;\n\nfunction TransferModal({\n  currentTransfer: {\n    state,\n    amount,\n    toAddress,\n    fee,\n    comment,\n    shouldEncrypt,\n    promiseId,\n    error,\n    isLoading,\n    txId,\n    tokenSlug,\n    toAddressName,\n  }, tokens, savedAddresses, hardwareState, isLedgerConnected, isTonAppConnected,\n}: StateProps) {\n  const {\n    submitTransferConfirm,\n    submitTransferPassword,\n    submitTransferHardware,\n    setTransferScreen,\n    clearTransferError,\n    cancelTransfer,\n    showTransactionInfo,\n    startTransfer,\n  } = getActions();\n\n  const lang = useLang();\n  const isOpen = state !== TransferState.None;\n\n  const selectedToken = useMemo(() => tokens?.find((token) => token.slug === tokenSlug), [tokenSlug, tokens]);\n  const renderedTokenBalance = usePrevious(selectedToken?.amount, true);\n  const renderedTransactionAmount = usePrevious(amount, true);\n  const symbol = selectedToken?.symbol || '';\n\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n\n  useEffect(() => (\n    state === TransferState.Confirm\n      ? captureKeyboardListeners({\n        onEnter: () => {\n          submitTransferConfirm();\n        },\n      })\n      : undefined\n  ), [state, submitTransferConfirm]);\n\n  const handleTransferSubmit = useCallback((password: string) => {\n    submitTransferPassword({ password });\n  }, [submitTransferPassword]);\n\n  const handleBackClick = useCallback(() => {\n    if (state === TransferState.Confirm) {\n      setTransferScreen({ state: TransferState.Initial });\n    }\n    if (state === TransferState.Password) {\n      setTransferScreen({ state: TransferState.Confirm });\n    }\n  }, [setTransferScreen, state]);\n\n  const handleTransactionInfoClick = useCallback(() => {\n    cancelTransfer();\n    showTransactionInfo({ txId });\n  }, [cancelTransfer, showTransactionInfo, txId]);\n\n  const handleTransactionRepeatClick = useCallback(() => {\n    startTransfer({\n      tokenSlug: tokenSlug || TON_TOKEN_SLUG,\n      toAddress,\n      amount,\n      comment,\n    });\n  }, [amount, comment, startTransfer, toAddress, tokenSlug]);\n\n  function renderComment() {\n    if (!comment) {\n      return undefined;\n    }\n\n    return (\n      <>\n        <div className={styles.label}>{shouldEncrypt ? lang('Encrypted Message') : lang('Comment')}</div>\n        <div className={buildClassName(styles.inputReadOnly, styles.inputReadOnly_words)}>{comment}</div>\n      </>\n    );\n  }\n\n  function renderConfirm(isActive: boolean) {\n    const addressName = savedAddresses?.[toAddress!] || toAddressName;\n\n    return (\n      <>\n        <ModalHeader title={lang('Is it all ok?')} onClose={cancelTransfer} />\n        <div className={modalStyles.transitionContent}>\n          <AnimatedIconWithPreview\n            size={ANIMATED_STICKER_SMALL_SIZE_PX}\n            play={isActive}\n            noLoop={false}\n            nonInteractive\n            className={buildClassName(styles.sticker, styles.sticker_sizeSmall)}\n            tgsUrl={ANIMATED_STICKERS_PATHS.bill}\n            previewUrl={ANIMATED_STICKERS_PATHS.billPreview}\n          />\n          <div className={styles.label}>{lang('Receiving Address')}</div>\n          <InteractiveTextField\n            address={toAddress!}\n            addressName={addressName}\n            copyNotification={lang('Address was copied!')}\n            className={styles.addressWidget}\n          />\n\n          <AmountWithFeeTextField\n            label={lang('Amount')}\n            amount={amount || 0}\n            symbol={symbol}\n            fee={fee ? bigStrToHuman(fee) : undefined}\n          />\n\n          {renderComment()}\n\n          <div className={modalStyles.buttons}>\n            {promiseId ? (\n              <Button onClick={cancelTransfer}>{lang('Cancel')}</Button>\n            ) : (\n              <Button onClick={handleBackClick}>{lang('Edit')}</Button>\n            )}\n            <Button\n              isPrimary\n              isLoading={isLoading}\n              onClick={submitTransferConfirm}\n            >\n              {lang('Confirm')}\n            </Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderPassword(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Confirm Transaction')} onClose={cancelTransfer} />\n        <PasswordForm\n          isActive={isActive}\n          isLoading={isLoading}\n          error={error}\n          placeholder={lang('Enter your password')}\n          onUpdate={clearTransferError}\n          onSubmit={handleTransferSubmit}\n          submitLabel={lang('Send')}\n          onCancel={handleBackClick}\n          cancelLabel={lang('Back')}\n        />\n      </>\n    );\n  }\n\n  function renderComplete(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Coins have been sent!')} onClose={cancelTransfer} />\n\n        <div className={modalStyles.transitionContent}>\n          <TransferResult\n            playAnimation={isActive}\n            amount={renderedTransactionAmount ? -renderedTransactionAmount : undefined}\n            tokenSymbol={symbol}\n            precision={AMOUNT_PRECISION}\n            balance={renderedTokenBalance}\n            fee={fee ? bigStrToHuman(fee) : 0}\n            operationAmount={amount ? -amount : undefined}\n            firstButtonText={txId ? lang('Details') : undefined}\n            secondButtonText={lang('Repeat')}\n            onFirstButtonClick={handleTransactionInfoClick}\n            onSecondButtonClick={handleTransactionRepeatClick}\n          />\n\n          <div className={modalStyles.buttons}>\n            <Button onClick={cancelTransfer} isPrimary>{lang('Close')}</Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case TransferState.Initial:\n        return (\n          <>\n            <ModalHeader title={lang('Send')} onClose={cancelTransfer} />\n            <TransferInitial />\n          </>\n        );\n      case TransferState.Confirm:\n        return renderConfirm(isActive);\n      case TransferState.Password:\n        return renderPassword(isActive);\n      case TransferState.ConnectHardware:\n        return (\n          <LedgerConnect\n            state={hardwareState}\n            isLedgerConnected={isLedgerConnected}\n            isTonAppConnected={isTonAppConnected}\n            onConnected={submitTransferHardware}\n            onClose={cancelTransfer}\n          />\n        );\n      case TransferState.ConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm transaction on your Ledger')}\n            error={error}\n            onClose={cancelTransfer}\n            onTryAgain={submitTransferHardware}\n          />\n        );\n      case TransferState.Complete:\n        return renderComplete(isActive);\n    }\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      isSlideUp\n      isOpen={isOpen}\n      onClose={cancelTransfer}\n      noBackdropClose\n      dialogClassName={styles.modalDialog}\n      onCloseAnimationEnd={updateNextKey}\n    >\n      <Transition\n        name=\"pushSlide\"\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accountState = selectCurrentAccountState(global);\n\n  const {\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n  } = global.hardware;\n\n  return {\n    currentTransfer: global.currentTransfer,\n    tokens: selectCurrentAccountTokens(global),\n    savedAddresses: accountState?.savedAddresses,\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n  };\n})(TransferModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"is-ios\":\"TojESQznDzZUGI0Ou9c0\",\"isIos\":\"TojESQznDzZUGI0Ou9c0\",\"is-android\":\"fkfSgDWFFOGuS6TNv9cf\",\"isAndroid\":\"fkfSgDWFFOGuS6TNv9cf\",\"containerInner\":\"WTyboGNbvEZK7eoy6CNK\",\"appSlide\":\"fbqvaOMVrTlU6neL3Byc\",\"appSlideContent\":\"JTCAWoFoGLlS6rOzcLD6\",\"transitionContainer\":\"cI3JkQM5S1pALKEeuan7\",\"loading\":\"j0ohj5GB2M3iVONNoPP5\"};","import React, { memo, useEffect } from '../lib/teact/teact';\nimport extension from '../lib/webextension-polyfill';\n\nimport { AppState } from '../global/types';\n\nimport { INACTIVE_MARKER, IS_ELECTRON } from '../config';\nimport { getActions, withGlobal } from '../global';\nimport { setActiveTabChangeListener } from '../util/activeTabMonitor';\nimport buildClassName from '../util/buildClassName';\nimport { IS_LINUX } from '../util/windowEnvironment';\nimport { updateSizes } from '../util/windowSize';\n\nimport { useDeviceScreen } from '../hooks/useDeviceScreen';\nimport useFlag from '../hooks/useFlag';\nimport useSyncEffect from '../hooks/useSyncEffect';\nimport useTimeout from '../hooks/useTimeout';\n\nimport AppInactive from './AppInactive';\nimport Auth from './auth/Auth';\nimport DappConnectModal from './dapps/DappConnectModal';\nimport DappTransactionModal from './dapps/DappTransactionModal';\nimport Dialogs from './Dialogs';\nimport ElectronHeader from './electron/ElectronHeader';\nimport LedgerModal from './ledger/LedgerModal';\nimport Main from './main/Main';\nimport BackupModal from './main/modals/BackupModal';\nimport SignatureModal from './main/modals/SignatureModal';\nimport TransactionModal from './main/modals/TransactionModal';\nimport Notifications from './main/Notifications';\nimport Settings from './settings/Settings';\nimport SettingsModal from './settings/SettingsModal';\nimport TransferModal from './transfer/TransferModal';\nimport Transition from './ui/Transition';\n\n// import Test from './components/test/TestNoRedundancy';\nimport styles from './App.module.scss';\n\ninterface StateProps {\n  appState: AppState;\n  accountId?: string;\n  isBackupWalletModalOpen?: boolean;\n  isHardwareModalOpen?: boolean;\n  areSettingsOpen?: boolean;\n}\n\nconst PRERENDER_MAIN_DELAY = 1200;\nlet mainKey = 0;\n\nfunction App({\n  appState,\n  accountId,\n  isBackupWalletModalOpen,\n  isHardwareModalOpen,\n  areSettingsOpen,\n}: StateProps) {\n  // return <Test />;\n  const {\n    closeBackupWalletModal,\n    closeHardwareWalletModal,\n    closeSettings,\n    cancelCaching,\n  } = getActions();\n  const { isPortrait } = useDeviceScreen();\n  const areSettingsInModal = !isPortrait || IS_ELECTRON;\n\n  const [isInactive, markInactive] = useFlag(false);\n  const [canPrerenderMain, prerenderMain] = useFlag();\n\n  const renderingKey = isInactive\n    ? AppState.Inactive\n    : ((areSettingsOpen && !areSettingsInModal) ? AppState.Settings : appState);\n\n  useTimeout(\n    prerenderMain,\n    renderingKey === AppState.Auth && !canPrerenderMain ? PRERENDER_MAIN_DELAY : undefined,\n  );\n\n  useEffect(() => {\n    updateSizes();\n    setActiveTabChangeListener(() => {\n      document.title = `MyTonWallet ${INACTIVE_MARKER}`;\n\n      markInactive();\n      closeSettings();\n      cancelCaching();\n    });\n  }, [markInactive]);\n\n  useSyncEffect(() => {\n    if (accountId) {\n      mainKey += 1;\n    }\n  }, [accountId]);\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case AppState.Auth:\n        return <Auth />;\n      case AppState.Main:\n        return (\n          <Transition\n            name=\"semiFade\"\n            activeKey={mainKey}\n            shouldCleanup\n            nextKey={renderingKey === AppState.Auth && canPrerenderMain ? mainKey + 1 : undefined}\n            slideClassName={buildClassName(styles.appSlide, styles.appSlideContent, 'custom-scroll')}\n          >\n            <Main key={mainKey} />\n          </Transition>\n        );\n      case AppState.Settings:\n        return <Settings />;\n      case AppState.Ledger:\n        return <LedgerModal isOpen onClose={handleCloseBrowserTab} />;\n      case AppState.Inactive:\n        return <AppInactive />;\n    }\n  }\n\n  return (\n    <>\n      {IS_ELECTRON && !IS_LINUX && <ElectronHeader withTitle />}\n\n      <Transition\n        name={isPortrait ? 'pushSlide' : 'semiFade'}\n        activeKey={renderingKey}\n        shouldCleanup\n        className={styles.transitionContainer}\n        slideClassName={buildClassName(styles.appSlide, 'custom-scroll')}\n      >\n        {renderContent}\n      </Transition>\n\n      {areSettingsInModal && (\n        <SettingsModal\n          isOpen={areSettingsOpen}\n          onClose={closeSettings}\n        >\n          <Settings isInsideModal />\n        </SettingsModal>\n      )}\n      {!isInactive && (\n        <>\n          <LedgerModal isOpen={isHardwareModalOpen} onClose={closeHardwareWalletModal} />\n          <BackupModal\n            isOpen={isBackupWalletModalOpen}\n            onClose={closeBackupWalletModal}\n          />\n          <TransferModal />\n          <SignatureModal />\n          <TransactionModal />\n          <DappConnectModal />\n          <DappTransactionModal />\n          <Notifications />\n          <Dialogs />\n        </>\n      )}\n    </>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  return {\n    appState: global.appState,\n    accountId: global.currentAccountId,\n    isBackupWalletModalOpen: global.isBackupWalletModalOpen,\n    isHardwareModalOpen: global.isHardwareModalOpen,\n    areSettingsOpen: global.areSettingsOpen,\n  };\n})(App));\n\nasync function handleCloseBrowserTab() {\n  const tab = await extension.tabs.getCurrent();\n  await extension.tabs.remove(tab.id!);\n}\n","import type { DeviceInfo } from '@tonconnect/protocol';\n\nimport packageJson from '../../package.json';\n\ntype DevicePlatform = DeviceInfo['platform'];\n\nexport const TONCONNECT_VERSION = 2;\n\nexport function tonConnectGetDeviceInfo(): DeviceInfo {\n  return {\n    platform: getPlatform()!,\n    appName: 'MyTonWallet',\n    appVersion: packageJson.version,\n    maxProtocolVersion: TONCONNECT_VERSION,\n    features: [\n      'SendTransaction', // TODO DEPRECATED\n      { name: 'SendTransaction', maxMessages: 4 },\n    ],\n  };\n}\n\nfunction getPlatform(): DevicePlatform {\n  const { userAgent, platform } = window.navigator;\n\n  const macosPlatforms = ['macOS', 'Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'];\n  const windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE'];\n  const iphonePlatforms = ['iPhone'];\n  const ipadPlatforms = ['iPad', 'iPod'];\n\n  let os: DevicePlatform | undefined;\n\n  if (macosPlatforms.indexOf(platform) !== -1) {\n    os = 'mac';\n  } else if (iphonePlatforms.indexOf(platform) !== -1) {\n    os = 'iphone';\n  } else if (ipadPlatforms.indexOf(platform) !== -1) {\n    os = 'ipad';\n  } else if (windowsPlatforms.indexOf(platform) !== -1) {\n    os = 'windows';\n  } else if (/Android/.test(userAgent)) {\n    os = 'linux';\n  } else if (/Linux/.test(platform)) {\n    os = 'linux';\n  }\n\n  return os!;\n}\n","import { ElectronEvent } from '../../../electron/types';\n\nimport { tonConnectGetDeviceInfo } from '../../../util/tonConnectEnvironment';\nimport { IS_CHROME_EXTENSION } from '../../../util/windowEnvironment';\nimport { callApi, initApi } from '../../../api';\nimport { addActionHandler, getGlobal } from '../../index';\nimport { selectNewestTxIds } from '../../selectors';\n\naddActionHandler('initApi', async (global, actions) => {\n  const origin = IS_CHROME_EXTENSION ? `chrome-extension://${chrome.runtime.id}` : window.location.origin;\n  initApi(actions.apiUpdate, { origin });\n\n  window.electron?.on(ElectronEvent.DEEPLINK_TONCONNECT, (params: { url: string }) => {\n    const deviceInfo = tonConnectGetDeviceInfo();\n    void callApi('startSseConnection', params.url, deviceInfo);\n  });\n\n  await callApi('waitDataPreload');\n\n  const { currentAccountId } = getGlobal();\n\n  if (!currentAccountId) {\n    return;\n  }\n\n  void callApi(\n    'activateAccount',\n    currentAccountId,\n    selectNewestTxIds(global, currentAccountId),\n  );\n});\n","import { ApiTransactionDraftError } from '../../../api/types';\nimport { TransferState } from '../../types';\nimport type { ApiDappTransaction, ApiToken } from '../../../api/types';\nimport type { UserToken } from '../../types';\n\nimport {\n  buildCollectionByKey, findLast, mapValues, unique,\n} from '../../../util/iteratees';\nimport { signLedgerTransactions, submitLedgerTransfer } from '../../../util/ledger';\nimport { pause } from '../../../util/schedulers';\nimport { callApi } from '../../../api';\nimport { ApiUserRejectsError } from '../../../api/errors';\nimport { bigStrToHuman, getIsTxIdLocal, humanToBigStr } from '../../helpers';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  clearCurrentTransfer,\n  updateAccountState,\n  updateCurrentAccountsState,\n  updateCurrentAccountState,\n  updateCurrentSignature,\n  updateCurrentTransfer,\n  updateSendingLoading,\n  updateSettings,\n  updateTransactionsIsLoading,\n} from '../../reducers';\nimport {\n  selectAccount, selectAccountSettings, selectAccountState, selectCurrentAccountState, selectLastTxIds,\n} from '../../selectors';\n\nconst IMPORT_TOKEN_PAUSE = 250;\n\naddActionHandler('startTransfer', (global, actions, payload) => {\n  const {\n    tokenSlug, toAddress, amount, comment,\n  } = payload || {};\n\n  setGlobal(updateCurrentTransfer(global, {\n    state: TransferState.Initial,\n    error: undefined,\n    toAddress,\n    amount,\n    comment,\n    tokenSlug,\n  }));\n});\n\naddActionHandler('changeTransferToken', (global, actions, { tokenSlug }) => {\n  setGlobal(updateCurrentTransfer(global, { tokenSlug }));\n});\n\naddActionHandler('setTransferScreen', (global, actions, payload) => {\n  const { state } = payload;\n\n  setGlobal(updateCurrentTransfer(global, { state }));\n});\n\naddActionHandler('submitTransferInitial', async (global, actions, payload) => {\n  const {\n    tokenSlug, toAddress, amount, comment, shouldEncrypt,\n  } = payload;\n  const { decimals } = global.tokenInfo!.bySlug[tokenSlug];\n\n  setGlobal(updateSendingLoading(global, true));\n\n  const result = await callApi(\n    'checkTransactionDraft',\n    global.currentAccountId!,\n    tokenSlug,\n    toAddress,\n    humanToBigStr(amount, decimals),\n    comment,\n    shouldEncrypt,\n  );\n\n  global = getGlobal();\n  global = updateSendingLoading(global, false);\n\n  if (!result || result.error) {\n    if (result?.addressName) {\n      global = updateCurrentTransfer(global, { toAddressName: result.addressName });\n    }\n    if (result?.fee) {\n      global = updateCurrentTransfer(global, { fee: result.fee });\n    }\n\n    setGlobal(global);\n\n    if (result?.error === ApiTransactionDraftError.InsufficientBalance) {\n      actions.showDialog({ message: 'The network fee has slightly changed, try sending again.' });\n    } else {\n      actions.showError({ error: result?.error });\n    }\n\n    return;\n  }\n\n  setGlobal(updateCurrentTransfer(global, {\n    state: TransferState.Confirm,\n    error: undefined,\n    toAddress,\n    amount,\n    comment,\n    shouldEncrypt,\n    fee: result.fee,\n    toAddressName: result.addressName,\n    tokenSlug,\n  }));\n});\n\naddActionHandler('fetchFee', async (global, actions, payload) => {\n  const {\n    tokenSlug, toAddress, amount, comment, shouldEncrypt,\n  } = payload;\n  const { decimals } = global.tokenInfo!.bySlug[tokenSlug];\n\n  const result = await callApi(\n    'checkTransactionDraft',\n    global.currentAccountId!,\n    tokenSlug,\n    toAddress,\n    humanToBigStr(amount, decimals),\n    comment,\n    shouldEncrypt,\n  );\n\n  if (result?.fee) {\n    setGlobal(updateCurrentTransfer(getGlobal(), { fee: result.fee }));\n  }\n});\n\naddActionHandler('submitTransferConfirm', (global, actions) => {\n  const accountId = global.currentAccountId!;\n  const account = selectAccount(global, accountId)!;\n\n  if (account.isHardware) {\n    actions.resetHardwareWalletConnect();\n    global = updateCurrentTransfer(getGlobal(), { state: TransferState.ConnectHardware });\n  } else {\n    global = updateCurrentTransfer(global, { state: TransferState.Password });\n  }\n\n  setGlobal(global);\n});\n\naddActionHandler('submitTransferPassword', async (global, actions, payload) => {\n  const { password } = payload;\n  const {\n    toAddress,\n    comment,\n    amount,\n    promiseId,\n    tokenSlug,\n    fee,\n    shouldEncrypt,\n  } = global.currentTransfer;\n  const { decimals } = global.tokenInfo!.bySlug[tokenSlug!];\n\n  if (!(await callApi('verifyPassword', password))) {\n    setGlobal(updateCurrentTransfer(getGlobal(), { error: 'Wrong password, please try again' }));\n\n    return;\n  }\n\n  setGlobal(updateCurrentTransfer(getGlobal(), {\n    isLoading: true,\n    error: undefined,\n  }));\n\n  if (promiseId) {\n    void callApi('confirmDappRequest', promiseId, password);\n    return;\n  }\n\n  const options = {\n    accountId: global.currentAccountId!,\n    password,\n    slug: tokenSlug!,\n    toAddress: toAddress!,\n    amount: humanToBigStr(amount!, decimals),\n    comment,\n    fee,\n    shouldEncrypt,\n  };\n\n  const result = await callApi('submitTransfer', options);\n\n  setGlobal(updateCurrentTransfer(getGlobal(), {\n    isLoading: false,\n  }));\n\n  if (!result || 'error' in result) {\n    actions.showError({ error: result?.error });\n  }\n});\n\naddActionHandler('submitTransferHardware', async (global) => {\n  const {\n    toAddress,\n    comment,\n    amount,\n    promiseId,\n    tokenSlug,\n    fee,\n    rawPayload,\n    parsedPayload,\n    stateInit,\n  } = global.currentTransfer;\n  const { decimals } = global.tokenInfo!.bySlug[tokenSlug!];\n\n  const accountId = global.currentAccountId!;\n\n  setGlobal(updateCurrentTransfer(getGlobal(), {\n    isLoading: true,\n    error: undefined,\n    state: TransferState.ConfirmHardware,\n  }));\n\n  if (promiseId) {\n    const message: ApiDappTransaction = {\n      toAddress: toAddress!,\n      amount: humanToBigStr(amount!, decimals),\n      rawPayload,\n      payload: parsedPayload,\n      stateInit,\n    };\n\n    try {\n      const signedMessage = await signLedgerTransactions(accountId, [message]);\n      void callApi('confirmDappRequest', promiseId, signedMessage);\n    } catch (err) {\n      if (err instanceof ApiUserRejectsError) {\n        setGlobal(updateCurrentTransfer(getGlobal(), {\n          isLoading: false,\n          error: 'Canceled by the user',\n        }));\n      } else {\n        void callApi('cancelDappRequest', promiseId, 'Unknown error');\n      }\n    }\n    return;\n  }\n\n  const options = {\n    accountId: global.currentAccountId!,\n    password: '',\n    slug: tokenSlug!,\n    toAddress: toAddress!,\n    amount: humanToBigStr(amount!, decimals),\n    comment,\n    fee,\n  };\n\n  const result = await submitLedgerTransfer(options);\n\n  const error = result === undefined ? 'Transfer error' : undefined;\n\n  setGlobal(updateCurrentTransfer(getGlobal(), {\n    isLoading: false,\n    error,\n  }));\n});\n\naddActionHandler('clearTransferError', (global) => {\n  setGlobal(updateCurrentTransfer(global, { error: undefined }));\n});\n\naddActionHandler('cancelTransfer', (global) => {\n  const { promiseId } = global.currentTransfer;\n\n  if (promiseId) {\n    void callApi('cancelDappRequest', promiseId, 'Canceled by the user');\n  }\n\n  setGlobal(clearCurrentTransfer(global));\n});\n\naddActionHandler('fetchTokenTransactions', async (global, actions, payload) => {\n  const { limit } = payload || {};\n  const slug = payload.slug;\n\n  global = updateTransactionsIsLoading(global, true);\n  setGlobal(global);\n\n  let { txIdsBySlug } = selectCurrentAccountState(global)?.transactions || {};\n  let tokenTxIds = (txIdsBySlug && txIdsBySlug[slug]) || [];\n\n  const offsetId = findLast(tokenTxIds, (txId) => !getIsTxIdLocal(txId));\n\n  const result = await callApi('fetchTokenTransactionSlice', global.currentAccountId!, slug, offsetId, limit);\n  global = getGlobal();\n  global = updateTransactionsIsLoading(global, false);\n\n  if (!result) {\n    setGlobal(global);\n    return;\n  }\n\n  const newTxsById = buildCollectionByKey(result, 'txId');\n  const newOrderedTxIds = Object.keys(newTxsById);\n  const currentTxs = selectCurrentAccountState(global)?.transactions;\n\n  txIdsBySlug = currentTxs?.txIdsBySlug || {};\n  tokenTxIds = unique(txIdsBySlug[slug] || []).concat(newOrderedTxIds);\n\n  global = updateCurrentAccountState(global, {\n    transactions: {\n      ...currentTxs,\n      byTxId: { ...(currentTxs?.byTxId || {}), ...newTxsById },\n      txIdsBySlug: { ...txIdsBySlug, [slug]: tokenTxIds },\n    },\n  });\n\n  setGlobal(global);\n});\n\naddActionHandler('fetchAllTransactions', async (global, actions, payload) => {\n  const { limit } = payload || {};\n\n  global = updateTransactionsIsLoading(global, true);\n  setGlobal(global);\n\n  const accountId = global.currentAccountId!;\n  const lastTxIds = selectLastTxIds(global, accountId);\n\n  const result = await callApi('fetchAllTransactionSlice', global.currentAccountId!, lastTxIds, limit);\n  global = getGlobal();\n  global = updateTransactionsIsLoading(global, false);\n\n  if (!result || !result.length) {\n    setGlobal(global);\n    return;\n  }\n\n  const newTxsById = buildCollectionByKey(result, 'txId');\n  const currentTxs = selectCurrentAccountState(global)?.transactions;\n  let txIdsBySlug = { ...currentTxs?.txIdsBySlug };\n\n  txIdsBySlug = result.reduce((acc, { slug, txId }) => {\n    acc[slug] = (acc[slug] || []).concat([txId]);\n    return acc;\n  }, txIdsBySlug);\n\n  txIdsBySlug = mapValues(txIdsBySlug, (txIds) => unique(txIds));\n\n  global = updateCurrentAccountState(global, {\n    transactions: {\n      ...currentTxs,\n      byTxId: { ...(currentTxs?.byTxId || {}), ...newTxsById },\n      txIdsBySlug,\n    },\n  });\n\n  setGlobal(global);\n});\n\naddActionHandler('setIsBackupRequired', (global, actions, { isMnemonicChecked }) => {\n  const { isBackupRequired } = selectCurrentAccountState(global);\n\n  setGlobal(updateCurrentAccountsState(global, {\n    isBackupRequired: isMnemonicChecked ? undefined : isBackupRequired,\n  }));\n});\n\naddActionHandler('submitSignature', async (global, actions, payload) => {\n  const { password } = payload;\n  const { promiseId } = global.currentSignature!;\n\n  if (!(await callApi('verifyPassword', password))) {\n    setGlobal(updateCurrentSignature(getGlobal(), { error: 'Wrong password, please try again' }));\n\n    return;\n  }\n\n  await callApi('confirmDappRequest', promiseId, password!);\n\n  setGlobal(updateCurrentSignature(getGlobal(), { isSigned: true }));\n});\n\naddActionHandler('clearSignatureError', (global) => {\n  setGlobal(updateCurrentSignature(global, { error: undefined }));\n});\n\naddActionHandler('cancelSignature', (global) => {\n  const { promiseId } = global.currentSignature || {};\n\n  if (promiseId) {\n    void callApi('cancelDappRequest', promiseId, 'Canceled by the user');\n  }\n\n  setGlobal({\n    ...global,\n    currentSignature: undefined,\n  });\n});\n\naddActionHandler('addToken', (global, actions, { token }) => {\n  const accountId = global.currentAccountId!;\n  const { balances } = selectAccountState(global, accountId) || {};\n  const accountSettings = selectAccountSettings(global, accountId) ?? {};\n\n  if (balances?.bySlug[token.slug]) {\n    return;\n  }\n\n  const apiToken: ApiToken = {\n    name: token.name,\n    symbol: token.symbol,\n    slug: token.slug,\n    decimals: token.decimals,\n    image: token.image,\n    keywords: token.keywords,\n    quote: {\n      price: token.price ?? 0,\n      percentChange1h: 0,\n      percentChange24h: token.change24h ?? 0,\n      percentChange7d: token.change7d ?? 0,\n      percentChange30d: token.change30d ?? 0,\n      history24h: token.history24h ?? [],\n      history7d: token.history7d ?? [],\n      history30d: token.history30d ?? [],\n    },\n  };\n\n  global = updateAccountState(global, accountId, {\n    balances: {\n      ...balances,\n      bySlug: {\n        ...balances?.bySlug,\n        [apiToken.slug]: '0',\n      },\n    },\n  });\n\n  global = updateSettings(global, {\n    byAccountId: {\n      ...global.settings.byAccountId,\n      [accountId]: {\n        ...accountSettings,\n        orderedSlugs: [\n          ...accountSettings.orderedSlugs ?? [],\n          apiToken.slug,\n        ],\n      },\n    },\n  });\n\n  setGlobal({\n    ...global,\n    tokenInfo: {\n      ...global.tokenInfo,\n      bySlug: {\n        ...global.tokenInfo.bySlug,\n        [apiToken.slug]: apiToken,\n      },\n    },\n  });\n\n  actions.toggleDisabledToken({ slug: apiToken.slug });\n});\n\naddActionHandler('importToken', async (global, actions, { address }) => {\n  setGlobal(\n    updateSettings(global, {\n      importToken: {\n        isLoading: true,\n        token: undefined,\n      },\n    }),\n  );\n\n  const baseToken = await callApi('importToken', global.currentAccountId!, address);\n  await pause(IMPORT_TOKEN_PAUSE);\n\n  if (!baseToken) {\n    global = getGlobal();\n    setGlobal(\n      updateSettings(global, {\n        importToken: {\n          isLoading: false,\n          token: undefined,\n        },\n      }),\n    );\n    return;\n  }\n\n  const {\n    slug, symbol, name, image, decimals, keywords,\n  } = baseToken;\n  const amount = bigStrToHuman('0', decimals);\n\n  const token: UserToken = {\n    symbol,\n    slug,\n    amount,\n    name,\n    image,\n    decimals,\n    price: 0,\n    change24h: 0,\n    change7d: 0,\n    change30d: 0,\n    isDisabled: false,\n    keywords,\n  };\n\n  global = getGlobal();\n  setGlobal(\n    updateSettings(global, {\n      importToken: {\n        isLoading: false,\n        token,\n      },\n    }),\n  );\n});\n\naddActionHandler('resetImportToken', (global) => {\n  setGlobal(\n    updateSettings(global, {\n      importToken: {\n        isLoading: false,\n        token: undefined,\n      },\n    }),\n  );\n});\n","import { StakingState } from '../../types';\n\nimport { DEFAULT_DECIMAL_PLACES } from '../../../config';\nimport { callApi } from '../../../api';\nimport { humanToBigStr } from '../../helpers';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  clearStaking,\n  updateAccountState,\n  updatePoolState,\n  updateStaking,\n} from '../../reducers';\n\naddActionHandler('fetchStakingState', async (global) => {\n  const { currentAccountId } = global;\n\n  const stakingState = await callApi('getStakingState', currentAccountId!);\n  if (!stakingState) {\n    return;\n  }\n\n  setGlobal(updateAccountState(getGlobal(), currentAccountId!, {\n    stakingBalance: stakingState.amount + stakingState.pendingDepositAmount,\n    isUnstakeRequested: stakingState.isUnstakeRequested,\n  }, true));\n});\n\naddActionHandler('startStaking', (global, actions, payload) => {\n  const { isUnstaking } = payload || {};\n\n  setGlobal(updateStaking(global, {\n    state: isUnstaking ? StakingState.UnstakeInitial : StakingState.StakeInitial,\n    error: undefined,\n  }));\n});\n\naddActionHandler('fetchStakingFee', async (global, actions, payload) => {\n  const { amount } = payload;\n  const { currentAccountId } = global;\n\n  if (!currentAccountId) {\n    return;\n  }\n\n  const result = await callApi(\n    'checkStakeDraft',\n    currentAccountId,\n    humanToBigStr(amount!, DEFAULT_DECIMAL_PLACES),\n  );\n  if (!result) {\n    return;\n  }\n\n  global = getGlobal();\n  global = updateStaking(global, {\n    fee: result.fee,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('submitStakingInitial', async (global, actions, payload) => {\n  const { amount, isUnstaking } = payload || {};\n  const { currentAccountId } = global;\n\n  if (!currentAccountId) {\n    return;\n  }\n\n  setGlobal(updateStaking(global, { isLoading: true, error: undefined }));\n\n  if (isUnstaking) {\n    const result = await callApi('checkUnstakeDraft', currentAccountId);\n    global = getGlobal();\n    global = updateStaking(global, { isLoading: false });\n\n    if (result) {\n      if (result.error) {\n        global = updateStaking(global, { error: result.error });\n      } else {\n        global = updateStaking(global, {\n          state: StakingState.UnstakePassword,\n          fee: result.fee,\n          amount,\n          error: undefined,\n        });\n      }\n    }\n  } else {\n    const result = await callApi(\n      'checkStakeDraft',\n      currentAccountId,\n      humanToBigStr(amount!, DEFAULT_DECIMAL_PLACES),\n    );\n    global = getGlobal();\n    global = updateStaking(global, { isLoading: false });\n\n    if (result) {\n      if (result.error) {\n        global = updateStaking(global, { error: result.error });\n      } else {\n        global = updateStaking(global, {\n          state: StakingState.StakePassword,\n          fee: result.fee,\n          amount,\n          error: undefined,\n        });\n      }\n    }\n  }\n\n  setGlobal(global);\n});\n\naddActionHandler('submitStakingPassword', async (global, actions, payload) => {\n  const { password, isUnstaking } = payload;\n  const { amount, fee } = global.staking;\n\n  if (!(await callApi('verifyPassword', password))) {\n    setGlobal(updateStaking(getGlobal(), { error: 'Wrong password, please try again' }));\n\n    return;\n  }\n\n  setGlobal(updateStaking(getGlobal(), {\n    isLoading: true,\n    error: undefined,\n  }));\n\n  if (isUnstaking) {\n    const result = await callApi(\n      'submitUnstake',\n      global.currentAccountId!,\n      password,\n      fee,\n    );\n\n    global = getGlobal();\n    global = updateStaking(global, { isLoading: false });\n    if (!result) {\n      actions.showDialog({\n        message: 'Unstaking was unsuccessful. Try again later',\n      });\n      global = getGlobal();\n    } else {\n      global = updateStaking(global, { state: StakingState.UnstakeComplete });\n    }\n  } else {\n    const result = await callApi(\n      'submitStake',\n      global.currentAccountId!,\n      password,\n      humanToBigStr(amount!, DEFAULT_DECIMAL_PLACES),\n      fee,\n    );\n\n    global = getGlobal();\n    global = updateStaking(global, { isLoading: false });\n    if (!result) {\n      actions.showDialog({\n        message: 'Staking was unsuccessful. Try again later',\n      });\n      global = getGlobal();\n    } else {\n      global = updateStaking(global, { state: StakingState.StakeComplete });\n    }\n  }\n\n  setGlobal(global);\n});\n\naddActionHandler('clearStakingError', (global) => {\n  setGlobal(updateStaking(global, { error: undefined }));\n});\n\naddActionHandler('cancelStaking', (global) => {\n  setGlobal(clearStaking(global));\n});\n\naddActionHandler('setStakingScreen', (global, actions, payload) => {\n  const { state } = payload;\n\n  setGlobal(updateStaking(global, { state }));\n});\n\naddActionHandler('fetchBackendStakingState', async (global) => {\n  const result = await callApi('getBackendStakingState', global.currentAccountId!);\n\n  if (!result) {\n    return;\n  }\n\n  global = getGlobal();\n  global = updateAccountState(global, global.currentAccountId!, { stakingHistory: result }, true);\n  global = updatePoolState(global, result.poolState, true);\n  setGlobal(global);\n});\n","import { DappConnectState, TransferState } from '../../types';\n\nimport { signLedgerProof, signLedgerTransactions } from '../../../util/ledger';\nimport { callApi } from '../../../api';\nimport { ApiUserRejectsError } from '../../../api/errors';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  clearConnectedDapps,\n  clearCurrentDappTransfer,\n  clearDappConnectRequest,\n  removeConnectedDapp,\n  updateConnectedDapps,\n  updateCurrentDappTransfer,\n  updateDappConnectRequest,\n} from '../../reducers';\n\naddActionHandler('submitDappConnectRequestConfirm', async (global, actions, { password, additionalAccountIds }) => {\n  const {\n    promiseId, permissions,\n  } = global.dappConnectRequest!;\n\n  if (permissions?.isPasswordRequired && (!password || !(await callApi('verifyPassword', password)))) {\n    global = getGlobal();\n    setGlobal(updateDappConnectRequest(global, { error: 'Wrong password, please try again' }));\n\n    return;\n  }\n\n  await callApi('confirmDappRequestConnect', promiseId!, {\n    password,\n    additionalAccountIds,\n  });\n\n  global = getGlobal();\n  global = clearDappConnectRequest(global);\n  setGlobal(global);\n\n  const { currentAccountId } = global;\n\n  const result = await callApi('getDapps', currentAccountId!);\n\n  if (!result) {\n    return;\n  }\n\n  global = getGlobal();\n  global = updateConnectedDapps(global, { dapps: result });\n  setGlobal(global);\n});\n\naddActionHandler('submitDappConnectRequestConfirmHardware', async (global, actions, { additionalAccountIds }) => {\n  const {\n    accountId, promiseId, proof,\n  } = global.dappConnectRequest!;\n\n  global = getGlobal();\n  global = updateDappConnectRequest(global, {\n    error: undefined,\n    state: DappConnectState.ConfirmHardware,\n  });\n  setGlobal(global);\n\n  try {\n    const signature = await signLedgerProof(accountId!, proof!);\n    await callApi('confirmDappRequestConnect', promiseId!, {\n      signature,\n      additionalAccountIds,\n    });\n  } catch (err) {\n    setGlobal(updateDappConnectRequest(getGlobal(), {\n      error: 'Canceled by the user',\n    }));\n    return;\n  }\n\n  global = getGlobal();\n  global = clearDappConnectRequest(global);\n  setGlobal(global);\n\n  const { currentAccountId } = global;\n\n  const result = await callApi('getDapps', currentAccountId!);\n\n  if (!result) {\n    return;\n  }\n\n  global = getGlobal();\n  global = updateConnectedDapps(global, { dapps: result });\n  setGlobal(global);\n});\n\naddActionHandler('cancelDappConnectRequestConfirm', (global) => {\n  const { promiseId } = global.dappConnectRequest || {};\n\n  if (!promiseId) {\n    return;\n  }\n\n  void callApi('cancelDappRequest', promiseId!, 'Canceled by the user');\n\n  global = getGlobal();\n  global = clearDappConnectRequest(global);\n  setGlobal(global);\n});\n\naddActionHandler('setDappConnectRequestState', (global, actions, { state }) => {\n  setGlobal(updateDappConnectRequest(global, { state }));\n});\n\naddActionHandler('cancelDappTransfer', (global) => {\n  const { promiseId } = global.currentDappTransfer;\n\n  if (promiseId) {\n    void callApi('cancelDappRequest', promiseId, 'Canceled by the user');\n  }\n\n  setGlobal(clearCurrentDappTransfer(global));\n});\n\naddActionHandler('submitDappTransferPassword', async (global, actions, { password }) => {\n  const { promiseId } = global.currentDappTransfer;\n\n  if (!promiseId) {\n    return;\n  }\n\n  if (!(await callApi('verifyPassword', password))) {\n    global = getGlobal();\n    global = updateCurrentDappTransfer(global, {\n      error: 'Wrong password, please try again',\n    });\n    setGlobal(global);\n\n    return;\n  }\n\n  global = getGlobal();\n  global = updateCurrentDappTransfer(global, {\n    isLoading: true,\n    error: undefined,\n  });\n  setGlobal(global);\n\n  void callApi('confirmDappRequest', promiseId, password);\n\n  global = getGlobal();\n  global = clearCurrentDappTransfer(global);\n  setGlobal(global);\n});\n\naddActionHandler('submitDappTransferHardware', async (global) => {\n  const { promiseId, transactions } = global.currentDappTransfer;\n\n  if (!promiseId) {\n    return;\n  }\n\n  global = getGlobal();\n  global = updateCurrentDappTransfer(global, {\n    isLoading: true,\n    error: undefined,\n    state: TransferState.ConfirmHardware,\n  });\n  setGlobal(global);\n\n  const accountId = global.currentAccountId!;\n\n  try {\n    const signedMessages = await signLedgerTransactions(accountId, transactions!);\n    void callApi('confirmDappRequest', promiseId, signedMessages);\n  } catch (err) {\n    if (err instanceof ApiUserRejectsError) {\n      setGlobal(updateCurrentDappTransfer(getGlobal(), {\n        isLoading: false,\n        error: 'Canceled by the user',\n      }));\n      return;\n    } else {\n      void callApi('cancelDappRequest', promiseId, 'Unknown error');\n    }\n  }\n\n  global = getGlobal();\n  global = clearCurrentDappTransfer(global);\n  setGlobal(global);\n});\n\naddActionHandler('getDapps', async (global) => {\n  const { currentAccountId } = global;\n\n  const result = await callApi('getDapps', currentAccountId!);\n\n  if (!result) {\n    return;\n  }\n\n  global = getGlobal();\n  global = updateConnectedDapps(global, { dapps: result });\n  setGlobal(global);\n});\n\naddActionHandler('deleteAllDapps', (global) => {\n  const { currentAccountId } = global;\n\n  void callApi('deleteAllDapps', currentAccountId!);\n\n  global = getGlobal();\n  global = clearConnectedDapps(global);\n  setGlobal(global);\n});\n\naddActionHandler('deleteDapp', (global, actions, payload) => {\n  const { currentAccountId } = global;\n  const { origin } = payload;\n\n  void callApi('deleteDapp', currentAccountId!, origin);\n\n  global = getGlobal();\n  global = removeConnectedDapp(global, origin);\n  setGlobal(global);\n});\n","import { buildCollectionByKey } from '../../../util/iteratees';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  addNft,\n  removeNft,\n  updateAccountState,\n  updateBalance,\n  updateNft,\n  updatePoolState,\n  updateTokens,\n} from '../../reducers';\n\naddActionHandler('apiUpdate', (global, actions, update) => {\n  switch (update.type) {\n    case 'updateBalance': {\n      global = updateBalance(global, update.accountId, update.slug, update.balance);\n      setGlobal(global);\n\n      break;\n    }\n\n    case 'updateStakingState': {\n      global = updateAccountState(global, update.accountId, {\n        stakingBalance: update.stakingState.amount + update.stakingState.pendingDepositAmount,\n        isUnstakeRequested: update.stakingState.isUnstakeRequested,\n      }, true);\n      setGlobal(global);\n      break;\n    }\n\n    case 'updateBackendStakingState': {\n      const { poolState } = update.backendStakingState;\n      global = updatePoolState(global, poolState, true);\n      setGlobal(global);\n\n      break;\n    }\n\n    case 'updateTokens': {\n      global = updateTokens(global, update.tokens, true);\n      setGlobal(global);\n\n      break;\n    }\n\n    case 'updateNfts': {\n      const { accountId } = update;\n      const nfts = buildCollectionByKey(update.nfts, 'address');\n      global = getGlobal();\n      global = updateAccountState(global, accountId, {\n        nfts: {\n          byAddress: nfts,\n          orderedAddresses: Object.keys(nfts),\n        },\n      });\n      setGlobal(global);\n      break;\n    }\n\n    case 'nftSent': {\n      const { accountId, nftAddress } = update;\n      global = removeNft(global, accountId, nftAddress);\n      setGlobal(global);\n      break;\n    }\n\n    case 'nftReceived': {\n      const { accountId, nft } = update;\n      global = addNft(global, accountId, nft);\n      setGlobal(global);\n      break;\n    }\n\n    case 'nftPutUpForSale': {\n      const { accountId, nftAddress } = update;\n      global = updateNft(global, accountId, nftAddress, {\n        isOnSale: true,\n      });\n      setGlobal(global);\n      break;\n    }\n  }\n\n  actions.initTokensOrder();\n});\n","import type { ApiNft } from '../../api/types';\nimport type { GlobalState } from '../types';\n\nimport { selectAccountState } from '../selectors';\nimport { updateAccountState } from './misc';\n\nexport function addNft(global: GlobalState, accountId: string, nft: ApiNft) {\n  const nftAddress = nft.address;\n  const nfts = selectAccountState(global, accountId)!.nfts;\n  const orderedAddresses = (nfts?.orderedAddresses ?? []).filter((address) => address !== nftAddress);\n\n  return updateAccountState(global, accountId, {\n    nfts: {\n      byAddress: { ...nfts?.byAddress, [nftAddress]: nft },\n      orderedAddresses: [nftAddress, ...orderedAddresses],\n    },\n  });\n}\n\nexport function removeNft(global: GlobalState, accountId: string, nftAddress: string) {\n  const nfts = selectAccountState(global, accountId)!.nfts;\n  const orderedAddresses = (nfts?.orderedAddresses ?? []).filter((address) => address !== nftAddress);\n  const { [nftAddress]: removedNft, ...byAddress } = nfts?.byAddress ?? {};\n\n  return updateAccountState(global, accountId, {\n    nfts: {\n      byAddress,\n      orderedAddresses,\n    },\n  });\n}\n\nexport function updateNft(global: GlobalState, accountId: string, nftAddress: string, partial: Partial<ApiNft>) {\n  const nfts = selectAccountState(global, accountId)!.nfts;\n  const nft = nfts?.byAddress[nftAddress];\n  if (!nfts || !nft) return global;\n\n  return updateAccountState(global, accountId, {\n    nfts: {\n      ...nfts,\n      byAddress: {\n        ...nfts.byAddress,\n        [nftAddress]: { ...nft, ...partial },\n      },\n    },\n  });\n}\n","import { logDebugError } from './logs';\n\nconst safePlay = (mediaEl: HTMLMediaElement) => {\n  mediaEl.play().catch((err) => {\n    logDebugError('safePlay', err);\n  });\n};\n\nexport default safePlay;\n","import safePlay from './safePlay';\nimport { debounce } from './schedulers';\n\nconst DEBOUNCE_MS = 1000;\nconst sound = new Audio('./incoming-transaction.mp3');\n\n// Workaround: this function is called once on the first user interaction.\n// After that, it will be possible to play the notification on iOS without problems.\n// https://rosswintle.uk/2019/01/skirting-the-ios-safari-audio-auto-play-policy-for-ui-sound-effects/\nexport function initializeSoundsForSafari() {\n  // This is a tiny MP3 file that is silent - retrieved from https://bigsoundbank.com and then modified\n  // eslint-disable-next-line max-len\n  sound.src = 'data:audio/mpeg;base64,SUQzBAAAAAABEVRYWFgAAAAtAAADY29tbWVudABCaWdTb3VuZEJhbmsuY29tIC8gTGFTb25vdGhlcXVlLm9yZwBURU5DAAAAHQAAA1N3aXRjaCBQbHVzIMKpIE5DSCBTb2Z0d2FyZQBUSVQyAAAABgAAAzIyMzUAVFNTRQAAAA8AAANMYXZmNTcuODMuMTAwAAAAAAAAAAAAAAD/80DEAAAAA0gAAAAATEFNRTMuMTAwVVVVVVVVVVVVVUxBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/zQsRbAAADSAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/zQMSkAAADSAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV';\n  sound.muted = true;\n  sound.volume = 0.0001;\n  sound.play()\n    .then(() => {\n      sound.pause();\n      sound.volume = 1;\n      sound.currentTime = 0;\n      sound.muted = false;\n\n      requestAnimationFrame(() => {\n        sound.src = './incoming-transaction.mp3';\n      });\n    });\n}\n\nexport const playIncomingTransactionSound = debounce(() => {\n  safePlay(sound);\n}, DEBOUNCE_MS, true, false);\n","import { TransferState } from '../../types';\n\nimport { DEFAULT_DECIMAL_PLACES, TINY_TRANSFER_MAX_AMOUNT } from '../../../config';\nimport { playIncomingTransactionSound } from '../../../util/appSounds';\nimport { bigStrToHuman } from '../../helpers';\nimport { addActionHandler, setGlobal } from '../../index';\nimport {\n  removeTransaction,\n  updateAccountState,\n  updateCurrentTransfer,\n  updateTransaction,\n  updateTransactionsIsLoadingByAccount,\n} from '../../reducers';\nimport { selectAccountState } from '../../selectors';\n\nconst TX_AGE_TO_PLAY_SOUND = 60000; // 1 min\n\naddActionHandler('apiUpdate', (global, actions, update) => {\n  switch (update.type) {\n    case 'newLocalTransaction': {\n      const {\n        accountId,\n        transaction,\n        transaction: { amount, toAddress, txId },\n      } = update;\n      const { decimals } = global.tokenInfo!.bySlug[transaction.slug!]!;\n\n      global = updateTransaction(global, accountId, transaction);\n\n      if (\n        -bigStrToHuman(amount, decimals) === global.currentTransfer.amount\n        && toAddress === global.currentTransfer.toAddress\n      ) {\n        global = updateCurrentTransfer(global, {\n          txId,\n          state: TransferState.Complete,\n          isLoading: false,\n        });\n      }\n\n      if (transaction.type === 'stake' || transaction.type === 'unstake') {\n        actions.fetchStakingState();\n      }\n\n      setGlobal(global);\n\n      break;\n    }\n\n    case 'newTransactions': {\n      const { transactions, accountId } = update;\n      let shouldPlaySound = false;\n      let wasStakingTransaction = false;\n\n      global = updateTransactionsIsLoadingByAccount(global, accountId, false);\n\n      for (const transaction of transactions) {\n        global = updateTransaction(global, accountId, transaction);\n\n        if (\n          transaction.isIncoming\n          && global.settings.canPlaySounds\n          && (Date.now() - transaction.timestamp < TX_AGE_TO_PLAY_SOUND)\n          && (!global.settings.areTinyTransfersHidden\n            || Math.abs(bigStrToHuman(\n              transaction.amount,\n              global.tokenInfo?.bySlug[transaction.slug!].decimals || DEFAULT_DECIMAL_PLACES,\n            )) >= TINY_TRANSFER_MAX_AMOUNT\n          )\n        ) {\n          shouldPlaySound = true;\n        }\n\n        if (transaction.type === 'stake' || transaction.type === 'unstake') {\n          wasStakingTransaction = true;\n        }\n      }\n\n      if (shouldPlaySound) {\n        playIncomingTransactionSound();\n      }\n\n      if (wasStakingTransaction) {\n        actions.fetchStakingState();\n      }\n\n      setGlobal(global);\n\n      break;\n    }\n\n    case 'updateTxComplete': {\n      const { txId, localTxId, accountId } = update;\n\n      global = removeTransaction(global, accountId, localTxId);\n\n      if (global.currentTransfer.txId === localTxId) {\n        global = updateCurrentTransfer(global, { txId });\n      }\n\n      const { currentTransactionId } = selectAccountState(global, accountId) || {};\n      if (currentTransactionId === localTxId) {\n        global = updateAccountState(global, accountId, { currentTransactionId: txId });\n      }\n\n      setGlobal(global);\n    }\n  }\n});\n","import { DappConnectState, TransferState } from '../../types';\n\nimport { TON_TOKEN_SLUG } from '../../../config';\nimport { callApi } from '../../../api';\nimport { bigStrToHuman } from '../../helpers';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  clearCurrentDappTransfer,\n  clearCurrentSignature,\n  clearCurrentTransfer,\n  updateAccountState,\n  updateCurrentDappTransfer,\n  updateCurrentSignature,\n  updateCurrentTransfer,\n  updateDappConnectRequest,\n} from '../../reducers';\nimport {\n  selectAccount, selectAccountState, selectIsHardwareAccount, selectNewestTxIds,\n} from '../../selectors';\n\naddActionHandler('apiUpdate', (global, actions, update) => {\n  switch (update.type) {\n    case 'createTransaction': {\n      const {\n        promiseId,\n        amount,\n        toAddress,\n        fee,\n        comment,\n        rawPayload,\n        parsedPayload,\n        stateInit,\n      } = update;\n\n      global = clearCurrentTransfer(global);\n      global = updateCurrentTransfer(global, {\n        state: TransferState.Confirm,\n        toAddress,\n        amount: bigStrToHuman(amount), // TODO Unsafe?\n        fee,\n        comment,\n        promiseId,\n        tokenSlug: TON_TOKEN_SLUG,\n        rawPayload,\n        parsedPayload,\n        stateInit,\n      });\n      setGlobal(global);\n\n      break;\n    }\n\n    case 'createSignature': {\n      const { promiseId, dataHex } = update;\n\n      global = clearCurrentSignature(global);\n      global = updateCurrentSignature(global, {\n        promiseId,\n        dataHex,\n      });\n      setGlobal(global);\n\n      break;\n    }\n\n    case 'showError': {\n      const { error } = update;\n      actions.showError({ error });\n\n      break;\n    }\n\n    case 'updateTonProxyState': {\n      const { isEnabled } = update;\n\n      setGlobal({\n        ...global,\n        settings: {\n          ...global.settings,\n          isTonProxyEnabled: isEnabled,\n        },\n      });\n\n      break;\n    }\n\n    case 'updateTonMagicState': {\n      const { isEnabled } = update;\n\n      setGlobal({\n        ...global,\n        settings: {\n          ...global.settings,\n          isTonMagicEnabled: isEnabled,\n        },\n      });\n\n      break;\n    }\n\n    case 'dappConnect': {\n      const {\n        promiseId,\n        dapp,\n        accountId,\n        permissions,\n        proof,\n      } = update;\n\n      const { isHardware } = selectAccount(global, accountId)!;\n\n      global = updateDappConnectRequest(global, {\n        state: DappConnectState.Info,\n        promiseId,\n        accountId,\n        dapp,\n        permissions: {\n          isAddressRequired: permissions.address,\n          isPasswordRequired: permissions.proof && !isHardware,\n        },\n        proof,\n      });\n      setGlobal(global);\n\n      break;\n    }\n\n    case 'updateActiveDapp': {\n      const { accountId, origin } = update;\n\n      global = updateAccountState(global, accountId, {\n        activeDappOrigin: origin,\n      });\n      setGlobal(global);\n      break;\n    }\n\n    case 'dappDisconnect': {\n      const { accountId, origin } = update;\n      const accountState = selectAccountState(global, accountId);\n\n      if (accountState?.activeDappOrigin === origin) {\n        global = updateAccountState(global, accountId, {\n          activeDappOrigin: undefined,\n        });\n        global = clearCurrentDappTransfer(global);\n        setGlobal(global);\n      }\n      break;\n    }\n\n    case 'dappSendTransactions': {\n      const {\n        promiseId,\n        transactions,\n        fee,\n        accountId,\n        dapp,\n      } = update;\n\n      (async () => {\n        const { currentAccountId } = global;\n        if (currentAccountId !== accountId) {\n          const newestTxIds = selectNewestTxIds(global, accountId);\n          await callApi('activateAccount', accountId, newestTxIds);\n          setGlobal({\n            ...getGlobal(),\n            currentAccountId: accountId,\n          });\n        }\n\n        const state = selectIsHardwareAccount(global) && transactions.length > 1\n          ? TransferState.WarningHardware\n          : TransferState.Initial;\n\n        global = getGlobal();\n        global = clearCurrentDappTransfer(global);\n        global = updateCurrentDappTransfer(global, {\n          state,\n          promiseId,\n          transactions,\n          fee,\n          dapp,\n        });\n        setGlobal(global);\n      })();\n\n      break;\n    }\n\n    case 'updateDeeplinkHookState': {\n      const { isEnabled } = update;\n\n      setGlobal({\n        ...global,\n        settings: {\n          ...global.settings,\n          isDeeplinkHookEnabled: isEnabled,\n        },\n      });\n\n      break;\n    }\n\n    case 'prepareTransaction': {\n      const {\n        amount,\n        toAddress,\n        comment,\n      } = update;\n\n      global = clearCurrentTransfer(global);\n      global = updateCurrentTransfer(global, {\n        state: TransferState.Initial,\n        toAddress,\n        amount: bigStrToHuman(amount || '0'),\n        comment,\n        tokenSlug: TON_TOKEN_SLUG,\n      });\n\n      setGlobal(global);\n    }\n  }\n});\n","import { ApiTransactionDraftError, ApiTransactionError } from '../../../api/types';\nimport type { NotificationType } from '../../types';\n\nimport { IS_ELECTRON } from '../../../config';\nimport { genRelatedAccountIds } from '../../../util/account';\nimport { initializeSoundsForSafari } from '../../../util/appSounds';\nimport { omit } from '../../../util/iteratees';\nimport { clearPreviousLangpacks, setLanguage } from '../../../util/langProvider';\nimport switchAnimationLevel from '../../../util/switchAnimationLevel';\nimport switchTheme from '../../../util/switchTheme';\nimport {\n  IS_ANDROID, IS_EXTENSION,\n  IS_IOS, IS_LINUX, IS_MAC_OS, IS_SAFARI,\n  IS_WINDOWS, setPageSafeAreaProperty, setScrollbarWidthProperty,\n} from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport {\n  addActionHandler, getActions, getGlobal, setGlobal,\n} from '../../index';\nimport { updateCurrentAccountState } from '../../reducers';\nimport { selectNetworkAccounts, selectNewestTxIds } from '../../selectors';\n\naddActionHandler('init', (_, actions) => {\n  const { documentElement } = document;\n\n  if (IS_IOS) {\n    documentElement.classList.add('is-ios');\n  } else if (IS_ANDROID) {\n    documentElement.classList.add('is-android');\n  } else if (IS_MAC_OS) {\n    documentElement.classList.add('is-macos');\n  } else if (IS_WINDOWS) {\n    documentElement.classList.add('is-windows');\n  } else if (IS_LINUX) {\n    documentElement.classList.add('is-linux');\n  }\n  if (IS_SAFARI) {\n    documentElement.classList.add('is-safari');\n  }\n  if (IS_EXTENSION) {\n    documentElement.classList.add('is-extension');\n  }\n  if (IS_ELECTRON) {\n    documentElement.classList.add('is-electron');\n  }\n\n  setScrollbarWidthProperty();\n  setPageSafeAreaProperty();\n\n  actions.afterInit();\n});\n\naddActionHandler('afterInit', (global) => {\n  const { theme, animationLevel, langCode } = global.settings;\n\n  switchTheme(theme);\n  switchAnimationLevel(animationLevel);\n  void setLanguage(langCode);\n  clearPreviousLangpacks();\n\n  if (IS_SAFARI || IS_IOS) {\n    document.addEventListener('click', initializeSoundsForSafari, { once: true });\n  }\n});\n\naddActionHandler('showDialog', (global, actions, payload) => {\n  const { message } = payload;\n\n  const newDialogs = [...global.dialogs];\n  const existingMessageIndex = newDialogs.findIndex((value) => value === message);\n  if (existingMessageIndex !== -1) {\n    newDialogs.splice(existingMessageIndex, 1);\n  }\n\n  newDialogs.push(message);\n\n  return {\n    ...global,\n    dialogs: newDialogs,\n  };\n});\n\naddActionHandler('dismissDialog', (global) => {\n  const newDialogs = [...global.dialogs];\n\n  newDialogs.pop();\n\n  return {\n    ...global,\n    dialogs: newDialogs,\n  };\n});\n\naddActionHandler('selectToken', (global, actions, { slug } = {}) => {\n  return updateCurrentAccountState(global, { currentTokenSlug: slug });\n});\n\naddActionHandler('showError', (global, actions, { error } = {}) => {\n  switch (error) {\n    case ApiTransactionDraftError.InvalidAmount:\n      actions.showDialog({ message: 'Invalid amount' });\n      break;\n\n    case ApiTransactionDraftError.InvalidToAddress:\n      actions.showDialog({ message: 'Invalid address' });\n      break;\n\n    case ApiTransactionDraftError.InsufficientBalance:\n      actions.showDialog({ message: 'Insufficient balance' });\n      break;\n\n    case ApiTransactionDraftError.DomainNotResolved:\n      actions.showDialog({ message: 'Domain is not connected to a wallet' });\n      break;\n\n    case ApiTransactionDraftError.WalletNotInitialized:\n      actions.showDialog({\n        message: 'Encryption is not possible. The recipient is not a wallet or has no outgoing transactions.',\n      });\n      break;\n\n    case ApiTransactionError.PartialTransactionFailure:\n      actions.showDialog({ message: 'Not all transactions were sent successfully' });\n      break;\n\n    case ApiTransactionError.IncorrectDeviceTime:\n      actions.showDialog({ message: 'The time on your device is incorrect, sync it and try again' });\n      break;\n\n    case ApiTransactionError.UnsuccesfulTransfer:\n      actions.showDialog({ message: 'Transfer was unsuccessful. Try again later' });\n      break;\n\n    case ApiTransactionError.UnsupportedHardwarePayload:\n      actions.showDialog({ message: 'The hardware wallet does not support this data format' });\n      break;\n\n    case ApiTransactionError.Unexpected:\n    case undefined:\n      actions.showDialog({ message: 'Unexpected' });\n      break;\n\n    default:\n      actions.showDialog({ message: error });\n      break;\n  }\n});\n\naddActionHandler('showNotification', (global, actions, payload) => {\n  const { message, icon } = payload;\n\n  const newNotifications: NotificationType[] = [...global.notifications];\n  const existingNotificationIndex = newNotifications.findIndex((n) => n.message === message);\n  if (existingNotificationIndex !== -1) {\n    newNotifications.splice(existingNotificationIndex, 1);\n  }\n\n  newNotifications.push({ message, icon });\n\n  return {\n    ...global,\n    notifications: newNotifications,\n  };\n});\n\naddActionHandler('dismissNotification', (global) => {\n  const newNotifications = [...global.notifications];\n\n  newNotifications.pop();\n\n  return {\n    ...global,\n    notifications: newNotifications,\n  };\n});\n\naddActionHandler('toggleTonProxy', (global, actions, { isEnabled }) => {\n  void callApi('doProxy', isEnabled);\n\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      isTonProxyEnabled: isEnabled,\n    },\n  };\n});\n\naddActionHandler('toggleTonMagic', (global, actions, { isEnabled }) => {\n  void callApi('doMagic', isEnabled);\n\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      isTonMagicEnabled: isEnabled,\n    },\n  };\n});\n\naddActionHandler('toggleDeeplinkHook', (global, actions, { isEnabled }) => {\n  void callApi('doDeeplinkHook', isEnabled);\n\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      isDeeplinkHookEnabled: isEnabled,\n    },\n  };\n});\n\naddActionHandler('signOut', async (global, actions, payload) => {\n  const { isFromAllAccounts } = payload || {};\n  const accountIds = Object.keys(selectNetworkAccounts(global)!);\n\n  if (isFromAllAccounts || accountIds.length === 1) {\n    await callApi('resetAccounts');\n\n    getActions().afterSignOut({ isFromAllAccounts: true });\n    getActions().init();\n  } else {\n    const prevAccountId = global.currentAccountId!;\n    const nextAccountId = accountIds.find((id) => id !== prevAccountId)!;\n    const nextNewestTxIds = selectNewestTxIds(global, nextAccountId);\n\n    await callApi('removeAccount', prevAccountId, nextAccountId, nextNewestTxIds);\n\n    global = getGlobal();\n\n    const prevAccountIds = genRelatedAccountIds(prevAccountId!);\n    const accountsById = omit(global.accounts!.byId, prevAccountIds);\n    const byAccountId = omit(global.byAccountId, prevAccountIds);\n\n    global = {\n      ...global,\n      currentAccountId: nextAccountId,\n      accounts: {\n        ...global.accounts!,\n        byId: accountsById,\n      },\n      byAccountId,\n    };\n\n    setGlobal(global);\n\n    getActions().afterSignOut();\n  }\n});\n","import extension from '../../../lib/webextension-polyfill';\n\nimport { AppState, HardwareConnectState } from '../../types';\nimport type { UserToken } from '../../types';\n\nimport { unique } from '../../../util/iteratees';\nimport { connectLedger } from '../../../util/ledger';\nimport { onLedgerTabClose, openLedgerTab } from '../../../util/ledger/tab';\nimport { pause } from '../../../util/schedulers';\nimport { callApi } from '../../../api';\nimport { IS_EXTENSION } from '../../../api/environment';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  renameAccount,\n  updateAccounts,\n  updateAccountState,\n  updateAuth,\n  updateCurrentAccountState,\n  updateHardware,\n  updateSettings,\n} from '../../reducers';\nimport {\n  selectAccountSettings,\n  selectAccountState,\n  selectCurrentAccountState, selectCurrentAccountTokens, selectDisabledSlugs, selectFirstNonHardwareAccount,\n} from '../../selectors';\n\nconst OPEN_LEDGER_TAB_DELAY = 500;\n\naddActionHandler('showTransactionInfo', (global, actions, { txId } = {}) => {\n  return updateCurrentAccountState(global, { currentTransactionId: txId });\n});\n\naddActionHandler('closeTransactionInfo', (global) => {\n  return updateCurrentAccountState(global, { currentTransactionId: undefined });\n});\n\naddActionHandler('addSavedAddress', (global, actions, { address, name }) => {\n  const { savedAddresses } = selectCurrentAccountState(global) || {};\n\n  return updateCurrentAccountState(global, {\n    savedAddresses: {\n      ...savedAddresses,\n      [address]: name,\n    },\n  });\n});\n\naddActionHandler('removeFromSavedAddress', (global, actions, { address }) => {\n  const { [address]: omit, ...savedAddresses } = selectCurrentAccountState(global)?.savedAddresses || {};\n\n  return updateCurrentAccountState(global, { savedAddresses });\n});\n\naddActionHandler('toggleTinyTransfersHidden', (global, actions, { isEnabled } = {}) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      areTinyTransfersHidden: isEnabled,\n    },\n  };\n});\n\naddActionHandler('setCurrentTokenPeriod', (global, actions, { period }) => {\n  return updateCurrentAccountState(global, {\n    currentTokenPeriod: period,\n  });\n});\n\naddActionHandler('addAccount', async (global, actions, { method, password }) => {\n  const firstNonHardwareAccount = selectFirstNonHardwareAccount(global);\n\n  if (firstNonHardwareAccount) {\n    if (!(await callApi('verifyPassword', password))) {\n      setGlobal(updateAccounts(getGlobal(), {\n        isLoading: undefined,\n        error: 'Wrong password, please try again',\n      }));\n      return;\n    }\n  }\n\n  global = getGlobal();\n  global = updateAuth(global, { password });\n  global = { ...global, isAddAccountModalOpen: undefined, appState: AppState.Auth };\n\n  setGlobal(global);\n\n  if (method === 'importMnemonic') {\n    actions.startImportingWallet();\n  } else {\n    actions.startCreatingWallet();\n  }\n});\n\naddActionHandler('renameAccount', (global, actions, { accountId, title }) => {\n  return renameAccount(global, accountId, title);\n});\n\naddActionHandler('clearAccountError', (global) => {\n  return updateAccounts(global, { error: undefined });\n});\n\naddActionHandler('openAddAccountModal', (global) => {\n  return { ...global, isAddAccountModalOpen: true };\n});\n\naddActionHandler('closeAddAccountModal', (global) => {\n  return { ...global, isAddAccountModalOpen: undefined };\n});\n\naddActionHandler('setTheme', (global, actions, { theme }) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      theme,\n    },\n  };\n});\n\naddActionHandler('setAnimationLevel', (global, actions, { level }) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      animationLevel: level,\n    },\n  };\n});\n\naddActionHandler('changeNetwork', (global, actions, { network }) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      isTestnet: network === 'testnet',\n    },\n  };\n});\n\naddActionHandler('openSettings', (global) => {\n  return { ...global, areSettingsOpen: true };\n});\n\naddActionHandler('closeSettings', (global) => {\n  if (!global.currentAccountId) {\n    return global;\n  }\n\n  return { ...global, areSettingsOpen: false };\n});\n\naddActionHandler('openBackupWalletModal', (global) => {\n  return { ...global, isBackupWalletModalOpen: true };\n});\n\naddActionHandler('closeBackupWalletModal', (global) => {\n  return { ...global, isBackupWalletModalOpen: undefined };\n});\n\naddActionHandler('openHardwareWalletModal', async (global, actions) => {\n  const startConnection = () => {\n    global = updateHardware(getGlobal(), {\n      hardwareState: HardwareConnectState.Connecting,\n    });\n    setGlobal({ ...global, isHardwareModalOpen: true });\n\n    actions.connectHardwareWallet();\n  };\n\n  if (await connectLedger()) {\n    startConnection();\n    return;\n  }\n\n  if (IS_EXTENSION) {\n    global = updateHardware(getGlobal(), {\n      hardwareState: HardwareConnectState.WaitingForBrowser,\n    });\n    setGlobal({ ...global, isHardwareModalOpen: true });\n\n    await pause(OPEN_LEDGER_TAB_DELAY);\n    const id = await openLedgerTab();\n    const popup = await extension.windows.getCurrent();\n\n    onLedgerTabClose(id, async () => {\n      await extension.windows.update(popup.id!, { focused: true });\n\n      if (!await connectLedger()) {\n        actions.closeHardwareWalletModal();\n        return;\n      }\n\n      startConnection();\n    });\n\n    return;\n  }\n\n  global = updateHardware(getGlobal(), {\n    hardwareState: HardwareConnectState.Connect,\n  });\n\n  setGlobal({ ...global, isHardwareModalOpen: true });\n});\n\naddActionHandler('closeHardwareWalletModal', (global) => {\n  setGlobal({ ...global, isHardwareModalOpen: false });\n});\n\naddActionHandler('toggleInvestorView', (global, actions, { isEnabled } = {}) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      isInvestorViewEnabled: isEnabled,\n    },\n  };\n});\n\naddActionHandler('changeLanguage', (global, actions, { langCode }) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      langCode,\n    },\n  };\n});\n\naddActionHandler('toggleCanPlaySounds', (global, actions, { isEnabled } = {}) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      canPlaySounds: isEnabled,\n    },\n  };\n});\n\naddActionHandler('setLandscapeActionsActiveTabIndex', (global, actions, { index }) => {\n  return {\n    ...global,\n    landscapeActionsActiveTabIndex: index,\n  };\n});\n\naddActionHandler('closeSecurityWarning', (global) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      isSecurityWarningHidden: true,\n    },\n  };\n});\n\naddActionHandler('toggleTokensWithNoBalance', (global, actions, { isEnabled }) => {\n  const accountId = global.currentAccountId!;\n  const accountSettings = selectAccountSettings(global, accountId) ?? {};\n  const { enabledSlugs = [] } = accountSettings;\n  const updatedEnabledSlugs = isEnabled ? [] : enabledSlugs;\n\n  setGlobal(updateSettings(global, {\n    areTokensWithNoBalanceHidden: isEnabled,\n    byAccountId: {\n      ...global.settings.byAccountId,\n      [accountId]: {\n        ...accountSettings,\n        enabledSlugs: updatedEnabledSlugs,\n      },\n    },\n  }));\n\n  actions.updateDisabledSlugs();\n});\n\naddActionHandler('toggleTokensWithNoPrice', (global, actions, { isEnabled }) => {\n  const accountId = global.currentAccountId!;\n  const accountSettings = selectAccountSettings(global, accountId) ?? {};\n  const { enabledSlugs = [] } = accountSettings;\n  const updatedEnabledSlugs = isEnabled ? [] : enabledSlugs;\n\n  setGlobal(updateSettings(global, {\n    areTokensWithNoPriceHidden: isEnabled,\n    byAccountId: {\n      ...global.settings.byAccountId,\n      [accountId]: {\n        ...accountSettings,\n        enabledSlugs: updatedEnabledSlugs,\n      },\n    },\n  }));\n\n  actions.updateDisabledSlugs();\n});\n\naddActionHandler('toggleSortByValue', (global, actions, { isEnabled }) => {\n  const accountId = global.currentAccountId!;\n  const accountSettings = selectAccountSettings(global, accountId) ?? {};\n  const accountToken = selectCurrentAccountTokens(global) ?? [];\n  const getTotalValue = ({ price, amount }: UserToken) => price * amount;\n  const updatedSlugs = accountToken\n    .slice()\n    .sort((a, b) => getTotalValue(b) - getTotalValue(a))\n    .map(({ slug }) => slug);\n\n  setGlobal(updateSettings(global, {\n    byAccountId: {\n      ...global.settings.byAccountId,\n      [accountId]: {\n        ...accountSettings,\n        orderedSlugs: updatedSlugs,\n      },\n    },\n    isSortByValueEnabled: isEnabled,\n  }));\n});\n\naddActionHandler('initTokensOrder', (global, actions) => {\n  const accountId = global.currentAccountId!;\n  const accountSettings = selectAccountSettings(global, accountId) ?? {};\n  const accountTokens = selectCurrentAccountTokens(global) ?? [];\n  const { orderedSlugs = [] } = accountSettings;\n  const newSlugs = accountTokens.map(({ slug }) => slug);\n\n  const updatedSlugs = unique([...orderedSlugs, ...newSlugs]);\n\n  setGlobal(updateSettings(global, {\n    byAccountId: {\n      ...global.settings.byAccountId,\n      [accountId]: {\n        ...accountSettings,\n        orderedSlugs: updatedSlugs,\n      },\n    },\n  }));\n\n  actions.updateDisabledSlugs();\n});\n\naddActionHandler('updateDisabledSlugs', (global) => {\n  const accountId = global.currentAccountId!;\n  const accountSettings = selectAccountSettings(global, accountId) ?? {};\n  const disabledSlugs = selectDisabledSlugs(\n    global,\n    global.settings.areTokensWithNoBalanceHidden,\n    global.settings.areTokensWithNoPriceHidden,\n  );\n\n  setGlobal(updateSettings(global, {\n    byAccountId: {\n      ...global.settings.byAccountId,\n      [accountId]: {\n        ...accountSettings,\n        disabledSlugs,\n      },\n    },\n  }));\n});\n\naddActionHandler('sortTokens', (global, actions, { orderedSlugs }) => {\n  const accountId = global.currentAccountId!;\n  const accountSettings = selectAccountSettings(global, accountId);\n\n  setGlobal(updateSettings(global, {\n    byAccountId: {\n      ...global.settings.byAccountId,\n      [accountId]: {\n        ...accountSettings,\n        orderedSlugs,\n      },\n    },\n  }));\n});\n\naddActionHandler('toggleDisabledToken', (global, actions, { slug }) => {\n  const accountId = global.currentAccountId!;\n  const accountSettings = selectAccountSettings(global, accountId) ?? {};\n  const { enabledSlugs = [], disabledSlugs = [] } = accountSettings;\n\n  const enabledSlugsCopy = enabledSlugs.slice();\n  const disabledSlugsCopy = disabledSlugs.slice();\n\n  const slugIndexInAvailable = enabledSlugsCopy.indexOf(slug);\n  const slugIndexInDisabled = disabledSlugsCopy.indexOf(slug);\n\n  if (slugIndexInAvailable !== -1) {\n    enabledSlugsCopy.splice(slugIndexInAvailable, 1);\n    disabledSlugsCopy.push(slug);\n  } else if (slugIndexInDisabled !== -1) {\n    disabledSlugsCopy.splice(slugIndexInDisabled, 1);\n    enabledSlugsCopy.push(slug);\n  } else {\n    enabledSlugsCopy.push(slug);\n  }\n\n  setGlobal(updateSettings(global, {\n    byAccountId: {\n      ...global.settings.byAccountId,\n      [accountId]: {\n        ...accountSettings,\n        enabledSlugs: enabledSlugsCopy,\n        disabledSlugs: disabledSlugsCopy,\n      },\n    },\n  }));\n\n  actions.updateDisabledSlugs();\n});\n\naddActionHandler('deleteToken', (global, actions, { slug }) => {\n  const accountId = global.currentAccountId!;\n  const { balances } = selectAccountState(global, accountId) || {};\n\n  if (!balances?.bySlug[slug]) {\n    return;\n  }\n\n  const { [slug]: deleted, ...bySlugCopy } = { ...balances?.bySlug };\n\n  global = updateAccountState(global, accountId, {\n    balances: {\n      ...balances,\n      bySlug: {\n        ...bySlugCopy,\n      },\n    },\n  });\n\n  const accountSettings = selectAccountSettings(global, accountId) ?? {};\n  const orderedSlugs = accountSettings.orderedSlugs?.filter((s) => s !== slug);\n  const enabledSlugs = accountSettings.enabledSlugs?.filter((s) => s !== slug);\n  const disabledSlugs = accountSettings.disabledSlugs?.filter((s) => s !== slug);\n\n  global = updateSettings(global, {\n    byAccountId: {\n      ...global.settings.byAccountId,\n      [accountId]: {\n        ...accountSettings,\n        orderedSlugs,\n        enabledSlugs,\n        disabledSlugs,\n      },\n    },\n  });\n\n  setGlobal(global);\n});\n","import { TransferState } from '../../types';\n\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  clearDappConnectRequestError, updateCurrentDappTransfer,\n} from '../../reducers';\nimport { selectAccount } from '../../selectors';\n\naddActionHandler('clearDappConnectRequestError', (global) => {\n  global = clearDappConnectRequestError(global);\n  setGlobal(global);\n});\n\naddActionHandler('showDappTransaction', (global, actions, payload) => {\n  const { transactionIdx } = payload;\n\n  global = updateCurrentDappTransfer(global, {\n    state: TransferState.Confirm,\n    viewTransactionOnIdx: transactionIdx,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('setDappTransferScreen', (global, actions, payload) => {\n  const { state } = payload;\n\n  global = updateCurrentDappTransfer(global, { state });\n  setGlobal(global);\n});\n\naddActionHandler('submitDappTransferConfirm', (global, actions) => {\n  const accountId = global.currentAccountId!;\n  const account = selectAccount(global, accountId)!;\n\n  if (account.isHardware) {\n    actions.resetHardwareWalletConnect();\n    global = updateCurrentDappTransfer(getGlobal(), { state: TransferState.ConnectHardware });\n  } else {\n    global = updateCurrentDappTransfer(global, { state: TransferState.Password });\n  }\n\n  setGlobal(global);\n});\n\naddActionHandler('clearDappTransferError', (global) => {\n  global = updateCurrentDappTransfer(global, {\n    error: undefined,\n  });\n  setGlobal(global);\n});\n","import { addCallback, removeCallback, setGlobal } from '../lib/teact/teactn';\n\nimport {\n  AppState,\n} from './types';\nimport type { GlobalState, TokenPeriod } from './types';\n\nimport {\n  DEBUG, DEFAULT_DECIMAL_PLACES, GLOBAL_STATE_CACHE_DISABLED, GLOBAL_STATE_CACHE_KEY, MAIN_ACCOUNT_ID,\n} from '../config';\nimport { buildAccountId, parseAccountId } from '../util/account';\nimport { cloneDeep, mapValues, pick } from '../util/iteratees';\nimport {\n  onBeforeUnload, onIdle, throttle,\n} from '../util/schedulers';\nimport { getIsTxIdLocal } from './helpers';\nimport { addActionHandler, getGlobal } from './index';\nimport { INITIAL_STATE, STATE_VERSION } from './initialState';\nimport { updateHardware } from './reducers';\n\nimport { isHeavyAnimating } from '../hooks/useHeavyAnimationCheck';\n\nconst UPDATE_THROTTLE = 5000;\nconst TXS_LIMIT = 20;\nconst ANIMATION_DELAY_MS = 320;\n\nconst updateCacheThrottled = throttle(() => onIdle(updateCache), UPDATE_THROTTLE, false);\n\nlet isCaching = false;\nlet unsubscribeFromBeforeUnload: NoneToVoidFunction | undefined;\n\nexport function initCache() {\n  if (GLOBAL_STATE_CACHE_DISABLED) {\n    return;\n  }\n\n  addActionHandler('afterSignIn', (global, actions) => {\n    setGlobal({ ...global, appState: AppState.Main });\n\n    setTimeout(() => {\n      actions.restartAuth();\n    }, ANIMATION_DELAY_MS);\n    if (isCaching) {\n      return;\n    }\n    setupCaching();\n  });\n\n  addActionHandler('afterSignOut', (global, actions, payload) => {\n    const { isFromAllAccounts } = payload || {};\n\n    if (isFromAllAccounts) {\n      setGlobal({\n        ...global,\n        state: AppState.Auth,\n      });\n\n      localStorage.removeItem(GLOBAL_STATE_CACHE_KEY);\n\n      if (!isCaching) {\n        return;\n      }\n\n      clearCaching();\n    }\n  });\n\n  addActionHandler('cancelCaching', () => {\n    if (!isCaching) {\n      return;\n    }\n\n    clearCaching();\n  });\n\n  addActionHandler('initLedgerPage', (global) => {\n    global = updateHardware(global, {\n      isRemoteTab: true,\n    });\n    setGlobal({ ...global, appState: AppState.Ledger });\n  });\n}\n\nexport function loadCache(initialState: GlobalState) {\n  return readCache(initialState);\n}\n\nfunction setupCaching() {\n  isCaching = true;\n  unsubscribeFromBeforeUnload = onBeforeUnload(() => {\n    // Allow to manually delete cache\n    if (DEBUG && !localStorage.getItem(GLOBAL_STATE_CACHE_KEY)) {\n      return;\n    }\n\n    updateCache();\n  }, true);\n  window.addEventListener('blur', updateCache);\n  addCallback(updateCacheThrottled);\n}\n\nfunction clearCaching() {\n  isCaching = false;\n  removeCallback(updateCacheThrottled);\n  window.removeEventListener('blur', updateCache);\n  if (unsubscribeFromBeforeUnload) {\n    unsubscribeFromBeforeUnload();\n  }\n}\n\nfunction readCache(initialState: GlobalState): GlobalState {\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.time('global-state-cache-read');\n  }\n\n  const json = localStorage.getItem(GLOBAL_STATE_CACHE_KEY);\n  let cached = json ? JSON.parse(json) as GlobalState : undefined;\n\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.timeEnd('global-state-cache-read');\n  }\n\n  if (cached) {\n    try {\n      migrateCache(cached, initialState);\n    } catch (err) {\n      // eslint-disable-next-line no-console\n      console.error(err);\n\n      cached = undefined;\n    }\n  }\n\n  return {\n    ...initialState,\n    ...cached,\n  };\n}\n\nfunction migrateCache(cached: GlobalState, initialState: GlobalState) {\n  // Pre-fill settings with defaults\n  cached.settings = {\n    ...initialState.settings,\n    ...cached.settings,\n  };\n\n  if (cached.stateVersion === STATE_VERSION) {\n    return;\n  }\n\n  // Migration to multi-accounts\n  if (!cached.byAccountId) {\n    cached.accounts = {\n      byId: {\n        [MAIN_ACCOUNT_ID]: {\n          address: (cached as any).addresses.byAccountId[MAIN_ACCOUNT_ID],\n          title: 'Main Account',\n        },\n      },\n    };\n\n    delete (cached as any).addresses;\n\n    cached.byAccountId = {};\n    cached.byAccountId[MAIN_ACCOUNT_ID] = {\n      isBackupRequired: Boolean((cached as any).isBackupRequired),\n      currentTokenSlug: (cached as any).currentTokenSlug as string,\n      currentTokenPeriod: (cached as any).currentTokenPeriod as TokenPeriod,\n    };\n\n    if ('balances' in cached) {\n      cached.byAccountId[MAIN_ACCOUNT_ID].balances = (cached as any).balances.byAccountId[MAIN_ACCOUNT_ID];\n      delete (cached as any).balances;\n    }\n\n    if ('transactions' in cached) {\n      cached.byAccountId[MAIN_ACCOUNT_ID].transactions = (cached as any).transactions;\n      delete (cached as any).transactions;\n    }\n\n    if ('nfts' in cached) {\n      cached.byAccountId[MAIN_ACCOUNT_ID].nfts = (cached as any).nfts;\n      delete (cached as any).nfts;\n    }\n\n    if ('savedAddresses' in cached) {\n      cached.byAccountId[MAIN_ACCOUNT_ID].savedAddresses = (cached as any).savedAddresses;\n      delete (cached as any).savedAddresses;\n    }\n\n    if ('backupWallet' in cached) {\n      delete (cached as any).backupWallet;\n    }\n  }\n\n  if (\n    (!cached.currentAccountId || !cached.byAccountId[cached.currentAccountId]) && Object.keys(cached.byAccountId).length\n  ) {\n    cached.currentAccountId = Object.keys(cached.byAccountId)[0];\n  }\n\n  // Initializing the v1\n  if (!cached.stateVersion && cached.accounts && Object.keys(cached.accounts).length > 0) {\n    cached.stateVersion = 1;\n  }\n\n  if (cached.stateVersion === 1) {\n    cached.stateVersion = 2;\n\n    if (cached.tokenInfo?.bySlug) {\n      cached.tokenInfo.bySlug = {\n        toncoin: {\n          ...cached.tokenInfo.bySlug.toncoin,\n          decimals: DEFAULT_DECIMAL_PLACES,\n        },\n      };\n    }\n\n    if (cached.byAccountId) {\n      Object.values(cached.byAccountId).forEach((accountState) => {\n        if (accountState.balances?.bySlug) {\n          accountState.balances.bySlug = pick(accountState.balances!.bySlug, ['toncoin']);\n        }\n        if (accountState.transactions) {\n          delete accountState.transactions;\n        }\n      });\n    }\n  }\n\n  if (cached.stateVersion === 2) {\n    cached.stateVersion = 3;\n\n    // Normalization of MAIN_ACCOUNT_ID '0' => '0-ton-mainnet'\n    const oldId = '0';\n    const newId = MAIN_ACCOUNT_ID;\n    if (cached.accounts && oldId in cached.accounts.byId) {\n      if (cached.currentAccountId === oldId) {\n        cached.currentAccountId = newId;\n      }\n      cached.accounts.byId[newId] = cached.accounts.byId[oldId];\n      delete cached.accounts.byId[oldId];\n      cached.byAccountId[newId] = cached.byAccountId[oldId];\n      delete cached.byAccountId[oldId];\n    }\n\n    // Add testnet accounts\n    if (cached.accounts) {\n      for (const accountId of Object.keys(cached.accounts.byId)) {\n        const testnetAccountId = buildAccountId({\n          ...parseAccountId(accountId),\n          network: 'testnet',\n        });\n        cached.accounts.byId[testnetAccountId] = cloneDeep(cached.accounts.byId[accountId]);\n        cached.byAccountId[testnetAccountId] = {};\n      }\n    }\n  }\n\n  if (cached.stateVersion === 3) {\n    cached.stateVersion = 4;\n\n    if (cached.byAccountId) {\n      for (const accountId of Object.keys(cached.byAccountId)) {\n        delete cached.byAccountId[accountId].transactions;\n      }\n    }\n  }\n\n  if (cached.stateVersion === 4) {\n    cached.stateVersion = 5;\n\n    cached.staking = {\n      ...initialState.staking,\n    };\n  }\n\n  if (cached.stateVersion === 5) {\n    cached.stateVersion = 6;\n\n    if (cached.byAccountId) {\n      for (const accountId of Object.keys(cached.byAccountId)) {\n        delete cached.byAccountId[accountId].transactions;\n      }\n    }\n  }\n\n  if (cached.stateVersion === 6) {\n    cached.stateVersion = 7;\n\n    if (cached.byAccountId) {\n      for (const accountId of Object.keys(cached.byAccountId)) {\n        delete cached.byAccountId[accountId].transactions;\n      }\n    }\n  }\n\n  if (cached.stateVersion === 7) {\n    if (cached.byAccountId) {\n      for (const accountId of Object.keys(cached.byAccountId)) {\n        delete (cached.byAccountId[accountId] as any).backupWallet;\n      }\n    }\n\n    cached.stateVersion = 8;\n  }\n\n  // When adding migration here, increase `STATE_VERSION`\n}\n\nfunction updateCache() {\n  if (GLOBAL_STATE_CACHE_DISABLED) {\n    return;\n  }\n\n  if (!isCaching || isHeavyAnimating()) {\n    return;\n  }\n\n  const global = getGlobal();\n  const reducedGlobal: GlobalState = {\n    ...INITIAL_STATE,\n    ...pick(global, [\n      'tokenInfo',\n      'settings',\n      'currentAccountId',\n      'stateVersion',\n      'landscapeActionsActiveTabIndex',\n    ]),\n    accounts: {\n      byId: global.accounts?.byId || {},\n    },\n    byAccountId: reduceByAccountId(global),\n  };\n\n  const json = JSON.stringify(reducedGlobal);\n  localStorage.setItem(GLOBAL_STATE_CACHE_KEY, json);\n}\n\nfunction reduceByAccountId(global: GlobalState) {\n  return Object.entries(global.byAccountId).reduce((acc, [accountId, state]) => {\n    acc[accountId] = pick(state, [\n      'balances',\n      'isBackupRequired',\n      'currentTokenSlug',\n      'currentTokenPeriod',\n      'savedAddresses',\n      'stakingBalance',\n      'isUnstakeRequested',\n      'poolState',\n      'stakingHistory',\n    ]);\n\n    const { txIdsBySlug, newestTransactionsBySlug } = state.transactions || {};\n\n    if (txIdsBySlug && Object.keys(txIdsBySlug).length) {\n      const reducedTxIdsBySlug = mapValues(txIdsBySlug, (txIds) => txIds.filter(\n        (id) => !getIsTxIdLocal(id),\n      ).slice(0, TXS_LIMIT));\n\n      acc[accountId].transactions = {\n        byTxId: pick(state.transactions!.byTxId, Object.values(reducedTxIdsBySlug).flat()),\n        txIdsBySlug: reducedTxIdsBySlug,\n        newestTransactionsBySlug,\n      };\n    }\n\n    return acc;\n  }, {} as GlobalState['byAccountId']);\n}\n","import { cloneDeep } from '../util/iteratees';\nimport { DETACHED_TAB_URL } from '../util/ledger/tab';\nimport { initCache, loadCache } from './cache';\nimport { addActionHandler } from './index';\nimport { INITIAL_STATE } from './initialState';\nimport { selectHasSession } from './selectors';\n\ninitCache();\n\naddActionHandler('init', (_, actions) => {\n  const initial = cloneDeep(INITIAL_STATE);\n\n  if (window.location.href.includes(DETACHED_TAB_URL)) {\n    actions.initLedgerPage();\n    return initial;\n  }\n\n  const cached = loadCache(initial);\n\n  const isAuth = selectHasSession(cached);\n\n  if (isAuth) {\n    actions.afterSignIn();\n  }\n\n  return loadCache(initial) || initial;\n});\n","import React from './lib/teact/teact';\nimport TeactDOM from './lib/teact/teact-dom';\n\nimport { DEBUG } from './config';\nimport { getActions, getGlobal } from './global';\n\nimport App from './components/App';\n\nimport './styles/index.scss';\n\nimport './global/actions';\nimport './global/init';\nimport './util/handleError';\n\nif (DEBUG) {\n  // eslint-disable-next-line no-console\n  console.log('>>> INIT');\n}\n\ngetActions().init();\ngetActions().initApi();\n\nif (DEBUG) {\n  // eslint-disable-next-line no-console\n  console.log('>>> START INITIAL RENDER');\n}\n\nTeactDOM.render(\n  <App />,\n  document.getElementById('root')!,\n);\n\nif (DEBUG) {\n  // eslint-disable-next-line no-console\n  console.log('>>> FINISH INITIAL RENDER');\n}\n\ndocument.addEventListener('dblclick', () => {\n  // eslint-disable-next-line no-console\n  console.warn('GLOBAL STATE', getGlobal());\n});\n","import LAYOUT_CAUSES from './layoutCauses';\n\ntype Entities = keyof typeof LAYOUT_CAUSES;\ntype Phase =\n  'measure'\n  | 'mutate';\ntype ErrorHandler = (error: Error) => any;\n\n// eslint-disable-next-line no-console\nconst DEFAULT_ERROR_HANDLER = console.error;\n\nlet onError: ErrorHandler = DEFAULT_ERROR_HANDLER;\n\nconst nativeMethods = new Map<string, AnyFunction>();\n\nlet phase: Phase = 'measure';\nlet isStrict = false;\nlet observer: MutationObserver | undefined;\n\nexport function setPhase(newPhase: Phase) {\n  phase = newPhase;\n}\n\nexport function getPhase() {\n  return phase;\n}\n\nexport function enableStrict() {\n  if (isStrict) return;\n\n  isStrict = true;\n  setupLayoutDetectors();\n  setupMutationObserver();\n}\n\nexport function disableStrict() {\n  if (!isStrict) return;\n\n  clearMutationObserver();\n  clearLayoutDetectors();\n  isStrict = false;\n}\n\nexport function forceMeasure(cb: () => any) {\n  if (phase !== 'mutate') {\n    throw new Error('The current phase is \\'measure\\'');\n  }\n\n  phase = 'measure';\n  const result = cb();\n  phase = 'mutate';\n\n  return result;\n}\n\nexport function setHandler(handler?: ErrorHandler) {\n  onError = handler || DEFAULT_ERROR_HANDLER;\n}\n\nfunction setupLayoutDetectors() {\n  Object.entries(LAYOUT_CAUSES).forEach(([name, causes]) => {\n    const entity = window[name as Entities];\n    if (!entity) return;\n    const prototype = typeof entity === 'object' ? entity : entity.prototype;\n\n    if ('props' in causes) {\n      causes.props.forEach((prop) => {\n        const nativeGetter = Object.getOwnPropertyDescriptor(prototype, prop)?.get;\n        if (!nativeGetter) {\n          return;\n        }\n\n        nativeMethods.set(`${name}#${prop}`, nativeGetter);\n\n        Object.defineProperty(prototype, prop, {\n          get() {\n            onMeasure(prop);\n\n            return nativeGetter.call(this);\n          },\n        });\n      });\n    }\n\n    if ('methods' in causes) {\n      causes.methods.forEach((method) => {\n        const nativeMethod = (prototype as any)[method]!;\n        nativeMethods.set(`${name}#${method}`, nativeMethod);\n\n        // eslint-disable-next-line func-names\n        (prototype as any)[method] = function (...args: any[]) {\n          onMeasure(method);\n\n          return nativeMethod.apply(this, args);\n        };\n      });\n    }\n  });\n}\n\nfunction clearLayoutDetectors() {\n  Object.entries(LAYOUT_CAUSES).forEach(([name, causes]) => {\n    const entity = window[name as Entities];\n    if (!entity) return;\n    const prototype = typeof entity === 'object' ? entity : entity.prototype;\n\n    if ('props' in causes) {\n      causes.props.forEach((prop) => {\n        const nativeGetter = nativeMethods.get(`${name}#${prop}`);\n        if (!nativeGetter) {\n          return;\n        }\n\n        Object.defineProperty(prototype, prop, { get: nativeGetter });\n      });\n    }\n\n    if ('methods' in causes) {\n      causes.methods.forEach((method) => {\n        (prototype as any)[method] = nativeMethods.get(`${name}#${method}`)!;\n      });\n    }\n  });\n\n  nativeMethods.clear();\n}\n\nfunction setupMutationObserver() {\n  observer = new MutationObserver((mutations) => {\n    if (phase !== 'mutate') {\n      mutations.forEach(({ target, type, attributeName }) => {\n        if (!document.contains(target)) {\n          return;\n        }\n\n        if (type === 'childList' && target instanceof HTMLElement && target.contentEditable) {\n          return;\n        }\n\n        if (attributeName?.startsWith('data-')) {\n          return;\n        }\n\n        // eslint-disable-next-line no-console\n        onError(new Error(`Unexpected mutation detected: \\`${type === 'attributes' ? attributeName : type}\\``));\n      });\n    }\n  });\n\n  observer.observe(document.body, {\n    childList: true,\n    attributes: true,\n    subtree: true,\n    characterData: false,\n  });\n}\n\nfunction clearMutationObserver() {\n  observer?.disconnect();\n  observer = undefined;\n}\n\nfunction onMeasure(propName: string) {\n  if (phase !== 'measure') {\n    onError(new Error(`Unexpected measurement detected: \\`${propName}\\``));\n  }\n}\n","import safeExec from '../../util/safeExec';\nimport { fastRaf, throttleWith } from '../../util/schedulers';\nimport { setPhase } from './stricterdom';\n\nlet pendingMeasureTasks: NoneToVoidFunction[] = [];\nlet pendingMutationTasks: NoneToVoidFunction[] = [];\nlet pendingForceReflowTasks: (() => NoneToVoidFunction | void)[] = [];\n\nconst runUpdatePassOnRaf = throttleWithRafFallback(() => {\n  const currentMeasureTasks = pendingMeasureTasks;\n  pendingMeasureTasks = [];\n  currentMeasureTasks.forEach((task) => {\n    safeExec(task);\n  });\n\n  // We use promises to provide correct order for Mutation Observer callback microtasks\n  Promise.resolve()\n    .then(() => {\n      setPhase('mutate');\n\n      const currentMutationTasks = pendingMutationTasks;\n      pendingMutationTasks = [];\n\n      currentMutationTasks.forEach((task) => {\n        safeExec(task);\n      });\n    })\n    .then(() => {\n      setPhase('measure');\n\n      const pendingForceReflowMutationTasks: NoneToVoidFunction[] = [];\n      // Will include tasks created during the loop\n      for (const task of pendingForceReflowTasks) {\n        safeExec(() => {\n          const mutationTask = task();\n          if (mutationTask) {\n            pendingForceReflowMutationTasks.push(mutationTask);\n          }\n        });\n      }\n      pendingForceReflowTasks = [];\n\n      return pendingForceReflowMutationTasks;\n    })\n    .then((pendingForceReflowMutationTasks) => {\n      setPhase('mutate');\n\n      // Will include tasks created during the loop\n      for (const task of pendingForceReflowMutationTasks) {\n        safeExec(task);\n      }\n    })\n    .then(() => {\n      setPhase('measure');\n    });\n});\n\nexport function requestMeasure(cb: NoneToVoidFunction) {\n  pendingMeasureTasks.push(cb);\n  runUpdatePassOnRaf();\n}\n\nexport function requestMutation(cb: NoneToVoidFunction) {\n  pendingMutationTasks.push(cb);\n  runUpdatePassOnRaf();\n}\n\nexport function requestNextMutation(cb: () => (NoneToVoidFunction | void)) {\n  requestMeasure(() => {\n    requestMutation(cb);\n  });\n}\n\nexport function requestForcedReflow(cb: () => (NoneToVoidFunction | void)) {\n  pendingForceReflowTasks.push(cb);\n  runUpdatePassOnRaf();\n}\n\nfunction throttleWithRafFallback<F extends AnyToVoidFunction>(fn: F) {\n  return throttleWith((throttledFn: NoneToVoidFunction) => {\n    fastRaf(throttledFn, true);\n  }, fn);\n}\n\nexport * from './stricterdom';\n","import type { Runtime } from 'webextension-polyfill';\nimport extension from '../lib/webextension-polyfill';\n\nimport generateUniqueId from './generateUniqueId';\n\nexport interface CancellableCallback {\n  (\n    ...args: any[]\n  ): void;\n\n  isCanceled?: boolean;\n  acceptsBuffer?: boolean;\n}\n\ntype InitData = {\n  channel?: string;\n  type: 'init';\n  messageId?: string;\n  name: 'init';\n  args: any;\n};\n\ntype CallMethodData = {\n  channel?: string;\n  type: 'callMethod';\n  messageId?: string;\n  name: string;\n  args: any;\n  withCallback?: boolean;\n};\n\nexport type OriginMessageData = InitData | CallMethodData | {\n  channel?: string;\n  type: 'cancelProgress';\n  messageId: string;\n};\n\nexport interface OriginMessageEvent {\n  data: OriginMessageData;\n}\n\nexport type ApiUpdate =\n  { type: string }\n  & any;\n\nexport type WorkerMessageData = {\n  channel?: string;\n  type: 'update';\n  update: ApiUpdate;\n} | {\n  channel?: string;\n  type: 'methodResponse';\n  messageId: string;\n  response?: any;\n  error?: { message: string };\n} | {\n  channel?: string;\n  type: 'methodCallback';\n  messageId: string;\n  callbackArgs: any[];\n} | {\n  channel?: string;\n  type: 'unhandledError';\n  error?: { message: string };\n};\n\nexport interface WorkerMessageEvent {\n  data: WorkerMessageData;\n}\n\ninterface RequestStates {\n  messageId: string;\n  resolve: Function;\n  reject: Function;\n  callback: AnyToVoidFunction;\n}\n\ntype InputRequestTypes = Record<string, AnyFunction>;\n\ntype Values<T> = T[keyof T];\nexport type RequestTypes<T extends InputRequestTypes> = Values<{\n  [Name in keyof (T)]: {\n    name: Name & string;\n    args: Parameters<T[Name]>;\n  }\n}>;\n\nclass ConnectorClass<T extends InputRequestTypes> {\n  private requestStates = new Map<string, RequestStates>();\n\n  private requestStatesByCallback = new Map<AnyToVoidFunction, RequestStates>();\n\n  constructor(\n    public target: Worker | Window | Runtime.Port,\n    private onUpdate?: (update: ApiUpdate) => void,\n    private channel?: string,\n    private targetOrigin = '*',\n  ) {\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  public destroy() {\n  }\n\n  init(...args: any[]) {\n    this.postMessage({\n      type: 'init',\n      args,\n    });\n  }\n\n  request(messageData: RequestTypes<T>) {\n    const { requestStates, requestStatesByCallback } = this;\n\n    const messageId = generateUniqueId();\n    const payload: CallMethodData = {\n      type: 'callMethod',\n      messageId,\n      ...messageData,\n    };\n\n    const requestState = { messageId } as RequestStates;\n\n    // Re-wrap type because of `postMessage`\n    const promise: Promise<any> = new Promise((resolve, reject) => {\n      Object.assign(requestState, { resolve, reject });\n    });\n\n    if (typeof payload.args[payload.args.length - 1] === 'function') {\n      payload.withCallback = true;\n\n      const callback = payload.args.pop() as AnyToVoidFunction;\n      requestState.callback = callback;\n      requestStatesByCallback.set(callback, requestState);\n    }\n\n    requestStates.set(messageId, requestState);\n    promise\n      .catch(() => undefined)\n      .finally(() => {\n        requestStates.delete(messageId);\n\n        if (requestState.callback) {\n          requestStatesByCallback.delete(requestState.callback);\n        }\n      });\n\n    this.postMessage(payload);\n\n    return promise;\n  }\n\n  cancelCallback(progressCallback: CancellableCallback) {\n    progressCallback.isCanceled = true;\n\n    const { messageId } = this.requestStatesByCallback.get(progressCallback) || {};\n    if (!messageId) {\n      return;\n    }\n\n    this.postMessage({\n      type: 'cancelProgress',\n      messageId,\n    });\n  }\n\n  onMessage(data: WorkerMessageData) {\n    const { requestStates, channel } = this;\n    if (data.channel !== channel) {\n      return;\n    }\n\n    if (data.type === 'update' && this.onUpdate) {\n      this.onUpdate(data.update);\n    }\n    if (data.type === 'methodResponse') {\n      const requestState = requestStates.get(data.messageId);\n      if (requestState) {\n        if (data.error) {\n          requestState.reject(data.error);\n        } else {\n          requestState.resolve(data.response);\n        }\n      }\n    } else if (data.type === 'methodCallback') {\n      const requestState = requestStates.get(data.messageId);\n      requestState?.callback?.(...data.callbackArgs);\n    } else if (data.type === 'unhandledError') {\n      throw new Error(data.error?.message);\n    }\n  }\n\n  private postMessage(data: AnyLiteral) {\n    data.channel = this.channel;\n\n    if (this.target === window) {\n      this.target.postMessage(data, this.targetOrigin);\n    } else {\n      this.target.postMessage(data);\n    }\n  }\n}\n\nexport function createConnector<T extends InputRequestTypes>(\n  worker: Worker | Window,\n  onUpdate?: (update: ApiUpdate) => void,\n  channel?: string,\n  targetOrigin?: string,\n) {\n  const connector = new ConnectorClass<T>(worker, onUpdate, channel, targetOrigin);\n\n  function handleMessage({ data }: WorkerMessageEvent | MessageEvent) {\n    connector.onMessage(data);\n  }\n\n  worker.addEventListener('message', handleMessage as any); // TS weirdly complains here\n\n  connector.destroy = () => {\n    worker.removeEventListener('message', handleMessage as any);\n  };\n\n  return connector;\n}\n\nexport function createExtensionConnector(\n  name: string,\n  onUpdate?: (update: ApiUpdate) => void,\n  getInitArgs?: () => any,\n  channel?: string,\n) {\n  const connector = new ConnectorClass(connect(), onUpdate, channel);\n\n  function connect() {\n    // eslint-disable-next-line no-restricted-globals\n    const port = extension.runtime.connect({ name });\n\n    port.onMessage.addListener((data: WorkerMessageData) => {\n      connector.onMessage(data);\n    });\n\n    // For some reason port can suddenly get disconnected\n    port.onDisconnect.addListener(() => {\n      connector.target = connect();\n      connector.init(getInitArgs?.());\n    });\n\n    return port;\n  }\n\n  connector.init(getInitArgs?.());\n\n  return connector;\n}\n\nexport type Connector<T extends InputRequestTypes = InputRequestTypes> = ReturnType<typeof createConnector<T>>;\n","import { requestMeasure } from '../lib/fasterdom/fasterdom';\n\nimport type { Scheduler } from './schedulers';\n\ninterface AnimationInstance {\n  isCancelled: boolean;\n}\n\nlet currentInstance: AnimationInstance | undefined;\n\nexport function animateSingle(tick: Function, schedulerFn: Scheduler, instance?: AnimationInstance) {\n  if (!instance) {\n    if (currentInstance && !currentInstance.isCancelled) {\n      currentInstance.isCancelled = true;\n    }\n\n    instance = { isCancelled: false };\n    currentInstance = instance;\n  }\n\n  if (!instance!.isCancelled && tick()) {\n    schedulerFn(() => {\n      animateSingle(tick, schedulerFn, instance);\n    });\n  }\n}\n\nexport function cancelSingleAnimation() {\n  const dumbScheduler = (cb: AnyFunction) => cb;\n  const dumbCb = () => undefined;\n\n  animateSingle(dumbCb, dumbScheduler);\n}\n\nexport function animate(tick: Function, schedulerFn: Scheduler) {\n  schedulerFn(() => {\n    if (tick()) {\n      animate(tick, schedulerFn);\n    }\n  });\n}\n\nexport function animateInstantly(tick: Function, schedulerFn: Scheduler) {\n  if (tick()) {\n    schedulerFn(() => {\n      animateInstantly(tick, schedulerFn);\n    });\n  }\n}\n\nexport type TimingFn = (t: number) => number;\n\nexport type AnimateNumberProps = {\n  to: number | number[];\n  from: number | number[];\n  duration: number;\n  onUpdate: (value: any) => void;\n  timing?: TimingFn;\n  onEnd?: () => void;\n};\n\nexport const timingFunctions = {\n  linear: (t: number) => t,\n  easeIn: (t: number) => t ** 1.675,\n  easeOut: (t: number) => -1 * t ** 1.675,\n  easeInOut: (t: number) => 0.5 * (Math.sin((t - 0.5) * Math.PI) + 1),\n  easeInQuad: (t: number) => t * t,\n  easeOutQuad: (t: number) => t * (2 - t),\n  easeInOutQuad: (t: number) => (t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t),\n  easeInCubic: (t: number) => t ** 3,\n  easeOutCubic: (t: number) => (--t) * t * t + 1,\n  easeInOutCubic: (t: number) => (t < 0.5 ? 4 * t ** 3 : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1),\n  easeInQuart: (t: number) => t ** 4,\n  easeOutQuart: (t: number) => 1 - (--t) * t ** 3,\n  easeInOutQuart: (t: number) => (t < 0.5 ? 8 * t ** 4 : 1 - 8 * (--t) * t ** 3),\n  easeInQuint: (t: number) => t ** 5,\n  easeOutQuint: (t: number) => 1 + (--t) * t ** 4,\n  easeInOutQuint: (t: number) => (t < 0.5 ? 16 * t ** 5 : 1 + 16 * (--t) * t ** 4),\n};\n\nexport function animateNumber({\n  timing = timingFunctions.linear,\n  onUpdate,\n  duration,\n  onEnd,\n  from,\n  to,\n}: AnimateNumberProps) {\n  const t0 = Date.now();\n  let canceled = false;\n\n  animateInstantly(() => {\n    if (canceled) return false;\n    const t1 = Date.now();\n    let t = (t1 - t0) / duration;\n    if (t > 1) t = 1;\n    const progress = timing(t);\n    if (typeof from === 'number' && typeof to === 'number') {\n      onUpdate(from + ((to - from) * progress));\n    } else if (Array.isArray(from) && Array.isArray(to)) {\n      const result = from.map((f, i) => f + ((to[i] - f) * progress));\n      onUpdate(result);\n    }\n    if (t === 1 && onEnd) onEnd();\n    return t < 1;\n  }, requestMeasure);\n\n  return () => {\n    canceled = true;\n    if (onEnd) onEnd();\n  };\n}\n","import { DEBUG_ALERT_MSG } from '../config';\nimport { throttle } from './schedulers';\n\nwindow.addEventListener('error', handleErrorEvent);\nwindow.addEventListener('unhandledrejection', handleErrorEvent);\n\n// eslint-disable-next-line prefer-destructuring\nconst APP_ENV = process.env.APP_ENV;\n\nfunction handleErrorEvent(e: ErrorEvent | PromiseRejectionEvent) {\n  // https://stackoverflow.com/questions/49384120/resizeobserver-loop-limit-exceeded\n  if (e instanceof ErrorEvent && e.message === 'ResizeObserver loop limit exceeded') {\n    return;\n  }\n\n  e.preventDefault();\n\n  handleError(e instanceof ErrorEvent ? (e.error || e.message) : e.reason);\n}\n\nconst throttledAlert = throttle(window.alert, 1000);\n\nexport function handleError(err: Error) {\n  // eslint-disable-next-line no-console\n  console.error(err);\n\n  if (APP_ENV === 'development' || APP_ENV === 'staging') {\n    //throttledAlert(`${DEBUG_ALERT_MSG}\\n\\n${(err?.message) || err}\\n${err?.stack}`);\n  }\n}\n","type CollectionByKey<Member> = Record<number | string, Member>;\n\ntype OrderDirection =\n  'asc'\n  | 'desc';\n\ninterface OrderCallback<T> {\n  (member: T): any;\n}\n\nexport function buildCollectionByKey<T extends AnyLiteral>(collection: T[], key: keyof T) {\n  return collection.reduce((byKey: CollectionByKey<T>, member: T) => {\n    byKey[member[key]] = member;\n\n    return byKey;\n  }, {});\n}\n\nexport function mapValues<R extends any, M extends any>(\n  byKey: CollectionByKey<M>,\n  callback: (member: M, key: string, index: number, originalByKey: CollectionByKey<M>) => R,\n): CollectionByKey<R> {\n  return Object.keys(byKey).reduce((newByKey: CollectionByKey<R>, key, index) => {\n    newByKey[key] = callback(byKey[key], key, index, byKey);\n    return newByKey;\n  }, {});\n}\n\nexport function pick<T, K extends keyof T>(object: T, keys: K[]) {\n  return keys.reduce((result, key) => {\n    result[key] = object[key];\n    return result;\n  }, {} as Pick<T, K>);\n}\n\nexport function pickTruthy<T, K extends keyof T>(object: T, keys: K[]) {\n  return keys.reduce((result, key) => {\n    if (object[key]) {\n      result[key] = object[key];\n    }\n\n    return result;\n  }, {} as Pick<T, K>);\n}\n\nexport function omit<T extends object, K extends keyof T>(object: T, keys: K[]): Omit<T, K> {\n  const stringKeys = new Set(keys.map(String));\n  const savedKeys = Object.keys(object)\n    .filter((key) => !stringKeys.has(key)) as Array<Exclude<keyof T, K>>;\n\n  return pick(object, savedKeys);\n}\n\nexport function orderBy<T>(\n  collection: T[],\n  orderRule: (keyof T) | OrderCallback<T> | ((keyof T) | OrderCallback<T>)[],\n  mode: OrderDirection | [OrderDirection, OrderDirection] = 'asc',\n): T[] {\n  function compareValues(a: T, b: T, currentOrderRule: (keyof T) | OrderCallback<T>, isAsc: boolean) {\n    const aValue = (typeof currentOrderRule === 'function' ? currentOrderRule(a) : a[currentOrderRule]) || 0;\n    const bValue = (typeof currentOrderRule === 'function' ? currentOrderRule(b) : b[currentOrderRule]) || 0;\n\n    return isAsc ? aValue - bValue : bValue - aValue;\n  }\n\n  if (Array.isArray(orderRule)) {\n    const [mode1, mode2] = Array.isArray(mode) ? mode : [mode, mode];\n    const [orderRule1, orderRule2] = orderRule;\n    const isAsc1 = mode1 === 'asc';\n    const isAsc2 = mode2 === 'asc';\n\n    return collection.sort((a, b) => {\n      return compareValues(a, b, orderRule1, isAsc1) || compareValues(a, b, orderRule2, isAsc2);\n    });\n  }\n\n  const isAsc = mode === 'asc';\n  return collection.sort((a, b) => {\n    return compareValues(a, b, orderRule, isAsc);\n  });\n}\n\nexport function unique<T extends any>(array: T[]): T[] {\n  return Array.from(new Set(array));\n}\n\nexport function compact<T extends any>(array: T[]) {\n  return array.filter(Boolean);\n}\n\nexport function areSortedArraysEqual(array1: any[], array2: any[]) {\n  if (array1.length !== array2.length) {\n    return false;\n  }\n\n  return array1.every((item, i) => item === array2[i]);\n}\n\nexport function split<T extends any>(array: T[], chunkSize: number) {\n  const result: T[][] = [];\n  for (let i = 0; i < array.length; i += chunkSize) {\n    result.push(array.slice(i, i + chunkSize));\n  }\n\n  return result;\n}\n\nexport function cloneDeep<T>(value: T): T {\n  if (!isObject(value)) {\n    return value;\n  }\n\n  if (Array.isArray(value)) {\n    return value.map(cloneDeep) as typeof value;\n  }\n\n  return Object.keys(value).reduce((acc, key) => {\n    acc[key as keyof T] = cloneDeep(value[key as keyof T]);\n    return acc;\n  }, {} as T);\n}\n\nfunction isObject(value: any): value is object {\n  // eslint-disable-next-line no-null/no-null\n  return typeof value === 'object' && value !== null;\n}\n\nexport function findLast<T>(array: Array<T>, predicate: (value: T, index: number, obj: T[]) => boolean): T | undefined {\n  let cursor = array.length;\n\n  while (cursor--) {\n    if (predicate(array[cursor], cursor, array)) {\n      return array[cursor];\n    }\n  }\n\n  return undefined;\n}\n\nexport function range(start: number, end: number) {\n  const arr: number[] = [];\n  for (let i = start; i < end;) {\n    arr.push(i++);\n  }\n  return arr;\n}\n\nexport function fromKeyValueArrays<T>(keys: string[], values: T[] | T) {\n  return keys.reduce((acc, key, index) => {\n    acc[key] = Array.isArray(values) ? values[index] : values;\n    return acc;\n  }, {} as Record<string, T>);\n}\n\nexport function extractKey<T, K extends keyof T>(array: T[], key: K): T[K][] {\n  return array.map((value) => value[key]);\n}\n","import { DEBUG } from '../config';\n\nexport function logDebugError(message: string, ...args: any[]) {\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.error(`[DEBUG][${message}]`, ...args);\n  }\n}\n\nexport function logDebug(message: any, ...args: any[]) {\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.log('[DEBUG]', message, ...args);\n  }\n}\n","import { DEBUG_MORE } from '../config';\nimport { handleError } from './handleError';\n\nconst SAFE_EXEC_ENABLED = !DEBUG_MORE;\n\nexport default function safeExec(cb: Function, rescue?: (err: Error) => void, always?: NoneToVoidFunction) {\n  if (!SAFE_EXEC_ENABLED) {\n    return cb();\n  }\n\n  try {\n    return cb();\n  } catch (err: any) {\n    rescue?.(err);\n    handleError(err);\n    return undefined;\n  } finally {\n    always?.();\n  }\n}\n","export type Scheduler = typeof requestAnimationFrame | typeof onTickEnd;\n\nexport function debounce<F extends AnyToVoidFunction>(\n  fn: F,\n  ms: number,\n  shouldRunFirst = true,\n  shouldRunLast = true,\n) {\n  let waitingTimeout: number | undefined;\n\n  return (...args: Parameters<F>) => {\n    if (waitingTimeout) {\n      clearTimeout(waitingTimeout);\n      waitingTimeout = undefined;\n    } else if (shouldRunFirst) {\n      fn(...args);\n    }\n\n    // eslint-disable-next-line no-restricted-globals\n    waitingTimeout = self.setTimeout(() => {\n      if (shouldRunLast) {\n        fn(...args);\n      }\n\n      waitingTimeout = undefined;\n    }, ms);\n  };\n}\n\nexport function throttle<F extends AnyToVoidFunction>(\n  fn: F,\n  ms: number,\n  shouldRunFirst = true,\n) {\n  let interval: number | undefined;\n  let isPending: boolean;\n  let args: Parameters<F>;\n\n  return (..._args: Parameters<F>) => {\n    isPending = true;\n    args = _args;\n\n    if (!interval) {\n      if (shouldRunFirst) {\n        isPending = false;\n        fn(...args);\n      }\n\n      // eslint-disable-next-line no-restricted-globals\n      interval = self.setInterval(() => {\n        if (!isPending) {\n          // eslint-disable-next-line no-restricted-globals\n          self.clearInterval(interval!);\n          interval = undefined;\n          return;\n        }\n\n        isPending = false;\n        fn(...args);\n      }, ms);\n    }\n  };\n}\n\nexport function throttleWithTickEnd<F extends AnyToVoidFunction>(fn: F) {\n  return throttleWith(onTickEnd, fn);\n}\n\nexport function throttleWith<F extends AnyToVoidFunction>(schedulerFn: Scheduler, fn: F) {\n  let waiting = false;\n  let args: Parameters<F>;\n\n  return (..._args: Parameters<F>) => {\n    args = _args;\n\n    if (!waiting) {\n      waiting = true;\n\n      schedulerFn(() => {\n        waiting = false;\n        fn(...args);\n      });\n    }\n  };\n}\n\nexport function onIdle(cb: NoneToVoidFunction, timeout?: number) {\n  // eslint-disable-next-line no-restricted-globals\n  if (self.requestIdleCallback) {\n    // eslint-disable-next-line no-restricted-globals\n    self.requestIdleCallback(cb, { timeout });\n  } else {\n    onTickEnd(cb);\n  }\n}\n\nexport const pause = (ms: number) => new Promise<void>((resolve) => {\n  setTimeout(() => resolve(), ms);\n});\n\nexport function rafPromise() {\n  return new Promise<void>((resolve) => {\n    fastRaf(resolve);\n  });\n}\n\nconst FAST_RAF_TIMEOUT_FALLBACK_MS = 300;\n\nlet fastRafCallbacks: Set<NoneToVoidFunction> | undefined;\nlet fastRafFallbackCallbacks: Set<NoneToVoidFunction> | undefined;\nlet fastRafFallbackTimeout: number | undefined;\n\n// May result in an immediate execution if called from another RAF callback which was scheduled\n// (and therefore is executed) earlier than RAF callback scheduled by `fastRaf`\nexport function fastRaf(callback: NoneToVoidFunction, withTimeoutFallback = false) {\n  if (!fastRafCallbacks) {\n    fastRafCallbacks = new Set([callback]);\n\n    requestAnimationFrame(() => {\n      const currentCallbacks = fastRafCallbacks!;\n\n      fastRafCallbacks = undefined;\n      fastRafFallbackCallbacks = undefined;\n\n      if (fastRafFallbackTimeout) {\n        clearTimeout(fastRafFallbackTimeout);\n        fastRafFallbackTimeout = undefined;\n      }\n\n      currentCallbacks.forEach((cb) => cb());\n    });\n  } else {\n    fastRafCallbacks.add(callback);\n  }\n\n  if (withTimeoutFallback) {\n    if (!fastRafFallbackCallbacks) {\n      fastRafFallbackCallbacks = new Set([callback]);\n    } else {\n      fastRafFallbackCallbacks.add(callback);\n    }\n\n    if (!fastRafFallbackTimeout) {\n      fastRafFallbackTimeout = window.setTimeout(() => {\n        const currentTimeoutCallbacks = fastRafFallbackCallbacks!;\n\n        if (fastRafCallbacks) {\n          currentTimeoutCallbacks.forEach(fastRafCallbacks.delete, fastRafCallbacks);\n        }\n        fastRafFallbackCallbacks = undefined;\n\n        if (fastRafFallbackTimeout) {\n          clearTimeout(fastRafFallbackTimeout);\n          fastRafFallbackTimeout = undefined;\n        }\n\n        currentTimeoutCallbacks.forEach((cb) => cb());\n      }, FAST_RAF_TIMEOUT_FALLBACK_MS);\n    }\n  }\n}\n\nlet onTickEndCallbacks: NoneToVoidFunction[] | undefined;\n\nexport function onTickEnd(callback: NoneToVoidFunction) {\n  if (!onTickEndCallbacks) {\n    onTickEndCallbacks = [callback];\n\n    Promise.resolve().then(() => {\n      const currentCallbacks = onTickEndCallbacks!;\n      onTickEndCallbacks = undefined;\n      currentCallbacks.forEach((cb) => cb());\n    });\n  } else {\n    onTickEndCallbacks.push(callback);\n  }\n}\n\nlet beforeUnloadCallbacks: NoneToVoidFunction[] | undefined;\n\nexport function onBeforeUnload(callback: NoneToVoidFunction, isLast = false) {\n  if (!beforeUnloadCallbacks) {\n    beforeUnloadCallbacks = [];\n    // eslint-disable-next-line no-restricted-globals\n    self.addEventListener('beforeunload', () => {\n      beforeUnloadCallbacks!.forEach((cb) => cb());\n    });\n  }\n\n  if (isLast) {\n    beforeUnloadCallbacks.push(callback);\n  } else {\n    beforeUnloadCallbacks.unshift(callback);\n  }\n\n  return () => {\n    beforeUnloadCallbacks = beforeUnloadCallbacks!.filter((cb) => cb !== callback);\n  };\n}\n","import { requestMutation } from '../lib/fasterdom/fasterdom';\n\nimport type { LangCode } from '../global/types';\n\nimport { IS_ELECTRON, LANG_LIST } from '../config';\n\nconst SAFE_AREA_INITIALIZATION_DELAY = 1000;\n\nexport function getPlatform() {\n  const { userAgent, platform } = window.navigator;\n\n  const iosPlatforms = ['iPhone', 'iPad', 'iPod'];\n  if (\n    iosPlatforms.indexOf(platform) !== -1\n    // For new IPads with M1 chip and IPadOS platform returns \"MacIntel\"\n    || (platform === 'MacIntel' && ('maxTouchPoints' in navigator && navigator.maxTouchPoints > 2))\n  ) return 'iOS';\n\n  const macosPlatforms = ['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'];\n  if (macosPlatforms.indexOf(platform) !== -1) return 'macOS';\n\n  const windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE'];\n  if (windowsPlatforms.indexOf(platform) !== -1) return 'Windows';\n\n  if (/Android/.test(userAgent)) return 'Android';\n\n  if (/Linux/.test(platform)) return 'Linux';\n\n  return undefined;\n}\n\nfunction getBrowserLanguage(): LangCode {\n  const lang = navigator.language.startsWith('zh')\n    ? (navigator.language.endsWith('TW') || navigator.language.endsWith('HK') ? 'zh-Hant' : 'zh-Hans')\n    : navigator.language.substring(0, 2);\n\n  return (LANG_LIST.some(({ langCode }) => langCode === lang) ? lang : 'en') as LangCode;\n}\n\nexport const PLATFORM_ENV = getPlatform();\nexport const IS_MAC_OS = PLATFORM_ENV === 'macOS';\nexport const IS_WINDOWS = PLATFORM_ENV === 'Windows';\nexport const IS_LINUX = PLATFORM_ENV === 'Linux';\nexport const IS_IOS = PLATFORM_ENV === 'iOS';\nexport const IS_ANDROID = PLATFORM_ENV === 'Android';\nexport const IS_SAFARI = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\nexport const IS_TOUCH_ENV = window.matchMedia('(pointer: coarse)').matches;\nexport const IS_EXTENSION = Boolean(window.chrome && chrome.runtime && chrome.runtime.id);\nexport const IS_CHROME_EXTENSION = Boolean(window.chrome?.system);\nexport const IS_FIREFOX_EXTENSION = IS_EXTENSION && !IS_CHROME_EXTENSION;\nexport const DEFAULT_LANG_CODE = 'en';\nexport const USER_AGENT_LANG_CODE = getBrowserLanguage();\nexport const DPR = window.devicePixelRatio || 1;\nexport const IS_DAPP_SUPPORTED = IS_ELECTRON || IS_EXTENSION;\nexport const IS_LEDGER_SUPPORTED = !(IS_IOS || IS_ANDROID || IS_FIREFOX_EXTENSION);\n\nexport function setScrollbarWidthProperty() {\n  const el = document.createElement('div');\n  el.style.cssText = 'overflow-x: hidden; overflow-y: scroll; visibility:hidden; position:absolute;';\n  el.classList.add('custom-scroll');\n  document.body.appendChild(el);\n  const width = el.offsetWidth - el.clientWidth;\n  el.remove();\n\n  document.documentElement.style.setProperty('--scrollbar-width', `${width}px`);\n\n  return width;\n}\n\nexport function setPageSafeAreaProperty() {\n  const { documentElement } = document;\n\n  // WebKit has issues with this property on page load\n  // https://bugs.webkit.org/show_bug.cgi?id=191872\n  setTimeout(() => {\n    const safeAreaBottom = parseInt(getComputedStyle(documentElement).getPropertyValue('--safe-area-bottom-value'), 10);\n\n    if (!Number.isNaN(safeAreaBottom) && safeAreaBottom > 0) {\n      requestMutation(() => {\n        documentElement.classList.add('with-safe-area-bottom');\n      });\n    }\n  }, SAFE_AREA_INITIALIZATION_DELAY);\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".\" + {\"60\":\"99fbd3b38685ff028f81\",\"219\":\"e3a99cee1c7a93d2d762\",\"262\":\"7a99fdaab1a61d475377\"}[chunkId] + \".js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && !scriptUrl) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t179: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkmytonwallet\"] = self[\"webpackChunkmytonwallet\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [780,391,121,412,220], () => (__webpack_require__(84991)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","inProgress","dataWebpackPrefix","IS_EXTENSION","Boolean","_self","self","chrome","runtime","id","_self2","system","APP_NAME","APP_VERSION","process","DEBUG","DEBUG_MORE","IS_TEST","IS_ELECTRON","ELECTRON_HOST_URL","INACTIVE_MARKER","MNEMONIC_COUNT","MNEMONIC_CHECK_COUNT","MOBILE_SCREEN_MAX_WIDTH","ANIMATION_END_DELAY","ANIMATED_STICKER_SMALL_SIZE_PX","ANIMATED_STICKER_MIDDLE_SIZE_PX","ANIMATED_STICKER_BIG_SIZE_PX","DEFAULT_PRICE_CURRENCY","CARD_SECONDARY_VALUE_SYMBOL","DEFAULT_LANDSCAPE_ACTION_TAB_ID","DEFAULT_DECIMAL_PLACES","TOKEN_INFO","toncoin","name","symbol","slug","quote","price","percentChange1h","percentChange24h","percentChange7d","percentChange30d","decimals","GLOBAL_STATE_CACHE_DISABLED","GLOBAL_STATE_CACHE_KEY","ANIMATION_LEVEL_MIN","ANIMATION_LEVEL_MED","ANIMATION_LEVEL_MAX","ANIMATION_LEVEL_DEFAULT","THEME_DEFAULT","MAIN_ACCOUNT_ID","TONHTTPAPI_MAINNET_URL","TONHTTPAPI_MAINNET_API_KEY","TONHTTPAPI_TESTNET_URL","TONHTTPAPI_TESTNET_API_KEY","BRILLIANT_API_BASE_URL","FRACTION_DIGITS","SHORT_FRACTION_DIGITS","MY_TON_WALLET_PROMO_URL","TELEGRAM_WEB_URL","TONSCAN_BASE_MAINNET_URL","TONSCAN_BASE_TESTNET_URL","GETGEMS_BASE_MAINNET_URL","GETGEMS_BASE_TESTNET_URL","TON_TOKEN_SLUG","PROXY_HOSTS","TINY_TRANSFER_MAX_AMOUNT","LANG_CACHE_NAME","LANG_LIST","langCode","nativeName","rtl","STAKING_CYCLE_DURATION_MS","MIN_BALANCE_FOR_UNSTAKE","STAKING_POOLS","arePropsShallowEqual","currentProps","newProps","currentKeys","Object","keys","currentKeysLength","length","i","prop","logUnequalProps","msg","debugKey","arguments","undefined","console","log","forEach","res","KEYS_TO_IGNORE","Set","counters","renderCountersThrottled","throttle","loggerEl","document","createElement","style","cssText","body","appendChild","clearEl","innerText","addEventListener","setupOverlay","halfSecondAgo","Date","now","maxRenders","maxDuration","entries","reduce","acc","_ref","key","value","has","includes","innerHTML","filter","_ref2","sort","a","b","lastUpdateAt","map","_ref3","factor","Math","round","toString","padStart","join","incrementOverlayCounter","SIGNAL_MARK","Symbol","isSignal","obj","Map","VirtualType","MountState","Fragment","DEBUG_RENDER_THRESHOLD","DEBUG_EFFECT_THRESHOLD","DEBUG_SILENT_RENDERS_FOR","renderingInstance","lastComponentId","isParentElement","$element","type","Tag","Component","source","props","_len","children","Array","_key","buildChildren","buildFragmentElement","componentInstance","mountState","New","buildComponentElement","createComponentInstance","tag","buildTagElement","noEmpty","cleanChildren","isEmptyPlaceholder","slice","dropEmptyTail","newChildren","l","child","isArray","push","buildChildElement","Empty","Text","String","DEBUG_components","TOTAL","renders","DEBUG_memos","DEBUG_MEMOS_CALLS_THRESHOLD","warn","orderBy","values","avgRenderTime","state","Number","toFixed","calls","hitRate","instancesPendingUpdate","idsToExcludeFromUpdate","pendingEffects","pendingCleanups","pendingLayoutEffects","pendingLayoutCleanups","areImmediateEffectsCaptured","runUpdatePassOnRaf","throttleWith","requestMeasure","runImmediateEffects","captureImmediateEffects","instancesToUpdate","from","currentCleanups","cb","currentEffects","requestMutation","prepareComponentForFrame","instance","Mounted","onUpdate","currentElement","renderComponent","forceUpdateComponent","runCapturedImmediateEffects","currentLayoutCleanups","currentLayoutEffects","add","newRenderedValue","safeExec","DEBUG_startAt","hooks","cursor","effects","memos","refs","componentName","DEBUG_resolveComponentName","performance","duration","error","renderedValue","hasElementChanged","$old","$new","unmountComponent","_componentInstance$ho","effect","byCursor","_effect$releaseSignal","cleanup","releaseSignals","call","Unmounted","hook","schedule","dependencies","nextValue","setter","current","helpGc","_componentInstance$ho2","useState","initial","newValue","useEffectBase","isLayout","_byCursor$cursor","runEffectCleanup","runEffect","result","effectId","set","some","dependency","causedBy","prevValue","isFirstRun","cleanups","signal","subscribe","setupSignals","useEffect","useLayoutEffect","useMemo","resolver","debugHitRateKey","DEBUG_state","instanceKey","misses","useCallback","newCallback","useRef","memo","TeactMemoWrapper","DEBUG_contentComponentName","NON_BUBBLEABLE_EVENTS","documentEventCounters","delegationRegistryByEventType","delegatedEventTypesByElement","resolveEventType","propName","element","eventType","replace","toLowerCase","tagName","canUseEventDelegation","realEventType","asCapture","removeDelegatedListener","removeEventListener","handleEvent","delete","get","realEvent","events","furtherCallsPrevented","target","stopPropagation","preventDefault","event","Proxy","p","Reflect","handler","parentNode","documentListenersCount","delegatedHandlersCount1","counter","delegationRegistriesCount","delegatedHandlersCount2","delegationRegistry","size","delegationElementsCount","delegatedEventTypesCount","eventTypes","FILTERED_ATTRIBUTES","HTML_ATTRIBUTES","CONTROLLABLE_TAGS","MAPPED_ATTRIBUTES","autoPlay","autoComplete","INDEX_KEY_PREFIX","headsByElement","WeakMap","extraClasses","extraStyles","renderWithVirtual","parentEl","$current","$parent","index","options","skipComponentUpdate","fragment","nextSibling","isCurrentComponent","isNewComponent","$newAsReal","isCurrentFragment","isNewFragment","updateComponent","setupComponentUpdateListener","newTarget","Error","initComponent","mountChildren","firstChild","node","createNode","insertBefore","setElementRef","textContent","remount","getNextSibling","renderChildren","forceMoveToEnd","$currentAsReal","currentTarget","$newAsTag","processControlled","currentEntries","newEntries","currentValue","startsWith","removeAttribute","setAttribute","updateAttributes","mountComponent","$child","$renderedChild","createTextNode","hasOwnProperty","defaultValue","defaultChecked","processUncontrolledOnMount","componentNextSibling","isComponent","isFragment","unmountChildren","replaceChild","removeChild","unmountRealTree","removeAllDelegatedListeners","currentEl","unique","e","indexOf","DEBUG_checkKeyUniqueness","teactFastList","currentChildren","newKeys","$newChild","currentRemainingIndex","remainingByKey","$currentChild","isKeyPresent","newChildKey","orderKey","teactOrderKey","fragmentIndex","fragmentSize","currentPreservedIndex","currentChildInfo","renderFragment","newOrderKey","shouldMoveNode","isMovingDown","childNodes","renderFastListChildren","currentChildrenLength","newChildrenLength","maxLength","max","createDocumentFragment","lastCurrentChild","fragmentNextSibling","htmlElement","ref","teactExperimentControlled","isValueControlled","isCheckedControlled","checked","toUpperCase","onInput","onChange","selectionStart","selectionEnd","isCaretAtEnd","setSelectionRange","selectionState","dataset","__teactSelectionState","JSON","stringify","updateClassName","inputEl","selectionStateJson","parse","updateStyle","__html","resolveDelegationRegistry","existing","newSet","resolveDelegatedEventTypes","addDelegatedListener","endsWith","extra","className","extraArray","standardStyles","setProperty","assign","applyExtraStyles","addExtraClass","classNames","split","cn","classList","removeExtraClass","remove","toggleExtraClass","force","toggle","contains","$head","useForceUpdate","setTrigger","trigger","useStateRef","useLastCallback","callback","_ref$current","args","startCallbacks","createCallbackManager","endCallbacks","timeout","isAnimating","isHeavyAnimating","dispatchHeavyAnimationEvent","onEnd","clearTimeout","runCallbacks","window","setTimeout","useUniqueId","idRef","generateUniqueId","DEBUG_currentCapturedId","currentGlobal","DEBUG_releaseCapturedIdThrottled","throttleWithTickEnd","actionHandlers","callbacks","container","containers","mapStateToProps","ownProps","mappedProps","forceUpdate","isDetached","detachWhenChanged","newMappedProps","err","handleError","isNaN","DEBUG_componentName","DEBUG_updates","updateTime","immediateCallbacks","actions","runCallbacksThrottled","forceOnHeavyAnimation","setGlobal","newGlobal","DEBUG_capturedId","noUpdate","forceSyncOnIOs","getGlobal","random","getActions","actionQueue","addActionHandler","payload","_actionHandlers$name","response","then","shift","handleAction","withGlobal","TeactNContainer","detachReason","React","_extends","AppState","AuthState","TransferState","DappConnectState","HardwareConnectState","StakingState","DETACHED_TAB_URL","openLedgerTab","async","tab","extension","tabs","create","url","active","windows","update","windowId","focused","createLedgerTab","STORAGE_KEY","tabKey","location","href","localStorage","setItem","interval","setInterval","getItem","clearInterval","buildClassName","parts","innerHeight","currentWindowSize","updateSizes","handleResize","height","IS_IOS","visualViewport","pageTop","vh","documentElement","width","innerWidth","queriesMap","createQueryEntry","query","mql","matchMedia","dispatchers","listener","d","matches","passive","addListener","useDeviceScreen","isPortrait","setState","entry","getInitialState","querySubscribe","queryUnsubscribe","removeListener","useMediaQuery","isLandscape","setValue","next","shouldSkipUndefined","useSyncEffect","prevDeps","usePrevious","cleanupRef","_cleanupRef$current","_effect","useEffectOnce","_cleanupRef$current2","delay","savedCallback","SIMPLE_MARKDOWN_REGEX","renderText","part","filters","compact","text","entities","match","entityResult","entity","splittenParts","line","trimmedLine","trimStart","indentLength","fromCharCode","repeat","cacheApi","caches","clear","cacheName","cache","withCache","fn","fnCache","cacheKey","cached","formatInteger","fractionDigits","noRadix","minValue","abs","fixed","min","wholePart","fractionPart","formatCurrency","currency","formatted","formatCurrencyExtended","noSign","integerLength","formatCurrencyForBigValue","threshold","formattedValue","mainPart","defaultLangPack","defaultLangPackJson","addCallback","removeCallback","SUBSTITUTION_REGEX","langPack","currentLangCode","createLangFn","format","pluralValue","_langPack","cacheValue","langString","template","trim","translationSlices","initialValue","str","_value$index","processTemplate","concat","processTemplateJsx","processTranslation","getTranslation","setLanguage","newLangPack","request","Request","open","json","DEFAULT_LANG_CODE","fetch","ok","message","status","remote","data","cacheData","Blob","ArrayBuffer","Response","put","fetchRemote","lang","langInfo","find","isRtl","code","langName","useLang","langProvider","ariaLabel","forFormId","kind","isSubmit","isLoading","isPrimary","isSimple","isText","isDisabled","isRound","isSmall","isDestructive","onClick","isClicked","setIsClicked","handleClick","styles","button","sizeSmall","primary","disabled","loading","destructive","clicked","form","buttonText","handleReload","reload","src","appInactivePathWebP","appInactivePathPng","alt","Button","useCurrentOrPrev","shouldForceCurrent","prev","useScrolledState","isAtBeginning","setIsAtBeginning","isAtEnd","setIsAtEnd","handleScroll","scrollHeight","scrollTop","clientHeight","isOpen","onCloseTransitionEnd","noFirstOpenTransition","noCloseTransition","closeDuration","noOpenTransition","isClosed","setIsClosed","closeTimeoutRef","hasOpenClassName","setHasOpenClassName","exec","shouldHaveOpenClassName","isClosing","shouldRender","transitionClassNames","hasShownClass","hasOpenClass","useMediaTransition","mediaData","isMediaReady","useShowTransition","PATH_BY_EMOJI","loadedImages","isLoaded","markLoaded","useFlag","handleLoad","root","onLoad","title","withBorder","closeClassName","onClose","onBackButtonClick","modalStyles","handleBackClick","isInsideModal","handleContentScroll","isContentNotScrolled","slide","ModalHeader","header","headerBack","iconChevron","headerTitle","content","content_noScroll","onScroll","logoSrc","logo","titleLink","rel","blockAbout","heading","Emoji","ninja","unicorn","extension_link","github","github_link","telegram","community_link","waitForEndEvent","detailedName","fallbackMs","isHandled","handleAnimationEnd","TransitionEvent","propertyName","AnimationEvent","animationName","forceReflow","offsetWidth","CLASSES","ACTIVE_SLIDE_CLASS_NAME","TO_SLIDE_CLASS_NAME","activeKey","nextKey","direction","renderCount","shouldRestoreHeight","shouldCleanup","cleanupExceptionKey","shouldWrap","wrapExceptionKey","slideClassName","onStart","onStop","currentKeyRef","animationLevel","settings","containerRef","rendersRef","prevActiveKey","activeKeyChanged","isBackwards","preservedRender","isSlideOptimized","prevActiveIndex","activeIndex","nextIndex","el","activeChild","HTMLElement","transition","transform","nextChild","toSlide","fromSlide","dispatchHeavyAnimationStop","requestForcedReflow","performSlideOptimized","onAnimationEnd","activeElement","querySelector","watchedNode","flexBasis","asFastList","contents","fill","render","rendered","ANIMATED_STICKERS_PATHS","hello","snitch","bill","thumbUp","holdTon","happy","noData","forge","wait","helloPreview","snitchPreview","billPreview","thumbUpPreview","holdTonPreview","happyPreview","noDataPreview","forgePreview","waitPreview","buildStyle","promise","RLottie","ensureRLottie","module","default","getRLottie","blurCallbacks","focusCallbacks","isFocused","hasFocus","useEffectWithPrevDeps","prevDepsRef","elementObserverMap","renderId","tgsUrl","play","playSegment","speed","noLoop","quality","isLowPriority","color","forceInBackground","sharedCanvas","sharedCanvasCoords","onEnded","onLoop","viewId","animation","setAnimation","animationRef","isFirstRender","playKey","playRef","playSegmentRef","rgbColor","isUnmountedRef","init","offsetHeight","newAnimation","coords","setSpeed","throttledInit","deps","msOrSchedulerFn","noFirst","fnMemo","useThrottledCallback","refOrElement","onIntersectionChange","onIntersectionChangeRef","observer","callbackManager","IntersectionObserver","observe","hasCallbacks","unobserve","disconnect","useSharedIntersectionObserver","setColor","_animationRef$current","removeView","playAnimation","shouldRestart","isFrozen","playAnimationOnRaf","pauseAnimation","isPlaying","pause","prevNoLoop","setNoLoop","prevSharedCanvasCoords","setSharedCanvasCoords","changeData","lastOnStart","lastOnEnd","useHeavyAnimationCheck","usePriorityPlaybackCheck","onBlur","onFocus","lastOnBlur","lastOnFocus","useBackgroundMode","noTransition","nonInteractive","otherProps","isAnimationLoaded","markAnimationLoaded","setPlayKey","AnimatedSticker","loadedPreviewUrls","DEFAULT_SIZE","global","noAnimation","previewUrl","thumbDataUri","isPreviewLoaded","markPreviewLoaded","isAnimationReady","markAnimationReady","markAnimationNotReady","handlePreviewLoad","AnimatedIcon","keyToHandlerName","Enter","Backspace","Delete","Esc","Escape","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Tab","handlers","onEnter","onDelete","onBackspace","onEsc","onUp","onDown","onLeft","onRight","onTab","captureKeyboardListeners","hasActiveHandlers","handleKeyDown","handlerName","currentEventHandlers","findIndex","splice","releaseKeyboardListener","keyHandlers","trapFocus","focusableElements","querySelectorAll","currentFocusedIndex","em","isSameNode","newFocusedIndex","shiftKey","focus","containerId","elementRef","TeactDOM","dialogRef","dialogClassName","contentClassName","isCompact","isSlideUp","noBackdrop","noBackdropClose","hasCloseButton","onCloseAnimationEnd","shouldSkipHistoryAnimations","animationDuration","modalRef","handleClose","prevIsOpen","fullClassName","backdropFullClass","contentFullClassName","Portal","tabIndex","role","position","suggestions","isInModal","onSelect","suggest","embedded","suggestion","onMouseDown","mnemonicSuggestions","wordlists","nextId","labelText","suggestionsPosition","inputArg","markFocus","unmarkFocus","hasError","setHasError","filteredSuggestions","setFilteredSuggestions","activeSuggestionIndex","setActiveSuggestionIndex","showSuggestions","setShowSuggestions","shouldRenderSuggestions","mnemonic","processSuggestions","userInput","unLinked","wrapper","wrapper_focus","wrapper_error","SuggestionList","label","htmlFor","input","touched","onKeyDown","ctrlKey","altKey","metaKey","requestAnimationFrame","nextInput","getElementById","select","blur","onPaste","pastedValue","clipboardData","getData","_checkIndexes$map","isActive","checkIndexes","buttonLabel","onCancel","onSubmit","words","setWords","hasMnemonicError","setHasMnemonicError","handleSetWord","handleMnemonicCheckSubmit","answer","areSortedArraysEqual","info","small","n","InputMnemonic","checkMnemonicInput","onNext","mnemonicContainer","word","handleChange","writedownAccepted","setWritedownAccepted","openWalletAccepted","setOpenWalletAccepted","canBeStolenAccepted","setCanBeStolenAccepted","canSubmit","handleSubmit","AnimatedIconWithPreview","modalSticker","Checkbox","BackupState","afterCheckMnemonic","skipCheckMnemonic","restartCheckMnemonicIndexes","isModalOpen","openModal","closeModal","renderingKey","setRenderingKey","Accept","setNextKey","View","handleModalClose","handleMnemonicView","Confirm","handleRestartCheckMnemonic","handleShowMnemonicCheck","renderModalContent","isScreenActive","isFrom","currentScreenKey","SafetyRules","MnemonicList","MnemonicCheck","sticker","info__space","buttons","btn","btn_push","Modal","modalDialog","Transition","useFocusAfterAnimation","IS_TOUCH_ENV","SPECIAL_CHARS_REGEX","placeholder","isRequired","isControlled","isMultiline","wrapperClassName","isPasswordVisible","setIsPasswordVisible","handleInput","finalType","inputFullClass","labelFullClass","required","handleTogglePasswordVisibility","getValidationRuleClass","shouldRenderError","ruleHasError","passwordRule","invalid","valid","method","afterCreatePassword","restartAuth","firstInputRef","firstPassword","setFirstPassword","secondPassword","setSecondPassword","isJustSubmitted","setIsJustSubmitted","isPasswordFocused","markPasswordFocused","unmarkPasswordFocused","isSecondPasswordFocused","markSecondPasswordFocused","unmarkSecondPasswordFocused","isPasswordsNotEqual","setIsPasswordsNotEqual","isWeakPasswordModalOpen","openWeakPasswordModal","closeWeakPasswordModal","isImporting","formId","getFormId","validation","requiredLength","invalidLength","setInvalidLength","noNumber","setNoNumber","noUpperCase","setNoUpperCase","noLowerCase","setNoLowerCase","noSpecialChar","setNoSpecialChar","noEqual","setNoEqual","test","usePasswordValidation","handleFirstPasswordChange","handleSecondPasswordChange","handleCancel","rule","password","container_scrollable","Input","errors","passwordRules","renderErrors","buttons__inner","footerButton","one","markOne","two","markTwo","three","markThree","useTimeout","START_DELAY","oneClassNames","twoClassNames","threeClassNames","counterTitle","counterDigit","MNEMONIC_INPUTS","_","auth","afterImportMnemonic","setMnemonic","handlePasteMnemonic","pastedText","_document$activeEleme","_document$activeEleme2","pastedMnemonic","Event","dispatchEvent","useClipboardPaste","handlePaste","substring","isSubmitDisabled","mnemonicValues","title_afterSmallSticker","info_pull","importingContent","getSuggestPosition","footerError","AuthStart","startCreatingWallet","startImportingWallet","openAbout","openHardwareWalletModal","isLogoReady","markLogoReady","handleCreateWallet","logoPath","appName","btn_about","importButtonsBlock","importText","importButtons","IS_LEDGER_SUPPORTED","btn_single","btn_mini","RENDER_COUNT","pick","_useCurrentOrPrev","mnemonicCheckIndexes","closeAbout","renderingAuthState","ready","updateNextKey","renderAuthScreen","currentKey","none","creatingWallet","AuthCreatingWallet","createPassword","AuthCreatePassword","createBackup","AuthCreateBackup","importWallet","AuthImportMnemonic","importWalletCreatePassword","about","SettingsAbout","transitionContainer","transitionSlide","bigStrToHuman","amount","decimalPlaces","div","divideBigInt","BigInt","humanToBigStr","getIsTxIdLocal","txId","genRelatedAccountIds","accountId","account","parseAccountId","buildAccountId","network","blockchain","MAX_DP","NAME","INVALID","INVALID_DP","INVALID_RM","DIV_BY_ZERO","P","UNDEFINED","NUMERIC","x","sd","rm","more","xc","c","constructor","RM","unshift","pop","doExponential","isNonzero","s","charAt","this","cmp","y","isneg","yc","j","k","Big","dp","DP","bl","bt","ri","bz","ai","al","r","rl","q","qc","qi","eq","gt","gte","lt","lte","minus","sub","t","xlty","plus","xe","ye","reverse","mod","ygtx","times","neg","pow","prec","sqrt","half","toExponential","mul","for","toJSON","NE","PE","toNumber","strict","toPrecision","valueOf","_Big_","TypeError","nl","search","prototype","roundDown","roundHalfUp","roundHalfEven","roundUp","precision","floor","selectAccountTokensMemoized","memoized","balancesBySlug","tokenInfo","accountSettings","bySlug","slugA","slugB","orderedSlugs","_ref4","_accountSettings$disa","balance","image","history7d","history24h","history30d","disabledSlugs","change24h","change7d","change30d","selectCurrentAccountTokens","_selectCurrentAccount","_selectAccountSetting","selectCurrentAccountState","balances","selectAccountSettings","currentAccountId","selectPopularTokensMemoized","_ref5","token","isPopular","_ref6","_ref7","keywords","selectPopularTokensWithoutAccountTokens","_selectCurrentAccount2","selectIsNewWallet","tokens","selectAccounts","_global$accounts","accounts","byId","selectNetworkAccountsMemoized","accountsById","fromEntries","_ref8","selectNetworkAccounts","_global$accounts2","selectCurrentNetwork","isTestnet","selectAccount","_selectAccounts","selectAccountState","byAccountId","selectFirstNonHardwareAccount","isHardware","selectNewestTxIds","_selectAccountState","mapValues","transactions","newestTransactionsBySlug","_ref9","shortenAddress","address","fromRight","useModalTransitionKeys","ConfirmTransactionState","onTryAgain","activeState","setActiveState","Waiting","renderContent","renderWaitingConfirm","renderTryAgain","isLedgerConnected","isTonAppConnected","isRemoteTab","onConnected","connectHardwareWallet","resetHardwareWalletConnect","isLedgerFailed","isTonAppFailed","isConnected","Connected","shouldCloseOnCancel","handleConnect","handleConnected","WaitingForBrowser","isConnecting","Connecting","isFailed","Failed","renderButtons","STICKER_SIZE","cancelLabel","submitLabel","stickerSize","containerClassName","passwordRef","setPassword","iconUrl","origin","onDisconnect","shouldShowDisconnect","handleDisconnect","_global$dappConnectRe","hasConnectRequest","dappConnectRequest","dapp","permissions","proof","hardwareState","hardware","requiredPermissions","requiredProof","accountsData","submitDappConnectRequestConfirm","submitDappConnectRequestConfirmHardware","clearDappConnectRequestError","cancelDappConnectRequestConfirm","setDappConnectRequestState","selectedAccountIds","setSelectedAccountIds","isConfirmOpen","openConfirm","closeConfirm","shouldRenderAccounts","tonToken","ConnectHardware","isPasswordRequired","Password","additionalAccountIds","handlePasswordCancel","Info","submitDappConnectRequestHardware","handlePasswordSubmit","handleAccountToggle","iterableAccounts","DappInfo","_accountsData$account","renderAccount","renderAccounts","PasswordForm","renderPasswordForm","LedgerConnect","ConfirmHardware","LedgerConfirmOperation","dappname","currentDappTransfer","currentAccount","cancelDappTransfer","setDappTransferScreen","handleAgree","Initial","fee","navigator","clipboard","ClipboardItem","textCopyEl","copyTextToClipboard","selection","getSelection","rangeToRestore","rangeCount","getRangeAt","execCommand","removeAllRanges","addRange","removeFromSavedAddress","showNotification","handleDeleteSavedAddress","icon","_accountState$savedAd","accountState","isAddressAlreadySaved","savedAddresses","addressName","spoiler","spoilerRevealText","spoilerCallback","copyNotification","noSavedAddress","textClassName","addSavedAddress","addressNameRef","isSaveAddressModalOpen","openSaveAddressModal","closeSaveAddressModal","isDeleteSavedAddressModalOpen","openDeletedSavedAddressModal","closeDeleteSavedAddressModal","savedAddressName","setSavedAddressName","isConcealedWithSpoiler","revealSpoiler","tonscanBaseUrl","tonscanAddressUrl","handleSaveAddressSubmit","handleCopy","handleRevealSpoiler","shortAddress","isConcealed","commentContainer","button_spoiler","renderContentOrSpoiler","iconStar","nameInput","DeleteSavedAddressModal","transaction","isPayloadExpanded","expandPayload","InteractiveTextField","toAddress","AmountWithFeeTextField","comment","nftAddress","nftName","newOwner","nft","tokenSlug","tokenAmount","destination","base64","renderPayload","showDappTransaction","submitDappTransferConfirm","isSingleTransaction","renderingTransactions","totalAmount","DappTransaction","extraText","transactionIdx","viewTransactionOnIdx","clearDappTransferError","submitDappTransferPassword","submitDappTransferHardware","None","handleTransferPasswordSubmit","DappTransferInitial","WarningHardware","DappLedgerWarning","renderSingleTransaction","renderPassword","dialogs","dismissDialog","ElectronEvent","getBoundingClientRectsAsync","Promise","resolve","ob","_entries$","boundingClientRect","isUpdateAvailable","setIsUpdateAvailable","isUpdateDownloaded","setIsUpdateDownloaded","disable","enable","progress","setProgress","fakeProgress","setFakeProgress","progressStep","progressWidth","timer","isCanceled","reset","_window$electron","_window$electron2","_window$electron3","_window$electron5","removeUpdateErrorListener","electron","on","UPDATE_ERROR","removeUpdateAvailableListener","UPDATE_AVAILABLE","removeUpdateProgressListener","UPDATE_DOWNLOAD_PROGRESS","_window$electron4","cancelUpdate","percent","removeUpdateDownloadedListener","UPDATE_DOWNLOADED","_window$electron6","_window$electron7","installUpdate","downloadUpdate","fp","_window$electron8","hasProgress","isProgressShown","isCancelShown","cancelTransitionClassNames","shouldRenderCancel","textTransitionClassNames","renderedFakeText","textRef","lastWidthRef","calculateWidth","rect","maxWidth","useContainerAnimation","withTitle","isDragging","screenX","screenY","distance","IS_MAC_OS","handleMousedown","handleDrag","handleDoubleClick","useElectronDrag","handleMinimize","minimize","handleMaximize","getIsMaximized","unmaximize","maximize","close","IS_WINDOWS","onDoubleClick","UpdateApp","hardwareWallets","afterSelectHardwareWallets","selectedAccountIndices","setSelectedAccountIndices","handleAddLedgerWallets","hardwareSelectedIndices","alreadyConnectedList","areAccountsSelected","list","LedgerModalState","currentSlide","setCurrentSlide","Connect","SelectWallets","handleLedgerModalClose","LedgerSelectWallets","tokenSymbol","operationAmount","firstButtonText","secondButtonText","onFirstButtonClick","onSecondButtonClick","withBalanceChange","finalBalance","balanceChange","amountFraction","amountSymbol","ASSET_LOGO_PATHS","ton","btc","getParts","RegExp","castValue","buildContentHtml","suffix","dotPart","wholeStr","parseInt","fractionStr","inputClassName","labelClassName","valueClassName","onPressEnter","inputRef","markHasFocus","unmarkHasFocus","updateHtml","newHtml","restoreCaretPosition","context","_clearedValue$","range","setStart","clearedValue","len","NODE_TYPE","NodeFilter","SHOW_TEXT","createTreeWalker","elem","FILTER_REJECT","FILTER_ACCEPT","nextNode","getTextNodeAtPosition","newRange","Range","setEnd","saveCaretPosition","handleBlur","inputWrapperFullClass","labelTextClassName","contentEditable","inputValue","isEmpty","zeroValue","contentRef","prevValueRef","renderValue","noFallbackToPrev","contentEl","valueRegex","runThrottled","_accountState$poolSta","_accountState$poolSta2","apiError","staking","stakingBalance","stakingMinAmount","poolState","minStake","apyValue","lastApy","isStatic","submitStakingInitial","fetchStakingFee","isStakingInfoModalOpen","openStakingInfoModal","closeStakingInfoModal","setAmount","isNotEnough","setIsNotEnough","isInsufficientBalance","setIsInsufficientBalance","shouldUseAllBalance","setShouldUseAllBalance","hasAmountError","validateAndSetAmount","newAmount","calculatedFee","handleAmountChange","handleAmountBlur","handleBalanceLinkClick","handleMinusOneClick","isFullBalanceSelected","balanceLink","minusOneLink","renderTopRight","RichNumberInput","renderBottomRight","balanceResult","RichNumberField","renderStakingResult","IS_OPEN_STATES","StakeInitial","StakePassword","StakeComplete","onViewStakingInfo","startStaking","setStakingScreen","cancelStaking","clearStakingError","submitStakingPassword","renderedTokenBalance","renderedStakingAmount","handleTransferSubmit","handleViewStakingInfoClick","StakingInitial","TransferResult","renderComplete","formatDayToStringWithCache","dayStartAt","noYear","monthFormat","noDay","withTime","toLocaleString","year","month","day","hour","minute","hour12","formatRelativeHumanDateTime","total","minutes","hours","days","rtf","Intl","RelativeTimeFormat","localeMatcher","numeric","daysPlural","daysValue","formatToParts","hoursPlural","hoursValue","minutesPlural","minutesValue","formatHumanDay","datetime","getDayStartAt","isToday","yesterday","setDate","getDate","isYesterday","formatFullDay","date","today","getDayStart","getFullYear","formatShortDay","todayStartAt","noDate","targetAt","setSeconds","getMinuteStart","getTime","formatTime","getHours","getMinutes","setHours","backgroundColor","spinner","withBackground","inner","timestamp","profit","stakingHistory","isUnstakeRequested","endOfStakingCycle","endOfCycle","fetchBackendStakingState","hasHistory","profitHistory","shouldRenderSpinner","spinnerClassNames","initialWidth","initialHeight","windowSize","setWidth","setHeight","isResizing","setIsResizing","setIsResizingDebounced","ms","noLast","debounce","useDebouncedCallback","throttledSetIsResizing","throttledSetSize","newWidth","newHeight","useWindowSize","useInterval","handleStakeClick","handleUnstakeClick","isUnstaking","stakingResult","Loading","time","totalProfit","record","StakingProfitItem","StakingInfoContent","UnstakeInitial","UnstakePassword","UnstakeComplete","_currentAccountState$","currentAccountState","renderedStakingBalance","unstakeDate","setUnstakeDate","hasBalanceForUnstake","refreshUnstakeDate","handleStartUnstakeClick","renderInitial","_selectAccount","onInvoiceModalOpen","onQrModalOpen","captureEscKeyListener","captureKeyboardListener","bubbleClassName","positionX","positionY","autoClose","shouldSkipTransition","noCloseOnBackdrop","onMouseEnter","onMouseLeave","menuRef","menu","backdrop","useVirtualBackdrop","fullBubbleClassName","bubble","stopEvent","DEFAULT_ARROW","DEFAULT_MENU_POSITION_HORIZONTAL","items","selectedValue","theme","arrow","menuPosition","menuPositionHorizontal","shouldTranslateOptions","isMenuOpen","openMenu","closeMenu","selectedItem","item","buttonArrowIcon","buttonIcon","withMenu","isFullyInteractive","interactive","wide","buttonFullClassName","itemIcon","itemName","Menu","buttonClassName","item_with_icon","item_selected","handleItemClick","backButtonText","setComment","setHasAmountError","invoiceAmount","invoiceUrl","TonWeb","formatTransferUrl","dropdownItems","handleAmountInput","ModalTransitionContent","DropDown","L","M","Q","H","qrTypes","downloadURI","uri","link","download","click","isObject","mergeDeep","sources","targetValue","sourceValue","sanitizeGradient","gradient","newGradient","colorStops","rotation","colorStop","offset","sanitizeOptions","newOptions","margin","imageOptions","hideBackgroundDots","imageSize","dotsOptions","cornersSquareOptions","cornersDotOptions","backgroundOptions","QRCornerDot","_defineProperty","_context","_type","draw","drawFunction","cornerDotTypes","_drawSquare","_drawDot","_rotateFigure","cx","cy","translate","rotate","closePath","_basicDot","arc","PI","_basicSquare","QRCornerSquare","cornerSquareTypes","_drawExtraRounded","dotSize","_basicExtraRounded","lineTo","QRDot","getNeighbor","dotTypes","_drawClassy","_drawClassyRounded","_drawRounded","_basicSideRounded","_basicCornerRounded","_basicCornerExtraRounded","_basicCornersRounded","_basicCornersExtraRounded","leftNeighbor","rightNeighbor","topNeighbor","bottomNeighbor","neighborsCount","calculateImageSize","originalHeight","originalWidth","maxHiddenDots","maxHiddenAxisDots","hideDots","hideYDots","hideXDots","ceil","squareMask","dotMask","QRCanvas","_canvas","_options","getContext","getCanvas","canvasContext","clearRect","drawQR","qr","count","getModuleCount","minSize","drawImageSize","_qr","loadImage","_image","qrOptions","coverLevel","errorCorrectionPercents","errorCorrectionLevel","drawBackground","drawDots","_squareMask$i","_squareMask","_squareMask$i2","_dotMask$i","_dotMask","_dotMask$i2","drawCorners","drawImage","gradientOptions","_createGradient","additionalRotation","addColorStop","fillStyle","fillRect","xBeginning","yBeginning","dot","beginPath","isDark","xOffset","yOffset","strokeStyle","cornersSquareSize","cornersDotSize","_options$cornersSquar","_options$cornersSquar3","_options$cornersSquar4","_options$cornersDotOp","_options$cornersDotOp3","_options$cornersDotOp4","column","row","_options$cornersSquar2","cornersSquare","_squareMask$i3","_squareMask2","_options$cornersDotOp2","cornersDot","_dotMask$i3","_dotMask2","reject","Image","crossOrigin","onload","dx","dy","dw","dh","gradientTypes","createRadialGradient","positiveRotation","x0","y0","x1","y1","tan","createLinearGradient","drawTypes","typeNumber","mode","svg","_svg","_this$_element","_element","createElementNS","QRSVG","_defs","getElement","_oldElement$parentNod","oldElement","cloneNode","_options$backgroundOp","_options$backgroundOp2","_createColor","_options$dotsOptions","_dotsClipPath","_this$_qr","_options$cornersSquar5","_options$cornersDotOp5","cornersSquareClipPath","cornersDotClipPath","_cornersSquareClipPath","_cornersDotClipPath","stop","QRCodeStyling","defaultOptions","_clearContainer","_getQRStylingElement","_svgDrawingPromise","canvas","_canvasDrawingPromise","_container","qrcode","addData","getMode","make","append","getRawData","XMLSerializer","serializeToString","toBlob","downloadOptions","encodeURIComponent","toDataURL","QR_CODE","qrCodeRef","isQrModalOpen","openQrModal","closeQrModal","isInvoiceModalOpen","openInvoiceModal","closeInvoiceModal","Content","QrModal","InvoiceModal","zonesRegex","vip","zone","TON_ADDRESS_REGEX","TON_RAW_ADDRESS_REGEX","getIsAddressValid","dns","COMMENT_DROPDOWN_ITEMS","initialAddress","initialAmount","initialComment","shouldEncrypt","initialShouldEncryptComment","currentTransfer","onCommentChange","submitTransferInitial","fetchFee","changeTransferToken","toAddressRef","shouldRenderPasteButton","setShouldRenderPasteButton","isAddressFocused","markAddressFocused","unmarkAddressFocused","isSavedAddressesOpen","openSavedAddresses","closeSavedAddresses","savedAddressForDeletion","setSavedAddressForDeletion","setToAddress","shouldEncryptComment","setShouldEncryptComment","hasToAddressError","setHasToAddressError","toAddressShort","SHORT_ADDRESS_SHIFT","isAddressValid","hasSavedAddresses","amountInCurrency","renderingAmountInCurrency","renderingFee","shouldRenderCurrency","currencyClassNames","dropDownItems","reducedAmount","DEEPLINK","params","to","handleTokenChange","validateToAddress","handleAddressFocus","caretPosition","newCaretPosition","scrollLeft","scrollWidth","clientWidth","handleAddressBlur","handlePasteClick","readText","clipboardText","catch","handleSavedAddressClick","handleDeleteSavedAddressClick","handleMaxAmountClick","handleCommentChange","maxBytes","decoder","TextDecoder","encoded","TextEncoder","encode","decode","trimStringByMaxBytes","handleCommentOptionsChange","option","renderedSavedAddresses","deleteLabel","onDeleteClick","renderSavedAddress","renderBalance","withFee","TABS","activeTabIndex","_global$landscapeActi","landscapeActionsActiveTabIndex","selectLandscapeActionsActiveTabIndex","hasStaking","setLandscapeActionsActiveTabIndex","setActiveTabIndex","isStaking","renderedBgHelpers","transitionRef","handleTransitionStart","contentBackgroundClassName","contentBgRef","contentFooterRef","lastHeightRef","adjustBg","fastRaf","useTabHeightAnimation","renderCurrentTab","ReceiveStatic","TransferInitial","onEarnClick","startTransfer","isReceiveTonOpened","openReceiveTon","closeReceiveTon","ReceiveModal","calcChangeValue","currentPrice","changeFactor","TOKEN_CARD_COLORS","INDIVIDUAL_COLORS","RenderingState","firstNonHardwareAccount","isAddAccountModalOpen","addAccount","clearAccountError","closeAddAccountModal","isNewAccountImporting","setIsNewAccountImporting","handleNewAccountClick","handleImportAccountClick","handleImportHardwareWalletClick","handleHardwareWalletConnected","SelectAccountsHardware","renderSelector","switchAccount","renameAccount","openAddAccountModal","openSettings","openAccountSelector","closeAccountSelector","isEdit","openEdit","closeEdit","setInputValue","accountsAmount","handleOpenAccountSelector","handleEditClick","handleSaveClick","handleAddWalletClick","handleInputKeyDown","dialogFullClassName","handleSwitchAccount","renderButton","renderAccountsChooser","AddAccountModal","prices","selectedIndex","imgClassName","onSelectIndex","boundingPoints","priceValues","points","scaleX","scaleY","getBasisPoint","indexesCount","point","ratio","tangent","firstPoint","getCurvePath","pCurrent","pMinus1","pMinus2","handleMouseMove","containerX","containerWidth","getBoundingClientRect","clientX","touches","handleMouseLeave","onMouseMove","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel","activePoint","partialPath","getPath","renderSvg","HISTORY_PERIODS","historyKey","changeKey","DEFAULT_PERIOD","COIN_MARKET_CAP_TOKENS","period","currentTokenPeriod","_history$","onApyClick","setCurrentTokenPeriod","currentHistoryPeriod","currentChangePeriod","selectedHistoryIndex","setSelectedHistoryIndex","lastPrice","tonUrl","history","selectedHistoryPoint","dateStr","initialPrice","change","changePrefix","changeValue","changePercent","withChange","withHistory","historyStartDay","withCmcButton","renderChart","TokenPriceChart","historyPeriod","activeDappOrigin","currentTokenSlug","onTokenCardClose","renderedToken","shouldRenderTokenCard","tokenCardTransitionClassNames","tokenCardColor","tokenNumber","char","charCodeAt","getTokenCardColor","dappDomain","URL","hostname","renderingDappDomain","primaryValue","primaryWholePart","primaryFractionPart","changeClassName","buildValues","shouldRenderDapp","dappClassNames","handleCopyAddress","AccountSelector","TokenCard","stopById","previousActiveTab","clickArg","tabRef","tabEl","prevTabEl","parentElement","platformEl","prevPlatformEl","shiftLeft","offsetLeft","scaleFactor","SCROLL_DURATION","IS_ANDROID","activeTab","big","onSwitchTab","shouldPreventDefault","deltaX","deltaY","useHorizontalScroll","activeTabElement","activeTabOffsetLeft","activeTabOffsetWidth","newLeft","left","getAttribute","scrollId","path","remainingPath","isStopped","scrollSnapType","startAt","animate","currentPath","animateHorizontalScroll","description","fromAddress","encryptedComment","isIncoming","metadata","amountHuman","isLocal","isScam","iconFullClass","amountFullClass","scamImg","_global$tokenInfo","isNewWallet","txIdsBySlug","byTxId","tokensBySlug","areTinyTransfersHidden","fetchTokenTransactions","fetchAllTransactions","showTransactionInfo","txIds","idList","_bySlug$slug","_bySlug$TON_TOKEN_SLU","lastTonTxId","findLast","flat","compareTransactions","allTransactions","currentDateGroup","groupedTransactions","nextTransaction","nextTransactionDayStartsAt","loadMore","limit","handleIntersection","loadingObserver","hasIntersection","setHasIntersection","isIntersecting","useInfiniteLoader","handleTransactionClick","transactionGroups","NewWalletGreeting","group","groupIdx","Transaction","prevText","shouldAnimate","characters","_prevText$length","elements","textLength","prevTextLength","charIndex","prevTextCharIndex","_text$charIndex","_text$charIndex2","_text$charIndex3","generateCharacters","timeoutId","dir","stakingStatus","isInvestorView","renderedAmount","withApy","shouldRenderApy","renderApyClassNames","renderApy","renderChangeIcon","AnimatedCounter","canRenderApy","renderDefaultView","isInvestorViewEnabled","onTokenClick","onStakedTokenClick","shouldShowGreeting","shouldRenderStakedToken","stakedTokenClassNames","Token","loadedUrls","imageClassName","markIsLoaded","referrerPolicy","orderedAddresses","byAddress","nfts","getgemsBaseUrl","collectionAddress","isOnSale","thumbnail","collectionName","_tokens$length","tokenCount","selectToken","shouldShowSeparateAssetsPanel","handleSwitchTab","handleClickAssets","Activity","Assets","Nfts","TabList","getThemeColorMetaElement","isLight","metaThemeColor","getElementsByTagName","onOpenBackupWallet","currentTheme","lightColor","darkColor","metaElementLight","metaElementDark","lightContent","darkContent","useBrowserUiColor","isSecurityWarningHidden","closeSecurityWarning","isBackupRequired","BackupWarning","isStakingActive","openBackupWalletModal","isStakingInfoOpened","openStakingInfo","closeStakingInfo","handleTokenCardClose","handleEarnClick","Warnings","Card","PortraitActions","LandscapeActions","StakeModal","StakingInfoModal","UnstakingModal","WORKCHAIN","Workchain","BaseChain","TRANSFER_TIMEOUT_SEC","connector","callApi","fnName","logDebugError","loginResolve","StorageType","IndexedDb","idb","LocalStorage","ExtensionLocal","extensionStorage","configurationMainnet","Configuration","basePath","configurationTestnet","BlockchainApi","NFTApi","AccountsApi","TOKEN_TRANSFER_TON_AMOUNT","TOKEN_TRANSFER_TON_FORWARD_AMOUNT","Cell","Address","JettonMinter","JettonWallet","jetton","tonwebByNetwork","mainnet","CustomHttpProvider","apiKey","testnet","getTonWeb","toBase64Address","isBounceable","getWalletInfo","walletOrAddress","getAddress","account_state","wallet","isWallet","seqno","provider","isInitialized","withCacheAsync","minterAddress","minter","getJettonWalletAddress","tokenWalletAddress","tokenWallet","jettonMinterAddress","publicKeyHex","call2","hex","hexToBytes","require","axios","adapter","TonClient","endpoint","WalletContractV1R1","WalletContractV1R2","WalletContractV1R3","WalletContractV2R1","WalletContractV2R2","WalletContractV3R1","WalletContractV3R2","WalletContractV4","DnsCollection","knownTokens","addKnownTokens","fromNano","toNano","stakingState","headers","searchParams","statusText","handleFetchErrors","callBackendGet","poolPart","isKnownStakingPool","poolAddress","ApiBaseError","displayError","super","captureStackTrace","ApiUserRejectsError","IS_BOUNCEABLE","transport","tonTransport","connectLedger","device","TransportWebHID","opened","connectHID","TonTransport","checkTonApp","_tonTransport","isAppOpen","getLedgerAccountPathByIndex","signLedgerTransactions","messages","all","getLedgerAccountPath","preparedOptions","ledgerPayload","isValidLedgerComment","queryId","responseDestination","customPayload","forwardAmount","forwardPayload","fromBase64","jettonAmount","sendMode","SendMode","PAY_GAS_SEPARATELY","IGNORE_ERRORS","getTransferExpirationTime","bounce","signedMessages","attempts","attempt","_message$payload","signTransaction","toBoc","statusCode","StatusCodes","CONDITIONS_OF_USE_NOT_SATISFIED","getLedgerWalletInfo","accountIndex","_deviceModel","_deviceModel2","publicKey","getLedgerWalletAddress","chain","bounceable","getWalletBalance","version","driver","deviceId","deviceModel","deviceName","productName","ledger","INITIAL_STATE","appState","Auth","canPlaySounds","USER_AGENT_LANG_CODE","dapps","areTokensWithNoPriceHidden","notifications","stateVersion","areDeepEqual","value1","value2","type1","isArray1","array1","array2","every","member1","object1","object2","key1","isPartialDeepEqual","newPartial","updateAuth","authUpdate","updateAccounts","createAccount","partial","_partial","updateAccount","newAccountsById","fromKeyValueArrays","updateSendingLoading","updateCurrentAccountState","updateAccountState","updateCurrentAccountsState","withDeepCompare","updateHardware","hardwareUpdate","updateSettings","settingsUpdate","updateCurrentTransfer","clearCurrentTransfer","updateCurrentSignature","currentSignature","updateTransactionsIsLoading","updateStaking","updatePoolState","currentPoolState","updateDappConnectRequest","clearDappConnectRequest","updateCurrentDappTransfer","clearCurrentDappTransfer","updateConnectedDapps","_update$dapps","updateTransaction","newestTx","tokenTxIds","selectMnemonicForCheck","rnd","Main","cloneDeep","createHardwareAccounts","afterSignIn","isFirstAccount","wallets","importLedgerWallet","updatedGlobal","walletInfo","areSettingsOpen","closeSettings","newNetwork","newestTxIds","changeNetwork","race","PAUSE","accountIndexes","getFirstLedgerWallets","SLIDES","setIsBackupRequired","confirm","setCheckIndexes","setIsLoading","setError","mnemonicRef","handleSafetyConfirm","check","handleBackupErrorUpdate","handleCheckMnemonic","handleCheckMnemonicSubmit","isMnemonicChecked","dataHex","isSigned","submitSignature","clearSignatureError","cancelSignature","complete","handleConfirm","transferStyles","_accountState$transac","currentTransactionId","startOfCycle","startOfStakingCycle","_transaction$metadata","_transaction$metadata2","closeTransactionInfo","renderedTransaction","setIsModalOpen","transactionHash","decryptedComment","setDecryptedComment","isPasswordModalOpen","openPasswordModal","closePasswordModal","passwordError","setPasswordError","tonscanTransactionUrl","withUnstakeTimer","shouldRenderUnstakeTimer","unstakeTimerClassNames","handleCloseModal","handleSendClick","handleStartStakingClick","handlePasswordUpdate","renderHeader","TransactionAmount","renderFee","renderComment","onDismiss","setIsOpen","timerRef","closeAndDismiss","handleMouseEnter","dismissNotification","Notification","hasManyAccounts","accountStates","onLogOut","signOut","isLogOutFromAllAccounts","setIsLogOutFromAllAccounts","accountsWithoutBackups","_accountStates$id","handleLogOut","isFromAllAccounts","shouldRenderWarningForAnotherAccounts","shouldRenderWarningForCurrentAccount","links","idx","onCheck","ANIMATION_LEVEL_OPTIONS","switchAnimationLevel","level","levelClassName","currentLevel","prefersDark","switchTheme","setThemeValue","_document$querySelect","getComputedStyle","getPropertyValue","setThemeColor","setTheme","setAnimationLevel","toggleCanPlaySounds","THEME_OPTIONS","lightThemeImg","systemThemeImg","darkThemeImg","handleThemeChange","newTheme","handleAnimationLevelToggle","handleCanPlaySoundToggle","isEnabled","blockTitle","settingsBlock","themeWrapper","theme_active","themeIcon","themeIcon_active","themeImg","item_small","Switcher","menuSwitcher","deleteToken","handleDeleteToken","ZERO_POINT","DEFAULT_OFFSET","top","bottom","right","onDrag","onDragEnd","externalStyle","knobStyle","parentRef","buttonRef","translation","handleTouchStart","_ref$current3","_ref$current4","getClientCoordinate","parentRect","draggableRect","minX","maxX","minY","offsetTop","maxY","handleMouseUp","dragButtonRef","cssStyles","_ref$current2","clientY","SearchState","_global$settings$impo","importToken","resetImportToken","searchValue","setSearchValue","setStyle","Popular","isImportingRef","componentWidth","componentHeight","isTop","filteredTokenList","_tokens$filter","isName","isSymbol","isKeyword","handleTokenClick","selectedToken","popularTokenList","addTokenItem","addTokenIcon","addTokenText","addTokenSymbol","addTokenPrice","addTokenIcon_loading","addTokenSymbol_loading","addTokenPrice_loading","addTokenIcon_empty","emptyIcon","addTokenSymbol_gray","addTokenPrice_gray","isSingle","addTokenContentWrapper","addTokenContent","addTokenContent_single","addTokenDialog","addTokenBlock","addTokenSearch","addTokenSearch_bordered","addTokenInputWrapper","addTokenInput","addTokenTransition","getOrderIndex","realIndex","popularTokens","isSortByValueEnabled","sortTokens","toggleDisabledToken","addToken","tokensRef","sortableContainerRef","isAddTokenModalOpen","openAddTokenModal","closeAddTokenModal","tokenToDelete","setTokenToDelete","orderedTokenSlugs","dragOrderTokenSlugs","draggedIndex","sortableContainerPosition","setSortableContainerPosition","arr1","arr2","arraysAreEqual","handleOpenAddTokenModal","_state$orderedTokenSl","_state$orderedTokenSl2","_state$orderedTokenSl3","_orderedSlugs$length","delta","dragOrderTokens","isBetween","num","handleDragEnd","handleDisabledToken","handleTokenSelect","contentRelative","sortableContainer","iconChevronRight","isTON","isDragged","draggedTop","isDeleteButtonVisible","isDragDisabled","Draggable","item_token","tokenIcon","tokenTitle","tokenDescription","deleteText","SelectTokens","DeleteTokenModal","CURRENCY_OPTIONS","areTokensWithNoBalanceHidden","toggleTinyTransfersHidden","toggleInvestorView","toggleTokensWithNoBalance","toggleTokensWithNoPrice","toggleSortByValue","isInvestorHelpTooltipOpen","openInvestorHelpTooltip","closeInvestorHelpTooltip","isTinyTransfersHelpTooltipOpen","openTinyTransfersHelpTooltip","closeTinyTransfersHelpTooltip","handleTinyTransfersHiddenToggle","handleInvestorViewToggle","handleTokensWithNoBalanceToggle","handleTokensWithNoPriceToggle","handleSortByValueToggle","blockWithTooltip","Tooltip","tooltip","iconQuestion","tooltip_wide","SettingsTokens","deleteAllDapps","deleteDapp","handleDeleteAllDapps","handleDeleteDapp","isDisconnectModalOpen","openDisconnectModal","closeDisconnectModal","dappToDelete","setDappToDelete","handleDisconnectDapp","handleDisconnectAll","renderDapp","emptyList","emptyListTitle","dappList","disconnectAllBlock","disconnectButton","blockDescription","block","renderDapps","DisconnectDappModal","NETWORK_OPTIONS","startChangingNetwork","handleNetworkChange","developerTitle","developerCloseButton","changeLanguage","handleLanguageChange","newLangCode","languageHeader","lc","item_lang","languageInfo","languageMain","languageNative","checkmarkImg","isTonMagicEnabled","isTonProxyEnabled","isDeeplinkHookEnabled","toggleDeeplinkHook","toggleTonProxy","toggleTonMagic","getDapps","initTokensOrder","clicksAmount","setClicksAmount","isDeveloperModalOpen","openDeveloperModal","closeDeveloperModal","isLogOutModalOpened","openLogOutModal","closeLogOutModal","activeLang","telegramLinkClassNames","isTelegramLinkRendered","handleConnectedDappsOpen","Dapps","handleAppearanceOpen","Appearance","handleAssetsOpen","handleLanguageOpen","Language","handleAboutOpen","About","handleDeeplinkHookToggle","handleTonProxyToggle","handleTonMagicToggle","handleOpenBackupWallet","handleCloseLogOutModal","handleOpenHardwareModal","handleMultipleClick","menuIcon","tonProxyImg","tonMagicImg","handleOpenTelegramWeb","telegramImg","tonLinksImg","appearanceImg","assetsActivityImg","IS_DAPP_SUPPORTED","connectedDappsImg","itemInfo","languageImg","backupSecretImg","ledgerImg","aboutImg","item_red","exitImg","SettingsDeveloperOptions","SettingsAppearance","SettingsAssets","SettingsDapps","SettingsLanguage","LogOutModal","modalContent","promiseId","toAddressName","submitTransferConfirm","submitTransferPassword","submitTransferHardware","setTransferScreen","clearTransferError","cancelTransfer","renderedTransactionAmount","handleTransactionInfoClick","handleTransactionRepeatClick","renderConfirm","Complete","mainKey","isBackupWalletModalOpen","isHardwareModalOpen","closeBackupWalletModal","closeHardwareWalletModal","cancelCaching","areSettingsInModal","isInactive","markInactive","canPrerenderMain","prerenderMain","Inactive","Settings","Ledger","LedgerModal","handleCloseBrowserTab","AppInactive","IS_LINUX","ElectronHeader","SettingsModal","BackupModal","TransferModal","SignatureModal","TransactionModal","DappConnectModal","DappTransactionModal","Notifications","Dialogs","getCurrent","getPlatform","userAgent","platform","os","IS_CHROME_EXTENSION","initArgs","createConnector","Worker","initApi","apiUpdate","DEEPLINK_TONCONNECT","deviceInfo","appVersion","maxProtocolVersion","features","maxMessages","ApiTransactionDraftError","InsufficientBalance","showDialog","showError","rawPayload","parsedPayload","stateInit","Builder","storeUint","storeStringTail","endCell","buildLedgerTokenTransfer","submitLedgerTransfer","offsetId","newTxsById","buildCollectionByKey","newOrderedTxIds","currentTxs","_selectCurrentAccount3","lastTxIds","_selectAccountState2","selectLastTxIds","_token$price","_token$change24h","_token$change7d","_token$change30d","_token$history24h","_token$history7d","_token$history30d","_accountSettings$orde","apiToken","baseToken","pendingDepositAmount","clearStaking","signature","domain","getAddressProof","Buffer","signLedgerProof","clearConnectedDapps","removeConnectedDapp","updateBalance","backendStakingState","currentTokens","updateTokens","_nfts$orderedAddresse2","_nfts$byAddress","removedNft","removeNft","_nfts$orderedAddresse","addNft","updateNft","sound","Audio","initializeSoundsForSafari","muted","volume","currentTime","playIncomingTransactionSound","fetchStakingState","shouldPlaySound","wasStakingTransaction","updateTransactionsIsLoadingByAccount","localTxId","removedTransaction","removeTransaction","clearCurrentSignature","isAddressRequired","selectIsHardwareAccount","IS_SAFARI","setScrollbarWidthProperty","setPageSafeAreaProperty","afterInit","langCachePrefix","langCacheVersion","clearPreviousLangpacks","once","newDialogs","existingMessageIndex","InvalidAmount","InvalidToAddress","DomainNotResolved","WalletNotInitialized","ApiTransactionError","PartialTransactionFailure","IncorrectDeviceTime","UnsuccesfulTransfer","UnsupportedHardwarePayload","Unexpected","newNotifications","existingNotificationIndex","accountIds","afterSignOut","prevAccountId","nextAccountId","nextNewestTxIds","prevAccountIds","omit","startConnection","popup","onRemoved","closedTabId","onLedgerTabClose","_ref10","_ref11","enabledSlugs","updatedEnabledSlugs","updateDisabledSlugs","_ref12","_selectAccountSetting2","_ref13","_selectAccountSetting3","accountToken","getTotalValue","_ref14","updatedSlugs","_ref15","_selectAccountSetting4","accountTokens","newSlugs","_ref16","_selectAccountSetting5","newDisabledSlugs","selectDisabledSlugs","_ref17","_ref18","_selectAccountSetting6","enabledSlugsCopy","disabledSlugsCopy","slugIndexInAvailable","slugIndexInDisabled","_ref19","_selectAccountSetting7","_accountSettings$enab","deleted","bySlugCopy","TXS_LIMIT","updateCacheThrottled","onIdle","updateCache","unsubscribeFromBeforeUnload","isCaching","loadCache","initialState","timeEnd","_cached$tokenInfo","addresses","backupWallet","_accountState$balance","oldId","newId","testnetAccountId","migrateCache","readCache","clearCaching","isImmediate","reducedGlobal","reduceByAccountId","reducedTxIdsBySlug","onBeforeUnload","removeItem","initLedgerPage","App","phase","setPhase","newPhase","pendingMeasureTasks","pendingMutationTasks","pendingForceReflowTasks","currentMeasureTasks","task","currentMutationTasks","pendingForceReflowMutationTasks","mutationTask","throttledFn","ConnectorClass","channel","targetOrigin","destroy","postMessage","messageData","requestStates","requestStatesByCallback","messageId","requestState","withCallback","finally","cancelCallback","progressCallback","onMessage","_requestState$callbac","callbackArgs","_data$error","worker","handleMessage","tick","schedulerFn","handleErrorEvent","ErrorEvent","reason","alert","collection","byKey","member","newByKey","object","stringKeys","orderRule","compareValues","currentOrderRule","isAsc","aValue","bValue","mode1","mode2","orderRule1","orderRule2","isAsc1","isAsc2","array","predicate","start","end","arr","SAFE_EXEC_ENABLED","rescue","always","waitingTimeout","shouldRunFirst","shouldRunLast","isPending","_len2","_args","_key2","onTickEnd","waiting","_len3","_key3","requestIdleCallback","FAST_RAF_TIMEOUT_FALLBACK_MS","fastRafCallbacks","fastRafFallbackCallbacks","fastRafFallbackTimeout","onTickEndCallbacks","beforeUnloadCallbacks","withTimeoutFallback","currentCallbacks","currentTimeoutCallbacks","isLast","SAFE_AREA_INITIALIZATION_DELAY","PLATFORM_ENV","maxTouchPoints","_window$chrome","IS_FIREFOX_EXTENSION","language","getBrowserLanguage","DPR","devicePixelRatio","safeAreaBottom","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","loaded","__webpack_modules__","m","O","chunkIds","priority","notFulfilled","Infinity","fulfilled","getter","__esModule","definition","o","defineProperty","enumerable","f","chunkId","promises","u","miniCssF","g","globalThis","Function","done","script","needAttach","scripts","charset","nc","onScriptComplete","onerror","doneFns","bind","head","toStringTag","nmd","paths","scriptUrl","importScripts","currentScript","baseURI","installedChunks","installedChunkData","errorType","realSrc","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}