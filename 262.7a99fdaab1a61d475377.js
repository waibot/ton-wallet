"use strict";(self.webpackChunkmytonwallet=self.webpackChunkmytonwallet||[]).push([[262],{45262:(t,i,e)=>{e.r(i),e.d(i,{default:()=>C});var s=e(9933);function r(t,i){return i-Math.floor(i/t)*t}var a=e(69995),n=e(83716),o=e(74095);const h=Math.min(navigator.hardwareConcurrency||4,4);let d;var m=e(97184),l=e(17980);function c(t,i,e){return(i=function(t){var i=function(t,i){if("object"!=typeof t||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var s=e.call(t,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof i?i:String(i)}(i))in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}const u=Symbol("WAITING"),g=m.wZ||m.cj?.75:1,p=m.wZ?.5:.75,v=24,f=m.s$?2:4,x=(n.Cg?[]:(d||(d=new Array(h).fill(void 0).map((()=>{const t=new Worker(new URL(e.p+e.u(60),e.b));return{worker:t,connector:(0,o.K)(t)}}))),d)).map((t=>{let{connector:i}=t;return i})),w=new Map;let y=-1;class F{static init(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];const[,s,r,n,o=(0,a.Z)(),,h]=i;let d=w.get(r);return d?d.addView(o,s,h,null==n?void 0:n.coords):(d=new F(...i),w.set(r,d)),d}constructor(t,i,e,s){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:(0,a.Z)(),n=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0,h=arguments.length>7?arguments[7]:void 0,d=arguments.length>8?arguments[8]:void 0;this.tgsUrl=t,this.container=i,this.renderId=e,this.params=s,this.customColor=n,this.onLoad=o,this.onEnded=h,this.onLoop=d,c(this,"views",new Map),c(this,"imgSize",void 0),c(this,"imageData",void 0),c(this,"msPerFrame",1e3/60),c(this,"reduceFactor",1),c(this,"cacheModulo",void 0),c(this,"workerIndex",void 0),c(this,"frames",[]),c(this,"framesCount",void 0),c(this,"isAnimating",!1),c(this,"isWaiting",!0),c(this,"isEnded",!1),c(this,"isDestroyed",!1),c(this,"isRendererInited",!1),c(this,"approxFrameIndex",0),c(this,"prevFrameIndex",-1),c(this,"stopFrameIndex",0),c(this,"speed",1),c(this,"direction",1),c(this,"lastRenderAt",void 0),this.addView(r,i,o,s.coords),this.initConfig(),this.initRenderer()}removeView(t){const{canvas:i,ctx:e,isSharedCanvas:s,coords:r}=this.views.get(t);s?e.clearRect(r.x,r.y,this.imgSize,this.imgSize):i.remove(),this.views.delete(t),this.views.size||this.destroy()}isPlaying(){return this.isAnimating||this.isWaiting}play(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1?arguments[1]:void 0;i&&(this.views.get(i).isPaused=!1),this.isEnded&&t&&(this.approxFrameIndex=Math.floor(0)),this.stopFrameIndex=void 0,this.direction=1,this.doPlay()}pause(t){t&&(this.views.get(t).isPaused=!0,!Array.from(this.views.values()).every((t=>{let{isPaused:i}=t;return i})))||(this.isWaiting?this.stopFrameIndex=this.approxFrameIndex:this.isAnimating=!1,this.params.isLowPriority||(this.frames=this.frames.map(((t,i)=>i===this.prevFrameIndex?t:void(t&&t!==u&&t.close())))))}playSegment(t){let[i,e]=t,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0;r&&(this.views.get(r).isPaused=!1);const a=Math.round(this.approxFrameIndex);this.stopFrameIndex=Math.floor(e/this.reduceFactor),(a!==e||s)&&(this.approxFrameIndex=Math.floor(i/this.reduceFactor)),this.direction=i<e?1:-1,this.doPlay()}setSpeed(t){this.speed=t}setNoLoop(t){this.params.noLoop=t}setSharedCanvasCoords(t,i){const e=this.views.get(t),{canvas:s,ctx:r}=e;let[a,n]=[s.width,s.height];if(!s.dataset.isJustCleaned||"false"===s.dataset.isJustCleaned){const t=this.calcSizeFactor();[a,n]=I(s,t),r.clearRect(0,0,a,n),s.dataset.isJustCleaned="true",(0,l.i$)((()=>{s.dataset.isJustCleaned="false"}))}e.coords={x:Math.round(((null==i?void 0:i.x)||0)*a),y:Math.round(((null==i?void 0:i.y)||0)*n)};const o=this.getFrame(this.prevFrameIndex)||this.getFrame(Math.round(this.approxFrameIndex));o&&o!==u&&r.drawImage(o,e.coords.x,e.coords.y)}addView(t,i,e,s){const r=this.calcSizeFactor();let a;if(i instanceof HTMLDivElement){if(!(i.parentNode instanceof HTMLElement))throw new Error("[RLottie] Container is not mounted");const{size:s}=this.params;a=Math.round(s*r),this.imgSize||(this.imgSize=a,this.imageData=new ImageData(a,a)),(0,l.WM)((()=>{const r=document.createElement("canvas"),n=r.getContext("2d");r.style.width=`${s}px`,r.style.height=`${s}px`,r.width=a,r.height=a,i.appendChild(r),this.views.set(t,{canvas:r,ctx:n,onLoad:e})}))}else{if(!i.isConnected)throw new Error("[RLottie] Shared canvas is not mounted");const n=i,o=n.getContext("2d");a=Math.round(this.params.size*r),this.imgSize||(this.imgSize=a,this.imageData=new ImageData(a,a));const[h,d]=I(n,r);this.views.set(t,{canvas:n,ctx:o,isSharedCanvas:!0,coords:{x:Math.round(s.x*h),y:Math.round(s.y*d)},onLoad:e})}this.isRendererInited&&this.doPlay()}calcSizeFactor(){const{size:t,isLowPriority:i,quality:e=(i&&(!t||t>v)?p:g)}=this.params;return Math.max(m.cL*e,1)}destroy(){this.isDestroyed=!0,this.pause(),this.clearCache(),this.destroyRenderer(),w.delete(this.renderId)}clearCache(){this.frames.forEach((t=>{t&&t!==u&&t.close()})),this.imageData=void 0,this.frames=[]}initConfig(){const{isLowPriority:t}=this.params;this.cacheModulo=t?0:f}setColor(t){this.customColor=t}initRenderer(){this.workerIndex=r(h,++y),x[this.workerIndex].request({name:"rlottie:init",args:[this.renderId,this.tgsUrl,this.imgSize,this.params.isLowPriority||!1,this.customColor,this.onRendererInit.bind(this)]})}destroyRenderer(){x[this.workerIndex].request({name:"rlottie:destroy",args:[this.renderId]})}onRendererInit(t,i,e){this.isRendererInited=!0,this.reduceFactor=t,this.msPerFrame=i,this.framesCount=e,this.isWaiting&&this.doPlay()}changeData(t){this.pause(),this.tgsUrl=t,this.initConfig(),x[this.workerIndex].request({name:"rlottie:changeData",args:[this.renderId,this.tgsUrl,this.params.isLowPriority||!1,this.onChangeData.bind(this)]})}onChangeData(t,i,e){this.reduceFactor=t,this.msPerFrame=i,this.framesCount=e,this.isWaiting=!1,this.isAnimating=!1,this.doPlay()}doPlay(){this.framesCount&&(this.isDestroyed||this.isAnimating||(this.isWaiting||(this.lastRenderAt=void 0),this.isEnded=!1,this.isAnimating=!0,this.isWaiting=!1,(0,s.jt)((()=>{if(this.isDestroyed)return!1;if(!this.isAnimating&&Array.from(this.views.values()).every((t=>{let{isLoaded:i}=t;return i})))return!1;const t=Math.round(this.approxFrameIndex),i=this.getFrame(t);if(!i||i===u)return i||this.requestFrame(t),this.isAnimating=!1,this.isWaiting=!0,!1;this.cacheModulo&&t%this.cacheModulo==0&&this.cleanupPrevFrame(t),t!==this.prevFrameIndex&&(this.views.forEach((t=>{const{ctx:e,isLoaded:s,isPaused:r,coords:{x:a,y:n}={},onLoad:o}=t;s&&r||(e.clearRect(a||0,n||0,this.imgSize,this.imgSize),e.drawImage(i,a||0,n||0)),s||(t.isLoaded=!0,null==o||o())})),this.prevFrameIndex=t);const e=Date.now(),s=this.lastRenderAt?this.msPerFrame/(e-this.lastRenderAt):1,r=Math.min(1,this.direction*this.speed/s),a=Math.round(this.approxFrameIndex+r);if(this.lastRenderAt=e,r>0&&(t===this.framesCount-1||a>this.framesCount-1)){var n,o;if(this.params.noLoop)return this.isAnimating=!1,this.isEnded=!0,null===(o=this.onEnded)||void 0===o||o.call(this),!1;null===(n=this.onLoop)||void 0===n||n.call(this),this.approxFrameIndex=0}else if(r<0&&(0===t||a<0)){var h,d;if(this.params.noLoop)return this.isAnimating=!1,this.isEnded=!0,null===(d=this.onEnded)||void 0===d||d.call(this),!1;null===(h=this.onLoop)||void 0===h||h.call(this),this.approxFrameIndex=this.framesCount-1}else{if(void 0!==this.stopFrameIndex&&(t===this.stopFrameIndex||r>0&&a>this.stopFrameIndex||r<0&&a<this.stopFrameIndex))return this.stopFrameIndex=void 0,this.isAnimating=!1,!1;this.approxFrameIndex+=r}const m=Math.round(this.approxFrameIndex);return!!this.getFrame(m)||(this.requestFrame(m),this.isWaiting=!0,this.isAnimating=!1,!1)}),l.WM)))}getFrame(t){return this.frames[t]}requestFrame(t){this.frames[t]=u,x[this.workerIndex].request({name:"rlottie:renderFrames",args:[this.renderId,t,this.onFrameLoad.bind(this)]})}cleanupPrevFrame(t){if(this.framesCount<3)return;const i=r(this.framesCount,t-1);this.frames[i]=void 0}onFrameLoad(t,i){this.frames[t]===u&&(this.frames[t]=i,this.isWaiting&&this.doPlay())}}function I(t,i){const e=Math.round(t.offsetWidth*i),s=Math.round(t.offsetHeight*i);return t.width===e&&t.height===s||(0,l.WM)((()=>{t.width=e,t.height=s})),[e,s]}const C=F}}]);
//# sourceMappingURL=262.7a99fdaab1a61d475377.js.map